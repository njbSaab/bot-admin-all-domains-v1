import{$ as he,$a as re,A as M,Aa as zt,B as G,Ba as Ne,C as kt,Ca as le,D as Ae,Da as Lt,E as W,Ea as Wt,F as l,Fa as lt,G as k,Ga as Ve,H as Bt,Ha as $,I as f,J as Oe,K as d,L as U,La as je,M as i,N as r,O as _,Oa as Ut,P as se,Pa as Ot,Q as ue,Qa as Ze,R as S,Ra as I,S as h,Sa as Be,T as u,Ta as Y,U as it,Ua as q,V as nt,W as ze,X as rt,Xa as Q,Y as It,Z as Dt,Za as st,_ as Ft,_a as Nt,a as T,aa as Ke,ab as Z,b as V,ba as s,bb as ee,c as be,ca as w,cb as jt,d as Et,da as b,db as Ht,e as yt,ea as Se,eb as ut,f as Le,fa as at,fb as $t,g as xe,ga as x,h as we,ha as v,i as R,ia as C,j as St,ja as oe,k as Mt,ka as ie,l as O,la as Fe,m as Tt,ma as P,n as Je,na as Ee,o as L,oa as j,p as We,pa as ot,q as N,qa as fe,r as B,ra as ce,s as Ue,t as ke,u as ve,ua as ne,v as et,va as H,w as tt,wa as A,x as c,xa as Vt,y as g,ya as Pt,z as y,za as At}from"./chunk-D2G6HKXE.js";var cn=(a,m)=>({"text-white bg-indigo-600":a,"text-gray-500 bg-white":m}),Ie=()=>({exact:!0}),de=(()=>{class a{isSidebarOpen=!1;currentSidebarTab=null;closeTimeout=null;openSidebar(e){this.isSidebarOpen=!0,this.currentSidebarTab=e,this.clearCloseTimeout()}startCloseTimeout(){this.clearCloseTimeout(),this.closeTimeout=setTimeout(()=>{this.isSidebarOpen=!1,this.currentSidebarTab=null},1e3)}clearCloseTimeout(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=B({type:a,selectors:[["app-sidebar"]],decls:127,vars:26,consts:[[1,"flex","flex-shrink-0","transition-all","h-full","fixed","inset-y-0","z-10","sidebar"],[1,"sidebar-button","inset-y-0","z-100","w-16","bg-white","border-r-2","relative"],["data-tip","Open Sidenav",1,"tooltip","tooltip-right","tooltip-primary","menu-button","p-2","transition-colors","rounded-lg","shadow-md","hover:bg-primary","hover:text-white","focus:outline-none","focus:ring","focus:ring-indigo-600","focus:ring-offset-white","focus:ring-offset-2",3,"mouseenter","ngClass"],[1,"sr-only"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h7"],["data-tip","Edit TG Bot",1,"tooltip","tooltip-right","tooltip-primary"],["routerLink","/admin","routerLinkActive","bg-indigo-600 text-white",1,"menu-button","p-2","transition-colors","rounded-lg","shadow-md","hover:bg-primary","hover:text-white","focus:outline-none","focus:ring","focus:ring-indigo-600","focus:ring-offset-white","focus:ring-offset-2",3,"routerLinkActiveOptions"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","viewBox","0 0 24 24",1,"w-6","h-6"],["fill","currentColor","d","M3 10h11v2H3zm0-2h11V6H3zm0 8h7v-2H3zm15.01-3.13l.71-.71a.996.996 0 0 1 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71l-5.3 5.3V21h2.12l5.3-5.3z"],["data-tip","Send TG notification",1,"tooltip","tooltip-right","tooltip-primary"],["routerLink","/admin/push","routerLinkActive","bg-indigo-600 text-white",1,"menu-button","p-2","transition-colors","rounded-lg","shadow-md","hover:bg-primary","hover:text-white","focus:outline-none","focus:ring","focus:ring-indigo-600","focus:ring-offset-white","focus:ring-offset-2"],["_ngcontent-ng-c869363523","","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24",1,"w-6","h-6"],["_ngcontent-ng-c869363523","","fill","currentColor","d","M11 14h2v-3h3V9h-3V6h-2v3H8v2h3zm-9 8V4q0-.825.588-1.412T4 2h16q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18H6z"],["data-tip","Send Email",1,"tooltip","tooltip-right","tooltip-primary"],["routerLink","/admin/email-sent","routerLinkActive","bg-indigo-600 text-white",1,"menu-button","p-2","transition-colors","rounded-lg","shadow-md","hover:bg-primary","hover:text-white","focus:outline-none","focus:ring","focus:ring-indigo-600","focus:ring-offset-white","focus:ring-offset-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24",1,"w-6","h-6"],["fill","currentColor","d","M12 19a6.995 6.995 0 0 1 10-6.32V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h8.08c-.05-.33-.08-.66-.08-1M4 6l8 5l8-5v2l-8 5l-8-5zm13.34 16l-3.54-3.54l1.41-1.41l2.12 2.12l4.24-4.24L23 16.34z"],["data-tip","TG Users",1,"tooltip","tooltip-right","tooltip-primary"],["routerLink","/admin/users","routerLinkActive","bg-indigo-600 text-white",1,"menu-button","p-2","transition-colors","rounded-lg","shadow-md","hover:bg-primary","hover:text-white","focus:outline-none","focus:ring","focus:ring-indigo-600","focus:ring-offset-white","focus:ring-offset-2"],["fill","currentColor","d","M12 6c1.1 0 2 .9 2 2s-.9 2-2 2s-2-.9-2-2s.9-2 2-2m0 10c2.7 0 5.8 1.29 6 2H6c.23-.72 3.31-2 6-2m0-12C9.79 4 8 5.79 8 8s1.79 4 4 4s4-1.79 4-4s-1.79-4-4-4m0 10c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"],["data-tip","Site Users",1,"tooltip","tooltip-right","tooltip-primary"],["routerLink","/admin/site-users","routerLinkActive","bg-indigo-600 text-white",1,"menu-button","p-2","transition-colors","rounded-lg","shadow-md","hover:bg-primary","hover:text-white","focus:outline-none","focus:ring","focus:ring-indigo-600","focus:ring-offset-white","focus:ring-offset-2"],["fill","currentColor","d","M0 18v-1.575q0-1.075 1.1-1.75T4 14q.325 0 .625.013t.575.062q-.35.525-.525 1.1t-.175 1.2V18zm6 0v-1.625q0-.8.438-1.463t1.237-1.162T9.588 13T12 12.75q1.325 0 2.438.25t1.912.75t1.225 1.163t.425 1.462V18zm13.5 0v-1.625q0-.65-.162-1.225t-.488-1.075q.275-.05.563-.062T20 14q1.8 0 2.9.663t1.1 1.762V18zM4 13q-.825 0-1.412-.587T2 11q0-.85.588-1.425T4 9q.85 0 1.425.575T6 11q0 .825-.575 1.413T4 13m16 0q-.825 0-1.412-.587T18 11q0-.85.588-1.425T20 9q.85 0 1.425.575T22 11q0 .825-.575 1.413T20 13m-8-1q-1.25 0-2.125-.875T9 9q0-1.275.875-2.137T12 6q1.275 0 2.138.863T15 9q0 1.25-.862 2.125T12 12"],["data-tip","Images",1,"tooltip","tooltip-right","tooltip-primary"],["routerLink","/admin/images","routerLinkActive","bg-indigo-600 text-white",1,"menu-button","p-2","transition-colors","rounded-lg","shadow-md","hover:bg-primary","hover:text-white","focus:outline-none","focus:ring","focus:ring-indigo-600","focus:ring-offset-white","focus:ring-offset-2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["stroke-dasharray","72","stroke-dashoffset","72","d","M3 14v-9h18v14h-18v-5"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.6s","values","72;0"],["stroke-dasharray","24","stroke-dashoffset","24","stroke-width","1","d","M3 16l4 -3l3 2l6 -5l5 4"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.6s","dur","0.4s","values","24;0"],["fill","currentColor","fill-opacity","0"],["cx","7.5","cy","9.5","r","1.5"],["fill","freeze","attributeName","fill-opacity","begin","1s","dur","0.2s","values","0;1"],["d","M3 16l4 -3l3 2l6 -5l5 4V19H3Z"],["fill","freeze","attributeName","fill-opacity","begin","1.3s","dur","0.15s","values","0;0.3"],["data-tip","Event Sites",1,"tooltip","tooltip-right","tooltip-primary"],["routerLink","/admin/events","routerLinkActive","bg-indigo-600 text-white",1,"menu-button","p-2","transition-colors","rounded-lg","shadow-md","hover:bg-primary","hover:text-white","focus:outline-none","focus:ring","focus:ring-indigo-600","focus:ring-offset-white","focus:ring-offset-2"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 2048 2048",1,"w-6","h-6"],["fill","currentColor","d","M1024 0q141 0 272 36t245 103t207 160t160 208t103 245t37 272q0 141-36 272t-103 245t-160 207t-208 160t-245 103t-272 37q-141 0-272-36t-245-103t-207-160t-160-208t-103-244t-37-273q0-141 36-272t103-245t160-207t208-160T751 37t273-37m0 1920q123 0 237-32t214-90t182-141t140-181t91-214t32-238q0-123-32-237t-90-214t-141-182t-181-140t-214-91t-238-32q-123 0-237 32t-214 90t-182 141t-140 181t-91 214t-32 238q0 123 32 237t90 214t141 182t181 140t214 91t238 32m597-880l48-144h75l-85 256h-75l-48-144l-48 144h-75l-85-256h75l48 144l48-144h74zm-464-144h75l-85 256h-75l-48-144l-48 144h-75l-85-256h75l48 144l48-144h74l48 144zm-512 0h75l-85 256h-75l-48-144l-48 144h-75l-85-256h75l48 144l48-144h74l48 144z"],["data-tip","Quiz Sites",1,"tooltip","tooltip-right","tooltip-primary"],["routerLink","/admin/quiz","routerLinkActive","bg-indigo-600 text-white",1,"menu-button","p-2","transition-colors","rounded-lg","shadow-md","hover:bg-primary","hover:text-white","focus:outline-none","focus:ring","focus:ring-indigo-600","focus:ring-offset-white","focus:ring-offset-2"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24",1,"w-6","h-6"],["fill","currentColor","d","M12.779.025a11.8 11.8 0 0 0-5.338.896A11.8 11.8 0 0 0 3.058 4.11A11.93 11.93 0 0 0 .427 14.363a11.9 11.9 0 0 0 2.3 4.921a11.84 11.84 0 0 0 4.24 3.378a11.78 11.78 0 0 0 10.533-.226a.33.33 0 0 1 .331.018a9.14 9.14 0 0 0 5.197 1.545a.33.33 0 0 0 .332-.332v-4.038a.334.334 0 0 0-.276-.331a4.7 4.7 0 0 1-1.106-.319a.33.33 0 0 1-.191-.352a.3.3 0 0 1 .05-.133a11.94 11.94 0 0 0 .772-11.871a11.87 11.87 0 0 0-4.042-4.628A11.8 11.8 0 0 0 12.765.018zM4.843 11.898a7.24 7.24 0 0 1 1.205-4.005a7.2 7.2 0 0 1 3.215-2.657a7.13 7.13 0 0 1 7.815 1.558a7.24 7.24 0 0 1 1.555 7.854a7.2 7.2 0 0 1-2.643 3.234a7.15 7.15 0 0 1-9.049-.896a7.23 7.23 0 0 1-2.103-5.089z"],["data-tip","Tutorials",1,"tooltip","tooltip-right","tooltip-primary"],["routerLink","/admin/tutorials","routerLinkActive","bg-indigo-600 text-white",1,"menu-button","p-2","transition-colors","rounded-lg","shadow-md","hover:bg-primary","hover:text-white","focus:outline-none","focus:ring","focus:ring-indigo-600","focus:ring-offset-white","focus:ring-offset-2"],["fill","currentColor","d","M7.92 7.54c-.8-.34-1.14-1.33-.66-2.05C8.23 4.05 9.85 3 11.99 3c2.35 0 3.96 1.07 4.78 2.41c.7 1.15 1.11 3.3.03 4.9c-1.2 1.77-2.35 2.31-2.97 3.45c-.15.27-.24.49-.3.94c-.09.73-.69 1.3-1.43 1.3c-.87 0-1.58-.75-1.48-1.62c.06-.51.18-1.04.46-1.54c.77-1.39 2.25-2.21 3.11-3.44c.91-1.29.4-3.7-2.18-3.7c-1.17 0-1.93.61-2.4 1.34c-.35.57-1.08.75-1.69.5M14 20c0 1.1-.9 2-2 2s-2-.9-2-2s.9-2 2-2s2 .9 2 2"],["data-tip","Add",1,"tooltip","tooltip-right","tooltip-primary"],["routerLink","/admin/add-button","routerLinkActive","bg-indigo-600 text-white",1,"menu-button","p-2","transition-colors","rounded-lg","shadow-md","hover:bg-primary","hover:text-white","focus:outline-none","focus:ring","focus:ring-indigo-600","focus:ring-offset-white","focus:ring-offset-2"],["fill","currentColor","d","M19 12.998h-6v6h-2v-6H5v-2h6v-6h2v6h6z"],["routerLink","","data-tip","Exit",1,"menu-button","p-2","transition-colors","rounded-lg","shadow-md","hover:bg-primary","hover:text-white","focus:outline-none","focus:ring","focus:ring-indigo-600","focus:ring-offset-white","focus:ring-offset-2","absolute","bottom-4","left-0","tooltip","tooltip-right","tooltip-primary"],["fill","currentColor","d","M10.09 15.59L11.5 17l5-5l-5-5l-1.41 1.41L12.67 11H3v2h9.67zM19 3H5a2 2 0 0 0-2 2v4h2V5h14v14H5v-4H3v4a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"],[1,"sidebar-menu","fixed","inset-y-0","z-10","flex-shrink-0","w-64","bg-white","border-r-2","border-indigo-100","shadow-lg","left-16","sm:w-72",3,"mouseenter","mouseleave"],["aria-label","Main",1,"flex","flex-col","h-full"],[1,"relative","flex-1","px-4","space-y-2","overflow-hidden","hover:overflow-auto","pt-[62px]","flex","flex-col","gap-[11px]","cursor-pointer"],[1,"text-3xl","font-bold","text-indigo-600","absolute","top-[20px]","left-[50%]","translate-x-[-50%]"],["routerLink","/admin","routerLinkActive","bg-indigo-600 text-white",1,"nav-item","mt-0","flex","items-center","w-full","space-x-2","text-indigo-600","transition-colors","rounded-lg","group","hover:bg-primary","hover:text-white","cursor-pointer",3,"routerLinkActiveOptions"],["aria-hidden","true",1,"p-2","transition-colors","rounded-lg","group-hover:bg-primary","group-hover:text-white"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],["routerLink","/admin/push","routerLinkActive","bg-indigo-600 text-white",1,"nav-item","mt-0","flex","items-center","space-x-2","text-indigo-600","transition-colors","rounded-lg","group","hover:bg-primary","hover:text-white",3,"routerLinkActiveOptions"],["_ngcontent-ng-c869363523","","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["routerLink","/admin/email-sent","routerLinkActive","bg-indigo-600 text-white",1,"nav-item","mt-0","flex","items-center","space-x-2","text-indigo-600","transition-colors","rounded-lg","group","hover:bg-primary","hover:text-white",3,"routerLinkActiveOptions"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["routerLink","/admin/users","routerLinkActive","bg-indigo-600 text-white",1,"nav-item","mt-0","flex","items-center","space-x-2","text-indigo-600","transition-colors","rounded-lg","group","hover:bg-primary","hover:text-white",3,"routerLinkActiveOptions"],["routerLink","/admin/site-users","routerLinkActive","bg-indigo-600 text-white",1,"nav-item","mt-0","flex","items-center","space-x-2","text-indigo-600","transition-colors","rounded-lg","group","hover:bg-primary","hover:text-white",3,"routerLinkActiveOptions"],["routerLink","/admin/images","routerLinkActive","bg-indigo-600 text-white",1,"nav-item","mt-0","flex","items-center","space-x-2","text-indigo-600","transition-colors","rounded-lg","group","hover:bg-primary","hover:text-white",3,"routerLinkActiveOptions"],["routerLink","/admin/events","routerLinkActive","bg-indigo-600 text-white",1,"nav-item","mt-0","flex","items-center","space-x-2","text-indigo-600","transition-colors","rounded-lg","group","hover:bg-primary","hover:text-white",3,"routerLinkActiveOptions"],["routerLink","/admin/tutorials","routerLinkActive","bg-indigo-600 text-white",1,"nav-item","mt-0","flex","items-center","space-x-2","text-indigo-600","transition-colors","rounded-lg","group","hover:bg-primary","hover:text-white",3,"routerLinkActiveOptions"],["routerLink","/admin/add-button","routerLinkActive","bg-indigo-600 text-white",1,"nav-item","mt-0","flex","items-center","space-x-2","text-indigo-600","transition-colors","rounded-lg","group","hover:bg-primary","hover:text-white",3,"routerLinkActiveOptions"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"]],template:function(n,t){n&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),h("mouseenter",function(){return t.openSidebar("linksTab")}),i(3,"span",3),s(4,"Toggle sidebar"),r(),y(),i(5,"svg",4),_(6,"path",5),r()(),M(),i(7,"div",6)(8,"button",7),y(),i(9,"svg",8),_(10,"path",9),r()()(),M(),i(11,"div",10)(12,"button",11),y(),i(13,"svg",12),_(14,"path",13),r()()(),M(),i(15,"div",14)(16,"button",15),y(),i(17,"svg",16),_(18,"path",17),r()()(),M(),i(19,"div",18)(20,"button",19),y(),i(21,"svg",16),_(22,"path",20),r()()(),M(),i(23,"div",21)(24,"button",22),y(),i(25,"svg",16),_(26,"path",23),r()()(),M(),i(27,"div",24)(28,"button",25),y(),i(29,"svg",16)(30,"g",26)(31,"path",27),_(32,"animate",28),r(),i(33,"path",29),_(34,"animate",30),r()(),i(35,"g",31)(36,"circle",32),_(37,"animate",33),r(),i(38,"path",34),_(39,"animate",35),r()()()()(),M(),i(40,"div",36)(41,"button",37),y(),i(42,"svg",38),_(43,"path",39),r()()(),M(),i(44,"div",40)(45,"button",41),y(),i(46,"svg",42),_(47,"path",43),r()()(),M(),i(48,"div",44)(49,"button",45),y(),i(50,"svg",8),_(51,"path",46),r()()(),M(),i(52,"div",47)(53,"button",48),y(),i(54,"svg",8),_(55,"path",49),r()()(),M(),i(56,"button",50),y(),i(57,"svg",8),_(58,"path",51),r()()(),M(),i(59,"div",52),h("mouseenter",function(){return t.clearCloseTimeout()})("mouseleave",function(){return t.startCloseTimeout()}),i(60,"nav",53)(61,"div",54)(62,"span",55),s(63,"Admin"),r(),i(64,"div",56)(65,"span",57),y(),i(66,"svg",58),_(67,"path",59),r()(),M(),i(68,"span"),s(69,"Edit"),r()(),i(70,"div",60)(71,"span",57),y(),i(72,"svg",61),_(73,"path",13),r()(),M(),i(74,"span"),s(75,"TG send notification"),r()(),i(76,"div",62)(77,"span",57),y(),i(78,"svg",63),_(79,"path",17),r()(),M(),i(80,"span"),s(81,"Send e-mail"),r()(),i(82,"div",64)(83,"span",57),y(),i(84,"svg",63),_(85,"path",20),r()(),M(),i(86,"span"),s(87,"TG Users"),r()(),i(88,"div",65)(89,"span",57),y(),i(90,"svg",63),_(91,"path",23),r()(),M(),i(92,"span"),s(93,"Site Users"),r()(),i(94,"div",66)(95,"span",57),y(),i(96,"svg",63)(97,"g",26)(98,"path",27),_(99,"animate",28),r(),i(100,"path",29),_(101,"animate",30),r()(),i(102,"g",31)(103,"circle",32),_(104,"animate",33),r(),i(105,"path",34),_(106,"animate",35),r()()()(),M(),i(107,"span"),s(108,"Images"),r()(),i(109,"div",67)(110,"span",57),y(),i(111,"svg",38),_(112,"path",39),r()(),M(),i(113,"span"),s(114,"Sites events"),r()(),i(115,"div",68)(116,"span",57),y(),i(117,"svg",58),_(118,"path",46),r()(),M(),i(119,"span"),s(120,"Tutorials"),r()(),i(121,"div",69)(122,"span",57),y(),i(123,"svg",58),_(124,"path",70),r()(),M(),i(125,"span"),s(126,"Create"),r()()()()()()),n&2&&(l(2),d("ngClass",Fe(13,cn,t.isSidebarOpen&&t.currentSidebarTab==="linksTab",!(t.isSidebarOpen&&t.currentSidebarTab==="linksTab"))),l(6),d("routerLinkActiveOptions",oe(16,Ie)),l(51),U("hidden",!t.isSidebarOpen),l(5),d("routerLinkActiveOptions",oe(17,Ie)),l(6),d("routerLinkActiveOptions",oe(18,Ie)),l(6),d("routerLinkActiveOptions",oe(19,Ie)),l(6),d("routerLinkActiveOptions",oe(20,Ie)),l(6),d("routerLinkActiveOptions",oe(21,Ie)),l(6),d("routerLinkActiveOptions",oe(22,Ie)),l(15),d("routerLinkActiveOptions",oe(23,Ie)),l(6),d("routerLinkActiveOptions",oe(24,Ie)),l(6),d("routerLinkActiveOptions",oe(25,Ie)))},dependencies:[ne,Ut,Ot],styles:[".sidebar[_ngcontent-%COMP%]   .sidebar-button[_ngcontent-%COMP%]{border-radius:0 20px 20px 0;box-shadow:0 0 15px #4e46e533}.sidebar[_ngcontent-%COMP%]   .sidebar-button[_ngcontent-%COMP%]:hover{box-shadow:0 0 15px #4e46e580;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .3s ease-in-out}.sidebar[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]{margin:10px 0 10px 10px}.sidebar[_ngcontent-%COMP%]   .sidebar-menu[_ngcontent-%COMP%]{border-radius:20px}.sidebar[_ngcontent-%COMP%]   .sidebar-menu[_ngcontent-%COMP%]:hover{box-shadow:0 0 15px #4e46e580;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .3s ease-in-out}.sidebar[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:before, .sidebar[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:transparent!important}"]})}return a})();var Me=(()=>{class a{static \u0275fac=function(n){return new(n||a)};static \u0275cmp=B({type:a,selectors:[["app-edit-icon"]],decls:9,vars:0,consts:[["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["stroke-dasharray","20","stroke-dashoffset","20","d","M3 21h18"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.2s","values","20;0"],["fill","currentColor","fill-opacity","0","stroke-dasharray","48","stroke-dashoffset","48","d","M7 17v-4l10 -10l4 4l-10 10h-4"],["fill","freeze","attributeName","fill-opacity","begin","1.1s","dur","0.5s","values","0;1"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.2s","dur","0.6s","values","48;0"],["stroke-dasharray","8","stroke-dashoffset","8","d","M14 6l4 4"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.8s","dur","0.2s","values","8;0"]],template:function(n,t){n&1&&(y(),i(0,"svg",0)(1,"g",1)(2,"path",2),_(3,"animate",3),r(),i(4,"path",4),_(5,"animate",5)(6,"animate",6),r(),i(7,"path",7),_(8,"animate",8),r()()())}})}return a})();var qt=(()=>{class a{transform(e,n){return e?n===null?e:n===3?e.filter(t=>t.parent_menu&&(t.parent_menu.id===4||t.parent_menu.id===5)):e.filter(t=>t.parent_menu&&t.parent_menu.id===n):[]}static \u0275fac=function(n){return new(n||a)};static \u0275pipe=ke({name:"filterByParentMenuId",type:a,pure:!0})}return a})();var Qt=(()=>{class a{transform(e){if(!e||typeof e=="string"&&!e.trim())return"";let n=new Date(e);if(isNaN(n.getTime()))return"";let t=this.padZero(n.getHours()),o=this.padZero(n.getMinutes()),p=this.padZero(n.getSeconds()),E=this.padZero(n.getDate()),F=this.padZero(n.getMonth()+1),z=n.getFullYear();return`${t}:${o}:${p} ${E}.${F}.${z}`}padZero(e){return e<10?`0${e}`:e.toString()}static \u0275fac=function(n){return new(n||a)};static \u0275pipe=ke({name:"dateFormat",type:a,pure:!0})}return a})();var Rt=(()=>{class a{transform(e,n,t=!0){return!e||!n?e:[...e].sort((o,p)=>{let E=o[n],F=p[n];if(E==null&&(E=""),F==null&&(F=""),n==="sentAt"){let z=E?new Date(E).getTime():0,X=F?new Date(F).getTime():0;return t?z-X:X-z}return typeof E=="string"&&typeof F=="string"?t?E.localeCompare(F):F.localeCompare(E):0})}static \u0275fac=function(n){return new(n||a)};static \u0275pipe=ke({name:"sort",type:a,pure:!1})}return a})();var Gt=(()=>{class a{transform(e,n){return e?n===null?e:e.filter(t=>t.site_name===n):[]}static \u0275fac=function(n){return new(n||a)};static \u0275pipe=ke({name:"filterBySiteName",type:a,pure:!0})}return a})();var Yt=(()=>{class a{transform(e,n=!0){return!e||!e.length?e:[...e].sort((t,o)=>{let p=t.created_at?new Date(t.created_at).getTime():0,E=o.created_at?new Date(o.created_at).getTime():0;return n?p-E:E-p})}static \u0275fac=function(n){return new(n||a)};static \u0275pipe=ke({name:"sortNews",type:a,pure:!1})}return a})();var Te=(()=>{class a{static \u0275fac=function(n){return new(n||a)};static \u0275cmp=B({type:a,selectors:[["app-loading"]],decls:21,vars:0,consts:[[1,"isLoading","w-[300px]","h-[300px]","fixed","z-10"],["xmlns","http://www.w3.org/2000/svg","width","300","height","300","viewBox","0 0 24 24",1,""],["id","gradient1","cx","50%","cy","50%","r","50%"],["offset","0%","stop-color","oklch(51.01% 0.274 263.83)"],["offset","100%","stop-color","#4f45e5"],["id","gradient2","cx","50%","cy","50%","r","50%"],["offset","0%","stop-color","oklch(47.66% 0.246 305.88)"],["offset","100%","stop-color","#818cf8"],["id","gradient3","cx","50%","cy","50%","r","50%"],["offset","0%","stop-color","#4f45e5"],["offset","100%","stop-color","#8845e5"],["cx","12","cy","12","r","0","fill","url(#gradient1)"],["id","svgSpinnersPulseMultiple0","fill","freeze","attributeName","r","begin","0;svgSpinnersPulseMultiple2.end","calcMode","spline","dur","1.2s","keySplines",".52,.6,.25,.99","values","0;11"],["fill","freeze","attributeName","opacity","begin","0;svgSpinnersPulseMultiple2.end","calcMode","spline","dur","1.2s","keySplines",".52,.6,.25,.99","values","1;0"],["cx","12","cy","12","r","0","fill","url(#gradient2)"],["id","svgSpinnersPulseMultiple1","fill","freeze","attributeName","r","begin","svgSpinnersPulseMultiple0.begin+0.2s","calcMode","spline","dur","1.2s","keySplines",".52,.6,.25,.99","values","0;11"],["fill","freeze","attributeName","opacity","begin","svgSpinnersPulseMultiple0.begin+0.2s","calcMode","spline","dur","1.2s","keySplines",".52,.6,.25,.99","values","1;0"],["cx","12","cy","12","r","0","fill","url(#gradient3)"],["id","svgSpinnersPulseMultiple2","fill","freeze","attributeName","r","begin","svgSpinnersPulseMultiple0.begin+0.4s","calcMode","spline","dur","1.2s","keySplines",".52,.6,.25,.99","values","0;11"],["fill","freeze","attributeName","opacity","begin","svgSpinnersPulseMultiple0.begin+0.4s","calcMode","spline","dur","1.2s","keySplines",".52,.6,.25,.99","values","1;0"]],template:function(n,t){n&1&&(i(0,"div",0),y(),i(1,"svg",1)(2,"defs")(3,"radialGradient",2),_(4,"stop",3)(5,"stop",4),r(),i(6,"radialGradient",5),_(7,"stop",6)(8,"stop",7),r(),i(9,"radialGradient",8),_(10,"stop",9)(11,"stop",10),r()(),i(12,"circle",11),_(13,"animate",12)(14,"animate",13),r(),i(15,"circle",14),_(16,"animate",15)(17,"animate",16),r(),i(18,"circle",17),_(19,"animate",18)(20,"animate",19),r()()())}})}return a})();var Xt=(()=>{class a{static \u0275fac=function(n){return new(n||a)};static \u0275mod=Ue({type:a});static \u0275inj=We({imports:[lt,Ze]})}return a})();var Jt=(()=>{class a{http;apiUrl=I.auth.apiUrl;constructor(e){this.http=e}getGreetings(){return this.http.get(`${this.apiUrl}greetings`)}updateGreeting(e,n){return this.http.put(`${this.apiUrl}greetings/${e}`,n)}static \u0275fac=function(n){return new(n||a)(N($))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();function Cn(a,m){if(a&1){let e=S();i(0,"div",11)(1,"b"),s(2),r(),i(3,"span",12),h("click",function(){c(e);let t=u(2);return g(t.closeSuccessMessage())}),y(),i(4,"svg",13),_(5,"path",14),r()()()}if(a&2){let e=u(2);l(2),b(" ",e.successMessage," ")}}function bn(a,m){if(a&1){let e=S();i(0,"div",15),s(1),i(2,"span",12),h("click",function(){c(e);let t=u(2);return g(t.closeErrorMessage())}),y(),i(3,"svg",13),_(4,"path",14),r()()()}if(a&2){let e=u(2);l(),b(" ",e.errorMessage," ")}}function wn(a,m){if(a&1&&(i(0,"figure"),_(1,"img",40),r()),a&2){let e=u(2).$implicit;l(),d("src",e.image_url,W)}}function En(a,m){if(a&1){let e=S();i(0,"div"),f(1,wn,2,1,"figure",24),i(2,"div",25)(3,"p",26),s(4),r(),i(5,"p",27),s(6,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435:"),r(),i(7,"p"),s(8),r(),i(9,"div",28)(10,"button",29),h("click",function(){c(e);let t=u().$implicit,o=u(2);return g(o.toggleEdit(t))}),s(11," Edit "),i(12,"span",30),y(),i(13,"svg",31)(14,"g",32)(15,"path",33),_(16,"animate",34),r(),i(17,"path",35),_(18,"animate",36)(19,"animate",37),r(),i(20,"path",38),_(21,"animate",39),r()()()()()()()()}if(a&2){let e=u().$implicit;l(),d("ngIf",e.image_url),l(3),b("ID: ",e.id,""),l(4),w(e.greeting_text)}}function yn(a,m){if(a&1&&(i(0,"figure"),_(1,"img",40),r()),a&2){let e=u(2).$implicit;l(),d("src",e.image_url,W)}}function Sn(a,m){a&1&&(i(0,"span",54),s(1," \u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0434\u043E\u043C\u0435\u043D, \u0432\u0441\u0442\u0430\u0432\u044C\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0441 \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u0438\u043C \u0434\u043E\u043C\u0435\u043D\u043E\u043C https://1xjet.jp/tgadmin/image/example.png \u0438\u043B\u0438 https://1xjet.netlify.app/example.png "),r())}function Mn(a,m){if(a&1){let e=S();i(0,"div"),f(1,yn,2,1,"figure",24),i(2,"div",41)(3,"label",42),s(4," \u0412\u0441\u0442\u0430\u0432\u044C\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u043F\u0440\u0438\u043C\u0435\u0440: "),i(5,"b"),s(6,"https://image.com"),r(),f(7,Sn,2,0,"span",43),r(),i(8,"div",44)(9,"p",45),s(10," \u041F\u0443\u0442\u044C "),r(),i(11,"input",46),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.image_url,t)||(o.image_url=t),g(t)}),h("blur",function(){c(e);let t=u().$implicit,o=u(2);return g(o.refreshImage(t))}),r()()(),i(12,"div",25)(13,"label",47),s(14,"\u041A\u043E\u043D\u0442\u0435\u043D\u0442 \u043A\u043D\u043E\u043F\u043A\u0438"),r(),i(15,"textarea",48),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.greeting_text,t)||(o.greeting_text=t),g(t)}),r(),i(16,"div",28)(17,"button",49),h("click",function(){c(e);let t=u().$implicit,o=u(2);return g(o.saveChanges(t))}),s(18," > \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C "),i(19,"span",50),y(),i(20,"svg",51)(21,"path",52),_(22,"animate",53),r()()()()()()()}if(a&2){let e=u().$implicit,n=u(2);l(),d("ngIf",e.image_url),l(6),d("ngIf",e.image_url&&!n.isValidImageUrl(e.image_url)),l(4),x("ngModel",e.image_url),l(4),x("ngModel",e.greeting_text),l(2),d("disabled",!n.isValidImageUrl(e.image_url||""))}}function Tn(a,m){if(a&1&&(i(0,"div",16)(1,"div",17)(2,"div",18)(3,"p",19),s(4," \u{1F44B} "),i(5,"span",20),s(6),r()()(),i(7,"div",21)(8,"p",22),s(9),P(10,"date"),r()()(),i(11,"div",23),f(12,En,22,3,"div",3)(13,Mn,23,5,"ng-template",null,1,fe),r()()),a&2){let e=m.$implicit,n=m.index,t=he(14);l(6),b("\u041F\u0440\u0438\u0432\u0435\u0441\u0442\u0432\u0438\u0435 \u2116",n+1,""),l(3),b(" \u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F: ",j(10,4,e.created_at,"medium")," "),l(3),d("ngIf",!e.isEditing)("ngIfElse",t)}}function kn(a,m){if(a&1&&(i(0,"div")(1,"div",4)(2,"h2",5),s(3," \u041F\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0431\u043E\u0442\u0430 "),i(4,"span"),s(5,"/start"),r()(),i(6,"p",6),s(7," \u0412\u0441\u0435\u0433\u043E \u043F\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0439: "),i(8,"span",7),s(9),r()()(),f(10,Cn,6,1,"div",8)(11,bn,5,1,"div",9)(12,Tn,15,7,"div",10),r()),a&2){let e=u();l(9),w(e.greetings.length),l(),d("ngIf",e.successMessage),l(),d("ngIf",e.errorMessage),l(),d("ngForOf",e.greetings)}}function Bn(a,m){a&1&&_(0,"app-loading")}var Kt=(()=>{class a{greetingBotService;greetings=[];loading=!0;successMessage=null;errorMessage=null;baseUrl=I.auth.baseUrl;constructor(e){this.greetingBotService=e}ngOnInit(){this.loadGreetings()}loadGreetings(){this.greetingBotService.getGreetings().subscribe({next:e=>{this.greetings=e.map(n=>V(T({},n),{isEditing:!1})),this.loading=!1,console.log("\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E \u0443\u0441\u043F\u0435\u0448\u043D\u043E",this.greetings)},error:e=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0434\u0430\u043D\u043D\u044B\u0445:",e),this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0434\u0430\u043D\u043D\u044B\u0445",this.loading=!1}})}toggleEdit(e){e.isEditing=!e.isEditing,this.clearMessages()}saveChanges(e){this.greetingBotService.updateGreeting(e.id,{greeting_text:e.greeting_text,image_url:e.image_url}).subscribe({next:n=>{e.isEditing=!1,this.successMessage="\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B \u0443\u0441\u043F\u0435\u0448\u043D\u043E!",setTimeout(()=>{this.closeSuccessMessage()},3e3)},error:n=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438:",n),this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0439",setTimeout(()=>{this.closeErrorMessage()},3e3)}})}refreshImage(e){console.log("URL \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E:",e.image_url),this.clearMessages()}closeSuccessMessage(){this.successMessage=null}closeErrorMessage(){this.errorMessage=null}clearMessages(){this.successMessage=null,this.errorMessage=null}isValidImageUrl(e){return!e||e.trim()===""?!0:e.startsWith(this.baseUrl)}static \u0275fac=function(n){return new(n||a)(k(Jt))};static \u0275cmp=B({type:a,selectors:[["app-greeting-bot"]],decls:4,vars:2,consts:[["loading",""],["editMode",""],[1,"tab-item","w-full"],[4,"ngIf","ngIfElse"],[1,"bg-main-trans2-gradient-90","header-tab","flex","items-center","justify-between","px-[20px]","py-[10px]","my-[30px]","rounded-[20px]","w-[70%]","mx-auto"],[1,"title-tab","text-xl","font-bold","text-main-trans"],[1,"text-right","text-indigo-600","flex","gap-2","items-center","rounded-[20px]","bg-main","px-[15px]","py-[5px]"],[1,"font-bold","text-2xl"],["class","alert alert-success mb-4 relative flex justify-between",4,"ngIf"],["class","alert alert-error relative",4,"ngIf"],["class","card-wrapper bg-main-trans-gradient-0 rounded-[20px] p-[20px] pb-[30px]",4,"ngFor","ngForOf"],[1,"alert","alert-success","mb-4","relative","flex","justify-between"],[1,"close",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","viewBox","0 0 24 24"],["fill","currentColor","d","M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10s10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m3.59-13L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41z"],[1,"alert","alert-error","relative"],[1,"card-wrapper","bg-main-trans-gradient-0","rounded-[20px]","p-[20px]","pb-[30px]"],[1,"card-wrapper-title","flex","items-start","justify-between","mb-[20px]"],[1,"card-title-group","flex","justify-between","items-center"],[1,"number","text-lg"],[1,"font-bold","text-indigo-600"],[1,"card-date","flex","items-center","gap-2"],[1,"text-xs","text-gray-500"],[1,"card","bg-base-100","mx-auto","w-[80%]","hover-shadow-white"],[4,"ngIf"],[1,"card-body"],[1,"text-indigo-600"],[1,"text-indigo-400","text-lg"],[1,"card-actions","justify-center","pt-[20px]"],[1,"btn","btn-ghost","pr-0",3,"click"],[1,"btn","btn-primary"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["stroke-dasharray","20","stroke-dashoffset","20","d","M3 21h18"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.2s","values","20;0"],["fill","currentColor","fill-opacity","0","stroke-dasharray","48","stroke-dashoffset","48","d","M7 17v-4l10 -10l4 4l-10 10h-4"],["fill","freeze","attributeName","fill-opacity","begin","1.1s","dur","0.5s","values","0;1"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.2s","dur","0.6s","values","48;0"],["stroke-dasharray","8","stroke-dashoffset","8","d","M14 6l4 4"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.8s","dur","0.2s","values","8;0"],["alt","Greeting image",3,"src"],[1,"mt-4","px-[32px]"],["for","domain name",1,"block","text-sm","text-indigo-400"],["class","text-red-500 text-sm mt-2 block pt-2",4,"ngIf"],[1,"flex","items-center","mt-2"],[1,"py-2.5","px-3","text-gray-700","bg-gray-200","border","border-r-0","rounded-l-lg","input-title"],["type","text","placeholder","https://image.com",1,"input","block","w-full","rounded-l-none","placeholder-gray-500","border","border-gray-300","bg-white","px-5","py-2.5","text-gray-800","focus:border-blue-500","focus:outline-none","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","blur","ngModel"],["for","Description",1,"block","text-sm","text-indigo-400","font-bold"],["placeholder","\u0421\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435 \u043F\u0440\u0438\u0432\u0435\u0442\u0441\u0432\u0435\u043D\u043D\u043E\u0433\u043E \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F",1,"block","mt-2","w-full","h-[320px]","placeholder-gray-500","rounded-lg","border","border-gray-300","bg-white","px-4","py-2.5","text-gray-800","focus:border-blue-500","focus:outline-none","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],[1,"btn","btn-ghost","pr-0","text-success",3,"click","disabled"],[1,"btn","btn-accent"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24"],["fill","none","stroke","#fff","stroke-dasharray","24","stroke-dashoffset","24","stroke-linecap","round","stroke-linejoin","round","stroke-width","2.7","d","M5 11l6 6l10 -10"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.96s","values","24;0"],[1,"text-red-500","text-sm","mt-2","block","pt-2"]],template:function(n,t){if(n&1&&(i(0,"section",2),f(1,kn,13,4,"div",3)(2,Bn,1,0,"ng-template",null,0,fe),r()),n&2){let o=he(3);l(),d("ngIf",t.greetings.length>0)("ngIfElse",o)}},dependencies:[H,A,Te,Y,q,Q,le]})}return a})();var dt=(()=>{class a{http;apiUrl=I.auth.apiUrl;constructor(e){this.http=e}getPosts(){return this.http.get(`${this.apiUrl}menu/posts`)}updatePost(e,n){return this.http.put(`${this.apiUrl}posts/${e}`,n)}updatePostButton(e,n){return this.http.put(`${this.apiUrl}post-buttons/${e}`,n)}static \u0275fac=function(n){return new(n||a)(N($))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var mt=(()=>{class a{http;apiUrl=`${I.auth.apiUrl}menu-buttons-inline`;constructor(e){this.http=e}getButtons(){return this.http.get(this.apiUrl)}getButtonById(e){return this.http.get(`${this.apiUrl}/${e}`)}createButton(e){return this.http.post(this.apiUrl,e)}updateButton(e,n){return this.http.put(`${this.apiUrl}/${e}`,n)}deleteButton(e){return this.http.delete(`${this.apiUrl}/${e}`)}static \u0275fac=function(n){return new(n||a)(N($))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var pe={production:!0,auth:{email:"admin-bot-1x",password:"tJfB59iWxAXL",apiUrl:"https://kr.devsmm.pro/api/",baseUrl:"https://kr.devsmm.pro",apiUrlEventLandings:"https://forecast-server-kr.najib-saab.workers.dev/1xarea-admin/landings",apiUrlEvents:"https://forecast-server-kr.najib-saab.workers.dev/1xarea-admin/events",apiUrlEventsStatistics:"https://forecast-server-kr.najib-saab.workers.dev/statistics",imageUrl:"https://vi.devsmm.pro",secret:"1xarea-admin",domenUrl:"https://1xarea.com/",localQuiz:"https://dev.devsmm.pro",localStorage:"https://dev.devsmm.pro",adminSecretQuiz:"top4winner-admin-qusmm",geo:"kr",emailServiceUrl:"http://localhost:3500",app:"qusmm-kr",emailDomein:"https://1xarea.com"}};var ye=(()=>{class a{isValidImageUrl(e){return!e||e.trim()===""?!0:e.startsWith(pe.auth.baseUrl)}static \u0275fac=function(n){return new(n||a)};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();function Dn(a,m){if(a&1){let e=S();i(0,"div",13)(1,"b"),s(2),r(),i(3,"span",14),h("click",function(){c(e);let t=u();return g(t.closeMessages())}),y(),i(4,"svg",15),_(5,"path",16),r()()()}if(a&2){let e=u();l(2),b(" ",e.successMessage," ")}}function Fn(a,m){if(a&1){let e=S();i(0,"div",17),s(1),i(2,"span",14),h("click",function(){c(e);let t=u();return g(t.closeMessages())}),y(),i(3,"svg",15),_(4,"path",16),r()()()}if(a&2){let e=u();l(),b(" ",e.errorMessage," ")}}function Vn(a,m){if(a&1&&(i(0,"figure"),_(1,"img",37),r()),a&2){let e=u(3).$implicit;l(),d("src",e.post_image_url,W)}}function Pn(a,m){if(a&1&&(i(0,"div",35),f(1,Vn,2,1,"figure",36),r()),a&2){let e=u(2).$implicit;l(),d("ngIf",e.post_image_url)}}function An(a,m){if(a&1&&(i(0,"span",38),s(1),r()),a&2){let e=u(2).$implicit;l(),w(e.title_for_client)}}function zn(a,m){if(a&1){let e=S();i(0,"div"),f(1,Pn,2,1,"div",27),i(2,"div",28)(3,"p",29),s(4),f(5,An,2,1,"span",30),r(),i(6,"h3",31),s(7),r(),i(8,"p"),s(9),r(),i(10,"div",32)(11,"button",33),h("click",function(){c(e);let t=u().$implicit,o=u(2);return g(o.toggleEdit(t))}),s(12," \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C "),i(13,"span",34),_(14,"app-edit-icon"),r()()()()()}if(a&2){let e=u().$implicit;l(),d("ngIf",e.post_image_url),l(3),b(" # ",e.id," : "),l(),d("ngIf",e.title_for_client),l(2),b(" ",e.post_title," "),l(2),w(e.post_content)}}function Ln(a,m){if(a&1&&(i(0,"figure"),_(1,"img",37),r()),a&2){let e=u(2).$implicit;l(),d("src",e.post_image_url,W)}}function Wn(a,m){a&1&&(i(0,"span",52),s(1," \u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0434\u043E\u043C\u0435\u043D, \u0432\u0441\u0442\u0430\u0432\u044C\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0441 \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u0438\u043C \u0434\u043E\u043C\u0435\u043D\u043E\u043C "),_(2,"br"),s(3," https://1xjet.jp/tgadmin/image/example.png \u0438\u043B\u0438 https://1xjet.netlify.app/example.png "),r())}function Un(a,m){if(a&1){let e=S();f(0,Ln,2,1,"figure",36),i(1,"div",39)(2,"label",40),s(3,"URL \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F: "),f(4,Wn,4,0,"span",41),r(),i(5,"input",42),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.post_image_url,t)||(o.post_image_url=t),g(t)}),h("blur",function(){c(e);let t=u().$implicit,o=u(2);return g(o.refreshImage(t))}),r(),i(6,"label",43),s(7,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u043E\u0441\u0442\u0430:"),r(),i(8,"input",44),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.post_title,t)||(o.post_title=t),g(t)}),r(),i(9,"label",43),s(10,"\u041A\u043E\u043D\u0442\u0435\u043D\u0442 \u043F\u043E\u0441\u0442\u0430:"),r(),i(11,"textarea",45),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.post_content,t)||(o.post_content=t),g(t)}),r(),i(12,"div",46)(13,"button",47),h("click",function(){c(e);let t=u().$implicit,o=u(2);return g(o.saveChanges(t))}),s(14," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C "),i(15,"span",48),y(),i(16,"svg",49)(17,"path",50),_(18,"animate",51),r()()()()()()}if(a&2){let e=u().$implicit,n=u(2);d("ngIf",e.post_image_url),l(4),d("ngIf",e.post_image_url&&!n.urlValidationService.isValidImageUrl(e.post_image_url)),l(),x("ngModel",e.post_image_url),l(3),x("ngModel",e.post_title),l(3),x("ngModel",e.post_content),l(2),d("disabled",!n.urlValidationService.isValidImageUrl(e.post_image_url))}}function On(a,m){if(a&1&&(i(0,"div",64)(1,"span"),s(2),P(3,"date"),r(),i(4,"span"),s(5),P(6,"date"),r()()),a&2){let e=u().$implicit;l(2),b("\u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F ",j(3,2,e.button.created_at,"medium"),""),l(3),b("\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0430 ",j(6,5,e.button.updated_at,"medium"),"")}}function Nn(a,m){if(a&1&&(i(0,"span",74),s(1),r()),a&2){let e=u(2).$implicit;l(),w(e.button.title_for_client)}}function jn(a,m){if(a&1&&(i(0,"div",75)(1,"span",38),s(2,"\u{1F517} \u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u0440\u0435\u0441\u0443\u0440\u0441 \u043A\u0443\u0434\u0430 \u0432\u0432\u0435\u0434\u0435\u0442 \u043A\u043D\u043E\u043F\u043A\u0430 - "),r(),i(3,"b"),s(4),r()()),a&2){let e=u(2).$implicit;l(4),b(" ",e.button.url," ")}}function Hn(a,m){if(a&1){let e=S();i(0,"div",65)(1,"div",66)(2,"div",67),f(3,Nn,2,1,"span",68),i(4,"span"),s(5),r()(),i(6,"div",69)(7,"div",70),s(8," Order: "),i(9,"span",71),s(10),r()(),i(11,"span",72),h("click",function(){c(e);let t=u().$implicit,o=u(4);return g(o.toggleButtonEdit(t))}),_(12,"app-edit-icon"),r()()(),f(13,jn,5,1,"div",73),r()}if(a&2){let e=u().$implicit,n=u(2).$implicit;l(3),d("ngIf",n.title_for_client),l(2),w(e.button.name),l(5),w(e.button.order),l(3),d("ngIf",e.button.url)}}function $n(a,m){if(a&1){let e=S();i(0,"div",76)(1,"div",77)(2,"div",78)(3,"label",43),s(4,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u043E\u0441\u0442\u0430:"),r(),i(5,"input",79),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.button.name,t)||(o.button.name=t),g(t)}),r()(),i(6,"div",80)(7,"label",43),s(8,"\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u0440\u0435\u0441\u0443\u0440\u0441(\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E): "),r(),i(9,"input",81),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.button.url,t)||(o.button.url=t),g(t)}),h("blur",function(){c(e);let t=u(3).$implicit,o=u(2);return g(o.refreshImage(t))}),r()(),i(10,"div",82)(11,"label",43),s(12,"\u041E\u0447\u0435\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u044C:"),r(),i(13,"input",83),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.button.order,t)||(o.button.order=t),g(t)}),r()()(),i(14,"div",84)(15,"span",85),h("click",function(){c(e);let t=u().$implicit,o=u(2).$implicit,p=u(2);return g(p.saveButtonChanges(o,t))}),y(),i(16,"svg",86)(17,"path",50),_(18,"animate",51),r()()(),M(),i(19,"span",87),h("click",function(){c(e);let t=u().$implicit,o=u(4);return g(o.toggleButtonEdit(t))}),y(),i(20,"svg",88)(21,"g",89)(22,"path",90),_(23,"animate",91),r(),i(24,"path",92),_(25,"animate",93),r()()()()()()}if(a&2){let e=u().$implicit;l(5),x("ngModel",e.button.name),l(4),x("ngModel",e.button.url),l(4),x("ngModel",e.button.order)}}function qn(a,m){if(a&1&&(i(0,"div",56),_(1,"input",57),i(2,"div",58),s(3),r(),i(4,"div",59),f(5,On,7,8,"div",60),i(6,"div",61),f(7,Hn,14,4,"div",62)(8,$n,26,3,"div",63),r()()()),a&2){let e=m.$implicit,n=u(4);l(3),b(" ",e.button.name," "),l(2),d("ngIf",!n.isEditing),l(2),d("ngIf",!n.isEditing),l(),d("ngIf",n.isEditing)}}function Qn(a,m){if(a&1&&(i(0,"div",53)(1,"h4",54),s(2,"\u041A\u043D\u043E\u043F\u043A\u0430(\u0438) \u043F\u043E\u0441\u0442\u0430:"),r(),f(3,qn,9,4,"div",55),r()),a&2){let e=u().$implicit;l(3),d("ngForOf",e.buttons)}}function Rn(a,m){if(a&1&&(i(0,"div",19)(1,"div",20)(2,"p",21),s(3),r(),i(4,"div",22)(5,"p",23),s(6),P(7,"date"),r()()(),i(8,"div",24)(9,"div",25),f(10,zn,15,5,"div",12)(11,Un,19,6,"ng-template",null,1,fe),r(),f(13,Qn,4,1,"div",26),r()()),a&2){let e=m.$implicit,n=m.index,t=he(12);l(3),b(" \u{1F4DD} \u041F\u043E\u0441\u0442 \u2116",n+1," "),l(3),b(" \u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F: ",j(7,5,e.created_at,"medium")," "),l(4),d("ngIf",!e.isEditing)("ngIfElse",t),l(3),d("ngIf",e.buttons==null?null:e.buttons.length)}}function Gn(a,m){if(a&1&&(i(0,"div"),f(1,Rn,14,8,"div",18),P(2,"filterByParentMenuId"),r()),a&2){let e=u();l(),d("ngForOf",j(2,1,e.posts,e.selectedParentMenuId))}}function Yn(a,m){a&1&&(i(0,"div",94),y(),i(1,"svg",95)(2,"defs")(3,"radialGradient",96),_(4,"stop",97)(5,"stop",98),r(),i(6,"radialGradient",99),_(7,"stop",100)(8,"stop",101),r(),i(9,"radialGradient",102),_(10,"stop",103)(11,"stop",104),r()(),i(12,"circle",105),_(13,"animate",106)(14,"animate",107),r(),i(15,"circle",108),_(16,"animate",109)(17,"animate",110),r(),i(18,"circle",111),_(19,"animate",112)(20,"animate",113),r()()())}var ti=(()=>{class a{postService;menuButtonService;urlValidationService;selectedParentMenuId=null;posts=[];successMessage=null;errorMessage=null;loading=!0;isEditing=!1;isActive=!1;constructor(e,n,t){this.postService=e,this.menuButtonService=n,this.urlValidationService=t}ngOnInit(){this.loadPosts()}loadPosts(){this.postService.getPosts().subscribe({next:e=>{this.posts=e.map(n=>V(T({},n),{isEditing:!1})),this.loading=!1,console.log("\u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043F\u043E\u0441\u0442\u043E\u0432 \u0432 \u043A\u043E\u043C\u043F\u043E\u043D\u0435\u043D\u0442\u0435 \u041F\u041E\u0421\u0422:",this.posts)},error:()=>{this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043F\u043E\u0441\u0442\u043E\u0432",this.loading=!1}})}toggleEdit(e){e.isEditing=!e.isEditing,this.clearMessages()}saveChanges(e){this.postService.updatePost(e.id,{post_title:e.post_title,post_content:e.post_content,post_image_url:e.post_image_url}).subscribe({next:()=>{this.successMessage="\u041F\u043E\u0441\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D!",e.isEditing=!1,setTimeout(()=>{this.closeMessages()},3e3)},error:()=>{this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0438 \u043F\u043E\u0441\u0442\u0430"}})}toggleButtonEdit(e){console.log(e),this.isEditing=!this.isEditing,this.clearMessages()}isClickActive(){this.isActive=!this.isActive}saveButtonChanges(e,n){n.button&&n.button.name&&this.menuButtonService.updateButton(n.button.id,{name:n.button.name,url:n.button.url,order:n.button.order}).subscribe({next:()=>{this.successMessage="\u041A\u043D\u043E\u043F\u043A\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0430!",n.isEditing=!1,setTimeout(()=>{this.closeMessages()},3e3)},error:()=>{this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0438 \u043A\u043D\u043E\u043F\u043A\u0438"}})}refreshImage(e){console.log("URL \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E:",e.post_image_url),this.clearMessages()}closeMessages(){this.successMessage=null,this.errorMessage=null}clearMessages(){this.successMessage=null,this.errorMessage=null}static \u0275fac=function(n){return new(n||a)(k(dt),k(mt),k(ye))};static \u0275cmp=B({type:a,selectors:[["app-posts-bot"]],decls:26,vars:12,consts:[["loading",""],["editMode",""],[1,"posts-bot","w-full"],[1,"title-main","mt-[30px]","mx-auto"],[1,"bg-main-trans2-gradient-90","header-tab","flex","items-center","justify-between","px-[20px]","py-[10px]","rounded-[25px]","w-main","mx-auto"],[1,"title-tab","text-main-trans","font-bold"],[1,"select","select-primary","text-xl","w-fit","block","mx-auto","rounded-[25px]",3,"ngModelChange","ngModel"],[3,"ngValue"],[1,"text-right","flex","gap-2","items-center","rounded-[25px]","bg-main","px-[15px]","py-[5px]"],[1,"font-bold","text-2xl"],["class","alert alert-success mb-4 relative flex justify-between",4,"ngIf"],["class","alert alert-error relative",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"alert","alert-success","mb-4","relative","flex","justify-between"],[1,"close",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","viewBox","0 0 24 24"],["fill","currentColor","d","M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10s10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m3.59-13L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41z"],[1,"alert","alert-error","relative"],["class","card-wrapper bg-main-trans-gradient-0 rounded-[20px] px-[20px] pt-[35px] pb-[80px]",4,"ngFor","ngForOf"],[1,"card-wrapper","bg-main-trans-gradient-0","rounded-[20px]","px-[20px]","pt-[35px]","pb-[80px]"],[1,"w-main","flex","items-center","justify-between","w-[90%]","mx-auto","pt-[20px]","pb-[20px]"],[1,"text-lg","font-bold","text-indigo-600","nj-toast-gradient"],[1,"card-date","flex","items-center","gap-2"],[1,"text-xs","text-gray-500"],[1,"post-item-wrapper","w-main","mx-auto","flex","flex-col","gap-1"],[1,"card","bg-base-100","mx-auto","hover-shadow-white","cursor-pointer","w-full"],["class","flex flex-col gap-2",4,"ngIf"],["class","img-wrapper w-full h-[350px] relative",4,"ngIf"],[1,"card-body"],[1,"text-indigo-600","flex","justify-start","gap-2","items-center","pb-2"],["class","text-gray-500 text-sm",4,"ngIf"],[1,"text-xl","text-indigo-400","font-bold"],[1,"card-actions","justify-center","pt-[20px]"],[1,"btn","btn-ghost","pr-0",3,"click"],[1,"btn","btn-primary"],[1,"img-wrapper","w-full","h-[350px]","relative"],[4,"ngIf"],["alt","Post Image",3,"src"],[1,"text-gray-500","text-sm"],[1,"p-4"],[1,"block","text-sm","text-indigo-400","font-bold","mt-4"],["class","text-red-500 text-sm mt-2 block pt-0 w-full",4,"ngIf"],["placeholder","https://example.com/image.jpg",1,"input","w-full","mt-2","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","blur","ngModel"],[1,"block","text-sm","text-indigo-400","font-bold"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A",1,"input","w-full","mt-2","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u043D\u0442\u0435\u043D\u0442 \u043F\u043E\u0441\u0442\u0430",1,"w-full","h-40","border","rounded-lg","px-4","py-2","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],[1,"card-actions","justify-center","pt-4"],[1,"btn","pr-0","text-success",3,"click","disabled"],[1,"btn","btn-accent"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24"],["fill","none","stroke","#fff","stroke-dasharray","24","stroke-dashoffset","24","stroke-linecap","round","stroke-linejoin","round","stroke-width","2.7","d","M5 11l6 6l10 -10"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.96s","values","24;0"],[1,"text-red-500","text-sm","mt-2","block","pt-0","w-full"],[1,"flex","flex-col","gap-2"],[1,"text-lg","font-bold","text-white"],["class","bg-reg collapse collapse-arrow hover-shadow-white",4,"ngFor","ngForOf"],[1,"bg-reg","collapse","collapse-arrow","hover-shadow-white"],["type","checkbox",1,"peer"],[1,"collapse-title","text-indigo-400","bg-reg","peer-checked:bg-primary","peer-checked:text-white","font-bold","text-lg"],[1,"collapse-content","bg-reg"],["class","sub-btn-date flex justify-between text-gray-400 text-xs pt-4 pb-4 px-4",4,"ngIf"],[1,"sub-btn-body-wrapper"],["class","sub-btn-body flex flex-col",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"sub-btn-date","flex","justify-between","text-gray-400","text-xs","pt-4","pb-4","px-4"],[1,"sub-btn-body","flex","flex-col"],[1,"flex","justify-between","items-center"],[1,"sub-btn-body-title","text-lg","font-bold","text-indigo-400","flex","flex-col","gap-2"],["class","text-gray-500 text-xs",4,"ngIf"],[1,"sub-btn-body-order","font-bold","flex","gap-4","items-center"],[1,"order"],[1,"nj-toast-trans"],[1,"btn","btn-primary",3,"click"],["class","sub-btn-url",4,"ngIf"],[1,"text-gray-500","text-xs"],[1,"sub-btn-url"],[1,"flex","items-center"],[1,"form-group-wrapper","flex","flex-1","items-center","gap-4","pt-4"],[1,"form-group","w-[30%]"],["placeholder","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A",1,"input","w-full","mt-2","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],[1,"form-group","w-[50%]"],["placeholder","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C URL \u043A\u043D\u043E\u043F\u043A\u0438",1,"input","w-full","mt-2","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","blur","ngModel"],[1,"form-group","w-[12.5%]"],["disabled","","placeholder","",1,"input","w-full","mt-2","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],[1,"btn-group","flex","items-center","gap-2","pt-5"],[1,"btn","btn-accent",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","25","height","25","viewBox","0 0 24 24"],[1,"btn","btn-error",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24","cl",""],["fill","none","stroke","#fffFFF","stroke-dasharray","16","stroke-dashoffset","16","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["d","M7 7l10 10"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.4s","values","16;0"],["d","M17 7l-10 10"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.4s","dur","0.4s","values","16;0"],[1,"isLoading","fixed","z-10"],["xmlns","http://www.w3.org/2000/svg","width","300","height","300","viewBox","0 0 24 24",1,""],["id","gradient1","cx","50%","cy","50%","r","50%"],["offset","0%","stop-color","oklch(51.01% 0.274 263.83)"],["offset","100%","stop-color","#4f45e5"],["id","gradient2","cx","50%","cy","50%","r","50%"],["offset","0%","stop-color","oklch(47.66% 0.246 305.88)"],["offset","100%","stop-color","#818cf8"],["id","gradient3","cx","50%","cy","50%","r","50%"],["offset","0%","stop-color","#4f45e5"],["offset","100%","stop-color","#8845e5"],["cx","12","cy","12","r","0","fill","url(#gradient1)"],["id","svgSpinnersPulseMultiple0","fill","freeze","attributeName","r","begin","0;svgSpinnersPulseMultiple2.end","calcMode","spline","dur","1.2s","keySplines",".52,.6,.25,.99","values","0;11"],["fill","freeze","attributeName","opacity","begin","0;svgSpinnersPulseMultiple2.end","calcMode","spline","dur","1.2s","keySplines",".52,.6,.25,.99","values","1;0"],["cx","12","cy","12","r","0","fill","url(#gradient2)"],["id","svgSpinnersPulseMultiple1","fill","freeze","attributeName","r","begin","svgSpinnersPulseMultiple0.begin+0.2s","calcMode","spline","dur","1.2s","keySplines",".52,.6,.25,.99","values","0;11"],["fill","freeze","attributeName","opacity","begin","svgSpinnersPulseMultiple0.begin+0.2s","calcMode","spline","dur","1.2s","keySplines",".52,.6,.25,.99","values","1;0"],["cx","12","cy","12","r","0","fill","url(#gradient3)"],["id","svgSpinnersPulseMultiple2","fill","freeze","attributeName","r","begin","svgSpinnersPulseMultiple0.begin+0.4s","calcMode","spline","dur","1.2s","keySplines",".52,.6,.25,.99","values","0;11"],["fill","freeze","attributeName","opacity","begin","svgSpinnersPulseMultiple0.begin+0.4s","calcMode","spline","dur","1.2s","keySplines",".52,.6,.25,.99","values","1;0"]],template:function(n,t){if(n&1){let o=S();i(0,"section",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"select",6),C("ngModelChange",function(E){return c(o),v(t.selectedParentMenuId,E)||(t.selectedParentMenuId=E),g(E)}),i(5,"option",7),s(6,"\u0412\u0441\u0435 \u043F\u043E\u0441\u0442\u044B"),r(),i(7,"option",7),s(8,"1 - Social button"),r(),i(9,"option",7),s(10,"2 - Top slots"),r(),i(11,"option",7),s(12,"3 - News"),r(),i(13,"option",7),s(14,"4 - Sport"),r(),i(15,"option",7),s(16,"5 - Casino"),r()()(),i(17,"p",8),s(18," \u0412\u0441\u0435\u0433\u043E \u043F\u043E\u0441\u0442\u043E\u0432: "),i(19,"span",9),s(20),r()()()(),f(21,Dn,6,1,"div",10)(22,Fn,5,1,"div",11)(23,Gn,3,4,"div",12)(24,Yn,21,0,"ng-template",null,0,fe),r()}if(n&2){let o=he(25);l(4),x("ngModel",t.selectedParentMenuId),l(),d("ngValue",null),l(2),d("ngValue",1),l(2),d("ngValue",2),l(2),d("ngValue",3),l(2),d("ngValue",4),l(2),d("ngValue",5),l(5),w(t.selectedParentMenuId?t.selectedParentMenuId:t.posts.length),l(),d("ngIf",t.successMessage),l(),d("ngIf",t.errorMessage),l(),d("ngIf",t.posts.length>0)("ngIfElse",o)}},dependencies:[H,A,Me,Z,ee,Y,re,q,Q,le,qt],styles:[".tabs-title-input[_ngcontent-%COMP%]{transition:.3s ease-in;border-radius:20px}.tabs-title-input[_ngcontent-%COMP%]:hover:after{-webkit-backdrop-filter:brightness(2);backdrop-filter:brightness(2);transition:.3s ease-in}"]})}return a})();var ii=(()=>{class a{http;apiUrl=I.auth.apiUrl;constructor(e){this.http=e}getMenuTables(){return this.http.get(`${this.apiUrl}menu/tables`)}updateMenuTable(e,n){return this.http.put(`${this.apiUrl}menu/tables/${e}`,n)}static \u0275fac=function(n){return new(n||a)(N($))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var ni=(()=>{class a{http;apiUrl=`${I.auth.apiUrl}post-buttons/`;constructor(e){this.http=e}getPostButtons(){return this.http.get(this.apiUrl)}getPostButtonById(e){return this.http.get(`${this.apiUrl}${e}`)}updatePostButton(e,n){return this.http.put(`${this.apiUrl}${e}`,n)}static \u0275fac=function(n){return new(n||a)(N($))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var ri=a=>({"bg-gradient":a});function Zn(a,m){if(a&1){let e=S();i(0,"div",8)(1,"b"),s(2),r(),i(3,"span",9),h("click",function(){c(e);let t=u();return g(t.closeMessages())}),y(),i(4,"svg",10),_(5,"path",11),r()()()}if(a&2){let e=u();l(2),b(" ",e.successMessage," ")}}function e0(a,m){if(a&1){let e=S();i(0,"div",12),s(1),i(2,"span",9),h("click",function(){c(e);let t=u();return g(t.closeMessages())}),y(),i(3,"svg",10),_(4,"path",11),r()()()}if(a&2){let e=u();l(),b(" ",e.errorMessage," ")}}function t0(a,m){if(a&1&&(i(0,"span",43),s(1),r()),a&2){let e=u(3).$implicit;l(),w(e.title_for_client)}}function i0(a,m){if(a&1){let e=S();i(0,"span",44),h("click",function(){c(e);let t=u(3),o=t.$implicit,p=t.index,E=u();return g(E.togleEdit(o,p))}),_(1,"app-edit-icon"),r()}}function n0(a,m){if(a&1&&(i(0,"span",45),s(1),r()),a&2){let e=u(3).$implicit;l(),w(e.title_for_client)}}function r0(a,m){if(a&1&&(i(0,"figure"),_(1,"img",46),r()),a&2){let e=u(3).$implicit;l(),d("src",e.linked_post==null?null:e.linked_post.post_image_url,W)}}function a0(a,m){if(a&1&&(i(0,"div",47)(1,"p",20),s(2),r(),i(3,"h3",48),s(4),r(),i(5,"p"),s(6),r(),_(7,"div",49),r()),a&2){let e=u(3).$implicit;l(2),b("ID: ",e==null||e.linked_post==null?null:e.linked_post.id,""),l(2),b(" ",e==null||e.linked_post==null?null:e.linked_post.post_title," "),l(2),w(e==null||e.linked_post==null?null:e.linked_post.post_content)}}function o0(a,m){a&1&&(i(0,"p",50)(1,"span",51),s(2," \u0423 \u043A\u043D\u043E\u043F\u043A\u0438 \u043D\u0435\u0442 \u043F\u043E\u0441\u0442\u0430,\u043D\u043E \u0435\u0441\u0442\u044C \u0434\u043E\u0447\u0435\u0440\u043D\u0438\u0435 \u043A\u043D\u043E\u043F\u043A\u0438 "),r(),s(3," 4. Sport "),_(4,"br"),s(5," 5. Casino "),r())}function l0(a,m){if(a&1&&(i(0,"span",43),s(1),r()),a&2){let e=u().$implicit;l(),w(e.title_for_client)}}function s0(a,m){if(a&1&&(i(0,"div",63)(1,"span"),s(2),P(3,"date"),r(),i(4,"span"),s(5),P(6,"date"),r()()),a&2){let e=u().$implicit;l(2),b("\u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F ",j(3,2,e.created_at,"medium"),""),l(3),b("\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0430 ",j(6,5,e.updated_at,"medium"),"")}}function u0(a,m){if(a&1&&(i(0,"span",43),s(1),r()),a&2){let e=u(2).$implicit;l(),w(e.title_for_client)}}function d0(a,m){if(a&1&&(i(0,"div",70),s(1),r()),a&2){let e=u(2).$implicit;l(),b(" Url: ",e.url," ")}}function m0(a,m){if(a&1&&(i(0,"div",64)(1,"div",65)(2,"span"),s(3),r(),f(4,u0,2,1,"span",22),r(),i(5,"div",66)(6,"div",67),s(7," Order: "),i(8,"span",68),s(9),r()()(),f(10,d0,2,1,"div",69),r()),a&2){let e=u().$implicit,n=u(4).$implicit;l(3),w(e.name),l(),d("ngIf",n.title_for_client),l(5),w(e.order),l(),d("ngIf",e.url)}}function p0(a,m){if(a&1){let e=S();i(0,"div",71)(1,"div",72)(2,"div",73)(3,"label",74),s(4,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u043E\u0441\u0442\u0430:"),r(),i(5,"input",75),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.name,t)||(o.name=t),g(t)}),r()(),i(6,"div",76)(7,"label",74),s(8,"\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u0440\u0435\u0441\u0443\u0440\u0441(\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0439 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440):"),r(),i(9,"input",77),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.url,t)||(o.url=t),g(t)}),r()(),i(10,"div",78)(11,"label",74),s(12,"\u041E\u0447\u0435\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u044C:"),r(),i(13,"input",79),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.order,t)||(o.order=t),g(t)}),r()()(),i(14,"div",80)(15,"span",81),y(),i(16,"svg",82)(17,"path",83),_(18,"animate",84),r()()(),M(),i(19,"span",85),y(),i(20,"svg",86)(21,"g",87)(22,"path",88),_(23,"animate",89),r(),i(24,"path",90),_(25,"animate",91),r()()()()()()}if(a&2){let e=u().$implicit;l(5),x("ngModel",e.name),l(4),x("ngModel",e.url),l(4),x("ngModel",e.order)}}function c0(a,m){if(a&1&&(i(0,"div",55),_(1,"input",56),i(2,"div",57),s(3),f(4,l0,2,1,"span",22),r(),i(5,"div",58),f(6,s0,7,8,"div",59),i(7,"div",60),f(8,m0,11,4,"div",61)(9,p0,26,3,"div",62),r()()()),a&2){let e=m.$implicit,n=u(4).$implicit,t=u();l(3),b(" ",e.name," "),l(),d("ngIf",n.title_for_client),l(2),d("ngIf",!t.isEditing),l(2),d("ngIf",!t.isEditing),l(),d("ngIf",t.isEditing)}}function g0(a,m){if(a&1&&(i(0,"div",52)(1,"h4",53),s(2," \u041A\u043D\u043E\u043F\u043A\u0430(\u0438) \u043F\u043E\u0441\u0442\u0430: "),r(),f(3,c0,10,5,"div",54),r()),a&2){let e=u(3).$implicit;l(3),d("ngForOf",e.buttons)}}function _0(a,m){if(a&1){let e=S();i(0,"div",17)(1,"input",18),h("click",function(){c(e);let t=u(2).index,o=u();return g(o.toggleClick(t))}),r(),i(2,"div",19)(3,"h3",20)(4,"span",21),s(5),r(),s(6),f(7,t0,2,1,"span",22),r(),f(8,i0,2,0,"span",23),r(),i(9,"div",24),f(10,n0,2,1,"span",25),i(11,"div",26)(12,"span",27),s(13," Level menu: "),i(14,"span",28),s(15),r()(),i(16,"p",29),s(17),P(18,"date"),r()(),i(19,"div",30)(20,"h3",31)(21,"span",32),s(22,"After button click"),r(),y(),i(23,"svg",33)(24,"g",34)(25,"path",35),_(26,"animate",36),r(),i(27,"path",37),_(28,"animate",38),r()()()(),M(),i(29,"div",39),f(30,r0,2,1,"figure",14)(31,a0,8,3,"div",40)(32,o0,6,0,"p",41),r(),f(33,g0,4,1,"div",42),r()()()}if(a&2){let e=u(2),n=e.$implicit,t=e.index,o=u();l(2),d("ngClass",ie(15,ri,o.activeIndexes.has(t))),l(3),w(n.order),l(),b("",n.name," "),l(),d("ngIf",n.title_for_client),l(),d("ngIf",o.activeIndexes.has(t)),l(2),d("ngIf",n.title_for_client),l(5),w(n.isActive?1:2),l(2),b(" Last update ",j(18,12,n.updated_at,"medium")," "),l(13),d("ngIf",n.linked_post==null?null:n.linked_post.post_image_url),l(),d("ngIf",n.linked_post),l(),d("ngIf",!n.linked_post),l(),d("ngIf",n.buttons==null?null:n.buttons.length)}}function h0(a,m){if(a&1&&(i(0,"span",43),s(1),r()),a&2){let e=u(4).$implicit;l(),w(e.title_for_client)}}function f0(a,m){if(a&1){let e=S();i(0,"span",44),h("click",function(){c(e);let t=u(4),o=t.$implicit,p=t.index,E=u();return g(E.togleEdit(o,p))}),_(1,"app-edit-icon"),r()}}function x0(a,m){if(a&1&&(i(0,"figure"),_(1,"img",46),r()),a&2){let e=u(4).$implicit;l(),d("src",e.linked_post==null?null:e.linked_post.post_image_url,W)}}function v0(a,m){if(a&1&&(i(0,"span",43),s(1),r()),a&2){let e=u(5).$implicit;l(),w(e==null||e.linked_post==null?null:e.linked_post.title_for_client)}}function C0(a,m){if(a&1&&(i(0,"div",47)(1,"p",20),s(2),r(),i(3,"h3",48),s(4),f(5,v0,2,1,"span",22),r(),i(6,"p"),s(7),r(),_(8,"div",49),r()),a&2){let e=u(4).$implicit;l(2),b(" ID: ",e==null||e.linked_post==null?null:e.linked_post.id," "),l(2),b(" ",e==null||e.linked_post==null?null:e.linked_post.post_title," "),l(),d("ngIf",e.title_for_client),l(2),w(e==null||e.linked_post==null?null:e.linked_post.post_content)}}function b0(a,m){if(a&1&&(i(0,"p",93),s(1),r()),a&2){let e=u(4).$implicit;l(),b(" \u0423 \u043A\u043D\u043E\u043F\u043A\u0438 \u043D\u0435\u0442 \u043F\u043E\u0441\u0442\u0430,\u0430 \u0435\u0441\u0442\u044C \u0434\u043E\u0447\u0435\u0440\u043D\u0438\u0435 \u043A\u043D\u043E\u043F\u043A\u0438 \u0441 \u0440\u043E\u0434\u0438\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u043C ID ",e.parentId," ")}}function w0(a,m){if(a&1&&(i(0,"span",43),s(1),r()),a&2){let e=u().$implicit;l(),w(e==null?null:e.title_for_client)}}function E0(a,m){if(a&1&&(i(0,"div",63)(1,"span"),s(2),P(3,"date"),r(),i(4,"span"),s(5),P(6,"date"),r()()),a&2){let e=u().$implicit;l(2),b("\u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F ",j(3,2,e.created_at,"medium"),""),l(3),b("\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0430 ",j(6,5,e.updated_at,"medium"),"")}}function y0(a,m){if(a&1&&(i(0,"span",43),s(1),r()),a&2){let e=u(2).$implicit;l(),w(e==null?null:e.title_for_client)}}function S0(a,m){if(a&1&&(i(0,"div",70),s(1),r()),a&2){let e=u(2).$implicit;l(),b(" Url: ",e.url," ")}}function M0(a,m){if(a&1&&(i(0,"div",64)(1,"div",65)(2,"span"),s(3),r(),f(4,y0,2,1,"span",22),r(),i(5,"div",66)(6,"div",67),s(7," Order: "),i(8,"span",68),s(9),r()()(),f(10,S0,2,1,"div",69),r()),a&2){let e=u().$implicit,n=u(5).$implicit;l(3),w(e.name),l(),d("ngIf",n.title_for_client),l(5),w(e.order),l(),d("ngIf",e.url)}}function T0(a,m){if(a&1){let e=S();i(0,"div",71)(1,"div",72)(2,"div",73)(3,"label",74),s(4,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u043E\u0441\u0442\u0430:"),r(),i(5,"input",75),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.name,t)||(o.name=t),g(t)}),r()(),i(6,"div",76)(7,"label",74),s(8,"\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u0440\u0435\u0441\u0443\u0440\u0441(\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0439 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440):"),r(),i(9,"input",77),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.url,t)||(o.url=t),g(t)}),r()(),i(10,"div",78)(11,"label",74),s(12,"\u041E\u0447\u0435\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u044C:"),r(),i(13,"input",79),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.order,t)||(o.order=t),g(t)}),r()()(),i(14,"div",80)(15,"span",81),y(),i(16,"svg",82)(17,"path",83),_(18,"animate",84),r()()(),M(),i(19,"span",85),y(),i(20,"svg",86)(21,"g",87)(22,"path",88),_(23,"animate",89),r(),i(24,"path",90),_(25,"animate",91),r()()()()()()}if(a&2){let e=u().$implicit;l(5),x("ngModel",e.name),l(4),x("ngModel",e.url),l(4),x("ngModel",e.order)}}function k0(a,m){if(a&1&&(i(0,"div",55),_(1,"input",56),i(2,"div",57),s(3),f(4,w0,2,1,"span",22),r(),i(5,"div",58),f(6,E0,7,8,"div",59),i(7,"div",60),f(8,M0,11,4,"div",61)(9,T0,26,3,"div",62),r()()()),a&2){let e=m.$implicit,n=u(5).$implicit,t=u();l(3),b(" ",e.name," "),l(),d("ngIf",n.title_for_client),l(2),d("ngIf",!t.isEditing),l(2),d("ngIf",!t.isEditing),l(),d("ngIf",t.isEditing)}}function B0(a,m){if(a&1&&(i(0,"div",52)(1,"h4",53),s(2," \u041A\u043D\u043E\u043F\u043A\u0430(\u0438) \u043F\u043E\u0441\u0442\u0430: "),r(),f(3,k0,10,5,"div",54),r()),a&2){let e=u(4).$implicit;l(3),d("ngForOf",e.buttons)}}function I0(a,m){if(a&1){let e=S();i(0,"div",17)(1,"input",18),h("click",function(){c(e);let t=u(3).index,o=u();return g(o.toggleClick(t))}),r(),i(2,"div",19)(3,"h3",20)(4,"span",21),s(5),r(),s(6),f(7,h0,2,1,"span",22),r(),f(8,f0,2,0,"span",23),r(),i(9,"div",24)(10,"div",26)(11,"span",27),s(12," Level menu: "),i(13,"span",28),s(14),r()(),i(15,"p",29),s(16),P(17,"date"),r()(),i(18,"div",30)(19,"h3",31)(20,"span",32),s(21,"After button click"),r(),y(),i(22,"svg",33)(23,"g",34)(24,"path",35),_(25,"animate",36),r(),i(26,"path",37),_(27,"animate",38),r()()()(),M(),i(28,"div",39),f(29,x0,2,1,"figure",14)(30,C0,9,4,"div",40)(31,b0,2,1,"p",92),r(),f(32,B0,4,1,"div",42),r()()()}if(a&2){let e=u(3),n=e.$implicit,t=e.index,o=u();l(2),d("ngClass",ie(14,ri,o.activeIndexes.has(t))),l(3),w(n.order),l(),b("",n.name," "),l(),d("ngIf",n.title_for_client),l(),d("ngIf",o.activeIndexes.has(t)),l(6),w(n.isActive?1:2),l(2),b(" Last update ",j(17,11,n.updated_at,"medium")," "),l(13),d("ngIf",n.linked_post==null?null:n.linked_post.post_image_url),l(),d("ngIf",n.linked_post),l(),d("ngIf",!n.linked_post),l(),d("ngIf",n.buttons==null?null:n.buttons.length)}}function D0(a,m){if(a&1&&(i(0,"div"),f(1,I0,33,16,"div",16),r()),a&2){let e=u(2).$implicit;l(),d("ngIf",e.parentId)}}function F0(a,m){if(a&1&&(i(0,"div"),f(1,_0,34,17,"div",16)(2,D0,2,1,"div",14),r()),a&2){let e=u().$implicit,n=u();l(),d("ngIf",!e.parentId),l(),d("ngIf",n.isActive)}}function V0(a,m){if(a&1){let e=S();i(0,"div",94)(1,"label",74),s(2,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043D\u043E\u043F\u043A\u0438:"),r(),i(3,"input",95),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.name,t)||(o.name=t),g(t)}),r(),i(4,"label",74),s(5,"\u041F\u043E\u0437\u0438\u0446\u0438\u044F \u043A\u043D\u043E\u043F\u043A\u0438 \u2116"),r(),i(6,"input",96),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.order,t)||(o.order=t),g(t)}),r(),i(7,"label",74),s(8,"\u041A\u043E\u043D\u0442\u0435\u043D\u0442 \u043F\u043E\u0441\u0442\u0430:"),r(),i(9,"textarea",97),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.description,t)||(o.description=t),g(t)}),r(),i(10,"div",98)(11,"button",99),h("click",function(){c(e);let t=u().$implicit,o=u();return g(o.saveChanges(t))}),s(12," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C "),i(13,"span",81),y(),i(14,"svg",86)(15,"path",83),_(16,"animate",84),r()()()()()()}if(a&2){let e=u().$implicit;l(3),x("ngModel",e.name),l(3),x("ngModel",e.order),l(3),x("ngModel",e.description)}}function P0(a,m){if(a&1&&(i(0,"div",13),f(1,F0,3,2,"div",14)(2,V0,17,3,"div",15),r()),a&2){let e=m.$implicit;l(),d("ngIf",!e.isEditing),l(),d("ngIf",e.isEditing)}}var ai=(()=>{class a{menuService;inlineButtonsService;postBotService;menuTables=[];menuPosts=[];successMessage=null;errorMessage=null;activeIndex=null;isEditing=!1;isActive=!1;activeIndexes=new Set;constructor(e,n,t){this.menuService=e,this.inlineButtonsService=n,this.postBotService=t}ngOnInit(){this.loadMenuTables()}loadMenuTables(){this.menuService.getMenuTables().subscribe({next:e=>{this.menuTables=e.map(n=>V(T({},n),{isEditing:!1,buttons:[]})),console.log("\u2705 \u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E menuTables:",this.menuTables),this.loadPosts()},error:()=>{this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0434\u0430\u043D\u043D\u044B\u0445"}})}loadPosts(){this.postBotService.getPosts().subscribe({next:e=>{this.menuPosts=e,this.linkButtonsToTables()},error:()=>{this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043F\u043E\u0441\u0442\u043E\u0432"}})}linkButtonsToTables(){this.menuTables.forEach(e=>{if(e.linked_post){let n=this.menuPosts.find(t=>t.id===e.linked_post.id);n&&(e.buttons=n.buttons?.map(t=>t.button)||[])}})}loadPostButtons(){this.inlineButtonsService.getPostButtons().subscribe({next:e=>{console.log("\u{1F539} \u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u044B \u0441\u0432\u044F\u0437\u0438 \u043F\u043E\u0441\u0442\u043E\u0432 \u0438 \u043A\u043D\u043E\u043F\u043E\u043A:",e),this.menuTables.forEach(n=>{n.linked_post&&(n.buttons=e.filter(t=>t.post.id===n.linked_post.id).map(t=>t.button))}),console.log("\u2705 \u0421\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u043A\u043D\u043E\u043F\u043A\u0438 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u044B:",this.menuTables)},error:()=>{this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043A\u043D\u043E\u043F\u043E\u043A \u043F\u043E\u0441\u0442\u043E\u0432"}})}saveChanges(e){this.menuService.updateMenuTable(e.id,e).subscribe({next:()=>{this.successMessage="\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B!",e.isEditing=!1,setTimeout(()=>{this.closeMessages()},3e3)},error:()=>{this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438 \u0434\u0430\u043D\u043D\u044B\u0445"}}),this.isEditing=!1}clearMessages(){this.successMessage=null,this.errorMessage=null}closeMessages(){this.successMessage=null,this.errorMessage=null}toggleClick(e){this.isEditing=!this.isEditing,e===2&&this.menuTables.map(n=>{this.isActive=!0,console.log("btn",n)}),this.activeIndexes.has(e)?this.activeIndexes.delete(e):this.activeIndexes.add(e),console.log(this.activeIndexes)}togleEdit(e,n){e.isEditing=!e.isEditing,this.activeIndexes.has(n)?this.activeIndexes.delete(n):this.activeIndexes.add(n)}cancelEdit(e){e.isEditing=!1,this.clearMessages()}static \u0275fac=function(n){return new(n||a)(k(ii),k(ni),k(dt))};static \u0275cmp=B({type:a,selectors:[["app-menu-buttons"]],decls:11,vars:4,consts:[[1,"menu-buttons","bg-main-trans-gradient-0","pb-[30px]","min-h-full","h-fit"],[1,"bg-main-trans2-gradient-90","header-tab","flex","items-center","justify-between","px-[20px]","py-[10px]","my-[30px]","rounded-[20px]","w-[70%]","mx-auto"],[1,"title-tab","text-xl","text-main-trans","font-bold"],[1,"text-right","flex","gap-2","items-center","rounded-[20px]","bg-main","px-[15px]","py-[5px]"],[1,"font-bold","text-2xl"],["class","alert alert-success mb-4 relative flex justify-between",4,"ngIf"],["class","alert alert-error relative",4,"ngIf"],["class","w-[80%] mx-auto",4,"ngFor","ngForOf"],[1,"alert","alert-success","mb-4","relative","flex","justify-between"],[1,"close",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","viewBox","0 0 24 24"],["fill","currentColor","d","M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10s10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m3.59-13L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41z"],[1,"alert","alert-error","relative"],[1,"w-[80%]","mx-auto"],[4,"ngIf"],["class","collapse hover-shadow collapse-plus card-body bg-reg my-4 rounded-xl p-[20px] pb-[10px]",4,"ngIf"],["class","collapse hover-shadow-white card-body bg-reg my-4 rounded-xl p-[20px] pb-0 collapse-arrow pt-[10px]",4,"ngIf"],[1,"collapse","hover-shadow-white","card-body","bg-reg","my-4","rounded-xl","p-[20px]","pb-0","collapse-arrow","pt-[10px]"],["type","checkbox",3,"click"],[1,"collapse-title","text-xl","font-medium","flex","items-center","justify-between",3,"ngClass"],[1,"text-indigo-600"],[1,"text-indigo-600","pr-2"],["class","text-gray-500 text-sm pl-4",4,"ngIf"],["class","btn btn-outline hover:bg-regular absolute right-0 bg-reg text-indigo-400 z-10",3,"click",4,"ngIf"],[1,"collapse-content","pb-0","px-0"],["class","text-gray-500 text-sm",4,"ngIf"],[1,"flex","justify-between","pt-4","pb-0","items-center"],[1,"text-sm"],[1,"nj-toast"],[1,"text-end","text-gray-400","text-xs","flex-auto"],[1,"menu-post-item","mb-[40px]"],[1,"text-xl","text-indigo-600","font-bold","py-4","text-center","flex","flex-col","gap-2","items-center","px-0"],[1,"nj-toast-gradient"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 24 24"],["fill","none","stroke","#5045e5ac","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["stroke-dasharray","20","stroke-dashoffset","20","d","M12 3l0 17.5"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.2s","values","20;0"],["stroke-dasharray","12","stroke-dashoffset","12","d","M12 21l7 -7M12 21l-7 -7"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.2s","dur","0.2s","values","12;0"],[1,"card","bg-base-100","mx-auto","w-[100%]","shadow-xl"],["class","card-body p-[10px]",4,"ngIf"],["class","p-10 text-start text-xl text-indigo-400 font-bold",4,"ngIf"],["class","flex flex-col gap-2",4,"ngIf"],[1,"text-gray-500","text-sm","pl-4"],[1,"btn","btn-outline","hover:bg-regular","absolute","right-0","bg-reg","text-indigo-400","z-10",3,"click"],[1,"text-gray-500","text-sm"],["alt","Post Image",3,"src"],[1,"card-body","p-[10px]"],[1,"text-xl","text-indigo-400","font-bold"],[1,"card-actions","justify-center","pt-[20px]"],[1,"p-10","text-start","text-xl","text-indigo-400","font-bold"],[1,"text-gray-400","pb-[5px]","text-lg","block","w-fit","mx-auto"],[1,"flex","flex-col","gap-2"],[1,"text-lg","font-bold","text-indigo-400","pt-4"],["class","collapse collapse-arrow card bg-base-100 mx-auto w-[100%] shadow-xl",4,"ngFor","ngForOf"],[1,"collapse","collapse-arrow","card","bg-base-100","mx-auto","w-[100%]","shadow-xl"],["type","checkbox",1,"peer"],[1,"collapse-title","text-indigo-400","bg-reg","peer-checked:bg-primary","peer-checked:text-white","font-bold","text-lg"],[1,"collapse-content","bg-reg","pb-0"],["class","sub-btn-date flex justify-between text-gray-400 text-xs py-2 px-4",4,"ngIf"],[1,"sub-btn-body-wrapper"],["class","sub-btn-body flex justify-between items-center",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"sub-btn-date","flex","justify-between","text-gray-400","text-xs","py-2","px-4"],[1,"sub-btn-body","flex","justify-between","items-center"],[1,"sub-btn-body-title","text-lg","font-bold","text-indigo-400","flex","gap-2"],[1,"sub-btn-body-order","font-bold","flex","gap-4","items-center"],[1,"order"],[1,"nj-toast-trans"],["class","sub-btn-url",4,"ngIf"],[1,"sub-btn-url"],[1,"flex","items-center"],[1,"form-group-wrapper","flex","flex-1","items-center","gap-4","pt-4"],[1,"form-group","w-[30%]"],[1,"block","text-sm","text-indigo-400","font-bold"],["placeholder","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A",1,"input","w-full","mt-2","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],[1,"form-group","w-[50%]"],["placeholder","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C URL \u043A\u043D\u043E\u043F\u043A\u0438",1,"input","w-full","mt-2","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],[1,"form-group","w-[12.5%]"],["disabled","","placeholder","",1,"input","w-full","mt-2","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],[1,"btn-group","flex","items-center","gap-2","pt-5"],[1,"btn","btn-accent"],["xmlns","http://www.w3.org/2000/svg","width","25","height","25","viewBox","0 0 24 24"],["fill","none","stroke","#fff","stroke-dasharray","24","stroke-dashoffset","24","stroke-linecap","round","stroke-linejoin","round","stroke-width","2.7","d","M5 11l6 6l10 -10"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.96s","values","24;0"],[1,"btn","btn-error"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24"],["fill","none","stroke","#fffFFF","stroke-dasharray","16","stroke-dashoffset","16","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["d","M7 7l10 10"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.4s","values","16;0"],["d","M17 7l-10 10"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.4s","dur","0.4s","values","16;0"],["class","p-10 text-center text-lg",4,"ngIf"],[1,"p-10","text-center","text-lg"],[1,"collapse","hover-shadow","collapse-plus","card-body","bg-reg","my-4","rounded-xl","p-[20px]","pb-[10px]"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A",1,"input","w-full","mt-2","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],["disabled","","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A",1,"input","w-full","mt-2","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],["disabled","","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u043D\u0442\u0435\u043D\u0442 \u043F\u043E\u0441\u0442\u0430",1,"w-full","h-40","border","rounded-lg","px-4","py-2","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],[1,"card-actions","justify-center","pt-4"],[1,"btn","pr-0","text-success",3,"click"]],template:function(n,t){n&1&&(i(0,"section",0)(1,"div",1)(2,"h2",2),s(3," \u0413\u043B\u0430\u0432\u043D\u044B\u0435 \u043A\u043D\u043E\u043F\u043A\u0438 \u043C\u0435\u043D\u044E "),r(),i(4,"p",3),s(5," \u0412\u0441\u0435\u0433\u043E \u043A\u043D\u043E\u043F\u043E\u043A: "),i(6,"span",4),s(7),r()()(),f(8,Zn,6,1,"div",5)(9,e0,5,1,"div",6)(10,P0,3,2,"div",7),r()),n&2&&(l(7),w(t.menuTables.length),l(),d("ngIf",t.successMessage),l(),d("ngIf",t.errorMessage),l(),d("ngForOf",t.menuTables))},dependencies:[ne,H,A,Me,Y,q,Q,le]})}return a})();function z0(a,m){if(a&1&&(i(0,"div",9)(1,"span"),s(2),P(3,"date"),r(),i(4,"span"),s(5),P(6,"date"),r()()),a&2){let e=u().$implicit;l(2),b("\u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F ",j(3,2,e.created_at,"medium"),""),l(3),b("\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0430 ",j(6,5,e.updated_at,"medium"),"")}}function L0(a,m){if(a&1&&(i(0,"div",17),s(1),r()),a&2){let e=u(2).$implicit;l(),b("Url: ",e.url,"")}}function W0(a,m){if(a&1){let e=S();i(0,"div",10)(1,"div",11)(2,"span"),s(3),r()(),i(4,"div",12)(5,"div",13),s(6," Order: "),i(7,"span",14),s(8),r()(),i(9,"span",15),h("click",function(){c(e);let t=u().$implicit,o=u();return g(o.toggleEdit(t))}),_(10,"app-edit-icon"),r()(),f(11,L0,2,1,"div",16),r()}if(a&2){let e=u().$implicit;l(3),w(e.name),l(5),w(e.order),l(3),d("ngIf",e.url)}}function U0(a,m){if(a&1){let e=S();i(0,"div",18)(1,"div",19)(2,"div",20)(3,"label",21),s(4,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u043E\u0441\u0442\u0430:"),r(),i(5,"input",22),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.name,t)||(o.name=t),g(t)}),r()(),i(6,"div",23)(7,"label",21),s(8,"\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u0440\u0435\u0441\u0443\u0440\u0441(\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0439 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440):"),r(),i(9,"input",24),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.url,t)||(o.url=t),g(t)}),r()(),i(10,"div",25)(11,"label",21),s(12,"\u041E\u0447\u0435\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u044C:"),r(),i(13,"input",26),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.order,t)||(o.order=t),g(t)}),r()()(),i(14,"div",27)(15,"span",28),h("click",function(){c(e);let t=u().$implicit,o=u();return g(o.cancelEdit(t))}),y(),i(16,"svg",29)(17,"g",30)(18,"path",31),_(19,"animate",32),r(),i(20,"path",33),_(21,"animate",34),r()()()(),M(),i(22,"span",35),h("click",function(){c(e);let t=u().$implicit,o=u();return g(o.saveChanges(t))}),y(),i(23,"svg",36)(24,"path",37),_(25,"animate",38),r()()()()()}if(a&2){let e=u().$implicit;l(5),x("ngModel",e.name),l(4),x("ngModel",e.url),l(4),x("ngModel",e.order)}}function O0(a,m){if(a&1&&(i(0,"div",1),_(1,"input",2),i(2,"div",3),s(3),r(),i(4,"div",4),f(5,z0,7,8,"div",5),i(6,"div",6),f(7,W0,12,3,"div",7)(8,U0,26,3,"div",8),r()()()),a&2){let e=m.$implicit;l(3),b(" ",e.name," "),l(2),d("ngIf",!e.isEditing),l(2),d("ngIf",!e.isEditing),l(),d("ngIf",e.isEditing)}}var oi=(()=>{class a{menuButtonService;buttons=[];loading=!0;successMessage=null;errorMessage=null;constructor(e){this.menuButtonService=e}ngOnInit(){this.loadButtons()}loadButtons(){this.loading=!0,this.menuButtonService.getButtons().subscribe({next:e=>{this.buttons=e.map(n=>V(T({},n),{isEditing:!1})),this.loading=!1,console.log("\u2705 \u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043A\u043D\u043E\u043F\u043A\u0438 inline",this.buttons)},error:e=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0434\u0430\u043D\u043D\u044B\u0445:",e),this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0434\u0430\u043D\u043D\u044B\u0445",this.loading=!1}})}toggleEdit(e){e.isEditing=!e.isEditing,this.clearMessages()}saveChanges(e){this.menuButtonService.updateButton(e.id,{name:e.name,url:e.url,order:e.order}).subscribe({next:n=>{console.log("\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E \u0443\u0441\u043F\u0435\u0448\u043D\u043E:",n),e.isEditing=!1,this.successMessage="\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B \u0443\u0441\u043F\u0435\u0448\u043D\u043E!",setTimeout(()=>{this.closeSuccessMessage()},3e3),this.loadButtons()},error:n=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438:",n),this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0439",setTimeout(()=>{this.closeErrorMessage()},3e3)}})}cancelEdit(e){e.isEditing=!1,this.loadButtons(),this.clearMessages()}clearMessages(){this.successMessage=null,this.errorMessage=null}closeSuccessMessage(){this.successMessage=null}closeErrorMessage(){this.errorMessage=null}static \u0275fac=function(n){return new(n||a)(k(mt))};static \u0275cmp=B({type:a,selectors:[["app-inline-buttons"]],decls:1,vars:1,consts:[["class","bg-reg collapse collapse-arrow hover-shadow card my-4 w-[98%] mx-auto py-4",4,"ngFor","ngForOf"],[1,"bg-reg","collapse","collapse-arrow","hover-shadow","card","my-4","w-[98%]","mx-auto","py-4"],["type","checkbox",1,"peer"],[1,"collapse-title","text-indigo-400","bg-reg","peer-checked:bg-primary","peer-checked:text-white","font-bold","text-lg","relative"],[1,"collapse-content","bg-reg"],["class","sub-btn-date flex justify-between text-gray-400 text-xs py-2 px-4",4,"ngIf"],[1,"sub-btn-body-wrapper"],["class","sub-btn-body flex justify-between items-center",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"sub-btn-date","flex","justify-between","text-gray-400","text-xs","py-2","px-4"],[1,"sub-btn-body","flex","justify-between","items-center"],[1,"sub-btn-body-title","text-lg","font-bold","text-indigo-400","flex","gap-2"],[1,"sub-btn-body-order","font-bold","flex","gap-4","items-center"],[1,"order"],[1,"nj-toast-trans"],[1,"btn","btn-primary",3,"click"],["class","sub-btn-url",4,"ngIf"],[1,"sub-btn-url"],[1,"flex","items-center"],[1,"form-group-wrapper","flex","flex-1","items-center","gap-4","pt-4"],[1,"form-group","w-[30%]"],[1,"block","text-sm","text-indigo-400","font-bold"],["placeholder","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A",1,"input","w-full","mt-2","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],[1,"form-group","w-[50%]"],["placeholder","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C URL \u043A\u043D\u043E\u043F\u043A\u0438",1,"input","w-full","mt-2","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],[1,"form-group","w-[12.5%]"],["disabled","","placeholder","",1,"input","w-full","mt-2","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],[1,"btn-group","flex","items-center","gap-2","pt-5"],[1,"btn","btn-error",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24","cl",""],["fill","none","stroke","#fffFFF","stroke-dasharray","16","stroke-dashoffset","16","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["d","M7 7l10 10"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.4s","values","16;0"],["d","M17 7l-10 10"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.4s","dur","0.4s","values","16;0"],[1,"btn","btn-accent",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","25","height","25","viewBox","0 0 24 24"],["fill","none","stroke","#fff","stroke-dasharray","24","stroke-dashoffset","24","stroke-linecap","round","stroke-linejoin","round","stroke-width","2.7","d","M5 11l6 6l10 -10"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.96s","values","24;0"]],template:function(n,t){n&1&&f(0,O0,9,4,"div",0),n&2&&d("ngForOf",t.buttons)},dependencies:[H,A,Me,Y,q,Q,le]})}return a})();var li=(()=>{class a{http;apiUrl=I.auth.apiUrl;constructor(e){this.http=e}getNews(){return this.http.get(`${this.apiUrl}news`)}updateNews(e,n){return this.http.put(`${this.apiUrl}news/${e}`,n)}createNews(e){return this.http.post(`${this.apiUrl}news`,e)}deleteNews(e){return this.http.delete(`${this.apiUrl}news/${e}`)}static \u0275fac=function(n){return new(n||a)(N($))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var pt=(()=>{class a{http;apiUrl=`${pe.auth.baseUrl}/categories`;constructor(e){this.http=e}getCategories(){return this.http.get(this.apiUrl)}static \u0275fac=function(n){return new(n||a)(N($))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var H0=a=>({"rotate-180":a}),$0=a=>({"rotate-45":a});function q0(a,m){a&1&&(i(0,"span",45),s(1," \u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0434\u043E\u043C\u0435\u043D, \u0432\u0441\u0442\u0430\u0432\u044C\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0441 \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u0438\u043C \u0434\u043E\u043C\u0435\u043D\u043E\u043C "),_(2,"br"),s(3," https://1xjet.jp/tgadmin/image/example.png \u0438\u043B\u0438 https://1xjet.netlify.app/example.png "),r())}function Q0(a,m){if(a&1&&(i(0,"option",46),s(1),r()),a&2){let e=m.$implicit;d("value",e.id),l(),b(" ",e.name," ")}}function R0(a,m){if(a&1){let e=S();i(0,"div",27)(1,"h3",28),s(2,"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043D\u043E\u0432\u0443\u044E \u043D\u043E\u0432\u043E\u0441\u0442\u044C"),r(),i(3,"div",29)(4,"label",30),s(5,"\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A:"),r(),i(6,"input",31),C("ngModelChange",function(t){c(e);let o=u();return v(o.newNews.post_title,t)||(o.newNews.post_title=t),g(t)}),r()(),i(7,"div",29)(8,"label",30),s(9,"\u041A\u043E\u043D\u0442\u0435\u043D\u0442:"),r(),i(10,"textarea",32),C("ngModelChange",function(t){c(e);let o=u();return v(o.newNews.post_content,t)||(o.newNews.post_content=t),g(t)}),r()(),i(11,"div",29)(12,"label",30),s(13,"URL \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F: "),f(14,q0,4,0,"span",33),r(),i(15,"input",34),C("ngModelChange",function(t){c(e);let o=u();return v(o.newNews.post_image_url,t)||(o.newNews.post_image_url=t),g(t)}),r()(),i(16,"div",29)(17,"label",30),s(18,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043D\u043E\u043F\u043A\u0438:"),r(),i(19,"input",35),C("ngModelChange",function(t){c(e);let o=u();return v(o.newNews.btn_title,t)||(o.newNews.btn_title=t),g(t)}),r()(),i(20,"div",29)(21,"label",30),s(22,"\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u043D\u043E\u0432\u043E\u0441\u0442\u044C"),r(),i(23,"input",36),C("ngModelChange",function(t){c(e);let o=u();return v(o.newNews.news_url,t)||(o.newNews.news_url=t),g(t)}),r()(),i(24,"div",29)(25,"label",30),s(26,"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F:"),r(),i(27,"select",37),C("ngModelChange",function(t){c(e);let o=u();return v(o.newNewsCategoryId,t)||(o.newNewsCategoryId=t),g(t)}),i(28,"option",38),s(29," \u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E "),r(),f(30,Q0,2,2,"option",39),r()(),i(31,"button",40),h("click",function(){c(e);let t=u();return g(t.createNews())}),s(32," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C "),i(33,"span",41),y(),i(34,"svg",42)(35,"path",43),_(36,"animate",44),r()()()()()}if(a&2){let e=u();l(6),x("ngModel",e.newNews.post_title),l(4),x("ngModel",e.newNews.post_content),l(4),d("ngIf",e.newNews.post_image_url&&!e.urlValidationService.isValidImageUrl(e.newNews.post_image_url)),l(),x("ngModel",e.newNews.post_image_url),l(4),x("ngModel",e.newNews.btn_title),l(4),x("ngModel",e.newNews.news_url),l(4),x("ngModel",e.newNewsCategoryId),l(3),d("ngForOf",e.categories),l(),d("disabled",!e.urlValidationService.isValidImageUrl(e.newNews.post_image_url))}}function G0(a,m){if(a&1&&(i(0,"figure"),_(1,"img",78),r()),a&2){let e=u(3).$implicit;l(),d("src",e.post_image_url,W)}}function Y0(a,m){if(a&1&&(i(0,"div",76),f(1,G0,2,1,"figure",77),r()),a&2){let e=u(2).$implicit;l(),d("ngIf",e.post_image_url)}}function X0(a,m){a&1&&(y(),i(0,"svg",79)(1,"g",80)(2,"path",17),_(3,"animate",18),r(),i(4,"path",81),_(5,"animate",82),r()()())}function J0(a,m){a&1&&(y(),i(0,"svg",42)(1,"g",83)(2,"path",84),_(3,"animate",18),r(),i(4,"path",85),_(5,"animate",86),r()()())}function K0(a,m){if(a&1){let e=S();i(0,"div",55),f(1,Y0,2,1,"div",56),i(2,"div",57)(3,"div",58)(4,"p",59),s(5," \u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F: "),i(6,"span",60),s(7),r()(),i(8,"p",61),s(9," isActive: "),f(10,X0,6,0,"svg",62)(11,J0,6,0,"svg",63),r()(),i(12,"h3",64),s(13),r(),i(14,"p",65),s(15),r(),i(16,"div",66)(17,"button",67),h("click",function(){c(e);let t=u().$implicit,o=u(2);return g(o.deleteNews(t.id))}),y(),i(18,"svg",68)(19,"g",69)(20,"path",70),_(21,"animate",71),r(),i(22,"path",72),_(23,"animate",73),r()()()(),M(),i(24,"button",74),h("click",function(){c(e);let t=u().$implicit,o=u(2);return g(o.toggleEdit(t))}),s(25," \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C "),i(26,"span",75),_(27,"app-edit-icon"),r()()()()()}if(a&2){let e=u().$implicit;l(),d("ngIf",e.post_image_url),l(6),w(e==null||e.category==null?null:e.category.name),l(3),d("ngIf",e.isActive),l(),d("ngIf",!e.isActive),l(2),b(" ",e.post_title," "),l(2),b(" ",e.post_content," ")}}function Z0(a,m){if(a&1&&(i(0,"div",90)(1,"div",91)(2,"span",92),s(3," \u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043D\u043E\u043F\u043A\u0438:"),r(),i(4,"span",93),s(5),r()(),i(6,"div",91)(7,"span",93),s(8," \u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u043D\u043E\u0432\u043E\u0441\u0442\u044C"),r(),i(9,"a",94),s(10),r()()()),a&2){let e=u(2).$implicit;l(5),b(" ",e.btn_title," "),l(4),d("href",e.news_url,W),l(),w(e.news_url)}}function er(a,m){if(a&1&&(i(0,"div",87)(1,"p",88),s(2,"\u041A\u043D\u043E\u043F\u043A\u0430 \u043D\u043E\u0432\u043E\u0441\u0442\u0438:"),r(),f(3,Z0,11,3,"div",89),r()),a&2){let e=u().$implicit;l(3),d("ngIf",e.news_url)}}function tr(a,m){a&1&&(i(0,"span",121),s(1," \u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0434\u043E\u043C\u0435\u043D, \u0432\u0441\u0442\u0430\u0432\u044C\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0441 \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u0438\u043C \u0434\u043E\u043C\u0435\u043D\u043E\u043C "),_(2,"br"),s(3," https://1xjet.jp/tgadmin/image/example.png \u0438\u043B\u0438 https://1xjet.netlify.app/example.png "),r())}function ir(a,m){if(a&1&&(i(0,"figure"),_(1,"img",122),r()),a&2){let e=u(3).$implicit;l(),d("src",e.post_image_url,W)}}function nr(a,m){if(a&1&&(i(0,"div",119),f(1,tr,4,0,"span",120)(2,ir,2,1,"figure",77),r()),a&2){let e=u(2).$implicit,n=u(2);l(),d("ngIf",!n.newNews.post_image_url&&!n.urlValidationService.isValidImageUrl(n.newNews.post_image_url)),l(),d("ngIf",e.post_image_url)}}function rr(a,m){if(a&1){let e=S();i(0,"div",95)(1,"div",96)(2,"label",97)(3,"span",98),s(4," Is active ? "),r(),i(5,"input",99),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.isActive,t)||(o.isActive=t),g(t)}),r()()(),i(6,"div",100)(7,"label",101),s(8," \u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043D\u043E\u0432\u043E\u0441\u0442\u0438:"),r(),i(9,"input",102),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.post_title,t)||(o.post_title=t),g(t)}),r()(),i(10,"div",100)(11,"label",101),s(12," \u041A\u043E\u043D\u0442\u0435\u043D\u0442 \u043D\u043E\u0432\u043E\u0441\u0442\u0438:"),r(),i(13,"textarea",103),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.post_content,t)||(o.post_content=t),g(t)}),r()(),i(14,"div",100)(15,"label",101),s(16," \u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435: "),r(),i(17,"input",104),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.post_image_url,t)||(o.post_image_url=t),g(t)}),r(),f(18,nr,3,2,"div",105),r(),i(19,"div",100)(20,"label",101),s(21," \u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F"),r(),i(22,"select",106),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.category,t)||(o.category=t),g(t)}),i(23,"option",107),s(24,"Football"),r(),i(25,"option",108),s(26,"Basketball"),r(),i(27,"option",109),s(28,"Box"),r(),i(29,"option",110),s(30,"UFC"),r()()(),i(31,"div",100)(32,"label",101),s(33," \u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043D\u043E\u043F\u043A\u0438"),r(),i(34,"input",111),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.btn_title,t)||(o.btn_title=t),g(t)}),r()(),i(35,"div",100)(36,"label",101),s(37," \u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u043D\u043E\u0432\u043E\u0441\u0442\u044C"),r(),i(38,"input",112),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.news_url,t)||(o.news_url=t),g(t)}),r()(),i(39,"div",113)(40,"button",114),h("click",function(){c(e);let t=u().$implicit,o=u(2);return g(o.toggleEdit(t))}),y(),i(41,"svg",115)(42,"path",116),_(43,"animate",117),r()()(),M(),i(44,"button",118),h("click",function(){c(e);let t=u().$implicit,o=u(2);return g(o.saveChanges(t))}),s(45," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C "),i(46,"span",41),y(),i(47,"svg",42)(48,"path",43),_(49,"animate",44),r()()()()()()}if(a&2){let e=u().$implicit,n=u(2);l(5),x("ngModel",e.isActive),l(4),x("ngModel",e.post_title),l(4),x("ngModel",e.post_content),l(4),x("ngModel",e.post_image_url),l(),d("ngIf",e.post_image_url),l(4),x("ngModel",e.category),l(12),x("ngModel",e.btn_title),l(4),x("ngModel",e.news_url),l(6),d("disabled",!n.urlValidationService.isValidImageUrl(n.newNews.post_image_url))}}function ar(a,m){if(a&1&&(i(0,"div",48)(1,"div",49)(2,"p",50),s(3),r(),i(4,"div",51)(5,"p",52),s(6),P(7,"date"),r()()(),f(8,K0,28,6,"div",53)(9,er,4,1,"div",54)(10,rr,50,9,"ng-template",null,1,fe),r()),a&2){let e=m.$implicit,n=m.index,t=he(11);l(3),b(" \u{1F4DD} \u041D\u043E\u0432\u043E\u0441\u0442\u044C \u2116",n+1," "),l(3),b(" \u0414\u0430\u0442\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F: ",j(7,5,e.created_at,"medium")," "),l(2),d("ngIf",!e.isEditing)("ngIfElse",t),l(),d("ngIf",!e.isEditing)}}function or(a,m){if(a&1&&(i(0,"div"),f(1,ar,12,8,"div",47),P(2,"sortNews"),r()),a&2){let e=u();l(),d("ngForOf",j(2,1,e.newsItems,e.ascending))}}function lr(a,m){a&1&&(i(0,"div",123),y(),i(1,"svg",124)(2,"defs")(3,"radialGradient",125),_(4,"stop",126)(5,"stop",127),r(),i(6,"radialGradient",128),_(7,"stop",129)(8,"stop",130),r(),i(9,"radialGradient",131),_(10,"stop",132)(11,"stop",133),r()(),i(12,"circle",134),_(13,"animate",135)(14,"animate",136),r(),i(15,"circle",137),_(16,"animate",138)(17,"animate",139),r(),i(18,"circle",140),_(19,"animate",141)(20,"animate",142),r()()())}function sr(a,m){if(a&1){let e=S();i(0,"div",143)(1,"b"),s(2),r(),i(3,"span",144),h("click",function(){c(e);let t=u();return g(t.closeSuccessMessage())}),y(),i(4,"svg",145),_(5,"path",146),r()()()}if(a&2){let e=u();l(2),b(" ",e.successMessage," ")}}function ur(a,m){if(a&1){let e=S();i(0,"div",147),s(1),i(2,"span",144),h("click",function(){c(e);let t=u();return g(t.closeErrorMessage())}),y(),i(3,"svg",145),_(4,"path",146),r()()()}if(a&2){let e=u();l(),b(" ",e.errorMessage," ")}}var ui=(()=>{class a{newsBotService;newsCategoryService;urlValidationService;newsItems=[];categories=[];loading=!0;successMessage=null;errorMessage=null;isOpen=!1;newNews={post_title:"",post_content:"",post_image_url:"",news_url:"",isActive:!0};newNewsCategoryId=null;ascending=!1;constructor(e,n,t){this.newsBotService=e,this.newsCategoryService=n,this.urlValidationService=t}ngOnInit(){let e=localStorage.getItem("newsSortOrder");this.ascending=e?JSON.parse(e):!1,this.loadNews(),this.loadCategories()}loadNews(){this.newsBotService.getNews().subscribe({next:e=>{this.newsItems=e.map(n=>V(T({},n),{isEditing:!1})),this.loading=!1,console.log("NEWS",e)},error:e=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043D\u043E\u0432\u043E\u0441\u0442\u0435\u0439:",e),this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043D\u043E\u0432\u043E\u0441\u0442\u0435\u0439",this.loading=!1}})}loadCategories(){this.newsCategoryService.getCategories().subscribe({next:e=>{this.categories=e,console.log("Category",e)},error:e=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439:",e),this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439"}})}createNews(){if(!this.newNews.post_title||!this.newNews.post_content||!this.newNewsCategoryId){this.errorMessage="\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u043F\u043E\u043B\u044F (\u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A, \u043A\u043E\u043D\u0442\u0435\u043D\u0442, \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F)";return}this.newNews.category={id:this.newNewsCategoryId},this.newsBotService.createNews(this.newNews).subscribe({next:e=>{this.newsItems.push(V(T({},e),{isEditing:!1})),this.successMessage="\u041D\u043E\u0432\u043E\u0441\u0442\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D\u0430!",this.newNews={post_title:"",post_content:"",post_image_url:"",news_url:"",isActive:!0},this.newNewsCategoryId=null,setTimeout(()=>this.closeSuccessMessage(),3e3)},error:e=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0438 \u043D\u043E\u0432\u043E\u0441\u0442\u0438:",e),this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0438 \u043D\u043E\u0432\u043E\u0441\u0442\u0438",setTimeout(()=>this.closeErrorMessage(),3e3)}})}deleteNews(e){this.newsBotService.deleteNews(e).subscribe({next:()=>{this.newsItems=this.newsItems.filter(n=>n.id!==e),this.successMessage="\u041D\u043E\u0432\u043E\u0441\u0442\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D\u0430!",setTimeout(()=>this.closeSuccessMessage(),3e3)},error:n=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u043D\u043E\u0432\u043E\u0441\u0442\u0438:",n),this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u043D\u043E\u0432\u043E\u0441\u0442\u0438",setTimeout(()=>this.closeErrorMessage(),3e3)}})}toggleEdit(e){e.isEditing=!e.isEditing,this.clearMessages()}saveChanges(e){let n={post_title:e.post_title,post_content:e.post_content,post_image_url:e.post_image_url,category:e.category,isActive:e.isActive,news_url:e.news_url};this.newsBotService.updateNews(e.id,n).subscribe({next:t=>{e.isEditing=!1,this.successMessage="\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B \u0443\u0441\u043F\u0435\u0448\u043D\u043E!",setTimeout(()=>this.closeSuccessMessage(),3e3)},error:t=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438 \u043D\u043E\u0432\u043E\u0441\u0442\u0438:",t),this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0439",setTimeout(()=>this.closeErrorMessage(),3e3)}})}closeSuccessMessage(){this.successMessage=null}closeErrorMessage(){this.errorMessage=null}clearMessages(){this.successMessage=null,this.errorMessage=null}openCreateModal(){this.isOpen=!this.isOpen}toggleSortOrder(){this.ascending=!this.ascending,localStorage.setItem("newsSortOrder",JSON.stringify(this.ascending))}static \u0275fac=function(n){return new(n||a)(k(li),k(pt),k(ye))};static \u0275cmp=B({type:a,selectors:[["app-news-bot"]],decls:31,vars:13,consts:[["loadingTemplate",""],["editMode",""],[1,"news-bot","w-full","pb-[25px]"],[1,"title-group","relative"],[1,"header-tab","flex","items-center","justify-between","px-[20px]","py-[20px]","my-[40px]","mb-0","rounded-[20px]","w-[70%]","mx-auto","bg-gradient-to-r","from-indigo-500","to-purple-500","iten"],[1,"text-xl","font-bold","text-white"],[1,"flex","items-center","gap-4"],[1,"text-right","text-white","flex","gap-2","items-center"],[1,"font-bold","text-2xl"],["data-tip","\u0421\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u043E \u0434\u0430\u0442\u0435",1,"tooltip","tooltip-bottom","tooltip-ghost","absolute","top-0","right-[10%]"],[1,"mt-3","hover-shadow","rounded-xl",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","width","45","height","45","viewBox","0 0 24 24",1,"transition-transform","duration-300",3,"ngClass"],["fill","currentColor","d","M8.734 18.308q-2.667 0-4.527-1.867t-1.86-4.534T4.208 7.37T8.733 5.5t4.532 1.867t1.87 4.534t-1.867 4.537t-4.534 1.87m10.65.692l-2.692-2.692l.714-.708l1.479 1.479V5h1v12.085l1.484-1.485l.708.708zm-8.345-4.02l.727-.707l-2.516-2.54v-3.54h-1v4z"],[1,"flex","items-center","justify-center","my-5","gap-2","cursor-pointer","w-fit","mx-auto","hover:scale-105","active:scale-100","transition-all","ease-in","duration-300","hover-shadow","p-2","rounded-lg",3,"click"],[1,"text-2xl","text-indigo-600"],["xmlns","http://www.w3.org/2000/svg","width","60","height","60","viewBox","0 0 24 24",1,"transition-all","ease-in","duration-300",3,"ngClass"],["fill","none","stroke","#4f45e5","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["stroke-dasharray","64","stroke-dashoffset","64","d","M3 12c0 -4.97 4.03 -9 9 -9c4.97 0 9 4.03 9 9c0 4.97 -4.03 9 -9 9c-4.97 0 -9 -4.03 -9 -9Z"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.6s","values","64;0"],["stroke-dasharray","12","stroke-dashoffset","12","d","M7 12h10"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.6s","dur","0.2s","values","12;0"],["stroke-dasharray","12","stroke-dashoffset","12","d","M12 7v10"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.8s","dur","0.2s","values","12;0"],["class","w-[70%] mx-auto p-4 shadow-lg rounded-lg mb-8 hover-shadow",4,"ngIf"],[4,"ngIf","ngIfElse"],["class","alert alert-success mb-4 relative flex justify-between",4,"ngIf"],["class","alert alert-error relative",4,"ngIf"],[1,"w-[70%]","mx-auto","p-4","shadow-lg","rounded-lg","mb-8","hover-shadow"],[1,"text-xl","font-bold","mb-4"],[1,"mb-4"],[1,"block","text-lg","text-indigo-400","font-bold","mb-0"],["type","text","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A",1,"input","w-full","mt-1","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u043D\u0442\u0435\u043D\u0442",1,"input","w-full","mt-1","mb-4","border","h-[200px]","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],["class","text-red-500 text-sm mt-2 block pt-2",4,"ngIf"],["type","text","placeholder","https://image.com",1,"input","w-full","mt-1","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],["placeholder","\u041A\u043D\u043E\u043F\u0430",1,"input","w-full","mt-1","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],["type","text","placeholder","https://example.com",1,"input","w-full","mt-1","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],[1,"select","select-bordered","w-full","mt-1","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],["value","","disabled","","selected","",1,"text-lg","text-gray-700"],["class","text-lg",3,"value",4,"ngFor","ngForOf"],[1,"btn","pr-0","text-success","mx-auto","flex","items-center","my-3",3,"click","disabled"],[1,"btn","btn-accent"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24"],["fill","none","stroke","#fff","stroke-dasharray","24","stroke-dashoffset","24","stroke-linecap","round","stroke-linejoin","round","stroke-width","2.7","d","M5 11l6 6l10 -10"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.96s","values","24;0"],[1,"text-red-500","text-sm","mt-2","block","pt-2"],[1,"text-lg",3,"value"],["class","news-card mb-8 mt-4",4,"ngFor","ngForOf"],[1,"news-card","mb-8","mt-4"],[1,"flex","items-center","justify-between","w-[70%]","mx-auto","pt-[20px]","mb-[20px]"],[1,"text-lg","font-bold","text-indigo-600","nj-toast-gradient"],[1,"card-date","flex","items-center","gap-2"],[1,"text-xs","text-gray-500"],["class","card-body news-body hover-shadow m-[20px] rounded-[20px] p-0",4,"ngIf","ngIfElse"],["class","btn-news w-main px-6",4,"ngIf"],[1,"card-body","news-body","hover-shadow","m-[20px]","rounded-[20px]","p-0"],["class","img-wrapper w-full h-[350px] relative",4,"ngIf"],[1,"card-content-wrapp","p-[40px]","pt-[20px]","bg-white","z-10","rounded-[20px]"],[1,"card-header","flex","justify-around","items-center"],[1,"text-lg","text-gray-600","font-bold","flex-[80%]"],[1,"nj-toast-gradient","bg-gradient-to-r","from-indigo-500","to-purple-500","iten"],[1,"w-fit","text-gray-400","text-sm","flex","items-center","justify-center"],["class","","xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24",4,"ngIf"],[1,"collapse-title","text-indigo-400","bg-reg","peer-checked:bg-primary","peer-checked:text-white","font-bold","text-xl","pl-0","pb-4","pt-5","min-h-2"],[1,"text-sm","py-2"],[1,"text-right","flex","items-center","gap-1","justify-end","my-3"],[1,"btn","btn-error","mb-0",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","none","stroke","#fff","stroke-dasharray","24","stroke-dashoffset","24","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["d","M5 5l14 14"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.4s","values","24;0"],["d","M19 5l-14 14"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.4s","dur","0.4s","values","24;0"],[1,"btn","btn-ghost","pr-0",3,"click"],[1,"btn","btn-primary"],[1,"img-wrapper","w-full","h-[350px]","relative"],[4,"ngIf"],["alt","Post Image",1,"rounded-[20px]",3,"src"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24",1,""],["fill","none","stroke","#3f9f52cb","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["stroke-dasharray","14","stroke-dashoffset","14","d","M8 12l3 3l5 -5"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.6s","dur","0.2s","values","14;0"],["fill","none","stroke","#ff4400","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["stroke-dasharray","64","stroke-dashoffset","64","d","M12 3c4.97 0 9 4.03 9 9c0 4.97 -4.03 9 -9 9c-4.97 0 -9 -4.03 -9 -9c0 -4.97 4.03 -9 9 -9Z"],["stroke-dasharray","8","stroke-dashoffset","8","d","M12 12l4 4M12 12l-4 -4M12 12l-4 4M12 12l4 -4"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.6s","dur","0.2s","values","8;0"],[1,"btn-news","w-main","px-6"],[1,"text-lg","text-black","my-2","font-bold"],["class","flex items-center justify-between gap-2 nj-toast-gradient text-white",4,"ngIf"],[1,"flex","items-center","justify-between","gap-2","nj-toast-gradient","text-white"],[1,"flex","items-center","gap-2"],[1,"text-lg","text-white","text-nowrap"],[1,"text-lg","text-white","font-bold","text-nowrap"],["target","_blank",1,"underline","text-sm","text-nowrap","overflow-x-auto",3,"href"],[1,"card-body","w-[70%]","mx-auto","hover-shadow","rounded-xl","px-[40px]"],[1,"flex","flex-col","items-start","btn","btn-ghost","btn-access","w-fit","mb-2"],[1,"label","cursor-pointer"],[1,"block","text-lg","font-bold","pr-1"],["type","checkbox","checked","checked",1,"checkbox","checkbox-success",3,"ngModelChange","ngModel"],[1,""],[1,"block","text-sm","text-indigo-400","font-bold"],["placeholder","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043D\u043E\u0432\u043E\u0441\u0442\u0438",1,"input","w-full","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],["placeholder","\u041A\u043E\u043D\u0442\u0435\u043D\u0442 \u043D\u043E\u0432\u043E\u0441\u0442\u0438",1,"w-full","h-40","border","rounded-lg","px-4","py-2","focus:ring","focus:ring-blue-300","focus:ring-opacity-40","focus-visible:no-underline","text-sm",3,"ngModelChange","ngModel"],["placeholder","URL \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",1,"input","w-full","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40","text-sm",3,"ngModelChange","ngModel"],["class","img-wrapper w-[350px] h-auto relative",4,"ngIf"],[1,"select","select-bordered","input","w-full","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],["value","football"],["value","basketball"],["value","box"],["value","ufc"],["placeholder","\u041A\u043D\u043E\u043F\u0430",1,"input","w-full","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel"],["placeholder","https://example.com",1,"input","w-full","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40","text-sm",3,"ngModelChange","ngModel"],[1,"flex","justify-end","items-center","gap-4"],[1,"btn","btn-danger",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","35","height","40","viewBox","0 0 24 24"],["fill","#fff","stroke","#fff","stroke-dasharray","12","stroke-dashoffset","12","stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M12 12l7 7M12 12l-7 -7M12 12l-7 7M12 12l7 -7"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.3s","values","12;0"],[1,"btn","pr-0","text-success",3,"click","disabled"],[1,"img-wrapper","w-[350px]","h-auto","relative"],["class","text-red-500 text-sm mt-2 block w-full",4,"ngIf"],[1,"text-red-500","text-sm","mt-2","block","w-full"],["alt","Post Image",1,"rounded-[35px]",3,"src"],[1,"isLoading","fixed","z-10"],["xmlns","http://www.w3.org/2000/svg","width","300","height","300","viewBox","0 0 24 24",1,""],["id","gradient1","cx","50%","cy","50%","r","50%"],["offset","0%","stop-color","oklch(51.01% 0.274 263.83)"],["offset","100%","stop-color","#4f45e5"],["id","gradient2","cx","50%","cy","50%","r","50%"],["offset","0%","stop-color","oklch(47.66% 0.246 305.88)"],["offset","100%","stop-color","#818cf8"],["id","gradient3","cx","50%","cy","50%","r","50%"],["offset","0%","stop-color","#4f45e5"],["offset","100%","stop-color","#8845e5"],["cx","12","cy","12","r","0","fill","url(#gradient1)"],["id","svgSpinnersPulseMultiple0","fill","freeze","attributeName","r","begin","0;svgSpinnersPulseMultiple2.end","calcMode","spline","dur","1.2s","keySplines",".52,.6,.25,.99","values","0;11"],["fill","freeze","attributeName","opacity","begin","0;svgSpinnersPulseMultiple2.end","calcMode","spline","dur","1.2s","keySplines",".52,.6,.25,.99","values","1;0"],["cx","12","cy","12","r","0","fill","url(#gradient2)"],["id","svgSpinnersPulseMultiple1","fill","freeze","attributeName","r","begin","svgSpinnersPulseMultiple0.begin+0.2s","calcMode","spline","dur","1.2s","keySplines",".52,.6,.25,.99","values","0;11"],["fill","freeze","attributeName","opacity","begin","svgSpinnersPulseMultiple0.begin+0.2s","calcMode","spline","dur","1.2s","keySplines",".52,.6,.25,.99","values","1;0"],["cx","12","cy","12","r","0","fill","url(#gradient3)"],["id","svgSpinnersPulseMultiple2","fill","freeze","attributeName","r","begin","svgSpinnersPulseMultiple0.begin+0.4s","calcMode","spline","dur","1.2s","keySplines",".52,.6,.25,.99","values","0;11"],["fill","freeze","attributeName","opacity","begin","svgSpinnersPulseMultiple0.begin+0.4s","calcMode","spline","dur","1.2s","keySplines",".52,.6,.25,.99","values","1;0"],[1,"alert","alert-success","mb-4","relative","flex","justify-between"],[1,"close",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","viewBox","0 0 24 24"],["fill","currentColor","d","M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10s10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m3.59-13L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41z"],[1,"alert","alert-error","relative"]],template:function(n,t){if(n&1){let o=S();i(0,"section",2)(1,"div",3)(2,"div",4)(3,"h2",5),s(4,"News bot"),r(),i(5,"div",6)(6,"p",7),s(7," \u0412\u0441\u0435\u0433\u043E \u043D\u043E\u0432\u043E\u0441\u0442\u0435\u0439: "),i(8,"span",8),s(9),r()()()(),i(10,"div",9)(11,"button",10),h("click",function(){return c(o),g(t.toggleSortOrder())}),y(),i(12,"svg",11),_(13,"path",12),r()()()(),M(),i(14,"div",13),h("click",function(){return c(o),g(t.openCreateModal())}),i(15,"span",14),s(16,"Create news"),r(),y(),i(17,"svg",15)(18,"g",16)(19,"path",17),_(20,"animate",18),r(),i(21,"path",19),_(22,"animate",20),r(),i(23,"path",21),_(24,"animate",22),r()()()(),f(25,R0,37,9,"div",23)(26,or,3,4,"div",24)(27,lr,21,0,"ng-template",null,0,fe)(29,sr,6,1,"div",25)(30,ur,5,1,"div",26),r()}if(n&2){let o=he(28);l(9),w(t.newsItems.length),l(2),ze("title",t.ascending?"\u0421\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C: \u0441\u0442\u0430\u0440\u044B\u0435 \u2192 \u043D\u043E\u0432\u044B\u0435":"\u0421\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C: \u043D\u043E\u0432\u044B\u0435 \u2192 \u0441\u0442\u0430\u0440\u044B\u0435"),l(),d("ngClass",ie(9,H0,t.ascending)),l(5),d("ngClass",ie(11,$0,t.isOpen)),l(8),d("ngIf",t.isOpen),l(),d("ngIf",!t.loading)("ngIfElse",o),l(3),d("ngIf",t.successMessage),l(),d("ngIf",t.errorMessage)}},dependencies:[ne,H,A,Me,Z,ee,Y,Be,re,q,Q,le,Yt]})}return a})();var di=(()=>{class a{static \u0275fac=function(n){return new(n||a)};static \u0275cmp=B({type:a,selectors:[["app-admin-page"]],decls:35,vars:0,consts:[[1,"admin-page","ml-side"],[1,"container","mx-auto","pt-[10px]"],[1,"bg-main-trans2-gradient-90","header-tab","flex","items-center","justify-between","py-[10px]","mb-[0px]","rounded-[20px]","w-[100%]","pr-4"],[1,"title-tab","text-2xl","font-bold","text-indigo-600"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 24 24"],["fill","none","stroke","#4f45e5","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["stroke-dasharray","20","stroke-dashoffset","20","d","M3 21h18"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.2s","values","20;0"],["fill","#4e46e553","fill-opacity","0","stroke-dasharray","48","stroke-dashoffset","48","d","M7 17v-4l10 -10l4 4l-10 10h-4"],["fill","freeze","attributeName","fill-opacity","begin","1.1s","dur","0.5s","values","0;1"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.2s","dur","0.6s","values","48;0"],["stroke-dasharray","8","stroke-dashoffset","8","d","M14 6l4 4"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.8s","dur","0.2s","values","8;0"],["role","tablist",1,"tabs","tabs-lifted"],["type","radio","name","my_tabs_2","role","tab","aria-label","\u041F\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0431\u043E\u0442\u0430",1,"tab","tabs-title-input"],["role","tabpanel",1,"tab-content","bg-base-100","border-base-300","rounded-box","h-[82dvh]"],[1,"tabpanel-wrapper"],["type","radio","name","my_tabs_2","role","tab","aria-label","\u041F\u043E\u0441\u0442\u044B \u0431\u043E\u0442\u0430","checked","checked",1,"tab","tabs-title-input"],["type","radio","name","my_tabs_2","role","tab","aria-label","\u0413\u043B\u0430\u0432\u043D\u043E\u0435 \u043C\u0435\u043D\u044E \u0431\u043E\u0442\u0430",1,"tab","tabs-title-input"],["type","radio","name","my_tabs_2","role","tab","aria-label","\u041D\u043E\u0432\u043E\u0441\u0442\u0438",1,"tab","tabs-title-input"]],template:function(n,t){n&1&&(_(0,"app-sidebar"),i(1,"section",0)(2,"div",1)(3,"div",2)(4,"h2",3),s(5," \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043D\u0442\u0435\u043D\u0442\u0430 "),r(),y(),i(6,"svg",4)(7,"g",5)(8,"path",6),_(9,"animate",7),r(),i(10,"path",8),_(11,"animate",9)(12,"animate",10),r(),i(13,"path",11),_(14,"animate",12),r()()()(),M(),i(15,"div",13),_(16,"input",14),i(17,"div",15)(18,"div",16),_(19,"app-greeting-bot"),r()(),_(20,"input",17),i(21,"div",15)(22,"div",16),_(23,"app-posts-bot"),r()(),_(24,"input",18),i(25,"div",15)(26,"div",16),_(27,"app-menu-buttons"),r()(),i(28,"div",15)(29,"div",16),_(30,"app-inline-buttons"),r()(),_(31,"input",19),i(32,"div",15)(33,"div",16),_(34,"app-news-bot"),r()()()()())},dependencies:[de,Kt,ti,ai,oi,ui],styles:['.admin-page[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.tabpanel-wrapper[_ngcontent-%COMP%]{height:100%}.title-tab[_ngcontent-%COMP%]{position:relative;padding-left:10px}.title-tab[_ngcontent-%COMP%]:after{content:"";position:absolute;height:100%;width:4px;background:#4f45e5;left:0;bottom:0}.tabs[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4f45e5,transparent);border-radius:var(--rounded-box, 1rem);padding-top:5px}.tabs-title-input[_ngcontent-%COMP%]{width:fit-content;text-wrap:nowrap;color:#fff;font-weight:700}.tab-content[_ngcontent-%COMP%]{overflow:hidden;overflow-y:auto}.tab.tabs-title-input[_ngcontent-%COMP%]{transition:.1s ease-in;margin:0;padding:0 5px}.tab.tabs-title-input[_ngcontent-%COMP%]:hover{-webkit-backdrop-filter:brightness(.5);backdrop-filter:brightness(.5)}.card-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{cursor:pointer}.card-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:0 0 15px #4e46e580;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .3s ease-in-out}.card-list[_ngcontent-%COMP%]   .input-title[_ngcontent-%COMP%]{border-radius:20px 0 0 20px}.card-list[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{border-radius:0 20px 20px 0}.alert[_ngcontent-%COMP%], .alert-success[_ngcontent-%COMP%], .alert.alert-success[_ngcontent-%COMP%]{top:20px;position:fixed;z-index:9999;width:50%;display:flex;justify-content:center;align-items:center;left:50%;transform:translate(-50%);opacity:.7;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}']})}return a})();var mi=(()=>{class a{static \u0275fac=function(n){return new(n||a)};static \u0275cmp=B({type:a,selectors:[["app-add-button"]],decls:69,vars:0,consts:[[1,"added-page","relative","container","mx-auto"],["id","monkey_404","viewBox","0 0 800 480"],["type","text/css"],["id","cloud","d",`M658.4,345.2c-10.9,0-19.7-8.8-19.7-19.7c0-10.9,8.8-19.7,19.7-19.7h50.1c9.9-1.5,17.5-10,17.5-20.3
    c0-11.4-9.2-20.6-20.6-20.6v-0.2H633c-11.4,0-20.6-6.7-20.6-18.1c0-11.4,9.2-19.3,20.6-19.3h70.4l2-0.2c7.3-3.1,12.5-11,12.5-19.5
    c0-8.5-4.2-16.7-11.4-19.2l-2.5-0.3h-11.3c-11.9,0-21.6-8.9-21.6-19.9c0-11,9.7-19.9,21.6-19.9h15.8l1.4-0.3
    c8.6-2.5,14.8-10.1,14.8-19.5c0-11.4-9.2-20.6-20.6-20.6h-1.2h-69.2H382.5c-19.8-0.9-19.9-15.9-19.8-17.8c0-0.1,0-0.1,0-0.2
    c0-9.9-8.1-18-18-18h-93.5c-9.9,0-18,8.1-18,18c0,9.4,7.2,17.1,16.3,17.9h9.3c0.2,0,0,0,0.6,0l0.5,0l0.4,0l0.2,0
    c10.1,0.9,18,9.3,18,19.6c0,10.9-8.8,19.7-19.7,19.7h-70.7c-11.3,0-20.5,9.2-20.5,20.6c0,11.3,9.1,20.5,20.4,20.6h48.8
    c10.3,0,18.7,8.4,18.7,18.7c0,10.3-8.4,18.7-18.7,18.7h-23.2c-11.3,0.1-20.4,9.2-20.4,20.6c0,11.3,9.2,20.5,20.5,20.6h6.3
    c10.7,0,19.3,8.7,19.3,19.3c0,10.7-7.8,19.3-18.4,19.3l-1.5,0l-2.8,0.4c-7.3,3.1-11.8,11-11.5,18.9c0.3,8.5,4.2,16.5,11.7,19.6
    c1.1,0.7,3.4,0.9,4.4,0.9h4.5H296h19.7c3.9,0.5,8.2,4.2,7.4,10.4c0,0.4,0,0.8,0.1,1.1c0,0.5-0.1,1-0.1,1.5c0,9.7,7.9,17.5,17.5,17.5
    h60.2c9.7,0,17.5-7.9,17.5-17.5c0-0.4,0-0.8-0.1-1.2c0.1-0.3,0-0.7,0.1-1.1c0.3-6.5,6.4-10.9,10.6-10.8h110.1
    c8.5,0,16.9,6.6,16.9,14.8c0,8.2,6.6,14.8,14.8,14.8h92.6c8.2,0,14.8-6.6,14.8-14.8c0-8.2-6.6-14.8-14.8-14.8 M332.8,187.1h-21.2
    c-11.4,0-20.6-9.2-20.6-20.6c0-11.4,9.2-20.6,20.6-20.6h21.2c11.4,0,20.6,9.2,20.6,20.6C353.3,177.9,344.1,187.1,332.8,187.1z`,1,"st0"],["id","zelda"],["id","zelda_dark_shadow","d",`M156.9,91.5l-18.5-32l18.5,10.7L156.9,91.5z M193.8,70.2l-18.5-10.7l18.5,32
      L193.8,70.2z M175.4,102.2l-18.5-10.7l18.5,32L175.4,102.2z`,1,"st0"],["id","zelda_light_shadow","d",`M175.4,59.5l-18.5,10.7l-18.5-10.7H175.4z M175.4,59.5l18.5,10.7l18.5-10.7H175.4z
       M156.9,91.5l18.5,10.7l18.5-10.7H156.9z`,1,"st0"],["id","zelda_highlight","d",`M150.6,66.6h12.5l-6.3,10.8L150.6,66.6z M193.8,77.4l6.3-10.8h-12.5L193.8,77.4z
       M175.4,109.4l6.3-10.8h-12.5L175.4,109.4z`,1,"st1"],["id","zelda_stroke","d",`M138.4,59.5h36.9l-18.5,32L138.4,59.5z M193.8,91.5l18.5-32h-36.9L193.8,91.5z M175.4,123.5
      l18.5-32h-36.9L175.4,123.5z`,1,"st2"],["id","rock_shade","d","M243.3,374.9H140.1c-1.7,0-2.1,2.5-0.4,2.9l44.7,12.6l-19.3,45l34-46.5l39.4-7.4L243.3,374.9z",1,"st0"],["id","rock","d","M104,367.5h134.6c1.9,3.5,2.3,4.3,4.1,7.8l-4.3,6.3L199,389l-40,52",1,"st5"],["id","foot_back","d","M187.3,354.5c2.2-4.5,1.6-12.8-3.3-18.5l-9.3,2c2.2,3.5,8.3,7.7,2.3,20.8 c-1.9,4.2-0.8,8.7,4,8.7h22.3c6.5,0,5.3-7.9,2-10.5c-4.2-3.3-10.2-3.6-15.3-1C187.9,357.1,185.3,358.7,187.3,354.5z",1,"st3"],["id","foot_front","d","M166.3,354.5c2.2-4.5,1.6-12.8-3.3-18.5l-9.3,2c2.2,3.5,8.3,7.7,2.3,20.8 c-1.9,4.2-0.8,8.7,4,8.7h22.3c6.5,0,5.3-7.9,2-10.5c-4.2-3.3-10.2-3.6-15.3-1C166.9,357.1,164.3,358.7,166.3,354.5z",1,"st4"],["id","monkey"],["id","face_1_","d",`M213.7,245.2c0,0-6-2.9-11,0.2c-4.6,2.8-9.4,1.7-14,0c-4.6-1.7-16-5.1-19.2,2.6
      c-2,3.8-2.3,9.7,3.8,16.3c-0.9,10.1-2.9,37.9,28.6,34.2c10.1-1.2,24.8-12.7,25.4-18.2s-1.2-6.8-6.4-6.9
      c-1.3-6.5-2.4-12.6-10.8-11.4c-3.9,0.2,7.5,0,8.1-7.5C218.6,247.8,213.7,245.2,213.7,245.2z`,1,"st4"],["id","body","d",`M199.8,299.3l9-55.5c0,0-2.1-3.6-7.2-7.1c1.4-1.2,2.2-3.1,1.8-5c-0.6-3.1-3.9-5.3-7.5-4.8
      c-2.9,0.4-5,2.4-5.4,4.8l0,0c-7.2-1.9-16.5-1.9-29.5,1.6c-1.5-3.1-5.6-5.4-9.3-5.7c-5.5-0.4-9.3,3.7-9.7,9.3
      c-0.3,4.4,2.2,8.3,6.1,9.9c-16,25.6-14.6,58.2-11,71.9c4.3,16.1,18.2,21.8,26.3,21.8c13,0,33.8-1.9,37.5-17.7
      C202.9,315,202,303.9,199.8,299.3z`,1,"st4"],["id","tail","d",`M89,315c2.2-15.2-23-13.2-21.6,4.8c1.7,22.3,24.4,22.1,42.5,9.1c10.8-7.8,15.3-1.8,19.1,1.1
      c2.3,1.7,6.7,3.3,11-3`,1,"st6"],["id","face","d",`M213.7,245.2c0,0-6-2.9-11,0.2c-4.6,2.8-9.4,1.7-14,0c-4.6-1.7-16-5.1-19.2,2.6
      c-2,3.8-2.3,9.7,3.8,16.3c-0.9,10.1-2.9,37.9,28.6,34.2c10.1-1.2,24.8-12.7,25.4-18.2s-1.2-6.8-6.4-6.9
      c-1.3-6.5-2.4-12.6-10.8-11.4c-3.9,0.2,7.5,0,8.1-7.5C218.6,247.8,213.7,245.2,213.7,245.2z`,1,"st7"],["id","mouth","d",`M201.6,281.5c0,0,0.2-0.3,0.5-0.8c0.1-0.3,0.4-0.6,0.6-0.9c0.2-0.4,0.6-0.7,0.9-1.1
      c0.4-0.4,0.8-0.8,1.2-1.2c0.5-0.4,0.9-0.8,1.5-1.2c0.5-0.4,1.1-0.7,1.7-1.1c0.6-0.3,1.2-0.6,1.9-0.9c0.6-0.3,1.3-0.5,1.9-0.7
      c0.7-0.2,1.3-0.4,1.9-0.5c0.6-0.2,1.3-0.3,1.8-0.4c0.6-0.1,1.2-0.1,1.7-0.2c0.5-0.1,1-0.1,1.4-0.1c0.4,0,0.8,0,1.1,0c0.6,0,1,0,1,0
      c0.6,0,1,0.5,1,1s-0.5,1-1,1c0,0,0,0,0,0l-0.1,0c0,0-0.3,0-0.9,0c-0.3,0-0.6,0-1,0c-0.4,0-0.8,0-1.3,0c-0.5,0-1,0-1.6,0.1
      c-0.6,0.1-1.1,0.1-1.7,0.3c-0.6,0.1-1.2,0.3-1.8,0.4c-0.6,0.2-1.2,0.4-1.8,0.6c-0.6,0.2-1.2,0.5-1.8,0.8c-0.6,0.3-1.1,0.6-1.6,0.9
      c-0.5,0.3-1,0.7-1.4,1c-0.4,0.3-0.8,0.7-1.2,1c-0.3,0.4-0.7,0.7-0.9,1c-0.2,0.3-0.5,0.5-0.6,0.8c-0.3,0.5-0.5,0.8-0.5,0.8
      c-0.2,0.2-0.5,0.3-0.7,0.1C201.6,282.1,201.5,281.8,201.6,281.5z`,1,"st8"],["id","nose_hole","d",`M213.2,266.3c0.6,0,1,0.5,0.9,1.1c0,0.6-0.5,1-1.1,0.9c-0.6,0-1-0.5-0.9-1.1
      C212.1,266.6,212.6,266.2,213.2,266.3z`,1,"st9"],["id","nose_hole_1_","d",`M208.1,266.9c0.6,0,1,0.5,0.9,1.1c0,0.6-0.5,1-1.1,0.9c-0.6,0-1-0.5-0.9-1.1
      C207.1,267.3,207.6,266.9,208.1,266.9z`,1,"st9"],["id","eye_right","d",`M205,253.5c1.1,0.1,1.9,1,1.9,2.1c-0.1,1.1-1,1.9-2.1,1.9c-1.1-0.1-1.9-1-1.9-2.1
      C203,254.3,203.9,253.4,205,253.5z`,1,"st9"],["id","eye_left","d",`M191.5,254.6c1.4,0.1,2.4,1.3,2.3,2.7c-0.1,1.4-1.3,2.4-2.7,2.3c-1.4-0.1-2.4-1.3-2.3-2.7
      C188.9,255.6,190.1,254.5,191.5,254.6z`,1,"st9"],["id","mongkey_shadow_1_","d",`M209.1,281c0.9-0.9,9.4-2.6,12-3c2.4-0.4-1.6,4.1-5,5S208.2,282,209.1,281z
       M143.6,237.1c-0.3,3.6,1.8,7,5.2,8.4c0.4,0.2,0.7,0.5,0.8,0.9c0.1,0.4,0.1,0.9-0.2,1.2c-15.1,24.2-14.7,56.3-10.8,70.8
      c4,15.2,17.1,20.7,24.8,20.7c8.9,0,16.1-1,21.8-2.9c-67.5,2.2-35-81.7-33.3-87.3c0.2-0.8,1.2-4.4,1-5c-0.6-1.6-3.5-0.2-6-4
      c-2.9-4.5,1.2-9.2,2.6-10.6C146.3,230.1,143.9,233,143.6,237.1z M201.7,297.5c7.8-0.9,17.9-8,22.3-13.3
      c-27.4,14.7-44.4,3.1-50.1-9.8c0.3,5.9,1.6,12.6,5.9,17.3C184.4,296.7,191.8,298.7,201.7,297.5z M208.6,261.2
      c-5.7,0.8-8.6-1.1-11.6,1.8c-2.8,2.7-7.7,4.6-3.8,4.1c3.9-0.6,10.1-3.4,16.8-4.1c0,0,0,0,0,0l-0.5,0c-0.2,0-0.3,0-0.4,0
      c-0.5,0-1-0.4-1-0.9C208.2,261.9,208.2,261.5,208.6,261.2z M198.4,300c0-0.1,0-0.1-0.1-0.2c-0.7,0-1.4,0.1-2,0.1
      c-7.8,0-13.9-2.3-18-6.8c-7.7-8.4-6.6-22.5-6.1-28.4c-5.6-6.2-5.6-11.5-4.6-15c-2,2.3-4.8,8.5,2.1,16.1c-3.9,6.4-5.4,26.5,9.2,36.2
      c7.2,4.8,16.6,5.3,20.8,2.8C199.5,302.9,199,301.2,198.4,300z`,1,"st0"],["id","belly","d",`M189.1,304c6.2,3,8.1,11.5,5.9,19c-2.3,7.4-9.8,10-16,7c-6.2-3-7.6-10.4-5.3-17.8
      S182.9,301.1,189.1,304z`,1,"st10"],["id","belly_button","d",`M191.2,322.3c0-0.1-0.1-0.2-0.2-0.2l-1.9-1.4l1-1.9c0.1-0.1,0.1-0.2,0-0.3
      c-0.1-0.2-0.4-0.4-0.7-0.3c-0.2,0-0.4,0.2-0.5,0.3l-0.9,1.7l-1.6-1.2c-0.2-0.1-0.3-0.1-0.5-0.1c-0.4,0.1-0.5,0.4-0.5,0.6
      c0,0.1,0.1,0.2,0.2,0.2l1.8,1.3l-1.1,2.1c-0.1,0.1-0.1,0.2,0,0.3c0.1,0.3,0.4,0.4,0.7,0.4c0.2,0,0.3-0.1,0.4-0.3l1-1.9l1.7,1.3
      c0.1,0.1,0.3,0.1,0.5,0.1C191.1,322.8,191.3,322.5,191.2,322.3z`,1,"st8"],["id","monkey_arm"],["id","arm","d",`M164.3,344.1c-0.9-0.3-1.8-0.2-2.5,0.2c-0.3-0.2-0.6-0.3-0.9-0.4c-0.8-0.3-1.5-0.5-2.3-0.5
        c-0.1,0-0.2-0.1-0.3-0.3c-2.4-11.4-1.1-27.6,0.3-43.8c0-0.1,1.2-5.7-2.6-7.2c-5.2-2.1-5.5,2.5-5.5,2.7c-0.5,4.8-3.6,39,1.1,51.4
        c0,0.1,0,0.2,0,0.3c-0.4,0.5-0.7,1-0.9,1.7c-1.5,3.9,0.7,8.3,4.8,9.9c4.1,1.6,8.7-0.3,10.1-4.2c0.5-1.3,0.6-2.7,0.3-4
        c0-0.1,0-0.2,0.1-0.2c0.5-0.7,0.9-1.6,0.5-2.9C166.2,345.5,165.4,344.4,164.3,344.1z`,1,"st4"],["id","armpit"],["id","armpit_mask","d",`M165,296c0-4.3-1.8-10.8-6-12c-12.5-3.5-12.4,11.1-12.4,11.1s10.8-1.4,16.7,9.6
          C163.3,304.6,165,300.3,165,296z`,1,"st11"],["id","armpit_line","d",`M163.9,295.6c0,0-0.3-0.2-0.8-0.5c-0.2-0.2-0.5-0.3-0.9-0.5c-0.3-0.2-0.8-0.4-1.2-0.6
          c-0.5-0.2-0.9-0.5-1.5-0.6c-0.5-0.2-1.1-0.4-1.7-0.6c-0.6-0.1-1.2-0.3-1.9-0.4c-0.7-0.1-1.3-0.2-2-0.2c-0.7,0-1.3,0-2,0.1
          c-0.7,0-1.3,0.2-1.9,0.3c-1.2,0.3-2.4,0.6-3.3,1c-0.9,0.4-1.7,0.8-2.2,1.1c-0.3,0.2-0.5,0.3-0.6,0.4c-0.1,0.1-0.2,0.1-0.2,0.1
          c-0.4,0.3-0.5,0.9-0.2,1.3c0.3,0.5,0.9,0.6,1.4,0.3l0,0c0,0,0.1,0,0.2-0.1c0.1-0.1,0.3-0.2,0.5-0.3c0.3-0.2,0.8-0.4,1.3-0.7
          c0.1,0,0.3,0,0.5,0c0.5,0,1.3,0.1,2.2,0.2c0.4,0.1,0.9,0.2,1.4,0.3c0.5,0.1,1,0.3,1.6,0.4c0.5,0.2,1.1,0.4,1.6,0.6
          c0.6,0.2,1.1,0.5,1.6,0.8c0.6,0.3,1,0.6,1.5,1c0.5,0.3,0.9,0.7,1.4,1.1c0.4,0.4,0.8,0.8,1.2,1.1c0.4,0.4,0.7,0.8,1,1.1
          c0.3,0.4,0.6,0.7,0.8,1c0.2,0.3,0.4,0.6,0.6,0.8c0.3,0.5,0.5,0.7,0.5,0.7l0,0c0.1,0.2,0.4,0.3,0.6,0.2c0.2-0.1,0.3-0.4,0.2-0.7
          c0,0-0.2-0.3-0.4-0.8c-0.1-0.3-0.3-0.6-0.5-0.9c-0.2-0.4-0.4-0.7-0.7-1.1c-0.3-0.4-0.6-0.9-0.9-1.3c-0.4-0.4-0.7-0.9-1.2-1.4
          c-0.5-0.4-0.9-0.9-1.4-1.3c-0.5-0.4-1-0.8-1.6-1.2c-0.6-0.4-1.1-0.7-1.8-1c-0.6-0.3-1.2-0.5-1.8-0.8c-0.5-0.2-1-0.3-1.5-0.4
          c0.1,0,0.2,0,0.3-0.1c0.6-0.1,1.2-0.1,1.8-0.2c0.6-0.1,1.2,0,1.8,0c0.6,0,1.2,0.2,1.7,0.2c0.6,0.1,1.1,0.3,1.6,0.4
          c0.5,0.1,1,0.3,1.4,0.5c0.4,0.2,0.8,0.3,1.2,0.5c0.3,0.2,0.6,0.3,0.9,0.4c0.5,0.2,0.8,0.4,0.8,0.4l0,0c0.2,0.1,0.5,0,0.6-0.2
          C164.2,296,164.1,295.7,163.9,295.6z`,1,"st8"],["id","tetris"],["id","tetris_stroke","d","M487.5,357.5h30v30h-30V357.5z",1,"st12"],["d",`M516,359l-4.5,5.4c-0.3,0.4-0.5,0.8-0.5,1.3V380c0,0.6-0.4,1-1,1h-14.3c-0.5,0-0.9,0.2-1.3,0.5L489,386h27V359
      z`,1,"st0"],["id","tetris_stroke_2_","d","M487.5,327h30v30h-30V327z",1,"st12"],["d",`M516,328.5l-4.5,5.4c-0.3,0.4-0.5,0.8-0.5,1.3v14.3c0,0.6-0.4,1-1,1h-14.3c-0.5,0-0.9,0.2-1.3,0.5l-5.4,4.5h27
      V328.5z`,1,"st0"],["id","tetris_stroke_1_","d","M518,357.5h30v30h-30V357.5z",1,"st12"],["d",`M546.5,359l-4.5,5.4c-0.3,0.4-0.5,0.8-0.5,1.3V380c0,0.6-0.4,1-1,1h-14.3c-0.5,0-0.9,0.2-1.3,0.5l-5.4,4.5h27
      V359z`,1,"st0"],["id","tetris_stroke_3_","d","M549,357.5h30v30h-30V357.5z",1,"st12"],["d",`M577.5,359l-4.5,5.4c-0.3,0.4-0.5,0.8-0.5,1.3V380c0,0.6-0.4,1-1,1h-14.3c-0.5,0-0.9,0.2-1.3,0.5l-5.4,4.5h27
      V359z`,1,"st0"],["id","tetris_stroke_4_","d","M549,388h30v30h-30V388z",1,"st12"],["d",`M577.5,389.5l-4.5,5.4c-0.3,0.4-0.5,0.8-0.5,1.3v14.3c0,0.6-0.4,1-1,1h-14.3c-0.5,0-0.9,0.2-1.3,0.5l-5.4,4.5
      h27V389.5z`,1,"st0"],["id","stars"],["id","star_a","d",`M652.6,332.5c-5.3,3.1-12.1,1.2-15.1-4.1l-1.4-2.4l1.4,2.4c3.1,5.3,1.2,12.1-4.1,15.1l-2.4,1.4
      l2.4-1.4c5.3-3.1,12.1-1.2,15.1,4.1l1.4,2.4l-1.4-2.4C645.5,342.3,647.3,335.5,652.6,332.5l2.4-1.4L652.6,332.5z`,1,"st4"],["id","star_b","d",`M503.4,73.7c-8,4.6-18.1,1.9-22.7-6.1l-2.1-3.6l2.1,3.6c4.6,8,1.9,18.1-6.1,22.7l-3.6,2.1l3.6-2.1
      c8-4.6,18.1-1.9,22.7,6.1l2.1,3.6l-2.1-3.6C492.7,88.4,495.4,78.3,503.4,73.7l3.6-2.1L503.4,73.7z`,1,"st4"],["id","star_c","d",`M330.4,335.7c-8,4.6-18.1,1.9-22.7-6.1l-2.1-3.6l2.1,3.6c4.6,8,1.9,18.1-6.1,22.7l-3.6,2.1
      l3.6-2.1c8-4.6,18.1-1.9,22.7,6.1l2.1,3.6l-2.1-3.6C319.7,350.4,322.4,340.3,330.4,335.7l3.6-2.1L330.4,335.7z`,1,"st4"],["id","star_d","d",`M135.6,176.5c-5.3,3.1-12.1,1.2-15.1-4.1l-1.4-2.4l1.4,2.4c3.1,5.3,1.2,12.1-4.1,15.1l-2.4,1.4
      l2.4-1.4c5.3-3.1,12.1-1.2,15.1,4.1l1.4,2.4l-1.4-2.4C128.5,186.3,130.3,179.5,135.6,176.5l2.4-1.4L135.6,176.5z`,1,"st4"],["id","moon"],["id","moon_body","d","M641,34c26,0,47,21,47,47s-21,47-47,47s-47-21-47-47S615,34,641,34z",1,"st4"],["id","moon_shades","d",`M622.5,55.9c1.3,2.3,0,5.8-3.1,7.7c-3,2-6.6,1.7-7.9-0.6c-1.3-2.3,0-5.8,3.1-7.7
      C617.6,53.3,621.1,53.6,622.5,55.9z M628.8,94.1c-4.1-6.1-11.6-9-16.7-6.4c-5.1,2.6-5.9,9.6-1.7,15.7c4.1,6.1,11.6,9,16.7,6.4
      C632.2,107.2,632.9,100.2,628.8,94.1z M644.5,109c-3.6,0-6.5,2.2-6.5,5s2.9,5,6.5,5s6.5-2.2,6.5-5S648.1,109,644.5,109z
       M645.7,95.8c-2.3-1.2-5-0.5-6,1.4c-1,2,0,4.5,2.3,5.7c2.3,1.2,5,0.5,6-1.4C649,99.6,648,97,645.7,95.8z M686.5,81
      c0-25.1-20.4-45.5-45.5-45.5c-16.1,0-30.2,8.4-38.3,21c7.9-5.9,17.7-9.5,28.3-9.5c26,0,47,21,47,47c0,6.3-1.3,12.3-3.5,17.8
      C681.9,103.6,686.5,92.8,686.5,81z`,1,"st0"],["id","number_4"],["id","number_4_outline","d",`M379.5,235.5c0-4.9-3.9-9.1-8.7-9.1h-11.4v-72.5c0-9.1-8.5-15.7-17.6-15
      c-6,0-11.8,3.1-15.1,8l-52.7,79.8c-1.2,2.1-2.1,4.5-2.1,6.6c0,6.6,5,11.1,10.3,11.1H339v24.3c0,5.6,4.3,10.1,9.9,10.1
      c6,0,10.5-4.5,10.5-10.1v-24.3h11.4C375.6,244.3,379.5,240.4,379.5,235.5z M339,226.4h-45.5l45.5-67.8V226.4z`,1,"st13"],["id","number_4_inner_lines","d",`M349,158v109.2 M345.9,147c-5.6,0-10.9,2.8-14,7.2l-47.1,69.5
      c-1.2,1.9-3.3,4.3-3.6,5.8c-0.8,4.6,2.3,5.5,7.3,5.5H340 M359.5,235H379 M342,232l-4,7 M345,232l-4,7 M358,232l-4,7 M361,232l-4,7`,1,"st14"],["id","number_4_dots","d",`M349,266c1.6,0,2.9,1.3,2.9,2.9c0,1.6-1.3,2.9-2.9,2.9c-1.6,0-2.9-1.3-2.9-2.9
      C346.1,267.3,347.4,266,349,266z M349,155.1c1.6,0,2.9,1.3,2.9,2.9s-1.3,2.9-2.9,2.9c-1.6,0-2.9-1.3-2.9-2.9S347.4,155.1,349,155.1
      z M344.4,144.6c1.6,0,2.9,1.3,2.9,2.9c0,1.6-1.3,2.9-2.9,2.9c-1.6,0-2.9-1.3-2.9-2.9C341.4,145.9,342.7,144.6,344.4,144.6z`,1,"st9"],["id","number_4_2"],["id","number_4_outline_2","d",`M627,235.5c0-4.9-3.9-9.1-8.7-9.1h-11.4v-72.5c0-9.1-8.5-15.7-17.6-15
      c-6,0-11.8,3.1-15.1,8l-52.7,79.8c-1.2,2.1-2.1,4.5-2.1,6.6c0,6.6,5,11.1,10.3,11.1h56.7v24.3c0,5.6,4.3,10.1,9.9,10.1
      c6,0,10.5-4.5,10.5-10.1v-24.3h11.4C623.1,244.3,627,240.4,627,235.5z M586.5,226.4H541l45.5-67.8V226.4z`,1,"st13"],["id","number_4_inner_lines_2","d",`M596.5,158v109.2 M593.3,147c-5.6,0-10.9,2.8-14,7.2l-47.1,69.5
      c-1.2,1.9-3.3,4.3-3.6,5.8c-0.8,4.6,2.3,5.5,7.3,5.5h51.5 M607,235h19.5 M589.5,232l-4,7 M592.5,232l-4,7 M605.5,232l-4,7
       M608.5,232l-4,7`,1,"st14"],["id","number_4_dots_2","d",`M596.5,266c1.6,0,2.9,1.3,2.9,2.9c0,1.6-1.3,2.9-2.9,2.9c-1.6,0-2.9-1.3-2.9-2.9
      C593.6,267.3,594.9,266,596.5,266z M596.5,155.1c1.6,0,2.9,1.3,2.9,2.9s-1.3,2.9-2.9,2.9c-1.6,0-2.9-1.3-2.9-2.9
      S594.9,155.1,596.5,155.1z M591.8,144.6c1.6,0,2.9,1.3,2.9,2.9c0,1.6-1.3,2.9-2.9,2.9c-1.6,0-2.9-1.3-2.9-2.9
      C588.9,145.9,590.2,144.6,591.8,144.6z`,1,"st9"],["id","number_0"],["id","number_0_outline","d",`M502,208.9c0-34-15.9-70.9-54-70.9c-38.3,0-54,36.9-54,70.9s15.7,71.1,54,71.1
      C486.1,280,502,242.9,502,208.9z M481.1,208.9c0,26.8-8.7,53-33.1,53c-24.6,0-33.1-26.2-33.1-53c0-26.8,8.5-52.8,33.1-52.8
      C472.4,156.1,481.1,182.1,481.1,208.9z`,1,"st13"],["id","number_0_inner_lines","d",`M487.2,175.7c-6.7-16.8-19.3-29.4-39.2-29.4c-32,0-45.1,32.5-45.1,62.4
      s13.1,62.6,45.1,62.6c31.8,0,44.1-32.6,44.1-62.6 M487.5,172c3,0,5.5,2.5,5.5,5.5c0,3-2.5,5.5-5.5,5.5c-3,0-5.5-2.5-5.5-5.5
      C482,174.5,484.5,172,487.5,172z M492.5,202c3,0,5.5,2.5,5.5,5.5c0,3-2.5,5.5-5.5,5.5c-3,0-5.5-2.5-5.5-5.5
      C487,204.5,489.5,202,492.5,202z`,1,"st15"],["id","number_0_dots","d",`M492.5,205c1.4,0,2.5,1.1,2.5,2.5c0,1.4-1.1,2.5-2.5,2.5c-1.4,0-2.5-1.1-2.5-2.5
      C490,206.1,491.1,205,492.5,205z M487.5,175c1.4,0,2.5,1.1,2.5,2.5c0,1.4-1.1,2.5-2.5,2.5c-1.4,0-2.5-1.1-2.5-2.5
      C485,176.1,486.1,175,487.5,175z M448.1,143.4c1.6,0,2.9,1.3,2.9,2.9c0,1.6-1.3,2.9-2.9,2.9c-1.6,0-2.9-1.3-2.9-2.9
      C445.1,144.7,446.4,143.4,448.1,143.4z M448.1,268.3c1.6,0,2.9,1.3,2.9,2.9c0,1.6-1.3,2.9-2.9,2.9c-1.6,0-2.9-1.3-2.9-2.9
      C445.1,269.6,446.4,268.3,448.1,268.3z`,1,"st9"],["id","sword"],["id","sword_handle","d",`M444.6,196.6l0.6-0.8c1.5-2,1.8-4.3,3.8-2.8l8.9,6.8c2,1.5,2.4,4.3,0.9,6.3l-0.6,0.8
      c-1.5,2-4.3,2.4-6.3,0.9L443,201C441,199.5,443.1,198.5,444.6,196.6z`,1,"st4"],["id","sword_handle_line","d","M453.9,197c2,1.5,2.4,4.3,0.9,6.3l-0.6,0.8c-1.5,2-4.3,2.4-6.3,0.9",1,"st14"],["id","sword_hilt","d",`M432.5,197.1l10.6-13.9c1.6-2.2,4.7-2.6,6.9-0.9c2.2,1.6,2.6,4.7,0.9,6.9l-10.6,13.9
      c-1.6,2.2-4.7,2.6-6.9,0.9C431.2,202.4,430.8,199.3,432.5,197.1z`,1,"st4"],["id","sword_blade","points","437,199 446,187.3 387.3,138.9 366.3,136.7 372.2,154 	",1,"st13"],["id","sword_blade_shadow","points","436.7,197 440.3,192.3 369,138.5 368.5,138.4 373.5,153 	",1,"st0"]],template:function(n,t){n&1&&(_(0,"app-sidebar"),i(1,"section",0),y(),i(2,"svg",1),_(3,"style",2)(4,"path",3),i(5,"g",4),_(6,"path",5)(7,"path",6)(8,"path",7)(9,"path",8),r(),_(10,"path",9)(11,"path",10)(12,"path",11)(13,"path",12),i(14,"g",13),_(15,"path",14)(16,"path",15)(17,"path",16)(18,"path",17)(19,"path",18)(20,"path",19)(21,"path",20)(22,"path",21)(23,"path",22)(24,"path",23)(25,"path",24)(26,"path",25),i(27,"g",26),_(28,"path",27),i(29,"g",28),_(30,"path",29)(31,"path",30),r()()(),i(32,"g",31),_(33,"path",32)(34,"path",33)(35,"path",34)(36,"path",35)(37,"path",36)(38,"path",37)(39,"path",38)(40,"path",39)(41,"path",40)(42,"path",41),r(),i(43,"g",42),_(44,"path",43)(45,"path",44)(46,"path",45)(47,"path",46),r(),i(48,"g",47),_(49,"path",48)(50,"path",49),r(),i(51,"g",50),_(52,"path",51)(53,"path",52)(54,"path",53),r(),i(55,"g",54),_(56,"path",55)(57,"path",56)(58,"path",57),r(),i(59,"g",58),_(60,"path",59)(61,"path",60)(62,"path",61),r(),i(63,"g",62),_(64,"path",63)(65,"path",64)(66,"path",65)(67,"polygon",66)(68,"polygon",67),r()()())},dependencies:[de],styles:["#monkey_404[_ngcontent-%COMP%]{width:100%;height:100dvh;position:absolute;top:50%}#monkey_404[_ngcontent-%COMP%]   .st0[_ngcontent-%COMP%]{fill:#e8ebed}#monkey_404[_ngcontent-%COMP%]   .st1[_ngcontent-%COMP%]{fill:#fff}#monkey_404[_ngcontent-%COMP%]   .st2[_ngcontent-%COMP%]{fill:none;stroke:#4d45e59d;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}#monkey_404[_ngcontent-%COMP%]   .st3[_ngcontent-%COMP%]{fill:#e8ebed;stroke:#4d45e551;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}#monkey_404[_ngcontent-%COMP%]   .st4[_ngcontent-%COMP%]{fill:#fff;stroke:#4d45e59d;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}#monkey_404[_ngcontent-%COMP%]   .st5[_ngcontent-%COMP%]{fill:none;stroke:#4d45e59d;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}#monkey_404[_ngcontent-%COMP%]   .st6[_ngcontent-%COMP%]{fill:none;stroke:#4d45e59d;stroke-width:4;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}#monkey_404[_ngcontent-%COMP%]   .st7[_ngcontent-%COMP%]{fill:#fff;stroke:#4d45e59d;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}#monkey_404[_ngcontent-%COMP%]   .st8[_ngcontent-%COMP%], #monkey_404[_ngcontent-%COMP%]   .st9[_ngcontent-%COMP%]{fill:#4d45e553}#monkey_404[_ngcontent-%COMP%]   .st10[_ngcontent-%COMP%]{fill:none;stroke:#4d45e553;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}#monkey_404[_ngcontent-%COMP%]   .st11[_ngcontent-%COMP%]{fill:#fff}#monkey_404[_ngcontent-%COMP%]   .st12[_ngcontent-%COMP%], #monkey_404[_ngcontent-%COMP%]   .st13[_ngcontent-%COMP%]{fill:#fff;stroke:#4d45e59d;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}#monkey_404[_ngcontent-%COMP%]   .st14[_ngcontent-%COMP%], #monkey_404[_ngcontent-%COMP%]   .st15[_ngcontent-%COMP%]{fill:none;stroke:#4d45e59d;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}#monkey_404[_ngcontent-%COMP%]   #arm[_ngcontent-%COMP%]{transform-origin:155px 292px;transform:rotate(-2deg)}#monkey_404[_ngcontent-%COMP%]   #monkey[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_monkey-breathe 3s infinite ease-in-out}#monkey_404[_ngcontent-%COMP%]   #zelda[_ngcontent-%COMP%], #monkey_404[_ngcontent-%COMP%]   #tetris[_ngcontent-%COMP%], #monkey_404[_ngcontent-%COMP%]   #moon[_ngcontent-%COMP%], #monkey_404[_ngcontent-%COMP%]   #star_a[_ngcontent-%COMP%], #monkey_404[_ngcontent-%COMP%]   #star_b[_ngcontent-%COMP%], #monkey_404[_ngcontent-%COMP%]   #star_c[_ngcontent-%COMP%], #monkey_404[_ngcontent-%COMP%]   #star_d[_ngcontent-%COMP%], #monkey_404[_ngcontent-%COMP%]   #number_4[_ngcontent-%COMP%], #monkey_404[_ngcontent-%COMP%]   #number_4_2[_ngcontent-%COMP%], #monkey_404[_ngcontent-%COMP%]   #number_0[_ngcontent-%COMP%], #monkey_404[_ngcontent-%COMP%]   #sword[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_levitate 3s infinite ease-in-out}#monkey_404[_ngcontent-%COMP%]   #zelda[_ngcontent-%COMP%]{animation-delay:0s;animation-duration:3s}#monkey_404[_ngcontent-%COMP%]   #tetris[_ngcontent-%COMP%]{animation-delay:1s;animation-duration:3s}#monkey_404[_ngcontent-%COMP%]   #moon[_ngcontent-%COMP%]{animation-delay:.5s;animation-duration:3s}#monkey_404[_ngcontent-%COMP%]   #star_a[_ngcontent-%COMP%]{animation-delay:0s;animation-duration:3s}#monkey_404[_ngcontent-%COMP%]   #star_b[_ngcontent-%COMP%]{animation-delay:.5s;animation-duration:3s}#monkey_404[_ngcontent-%COMP%]   #star_c[_ngcontent-%COMP%]{animation-delay:1s;animation-duration:3s}#monkey_404[_ngcontent-%COMP%]   #star_d[_ngcontent-%COMP%]{animation-delay:1.5s;animation-duration:3s}#monkey_404[_ngcontent-%COMP%]   #number_4[_ngcontent-%COMP%]{animation-delay:0s;animation-duration:3s}#monkey_404[_ngcontent-%COMP%]   #number_4_2[_ngcontent-%COMP%]{animation-delay:1s;animation-duration:3s}#monkey_404[_ngcontent-%COMP%]   #number_0[_ngcontent-%COMP%]{animation-delay:.5s;animation-duration:3s}#monkey_404[_ngcontent-%COMP%]   #sword[_ngcontent-%COMP%]{animation-delay:1.5s;animation-duration:3s}#monkey_404[_ngcontent-%COMP%]   #eye_left[_ngcontent-%COMP%]{transform-origin:191px 257px;animation:_ngcontent-%COMP%_blink-l 12s infinite ease-in-out}#monkey_404[_ngcontent-%COMP%]   #eye_right[_ngcontent-%COMP%]{transform-origin:205px 256px;animation:_ngcontent-%COMP%_blink-r 12s infinite ease-in-out}@keyframes _ngcontent-%COMP%_arm-rotate{0%{transform:rotate(-3deg)}50%{transform:rotate(6deg)}}@keyframes _ngcontent-%COMP%_monkey-breathe{0%{transform:translateZ(0)}50%{transform:translate3d(0,1px,0)}}@keyframes _ngcontent-%COMP%_levitate{0%{transform:translateZ(0)}50%{transform:translate3d(0,5px,0)}}@keyframes _ngcontent-%COMP%_star{0%{transform:translateZ(0) rotate(0)}50%{transform:translate3d(0,5px,0) rotate(180deg)}}@keyframes _ngcontent-%COMP%_blink-l{0%{transform:rotateX(0)}2%{transform:rotateX(80deg)}4%,20%{transform:rotateX(0)}22%{transform:rotateX(80deg)}24%,30%{transform:rotateX(0)}32%{transform:rotateX(80deg)}34%,70%{transform:rotateX(0)}72%{transform:rotateX(80deg)}74%,to{transform:rotateX(0)}}@keyframes _ngcontent-%COMP%_blink-r{0%{transform:rotateX(0)}2%{transform:rotateX(80deg)}4%,30%{transform:rotateX(0)}32%{transform:rotateX(80deg)}34%,50%{transform:rotateX(0)}52%{transform:rotateX(80deg)}54%,to{transform:rotateX(0)}}"]})}return a})();var pi=(()=>{class a{http;messageUrl=`${pe.auth.baseUrl}/push`;pollUrl=`${pe.auth.baseUrl}/push/poll`;pollResultsUrl=`${pe.auth.baseUrl}/push/poll-results`;constructor(e){this.http=e}sendPush(e){let n=this.messageUrl;return e.categoryIds&&e.categoryIds.length>0&&(n+=`?categoryId=${e.categoryIds[0]}`),this.http.post(n,e)}sendPoll(e){let n=this.pollUrl;return e.categoryIds&&e.categoryIds.length>0&&(n+=`?categoryId=${e.categoryIds[0]}`),this.http.post(n,e)}getPollResults(e){return this.http.get(`${this.pollResultsUrl}/${e}`)}getAllResults(){return this.http.get(`${this.pollResultsUrl}`)}static \u0275fac=function(n){return new(n||a)(N($))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var ct=a=>({"bg-gradient-to-r from-indigo-500 to-blue-500 text-white":a}),pr=(a,m)=>({hover:a,"font-bold":m});function cr(a,m){a&1&&(i(0,"span",92),y(),i(1,"svg",93),_(2,"path",94),r()())}function gr(a,m){a&1&&(i(0,"span",95),y(),i(1,"svg",93)(2,"g",96)(3,"path",97),_(4,"animate",98),r(),i(5,"path",99),_(6,"animate",100),r()()()())}function _r(a,m){if(a&1){let e=S();i(0,"li",88)(1,"a",89),h("click",function(t){let o=c(e).index;return u(3).copyTagContent(o),g(t.stopPropagation())}),i(2,"span"),s(3),r(),f(4,cr,3,0,"span",90)(5,gr,7,0,"span",91),r()()}if(a&2){let e=m.$implicit,n=m.index,t=u(3);l(3),w(e.tag+(e.tag!=="[Name]"?e.content+e.tag.replace("[","[/"):"")+" \u2014 "+e.description),l(),d("ngIf",!t.copiedStates[n]),l(),d("ngIf",t.copiedStates[n])}}function hr(a,m){a&1&&(i(0,"span",101),s(1," \u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0434\u043E\u043C\u0435\u043D, \u0432\u0441\u0442\u0430\u0432\u044C\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0441 \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u044B\u043C \u0434\u043E\u043C\u0435\u043D\u043E\u043C"),_(2,"br"),s(3,"https://1xjet.jp/tgadmin/image/example.png \u0438\u043B\u0438 https://1xjet.netlify.app/example.png "),r())}function fr(a,m){a&1&&(i(0,"div",102)(1,"label",30),s(2," \u2757\uFE0F\u041E\u0411\u042F\u0417\u0410\u0422\u0415\u041B\u042C\u041D\u041E \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044C \u0432 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0441\u0442\u0438 \u0422G \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F / \u043A\u043D\u043E\u043F\u043A\u0438\u2757\uFE0F "),r()())}function xr(a,m){if(a&1){let e=S();i(0,"div",65)(1,"h3",66),s(2," \u{1F447} \u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C TG \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435 \u{1F60E} \u{1F447} "),i(3,"div",67)(4,"div",68)(5,"div",69)(6,"div",70),y(),i(7,"svg",71),_(8,"path",72),r()(),M(),i(9,"ul",73),f(10,_r,6,3,"li",74),r()()()()(),i(11,"div",75)(12,"label",76),s(13," URL \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F (\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E): "),f(14,hr,4,0,"span",77),r(),i(15,"input",78),C("ngModelChange",function(t){c(e);let o=u(2);return v(o.imageUrl,t)||(o.imageUrl=t),g(t)}),h("ngModelChange",function(){c(e);let t=u(2);return t.saveFormData(),g(t.checkFormValidity())})("blur",function(){c(e);let t=u(2);return g(t.refreshImage())}),r()(),i(16,"div",79)(17,"label",76),s(18,"\u0422\u0435\u043A\u0441\u0442 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F (\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E):"),r(),i(19,"textarea",80),C("ngModelChange",function(t){c(e);let o=u(2);return v(o.pushText,t)||(o.pushText=t),g(t)}),h("ngModelChange",function(){c(e);let t=u(2);return t.saveFormData(),g(t.checkFormValidity())}),r()(),i(20,"h3",81),s(21," \u041A\u043D\u043E\u043F\u043A\u0430 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F (\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E): "),r(),i(22,"div",82)(23,"div",83)(24,"label",84),s(25,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043D\u043E\u043F\u043A\u0438:"),r(),i(26,"input",85),C("ngModelChange",function(t){c(e);let o=u(2);return v(o.buttonName,t)||(o.buttonName=t),g(t)}),h("ngModelChange",function(){c(e);let t=u(2);return t.saveFormData(),g(t.checkFormValidity())}),r()(),i(27,"div",83)(28,"label",84),s(29,"\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u0440\u0435\u0441\u0443\u0440\u0441:"),r(),i(30,"input",86),C("ngModelChange",function(t){c(e);let o=u(2);return v(o.buttonUrl,t)||(o.buttonUrl=t),g(t)}),h("ngModelChange",function(){c(e);let t=u(2);return t.saveFormData(),g(t.checkFormValidity())}),r()()(),f(31,fr,3,0,"div",87),r()}if(a&2){let e=u(2);l(10),d("ngForOf",e.formatTags),l(4),d("ngIf",e.imageUrl&&!e.urlValidationService.isValidImageUrl(e.imageUrl)),l(),x("ngModel",e.imageUrl),l(4),x("ngModel",e.pushText),d("disabled",e.isSending),l(7),x("ngModel",e.buttonName),l(4),x("ngModel",e.buttonUrl),l(),d("ngIf",e.emptyMessage)}}function vr(a,m){a&1&&(i(0,"span",92),y(),i(1,"svg",93),_(2,"path",94),r()())}function Cr(a,m){a&1&&(i(0,"span",95),y(),i(1,"svg",93)(2,"g",96)(3,"path",97),_(4,"animate",98),r(),i(5,"path",99),_(6,"animate",100),r()()()())}function br(a,m){if(a&1){let e=S();i(0,"li",88)(1,"a",89),h("click",function(t){let o=c(e).index;return u(3).copyTagContent(o),g(t.stopPropagation())}),i(2,"span"),s(3),r(),f(4,vr,3,0,"span",90)(5,Cr,7,0,"span",91),r()()}if(a&2){let e=m.$implicit,n=m.index,t=u(3);l(3),w(e.tag+(e.tag!=="[Name]"?e.content+e.tag.replace("[","[/"):"")+" \u2014 "+e.description),l(),d("ngIf",!t.copiedStates[n]),l(),d("ngIf",t.copiedStates[n])}}function wr(a,m){if(a&1){let e=S();i(0,"div",114)(1,"input",115),C("ngModelChange",function(t){let o=c(e).index,p=u(3);return v(p.pollPayload.options[o],t)||(p.pollPayload.options[o]=t),g(t)}),h("ngModelChange",function(){c(e);let t=u(3);return g(t.checkPollValidity())}),r()()}if(a&2){let e=m.index,n=u(3);l(),rt("placeholder","\u0412\u0430\u0440\u0438\u0430\u043D\u0442 ",e+1,""),d("id","option-"+e)("name","option-"+e),x("ngModel",n.pollPayload.options[e])}}function Er(a,m){if(a&1){let e=S();i(0,"button",116),h("click",function(){c(e);let t=u(3);return g(t.addPollOption())}),y(),i(1,"svg",117),_(2,"path",118),r(),s(3," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432\u0430\u0440\u0438\u0430\u043D\u0442 "),r()}}function yr(a,m){if(a&1){let e=S();i(0,"label",119)(1,"input",120),C("ngModelChange",function(t){c(e);let o=u(3);return v(o.pollPayload.isAnonymous,t)||(o.pollPayload.isAnonymous=t),g(t)}),r(),s(2," \u0410\u043D\u043E\u043D\u0438\u043C\u043D\u043E\u0435 \u0433\u043E\u043B\u043E\u0441\u043E\u0432\u0430\u043D\u0438\u0435 "),r()}if(a&2){let e=u(3);l(),x("ngModel",e.pollPayload.isAnonymous)}}function Sr(a,m){if(a&1){let e=S();i(0,"label",119)(1,"input",121),C("ngModelChange",function(t){c(e);let o=u(3);return v(o.pollPayload.allowsMultipleAnswers,t)||(o.pollPayload.allowsMultipleAnswers=t),g(t)}),r(),s(2," \u041C\u043D\u043E\u0436\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0432\u044B\u0431\u043E\u0440 "),r()}if(a&2){let e=u(3);l(),x("ngModel",e.pollPayload.allowsMultipleAnswers)}}function Mr(a,m){a&1&&(i(0,"option",127),s(1," \u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u043E\u0442\u0432\u0435\u0442 "),r())}function Tr(a,m){if(a&1&&(i(0,"option",128),s(1),r()),a&2){let e=m.$implicit,n=m.index;d("value",n)("disabled",!e.trim()),l(),b(" ",e.trim()?e:"\u041F\u0443\u0441\u0442\u043E\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442"," ")}}function kr(a,m){if(a&1){let e=S();i(0,"div",122)(1,"label",123),s(2," \u041F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u043E\u0442\u0432\u0435\u0442: "),r(),i(3,"select",124),C("ngModelChange",function(t){c(e);let o=u(3);return v(o.pollPayload.correctOptionId,t)||(o.pollPayload.correctOptionId=t),g(t)}),h("ngModelChange",function(){c(e);let t=u(3);return g(t.checkPollValidity())}),f(4,Mr,2,0,"option",125)(5,Tr,2,3,"option",126),r()()}if(a&2){let e=u(3);l(3),x("ngModel",e.pollPayload.correctOptionId),l(),d("ngIf",!e.pollPayload.options),l(),d("ngForOf",e.pollPayload.options)("ngForTrackBy",e.trackByOption)}}function Br(a,m){if(a&1){let e=S();i(0,"div",103)(1,"h3",66),s(2," \u{1F447} \u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 \u043E\u043F\u0440\u043E\u0441 \u{1F4CA} \u{1F447} "),i(3,"div",67)(4,"div",68)(5,"div",69)(6,"div",70),y(),i(7,"svg",71),_(8,"path",72),r()(),M(),i(9,"ul",73),f(10,br,6,3,"li",74),r()()()()(),i(11,"div",79)(12,"label",76),s(13,"\u0412\u043E\u043F\u0440\u043E\u0441:"),r(),i(14,"textarea",104),C("ngModelChange",function(t){c(e);let o=u(2);return v(o.pollPayload.question,t)||(o.pollPayload.question=t),g(t)}),h("ngModelChange",function(){c(e);let t=u(2);return g(t.checkPollValidity())}),r()(),i(15,"div",105)(16,"label",76),s(17,"\u0412\u0430\u0440\u0438\u0430\u043D\u0442\u044B \u043E\u0442\u0432\u0435\u0442\u0430 (\u0434\u043E 10):"),r(),f(18,wr,2,5,"div",106)(19,Er,4,0,"button",107),r(),i(20,"div",105)(21,"label",76),s(22,"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043E\u043F\u0440\u043E\u0441\u0430:"),r(),i(23,"div",108)(24,"div",109),h("click",function(){c(e);let t=u(2);return g(t.setPollMode("regular"))}),i(25,"p",110),s(26,"\u041E\u0431\u044B\u0447\u043D\u044B\u0439 \u043E\u043F\u0440\u043E\u0441"),r()(),i(27,"div",111),h("click",function(){c(e);let t=u(2);return g(t.setPollMode("quiz"))}),i(28,"p",110),s(29,"\u0412\u0438\u043A\u0442\u043E\u0440\u0438\u043D\u0430"),r()()(),f(30,yr,3,1,"label",112)(31,Sr,3,1,"label",112)(32,kr,6,4,"div",113),r()()}if(a&2){let e=u(2);l(10),d("ngForOf",e.formatTags),l(4),x("ngModel",e.pollPayload.question),l(4),d("ngForOf",e.pollPayload.options)("ngForTrackBy",e.trackByOption),l(),d("ngIf",e.pollPayload.options.length<10),l(5),d("ngClass",ie(10,ct,e.pollMode==="regular")),l(3),d("ngClass",ie(12,ct,e.pollMode==="quiz")),l(3),d("ngIf",e.pollMode==="regular"),l(),d("ngIf",e.pollMode==="regular"),l(),d("ngIf",e.pollMode==="quiz")}}function Ir(a,m){if(a&1&&(se(0),f(1,xr,32,8,"div",63)(2,Br,33,14,"div",64),ue()),a&2){let e=u();l(),d("ngIf",e.contentMode==="message"),l(),d("ngIf",e.contentMode==="poll")}}function Dr(a,m){if(a&1){let e=S();i(0,"div",34)(1,"label",35)(2,"span",129),s(3),r(),i(4,"input",130),h("change",function(t){c(e);let o=u();return g(o.onCategoryChange(t))}),r()()()}if(a&2){let e=m.$implicit,n=u();l(3),w(e.name),l(),d("value",e.id)("checked",n.selectedCategoryIds.includes(e.id))}}function Fr(a,m){if(a&1&&(i(0,"li",143)(1,"strong"),s(2),r()()),a&2){let e=m.$implicit;l(2),w(e)}}function Vr(a,m){if(a&1){let e=S();i(0,"tr",137),h("click",function(){let t=c(e).$implicit,o=u(2);return g(o.showPollDetails(t))}),i(1,"th",134),s(2),r(),i(3,"td",138)(4,"strong"),s(5),r()(),i(6,"td",134)(7,"ul",139),f(8,Fr,3,1,"li",140),r()(),i(9,"td",134),s(10),r(),i(11,"td",134),s(12),r(),i(13,"th",134)(14,"div",88),s(15," \u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C "),y(),i(16,"svg",141),_(17,"path",142),r()()()()}if(a&2){let e=m.$implicit,n=m.index;l(2),w(n+1),l(3),w(e.question),l(3),d("ngForOf",e.options),l(2),b(" ",e.results.length?e.results[0].count:"\u0410\u043D\u043E\u043D\u0438\u043C\u043D\u043E"," "),l(2),w(e.createdAt)}}function Pr(a,m){if(a&1&&(i(0,"div",131)(1,"table",132)(2,"thead")(3,"tr",133)(4,"th",134),s(5,"#"),r(),i(6,"th",135),s(7,"\u0412\u043E\u043F\u0440\u043E\u0441"),r(),i(8,"th",135),s(9,"\u0412\u0430\u0440\u0438\u0430\u043D\u0442\u044B"),r(),i(10,"th",135),s(11,"\u041A\u043E\u043B-\u0432\u043E \u0433\u043E\u043B\u043E\u0441\u043E\u0432"),r(),i(12,"th",135),s(13,"\u0414\u0430\u0442\u0430"),r(),i(14,"th",134),s(15,"\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C"),r()()(),i(16,"tbody"),f(17,Vr,18,5,"tr",136),r()()()),a&2){let e=u();l(17),d("ngForOf",e.getPollResults())}}function Ar(a,m){if(a&1&&(i(0,"p",143),s(1),r()),a&2){let e=m.$implicit,n=m.index;l(),Se(" ",n+1,") ",e," ")}}function zr(a,m){a&1&&(y(),i(0,"svg",156),_(1,"path",157),r())}function Lr(a,m){if(a&1&&(i(0,"tr",153)(1,"th",134),s(2),r(),i(3,"td",134),s(4),r(),i(5,"td",134),f(6,Ar,2,2,"p",140),r(),i(7,"td",134)(8,"div",154),f(9,zr,2,0,"svg",155),s(10),r()(),i(11,"td",134),s(12),r()()),a&2){let e=m.$implicit,n=m.index,t=u(2);l(2),w(n+1),l(2),b(" ",e.userIds.length>0?e.userIds.join(", "):"\u0410\u043D\u043E\u043D\u0438\u043C\u043D\u043E"," "),l(2),d("ngForOf",t.selectedPoll.options),l(3),d("ngIf",e.userIds.length>0),l(),b(" ",e.optionText," "),l(2),w(e.timestamp)}}function Wr(a,m){if(a&1){let e=S();i(0,"div",144)(1,"button",145),h("click",function(){c(e);let t=u();return g(t.goBackToAllPolls())}),y(),i(2,"svg",141),_(3,"path",146),r()(),M(),i(4,"div",147)(5,"h3",148),s(6),r(),i(7,"p",149),s(8),r()(),i(9,"div",131)(10,"table",150)(11,"thead")(12,"tr",151),_(13,"th",134),i(14,"td",135),s(15,"ID"),r(),i(16,"td",135),s(17,"\u0412\u0430\u0440\u0438\u0430\u043D\u0442\u044B"),r(),i(18,"td",135),s(19,"\u041E\u0442\u0432\u0435\u0442\u044B"),r(),i(20,"td",135),s(21,"\u0414\u0430\u0442\u0430"),r()()(),i(22,"tbody"),f(23,Lr,13,6,"tr",152),r(),i(24,"tfoot")(25,"tr",151),_(26,"th",134),i(27,"td",135),s(28,"ID"),r(),i(29,"td",135),s(30,"\u0412\u0430\u0440\u0438\u0430\u043D\u0442\u044B"),r(),i(31,"td",135),s(32,"\u041E\u0442\u0432\u0435\u0442\u044B"),r(),i(33,"td",135),s(34,"\u0414\u0430\u0442\u0430"),r()()()()()()}if(a&2){let e=u();l(6),b(" ",e.selectedPoll.question," "),l(2),b(" ID \u043E\u043F\u0440\u043E\u0441\u0430: ",e.selectedPoll.pollId," "),l(15),d("ngForOf",e.selectedPoll.results)}}function Ur(a,m){a&1&&_(0,"p",158)}function Or(a,m){if(a&1&&(i(0,"th"),s(1),r()),a&2){let e=u().index;l(),b(" ",e+1," ")}}function Nr(a,m){a&1&&_(0,"th")}function jr(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u().$implicit;l(),w(e.message)}}function Hr(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u().$implicit;l(),w(e.message)}}function $r(a,m){if(a&1&&(i(0,"span",162),s(1),r()),a&2){let e=u().$implicit;d("ngClass",e.success?"text-green-600":"text-red-600"),l(),b(" ",e.success?"\u0423\u0441\u043F\u0435\u0448\u043D\u043E":"\u041E\u0448\u0438\u0431\u043A\u0430"," ")}}function qr(a,m){if(a&1&&(i(0,"tr",162),f(1,Or,2,1,"th",27)(2,Nr,1,0,"th",27),i(3,"td"),s(4),r(),i(5,"td"),s(6),r(),i(7,"td"),f(8,jr,2,1,"span",27)(9,Hr,2,1,"span",27),r(),i(10,"td"),f(11,$r,2,2,"span",163),r()()),a&2){let e=m.$implicit,n=m.index,t=u(2);d("ngClass",Fe(8,pr,n%2===1,!e.userId||e.userId===0)),l(),d("ngIf",e.userId&&e.userId!==0),l(),d("ngIf",!e.userId||e.userId===0),l(2),b(" ",e.userId&&e.userId!==0?e.userId:t.currentDate," "),l(2),w(e.Username||"N/A"),l(2),d("ngIf",e.userId&&e.userId!==0),l(),d("ngIf",!e.userId||e.userId===0),l(2),d("ngIf",e.userId&&e.userId!==0)}}function Qr(a,m){if(a&1){let e=S();i(0,"div",131)(1,"table",159)(2,"thead")(3,"tr")(4,"th"),s(5,"#"),r(),i(6,"th"),s(7,"User ID"),r(),i(8,"th"),s(9,"Username"),r(),i(10,"th"),s(11,"\u0421\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435"),r(),i(12,"th"),s(13,"\u0421\u0442\u0430\u0442\u0443\u0441"),r()()(),i(14,"tbody"),f(15,qr,12,11,"tr",160),r()(),i(16,"button",161),h("click",function(){c(e);let t=u();return g(t.clearStatuses())}),s(17," \u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0441\u0442\u0430\u0442\u0443\u0441\u044B "),r()()}if(a&2){let e=u();l(15),d("ngForOf",e.filteredPushStatuses)}}function Rr(a,m){a&1&&(i(0,"p",164),s(1,"\u0421\u0442\u0430\u0442\u0443\u0441\u044B \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442"),r())}function Gr(a,m){if(a&1){let e=S();i(0,"div",165)(1,"div",166)(2,"span",167),y(),i(3,"svg",168),h("click",function(){c(e);let t=u();return g(t.cancelMessage())}),i(4,"g",169)(5,"path",170),_(6,"animate",171),r(),i(7,"path",172),_(8,"animate",173),r()()()(),s(9),r()()}if(a&2){let e=u();l(9),b(" ",e.resultMessage," ")}}var ci=(()=>{class a{pushService;newsCategoryService;urlValidationService;http;cdr;contentMode="message";pollMode="regular";imageUrl="";pushText="";buttonName="";buttonUrl="";pollPayload={question:"",options:[""],isAnonymous:!0,allowsMultipleAnswers:!1,isQuiz:!1,correctOptionId:0};sendToAll=!1;isSending=!1;resultMessage="";successMessage=null;errorMessage=null;pollResultsError=null;emptyMessage=!0;categories=[];selectedCategoryIds=[];pushStatuses=[];pollResults=[];selectedPoll=null;viewMode="all";eventSource=null;copiedStates=[];baseUrl=I.auth.baseUrl;formatTags=[{tag:"[Name]",content:"[Name]",description:"\u0412\u0441\u0442\u0430\u0432\u043A\u0430 \u0422\u0433 \u041D\u0438\u043A"},{tag:"[u]",content:"\u0442\u0435\u043A\u0441\u0442",description:"\u041F\u043E\u0434\u0447\u0451\u0440\u043A\u043D\u0443\u0442\u044B\u0439 \u0442\u0435\u043A\u0441\u0442"},{tag:"[s]",content:"\u0442\u0435\u043A\u0441\u0442",description:"\u0417\u0430\u0447\u0451\u0440\u043A\u043D\u0443\u0442\u044B\u0439 \u0442\u0435\u043A\u0441\u0442"},{tag:"[sp]",content:"\u0442\u0435\u043A\u0441\u0442",description:"\u0421\u043F\u043E\u0439\u043B\u0435\u0440"},{tag:"[code]",content:"\u0442\u0435\u043A\u0441\u0442",description:"\u041C\u043E\u043D\u043E\u0448\u0438\u0440\u0438\u043D\u043D\u044B\u0439 \u0442\u0435\u043A\u0441\u0442"},{tag:"[pre]",content:"\u0442\u0435\u043A\u0441\u0442",description:"\u0411\u043B\u043E\u043A \u043A\u043E\u0434\u0430"},{tag:"[quote]",content:"\u0442\u0435\u043A\u0441\u0442",description:"\u0426\u0438\u0442\u0430\u0442\u0430"},{tag:"[spoiler]",content:"\u0442\u0435\u043A\u0441\u0442",description:"\u0421\u043A\u0440\u044B\u0442\u044B\u0439 \u0442\u0435\u043A\u0441\u0442"}];get currentDate(){return new Date().toISOString().slice(0,10)}get filteredPushStatuses(){let e=[],n=[],t=new Map;this.pushStatuses.filter(p=>!p.pollId).forEach(p=>{let E=p.userId&&p.userId!==0?p.userId.toString():null;t.set(E,p)});let o=new Set;for(let p of this.pushStatuses){if(p.pollId)continue;let E=p.userId&&p.userId!==0?p.userId.toString():null;if(!o.has(E)){let F=t.get(E);F&&(E===null||F.userId===0?n.push(F):e.push(F)),o.add(E)}}return[...e,...n]}getPollResults(){return this.pollResults}getOptionCount(e,n){let t=e.results.find(o=>o.optionId===n);return t?t.count:0}constructor(e,n,t,o,p){this.pushService=e,this.newsCategoryService=n,this.urlValidationService=t,this.http=o,this.cdr=p}ngOnInit(){let e=sessionStorage.getItem("pushStatuses");e&&(this.pushStatuses=JSON.parse(e));let n=localStorage.getItem("pushFormData");if(n){let t=JSON.parse(n);this.imageUrl=t.imageUrl||"",this.pushText=t.pushText||"",this.buttonName=t.buttonName||"",this.buttonUrl=t.buttonUrl||"",this.selectedCategoryIds=t.selectedCategoryIds||[],this.pollPayload=t.pollPayload||{question:"",options:[""],isAnonymous:!0,allowsMultipleAnswers:!1,isQuiz:!1,correctOptionId:0},this.contentMode=t.contentMode||"message",this.pollMode=t.pollMode||"regular"}this.copiedStates=new Array(this.formatTags.length).fill(!1),this.newsCategoryService.getCategories().subscribe({next:t=>{this.categories=t,console.log("\u041F\u043E\u043B\u0443\u0447\u0435\u043D\u044B \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438:",this.categories)},error:t=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439:",t)}}),this.setupEventSource(),this.loadAllPollResults()}ngOnDestroy(){this.eventSource&&this.eventSource.close()}setupEventSource(){this.eventSource=new EventSource(`${this.baseUrl}/push/status`),this.eventSource.onmessage=e=>{let n=JSON.parse(e.data);console.log("\u041F\u043E\u043B\u0443\u0447\u0435\u043D\u044B \u0434\u0430\u043D\u043D\u044B\u0435 \u043E\u0442 EventSource:",n),this.pushStatuses=[...this.pushStatuses,n],sessionStorage.setItem("pushStatuses",JSON.stringify(this.pushStatuses)),n.successCount!==void 0&&(this.resultMessage=n.message,n.pollIds&&n.pollIds.length>0&&(console.log("\u041F\u043E\u043B\u0443\u0447\u0435\u043D\u044B pollIds:",n.pollIds),n.pollIds.forEach(t=>this.loadPollResult(t)))),this.cdr.markForCheck()},this.eventSource.onerror=()=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 EventSource"),this.eventSource?.close(),this.isSending=!1,this.cdr.markForCheck()}}loadAllPollResults(){this.viewMode="all",this.selectedPoll=null,this.pushService.getAllResults().subscribe({next:e=>{console.log("\u041F\u043E\u043B\u0443\u0447\u0435\u043D\u044B \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u0432\u0441\u0435\u0445 \u043E\u043F\u0440\u043E\u0441\u043E\u0432:",e),this.pollResults=e.results||[],this.pollResultsError=null,this.cdr.markForCheck()},error:e=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0432\u0441\u0435\u0445 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u043E\u0432 \u043E\u043F\u0440\u043E\u0441\u043E\u0432:",e),this.pollResultsError="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u043E\u043F\u0440\u043E\u0441\u043E\u0432",this.cdr.markForCheck()}})}loadPollResult(e){console.log(`\u0417\u0430\u043F\u0440\u043E\u0441 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u043E\u0432 \u0434\u043B\u044F pollId: ${e}`),this.pushService.getPollResults(e).subscribe({next:n=>{console.log(`\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u0434\u043B\u044F pollId ${e}:`,n),this.selectedPoll=n,this.viewMode="single",this.pollResultsError=null,this.cdr.markForCheck()},error:n=>{console.error(`\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u043E\u0432 \u043E\u043F\u0440\u043E\u0441\u0430 ${e}:`,n),this.pollResultsError=`\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u0434\u043B\u044F \u043E\u043F\u0440\u043E\u0441\u0430 ${e}`,this.cdr.markForCheck()}})}showPollDetails(e){console.log(`\u041F\u0435\u0440\u0435\u0445\u043E\u0434 \u043A \u0434\u0435\u0442\u0430\u043B\u044F\u043C \u043E\u043F\u0440\u043E\u0441\u0430: ${e.pollId}`),this.loadPollResult(e.pollId)}goBackToAllPolls(){console.log("\u0412\u043E\u0437\u0432\u0440\u0430\u0442 \u043A \u0441\u043F\u0438\u0441\u043A\u0443 \u0432\u0441\u0435\u0445 \u043E\u043F\u0440\u043E\u0441\u043E\u0432"),this.loadAllPollResults()}setContentMode(e){this.contentMode=e,this.saveFormData(),this.cdr.markForCheck()}setPollMode(e){this.pollMode=e,this.pollPayload.isQuiz=e==="quiz",this.pollPayload.allowsMultipleAnswers=e==="regular"?this.pollPayload.allowsMultipleAnswers:!1,this.saveFormData(),this.cdr.markForCheck()}checkFormValidity(){this.emptyMessage=!this.pushText?.trim()&&!this.imageUrl?.trim(),this.cdr.markForCheck()}checkPollValidity(){this.cdr.markForCheck()}isPollValid(){return this.pollPayload.question.trim()&&this.pollPayload.options.length>=2&&this.pollPayload.options.every(e=>e.trim())&&(this.pollMode!=="quiz"||this.pollPayload.correctOptionId!==void 0)}addPollOption(){this.pollPayload.options.length<10&&(this.pollPayload.options=[...this.pollPayload.options,""]),this.saveFormData()}trackByOption(e,n){return e}onSendToAllChange(){this.saveFormData()}onCategoryChange(e){let n=e.target,t=parseInt(n.value,10);n.checked?this.selectedCategoryIds.includes(t)||this.selectedCategoryIds.push(t):this.selectedCategoryIds=this.selectedCategoryIds.filter(o=>o!==t),console.log("\u0412\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438:",this.selectedCategoryIds),this.saveFormData()}saveFormData(){let e={imageUrl:this.imageUrl,pushText:this.pushText,buttonName:this.buttonName,buttonUrl:this.buttonUrl,selectedCategoryIds:this.selectedCategoryIds,pollPayload:this.pollPayload,contentMode:this.contentMode,pollMode:this.pollMode};localStorage.setItem("pushFormData",JSON.stringify(e))}refreshImage(){this.clearMessages(),this.saveFormData()}copyTagContent(e){let n=this.formatTags[e],t=n.tag==="[Name]"?n.tag:`${n.tag}${n.content}${n.tag.replace("[","[/")}`;navigator.clipboard.writeText(t).then(()=>{this.copiedStates[e]=!0,setTimeout(()=>{this.copiedStates[e]=!1,this.cdr.markForCheck()},3e3)}).catch(o=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0438 \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0433\u043E \u0442\u0435\u0433\u0430:",o)})}sendPush(){let e={imageUrl:this.imageUrl?.trim()||"",text:this.pushText?.trim()||"",buttonName:this.buttonName?.trim()||"",buttonUrl:this.buttonUrl?.trim()||"",categoryIds:this.selectedCategoryIds};if(this.isSending=!0,this.resultMessage="",this.pushStatuses=[],sessionStorage.removeItem("pushStatuses"),!e.imageUrl&&!e.text&&!e.buttonName&&!e.buttonUrl){this.resultMessage="\u041D\u0443\u0436\u043D\u043E \u0432\u0432\u0435\u0441\u0442\u0438 \u0445\u043E\u0442\u044F \u0431\u044B \u0442\u0435\u043A\u0441\u0442, \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0443 \u0438\u043B\u0438 \u043A\u043D\u043E\u043F\u043A\u0443",this.isSending=!1;return}this.pushService.sendPush(e).subscribe({next:n=>{this.isSending=!1,this.successMessage=n.message,this.imageUrl="",this.pushText="",this.buttonName="",this.buttonUrl="",this.selectedCategoryIds=[],localStorage.removeItem("pushFormData"),this.cdr.markForCheck()},error:n=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 push \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F",n),this.resultMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F",this.isSending=!1,this.eventSource?.close(),this.cdr.markForCheck()}})}sendPoll(){if(!this.isPollValid()){alert("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u043E\u043F\u0440\u043E\u0441, \u043C\u0438\u043D\u0438\u043C\u0443\u043C \u0434\u0432\u0430 \u0432\u0430\u0440\u0438\u0430\u043D\u0442\u0430 \u043E\u0442\u0432\u0435\u0442\u0430 \u0438, \u0434\u043B\u044F \u0432\u0438\u043A\u0442\u043E\u0440\u0438\u043D\u044B, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u043E\u0442\u0432\u0435\u0442");return}let e={question:this.pollPayload.question.trim(),options:this.pollPayload.options.map(n=>n.trim()).filter(n=>n),isAnonymous:this.pollPayload.isAnonymous,allowsMultipleAnswers:this.pollMode==="regular"?this.pollPayload.allowsMultipleAnswers:!1,isQuiz:this.pollMode==="quiz",correctOptionId:this.pollMode==="quiz"?this.pollPayload.correctOptionId:void 0,categoryIds:this.selectedCategoryIds};this.isSending=!0,this.resultMessage="",this.pushStatuses=[],sessionStorage.removeItem("pushStatuses"),this.pushService.sendPoll(e).subscribe({next:n=>{this.isSending=!1,this.successMessage=n.message,this.pollPayload.question="",this.pollPayload.options=[""],this.pollPayload.correctOptionId=0,this.selectedCategoryIds=[],localStorage.removeItem("pushFormData"),this.cdr.markForCheck(),this.loadAllPollResults()},error:n=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 \u043E\u043F\u0440\u043E\u0441\u0430",n),this.resultMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 \u043E\u043F\u0440\u043E\u0441\u0430",this.isSending=!1,this.eventSource?.close(),this.cdr.markForCheck()}})}clearStatuses(){this.pushStatuses=[],sessionStorage.removeItem("pushStatuses"),this.cdr.markForCheck()}clearPollResults(){this.pollResults=[],this.pollResultsError=null,this.viewMode="all",this.selectedPoll=null,this.cdr.markForCheck()}cancelMessage(){this.resultMessage=""}clearMessages(){this.successMessage=null,this.errorMessage=null,this.cdr.markForCheck()}static \u0275fac=function(n){return new(n||a)(k(pi),k(pt),k(ye),k($),k(ce))};static \u0275cmp=B({type:a,selectors:[["app-push"]],decls:90,vars:17,consts:[["noPollResults",""],["noStatuses",""],[1,"admin-page","push-page","ml-side","section"],[1,"container","mx-auto","pt-[10px]"],[1,"bg-main-trans2-gradient-90","header-tab","flex","items-center","justify-between","py-[10px]","mb-[0px]","rounded-[20px]","w-[100%]","pr-4"],[1,"title-tab","text-2xl","font-bold","text-indigo-600"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 24 24"],["fill","none","stroke","#4f45e5","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","#4f45e5","fill-opacity","0","stroke-dasharray","72","stroke-dashoffset","72","d","M3 19.5v-15.5c0 -0.55 0.45 -1 1 -1h16c0.55 0 1 0.45 1 1v12c0 0.55 -0.45 1 -1 1h-14.5Z"],["fill","freeze","attributeName","fill-opacity","begin","0.7s","dur","0.15s","values","0;0.3"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.6s","values","72;0"],["stroke-dasharray","10","stroke-dashoffset","10","d","M8 7h8"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.85s","dur","0.2s","values","10;0"],["stroke-dasharray","10","stroke-dashoffset","10","d","M8 10h8"],["fill","freeze","attributeName","stroke-dashoffset","begin","1.15s","dur","0.2s","values","10;0"],["stroke-dasharray","6","stroke-dashoffset","6","d","M8 13h4"],["fill","freeze","attributeName","stroke-dashoffset","begin","1.45s","dur","0.2s","values","6;0"],[1,"collapse-wrapper","flex","flex-col","gap-2","mt-[30px]"],[1,"collapse","hover-shadow","border"],["type","radio","name","my-accordion-3","checked","checked",1,"peer"],[1,"collapse-title","text-xl","font-medium","peer-checked:bg-gradient","flex","justify-between","items-center"],[1,"block","text-2xl","text-gray-600","font-bold","mb-1","text-center"],[1,"collapse-content","peer-checked:bg-white"],[1,"content-choice","flex","gap-2","mb-4","justify-center"],[1,"message-mode","btn-block","shadow-2xl","px-5","py-8","mx-2","my-4","rounded-3xl","cursor-pointer","hover-shadow",3,"click","ngClass"],[1,"text-xl"],[1,"poll-mode","btn-block","shadow-2xl","px-5","py-8","mx-2","my-4","rounded-3xl","cursor-pointer","hover-shadow",3,"click","ngClass"],[4,"ngIf"],["type","radio","name","my-accordion-3",1,"peer"],[1,"collapse-title","text-xl","font-medium","peer-checked:bg-gradient"],[1,"block","text-xl","text-indigo-400","font-bold","text-center"],[1,"users-groups","flex","flex-col","pt-[10px]"],[1,"users-all-wrapper","pb-3"],[1,"text-gray-500","opacity-50","font-bold","text-xl"],[1,"flex","flex-col","items-start","btn","btn-ghost","btn-access","w-fit","mb-2","rounded-[35px]"],[1,"label","cursor-pointer"],[1,"block","text-lg","pr-1"],["type","checkbox",1,"checkbox","checkbox-success",3,"ngModelChange","ngModel"],[1,"users-group","pb-3"],[1,"text-gray-500","opacity-50","text-lg","font-bold"],[1,"users-group-wrapper","flex","gap-4"],["class","flex flex-col items-start btn btn-ghost btn-access w-fit mb-2 rounded-[35px]",4,"ngFor","ngForOf"],[1,"btn-wrapper","w-full","flex","items-center","justify-center","py-[20px]"],[1,"btn","btn-accent","w-[50%]","text-white","text-xl","rounded-[35px]","min-h-[70px]",3,"click","disabled"],["id","lineMdEmailCheck0"],["fill","none","stroke","#fff","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["stroke-dasharray","64","stroke-dashoffset","64","d","M4 5h16c0.55 0 1 0.45 1 1v12c0 0.55 -0.45 1 -1 1h-16c-0.55 0 -1 -0.45 -1 -1v-12c0 -0.55 0.45 -1 1 -1Z"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.6s","values","64;0"],["stroke-dasharray","24","stroke-dashoffset","24","d","M3 6.5l9 5.5l9 -5.5"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.6s","dur","0.2s","values","24;0"],["fill","#000","fill-opacity","0","stroke","none","d","M19 13c3.31 0 6 2.69 6 6c0 3.31 -2.69 6 -6 6c-3.31 0 -6 -2.69 -6 -6c0 -3.31 2.69 -6 6 -6Z"],["fill","freeze","attributeName","fill-opacity","begin","0.8s","to","1"],["stroke-dasharray","10","stroke-dashoffset","10","d","M16 19l1.75 1.75l3.75 -3.75"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.8s","dur","0.2s","values","10;0"],["width","24","height","24","fill","currentColor","mask","url(#lineMdEmailCheck0)"],[1,"collapse","hover-shadow","border","bg-acacent"],[1,"text-xl","text-white","font-bold"],[1,"collapse-content","peer-checked:bg-white","px-0"],["class","overflow-x-auto",4,"ngIf","ngIfElse"],["class","p-2 bg-gray-50 rounded-lg shadow-sm",4,"ngIf"],[1,"text-xl","text-indigo-400","font-bold"],[1,"p-4"],["class","fixed h-full w-full top-0 left-0",4,"ngIf"],["class","message-form mb-5 pt-2 pb-8",4,"ngIf"],["class","poll-form mb-5 pt-2 pb-8",4,"ngIf"],[1,"message-form","mb-5","pt-2","pb-8"],[1,"text-xl","font-bold","py-4","text-center","flex","justify-center","items-center"],[1,"formating-tips"],["data-tip","\u041F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0430 \u0444\u043E\u0440\u043C\u0430\u0442\u043E\u0432 \u0442\u0435\u043A\u0441\u0442\u0430",1,"tooltip","tooltip-right","tooltip-success"],[1,"dropdown","dropdown-start","text-indigo-600"],["tabindex","0","role","button",1,"btn","btn-circle","btn-ghost","m-1","hover-shadow","hover:bg-base-200"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24",1,"fill-success","text-success"],["fill","currentColor","d","M12 17q.425 0 .713-.288T13 16v-4q0-.425-.288-.712T12 11t-.712.288T11 12v4q0 .425.288.713T12 17m0-8q.425 0 .713-.288T13 8t-.288-.712T12 7t-.712.288T11 8t.288.713T12 9m0 13q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m0-8"],["tabindex","0",1,"dropdown-content","menu","bg-base-100","hover-shadow","rounded-box","z-10","w-[380px]","p-2","shadow-sm"],["class","flex items-center",4,"ngFor","ngForOf"],[1,"form-group","mb-[10px]"],[1,"block","text-sm","text-indigo-400","font-bold","mb-1"],["class","text-red-500 text-sm mt-2 block pt-0 w-full",4,"ngIf"],["placeholder","https://example.com/image.jpg",1,"input","w-full","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","blur","ngModel"],[1,"form-group","mb-[15px]","relative"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435",1,"w-full","h-[24dvh]","border","rounded-lg","px-4","py-2","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel","disabled"],[1,"text-sm","font-bold","text-indigo-400","mb-1","mt-5"],[1,"header-tab","flex","items-center","justify-between","px-[40px]","py-[20px]","radius-30","w-[100%]","gap-4","mx-auto","tracking-wide","nj-toast-gradient","mb-[0px]"],[1,"form-group","w-[45%]"],[1,"block","text-sm","text-white","font-bold"],["placeholder","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A",1,"input","w-full","mt-2","mb-4","border","border-gray-300","rounded-lg","h-[40px]","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40","text-black",3,"ngModelChange","ngModel"],["placeholder","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C URL \u043A\u043D\u043E\u043F\u043A\u0438",1,"input","w-full","mt-2","mb-4","border","border-gray-300","rounded-lg","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40","h-[40px]","text-black",3,"ngModelChange","ngModel"],["class","warning mt-4",4,"ngIf"],[1,"flex","items-center"],[1,"flex","items-center","justify-between","w-full",3,"click"],["class","copy icon-hover",4,"ngIf"],["class","copy-success",4,"ngIf"],[1,"copy","icon-hover"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","currentColor","d","M9.116 17q-.691 0-1.153-.462T7.5 15.385V4.615q0-.69.463-1.153T9.116 3h7.769q.69 0 1.153.462t.462 1.153v10.77q0 .69-.462 1.152T16.884 17zm-3 3q-.691 0-1.153-.462T4.5 18.385V6.615h1v11.77q0 .23.192.423t.423.192h8.77v1z"],[1,"copy-success"],["fill","none","stroke","#1b8a1b","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","#1b8a1b","fill-opacity","0","d","M3 12c0 -4.97 4.03 -9 9 -9c4.97 0 9 4.03 9 9c0 4.97 -4.03 9 -9 9c-4.97 0 -9 -4.03 -9 -9Z"],["fill","freeze","attributeName","fill-opacity","dur","0.15s","values","0;0.3"],["stroke-dasharray","14","stroke-dashoffset","14","d","M8 12l3 3l5 -5"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.15s","dur","0.2s","values","14;0"],[1,"text-red-500","text-sm","mt-2","block","pt-0","w-full"],[1,"warning","mt-4"],[1,"poll-form","mb-5","pt-2","pb-8"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u043E\u043F\u0440\u043E\u0441",1,"input","w-full","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40","h-[200px]",3,"ngModelChange","ngModel"],[1,"form-group","mb-[15px]"],["class","mb-2",4,"ngFor","ngForOf","ngForTrackBy"],["class","btn btn-sm btn-outline hover:fill-white",3,"click",4,"ngIf"],[1,"poll-type-choice","flex","items-center","justify-center","gap-4","py-2"],[1,"regular-poll","btn-block","shadow-2xl","px-5","py-4","mx-2","rounded-3xl","cursor-pointer","hover-shadow",3,"click","ngClass"],[1,"text-lg"],[1,"quiz-poll","btn-block","shadow-2xl","px-5","py-4","mx-2","rounded-3xl","cursor-pointer","hover-shadow",3,"click","ngClass"],["class","flex items-center mt-2",4,"ngIf"],["class","w-full flex gap-6 items-baseline mt-16",4,"ngIf"],[1,"mb-2"],[1,"input","w-full","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","id","name","ngModel","placeholder"],[1,"btn","btn-sm","btn-outline","hover:fill-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24"],["fill","#4f45e5","d","M11 13H5v-2h6V5h2v6h6v2h-6v6h-2z"],[1,"flex","items-center","mt-2"],["type","checkbox","id","is-anonymous","name","is-anonymous",1,"checkbox","checkbox-neutral",3,"ngModelChange","ngModel"],["type","checkbox","id","allows-multiple","name","allows-multiple",1,"checkbox","checkbox-success",3,"ngModelChange","ngModel"],[1,"w-full","flex","gap-6","items-baseline","mt-16"],[1,"block","text-xl","font-bold","mb-1","nj-toast-grad-access"],["id","correct-option","name","correct-option",1,"select","select-primary",3,"ngModelChange","ngModel"],["class","text-lg","disabled","","selected","",4,"ngIf"],["class","text-lg font-bold",3,"value","disabled",4,"ngFor","ngForOf","ngForTrackBy"],["disabled","","selected","",1,"text-lg"],[1,"text-lg","font-bold",3,"value","disabled"],[1,"block","text-lg","font-bold","pr-1"],["type","checkbox",1,"checkbox","checkbox-success",3,"change","value","checked"],[1,"overflow-x-auto"],[1,"table","table-xs","w-full"],[1,"bg-gray-100","text-gray-600"],[1,"p-2"],[1,"p-2","font-semibold"],["class","hover:bg-gray-50 cursor-pointer transition-colors",3,"click",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50","cursor-pointer","transition-colors",3,"click"],[1,"p-2","text-md"],[1,"list-decimal","pl-4"],["class","py-1",4,"ngFor","ngForOf"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24"],["fill","#00aa6f","d","m12 16l4-4l-4-4l-1.4 1.4l1.6 1.6H8v2h4.2l-1.6 1.6zm0 6q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22"],[1,"py-1"],[1,"p-2","bg-gray-50","rounded-lg","shadow-sm"],[1,"btn","btn-circle","btn-ghost","m-1","mb-4","hover-shadow","hover:bg-base-200",3,"click"],["fill","#4f45e5","d","m7.825 13l4.9 4.9q.3.3.288.7t-.313.7q-.3.275-.7.288t-.7-.288l-6.6-6.6q-.15-.15-.213-.325T4.426 12t.063-.375t.212-.325l6.6-6.6q.275-.275.688-.275t.712.275q.3.3.3.713t-.3.712L7.825 11H19q.425 0 .713.288T20 12t-.288.713T19 13z"],[1,"mb-6"],[1,"text-3xl","font-bold","text-indigo-600","mb-2"],[1,"text-sm","text-gray-500"],[1,"table","table-xs","table-pin-rows","table-pin-cols","w-full"],[1,"bg-gray-100","text-gray-700"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50"],[1,"flex","items-center","h-full"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","class","mr-2",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24",1,"mr-2"],["fill","#75f163","d","m9.55 15.15l8.475-8.475q.3-.3.7-.3t.7.3t.3.713t-.3.712l-9.175 9.2q-.3.3-.7.3t-.7-.3L4.55 13q-.3-.3-.288-.712t.313-.713t.713-.3t.712.3z"],[1,"text-gray-500","absolute"],[1,"table"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-outline","mt-4",3,"click"],[3,"ngClass"],[3,"ngClass",4,"ngIf"],[1,"text-gray-500"],[1,"fixed","h-full","w-full","top-0","left-0"],[1,"overlay-popup"],[1,"flex","justify-end","absolute","top-0","w-full"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24",1,"bg-red-400","transition-all","rounded-[25px]","cursor-pointer","hover:scale-125","active:scale-100",3,"click"],["fill","none","stroke","#000","stroke-dasharray","16","stroke-dashoffset","16","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["d","M7 7l10 10"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.4s","values","16;0"],["d","M17 7l-10 10"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.4s","dur","0.4s","values","16;0"]],template:function(n,t){if(n&1){let o=S();_(0,"app-sidebar"),i(1,"section",2)(2,"div",3)(3,"div",4)(4,"h2",5),s(5," \u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u0422\u0413 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 \u0438\u043B\u0438 \u043E\u043F\u0440\u043E\u0441 "),r(),y(),i(6,"svg",6)(7,"g",7)(8,"path",8),_(9,"animate",9)(10,"animate",10),r(),i(11,"path",11),_(12,"animate",12),r(),i(13,"path",13),_(14,"animate",14),r(),i(15,"path",15),_(16,"animate",16),r()()()(),M(),i(17,"div",17)(18,"div",18),_(19,"input",19),i(20,"div",20)(21,"label",21),s(22," \u{1F447} \u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043F \u0422\u0413-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F \u{1F447} "),r()(),i(23,"div",22)(24,"div",23)(25,"div",24),h("click",function(){return c(o),g(t.setContentMode("message"))}),i(26,"p",25),s(27,"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C TG \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435"),r()(),i(28,"div",26),h("click",function(){return c(o),g(t.setContentMode("poll"))}),i(29,"p",25),s(30,"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043E\u043F\u0440\u043E\u0441"),r()()(),f(31,Ir,3,2,"ng-container",27),r()(),i(32,"div",18),_(33,"input",28),i(34,"div",29)(35,"label",30),s(36," \u2757\uFE0F\u041E\u0411\u042F\u0417\u0410\u0422\u0415\u041B\u042C\u041D\u041E\u2757\uFE0F \u0414\u043B\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u0422\u0413 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u0440\u0443\u043F\u043F\u0443(\u044B) "),r()(),i(37,"div",22)(38,"div",31)(39,"div",32)(40,"p",33),s(41," \u0412\u0441\u0435\u043C \u044E\u0437\u0435\u0440\u0430\u043C: "),r(),i(42,"div",34)(43,"label",35)(44,"span",36),s(45,"All users"),r(),i(46,"input",37),C("ngModelChange",function(E){return c(o),v(t.sendToAll,E)||(t.sendToAll=E),g(E)}),h("ngModelChange",function(){return c(o),g(t.onSendToAllChange())}),r()()()(),i(47,"div",38)(48,"p",39),s(49," \u0413\u0440\u0443\u043F\u043F\u044B \u044E\u0437\u0435\u0440\u043E\u0432: "),r(),i(50,"div",40),f(51,Dr,5,3,"div",41),r()()(),i(52,"div",42)(53,"button",43),h("click",function(){return c(o),g(t.contentMode==="message"?t.sendPush():t.sendPoll())}),s(54),i(55,"span"),y(),i(56,"svg",6)(57,"mask",44)(58,"g",45)(59,"path",46),_(60,"animate",47),r(),i(61,"path",48),_(62,"animate",49),r(),i(63,"path",50),_(64,"set",51),r(),i(65,"path",52),_(66,"animate",53),r()()(),_(67,"rect",54),r()()()()()(),M(),i(68,"div",55),_(69,"input",28),i(70,"div",29)(71,"h2",56),s(72,"\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u043E\u043F\u0440\u043E\u0441\u043E\u0432"),r()(),i(73,"div",57)(74,"div"),f(75,Pr,18,1,"div",58)(76,Wr,35,3,"div",59)(77,Ur,1,0,"ng-template",null,0,fe),r()()(),i(79,"div",18),_(80,"input",28),i(81,"div",29)(82,"h2",60),s(83,"\u0421\u0442\u0430\u0442\u0443\u0441\u044B \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438"),r()(),i(84,"div",22)(85,"div",61),f(86,Qr,18,1,"div",58)(87,Rr,2,0,"ng-template",null,1,fe),r()()(),f(89,Gr,10,1,"div",62),r()()()}if(n&2){let o=he(78),p=he(88);l(25),d("ngClass",ie(13,ct,t.contentMode==="message")),l(3),d("ngClass",ie(15,ct,t.contentMode==="poll")),l(3),d("ngIf",t.contentMode),l(15),x("ngModel",t.sendToAll),l(5),d("ngForOf",t.categories),l(2),d("disabled",t.isSending||t.contentMode==="message"&&t.emptyMessage||t.contentMode==="poll"&&!t.isPollValid()),l(),b(" ",t.isSending?"\u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430...":"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C"," "),l(21),d("ngIf",t.viewMode==="all"&&t.getPollResults().length>0)("ngIfElse",o),l(),d("ngIf",t.viewMode==="single"&&t.selectedPoll),l(10),d("ngIf",t.filteredPushStatuses.length)("ngIfElse",p),l(3),d("ngIf",t.resultMessage)}},dependencies:[ne,H,A,de,Z,ee,Y,Be,re,q,Q]})}return a})();var gt=(()=>{class a{http;apiUrl=pe.auth.baseUrl+"/users";constructor(e){this.http=e}getUsers(){return this.http.get(this.apiUrl)}deleteUser(e){return this.http.delete(`${this.apiUrl}/${e}`)}static \u0275fac=function(n){return new(n||a)(N($))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var Yr=a=>({hover:a});function Xr(a,m){a&1&&(i(0,"div",16),_(1,"app-loading"),r())}function Jr(a,m){if(a&1&&(i(0,"div",17),s(1),r()),a&2){let e=u();l(),b(" ",e.error," ")}}function Kr(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2);l(),b(" ",e.ascending?"\u2191":"\u2193"," ")}}function Zr(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2);l(),b(" ",e.ascending?"\u2191":"\u2193"," ")}}function ea(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2);l(),b(" ",e.ascending?"\u2191":"\u2193"," ")}}function ta(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2);l(),b(" ",e.ascending?"\u2191":"\u2193"," ")}}function ia(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2);l(),b(" ",e.ascending?"\u2191":"\u2193"," ")}}function na(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2);l(),b(" ",e.ascending?"\u2191":"\u2193"," ")}}function ra(a,m){if(a&1&&(i(0,"span",30),s(1),r()),a&2){let e=m.$implicit;l(),b(" ",e.name," ")}}function aa(a,m){if(a&1&&(se(0),f(1,ra,2,1,"span",29),ue()),a&2){let e=u().$implicit;l(),d("ngForOf",e.newsCategories)}}function oa(a,m){a&1&&s(0,"-")}function la(a,m){if(a&1){let e=S();i(0,"tr",24)(1,"th"),s(2),r(),i(3,"th"),s(4),r(),i(5,"td"),s(6),r(),i(7,"td"),s(8),r(),i(9,"td"),s(10),r(),i(11,"td"),s(12),r(),i(13,"td"),s(14),r(),i(15,"td"),s(16),r(),i(17,"td"),s(18),r(),i(19,"td"),s(20),r(),i(21,"td"),f(22,aa,2,1,"ng-container",25)(23,oa,1,0,"ng-template",null,0,fe),r(),i(25,"td")(26,"button",26),h("click",function(){let t=c(e).$implicit,o=u(2);return g(o.deleteUser(t.id,t.first_name||t.username||t.id.toString()))}),y(),i(27,"svg",27),_(28,"path",28),r()()()()}if(a&2){let e=m.$implicit,n=m.index,t=he(24);d("ngClass",ie(13,Yr,n%2===1)),l(2),w(n+1),l(2),w(e.id),l(2),w(e.first_name),l(2),w(e.last_name||"-"),l(2),w(e.username||"-"),l(2),w(e.email||"-"),l(2),w(e.state),l(2),w(e.is_bot),l(2),w(e.language_code),l(2),w(e.updated_at.slice(0,16)),l(2),d("ngIf",e.newsCategories&&e.newsCategories.length)("ngIfElse",t)}}function sa(a,m){if(a&1){let e=S();i(0,"div",18)(1,"div",19)(2,"table",20)(3,"thead")(4,"tr")(5,"th"),s(6,"$"),r(),i(7,"th",21),h("click",function(){c(e);let t=u();return g(t.toggleSort("id"))}),s(8," Telegram ID "),f(9,Kr,2,1,"span",22),r(),i(10,"th",21),h("click",function(){c(e);let t=u();return g(t.toggleSort("first_name"))}),s(11," First Name "),f(12,Zr,2,1,"span",22),r(),i(13,"th"),s(14,"Last Name"),r(),i(15,"th"),s(16,"Username"),r(),i(17,"th",21),h("click",function(){c(e);let t=u();return g(t.toggleSort("email"))}),s(18," Email "),f(19,ea,2,1,"span",22),r(),i(20,"th",21),h("click",function(){c(e);let t=u();return g(t.toggleSort("state"))}),s(21," State "),f(22,ta,2,1,"span",22),r(),i(23,"th"),s(24,"isBot"),r(),i(25,"th",21),h("click",function(){c(e);let t=u();return g(t.toggleSort("language_code"))}),s(26," Lang "),f(27,ia,2,1,"span",22),r(),i(28,"th",21),h("click",function(){c(e);let t=u();return g(t.toggleSort("updated_at"))}),s(29," Update "),f(30,na,2,1,"span",22),r(),i(31,"th"),s(32,"Categories"),r(),_(33,"th"),r()(),i(34,"tbody"),f(35,la,29,15,"tr",23),r()()()()}if(a&2){let e=u();l(9),d("ngIf",e.sortBy==="id"),l(3),d("ngIf",e.sortBy==="first_name"),l(7),d("ngIf",e.sortBy==="email"),l(3),d("ngIf",e.sortBy==="state"),l(5),d("ngIf",e.sortBy==="language_code"),l(3),d("ngIf",e.sortBy==="updated_at"),l(5),d("ngForOf",e.sortedUsers)}}function ua(a,m){a&1&&(i(0,"div",31),s(1," \u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B. "),r())}var _i=(()=>{class a{usersService;users=[];isLoading=!1;error="";sortBy="updated_at";ascending=!1;successMessage=null;errorMessage=null;constructor(e){this.usersService=e}ngOnInit(){let e=localStorage.getItem("userSortBy"),n=localStorage.getItem("userSortAscending");e&&Object.keys(this.users[0]||{}).includes(e)&&(this.sortBy=e),n!==null&&(this.ascending=n==="true"),this.loadUsers()}loadUsers(){this.isLoading=!0,this.usersService.getUsers().subscribe({next:e=>{this.users=e,this.isLoading=!1,this.sortUsers()},error:e=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439:",e),this.error="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439",this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439",this.isLoading=!1,this.clearMessagesAfterDelay()}})}toggleSort(e){this.sortBy===e?this.ascending=!this.ascending:(this.sortBy=e,this.ascending=e!=="updated_at"),this.sortUsers(),localStorage.setItem("userSortBy",this.sortBy),localStorage.setItem("userSortAscending",this.ascending.toString())}get sortedUsers(){return this.users.length?[...this.users].sort((e,n)=>{let t=e[this.sortBy]??"",o=n[this.sortBy]??"";if(this.sortBy==="updated_at"){let p=new Date(t).getTime(),E=new Date(o).getTime();return this.ascending?p-E:E-p}return typeof t=="string"&&typeof o=="string"?this.ascending?t.localeCompare(o):o.localeCompare(t):typeof t=="number"&&typeof o=="number"?this.ascending?t-o:o-t:0}):[...this.users]}sortUsers(){this.users=this.sortedUsers}deleteUser(e,n){confirm(`\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F ${n||e}?`)&&this.usersService.deleteUser(e).subscribe({next:()=>{console.log(`\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C ${e} \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D`),this.users=this.users.filter(t=>t.id!==e),this.successMessage=`\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C ${n||e} \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D`,this.clearMessagesAfterDelay()},error:t=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F:",t);let o=t.status===404?"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D":t.status===400?"\u041D\u0435\u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u044B\u0439 ID \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F":"\u041E\u0448\u0438\u0431\u043A\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F";this.errorMessage=o,this.clearMessagesAfterDelay()}})}clearMessages(){this.successMessage=null,this.errorMessage=null}clearMessagesAfterDelay(){setTimeout(()=>this.clearMessages(),3e3)}static \u0275fac=function(n){return new(n||a)(k(gt))};static \u0275cmp=B({type:a,selectors:[["app-users"]],decls:17,vars:4,consts:[["noSubs",""],[1,"admin-page","ml-side","section"],[1,"container","mx-auto","pt-[10px]"],[1,"bg-main-trans2-gradient-90","header-tab","flex","items-center","justify-between","py-[10px]","mb-0","rounded-[20px]","w-full","pr-4"],[1,"title-tab","text-2xl","font-bold","text-indigo-600"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 24 24"],["fill","#4f45e5","fill-opacity","0","stroke","#4f45e5","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["stroke-dasharray","20","stroke-dashoffset","20","d","M12 5c1.66 0 3 1.34 3 3c0 1.66 -1.34 3 -3 3c-1.66 0 -3 -1.34 -3 -3c0 -1.66 1.34 -3 3 -3Z"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.4s","values","20;0"],["stroke-dasharray","36","stroke-dashoffset","36","d","M12 14c4 0 7 2 7 3v2h-14v-2c0 -1 3 -3 7 -3Z"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.5s","dur","0.5s","values","36;0"],["fill","freeze","attributeName","fill-opacity","begin","1.1s","dur","0.5s","values","0;1"],["class","text-center py-4",4,"ngIf"],["class","text-red-500 text-center",4,"ngIf"],["class","overflow-x-auto mt-4",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"text-center","py-4"],[1,"text-red-500","text-center"],[1,"overflow-x-auto","mt-4"],[1,"overflow-x-auto"],[1,"table"],[1,"cursor-pointer",3,"click"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["title","Delete User",1,"btn","hover:btn-error","btn-circle","hover:text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","viewBox","0 0 24 24"],["fill","currentColor","d","M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12l1.41 1.41L13.41 14l2.12 2.12l-1.41 1.41L12 15.41l-2.12 2.12l-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"],["class","badge badge-info mr-1",4,"ngFor","ngForOf"],[1,"badge","badge-info","mr-1"],[1,"text-center"]],template:function(n,t){n&1&&(_(0,"app-sidebar"),i(1,"section",1)(2,"div",2)(3,"div",3)(4,"h2",4),s(5,"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438"),r(),y(),i(6,"svg",5)(7,"g",6)(8,"path",7),_(9,"animate",8),r(),i(10,"path",9),_(11,"animate",10),r(),_(12,"animate",11),r()()(),f(13,Xr,2,0,"div",12)(14,Jr,2,1,"div",13)(15,sa,36,7,"div",14)(16,ua,2,0,"div",15),r()()),n&2&&(l(13),d("ngIf",t.isLoading),l(),d("ngIf",t.error),l(),d("ngIf",!t.isLoading&&t.users.length),l(),d("ngIf",!t.isLoading&&t.users.length===0))},dependencies:[ne,H,A,de,Te]})}return a})();var _t=(()=>{class a{http;imageAddedSubject=new yt;constructor(e){this.http=e}getImages(){return this.http.get(`${pe.auth.baseUrl}/images`)}deleteImage(e){return this.http.delete(`${pe.auth.baseUrl}/images/${e}`)}notifyImageAdded(){this.imageAddedSubject.next()}onImageAdded(){return this.imageAddedSubject.asObservable()}static \u0275fac=function(n){return new(n||a)(N($))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var fi=(()=>{class a{http;url=pe.auth.baseUrl;uploadUrl=`${this.url}/upload`;constructor(e){this.http=e}uploadImage(e,n,t=""){let o=new FormData;return o.append("image",e),o.append("type",n),t&&o.append("name",t),this.http.post(this.uploadUrl,o)}static \u0275fac=function(n){return new(n||a)(N($))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();function ma(a,m){a&1&&(i(0,"p"),s(1," \u041F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044E\u0434\u0430 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0438\u043B\u0438 \u043A\u043B\u0438\u043A\u043D\u0438\u0442\u0435 \u0434\u043B\u044F \u0432\u044B\u0431\u043E\u0440\u0430 "),r())}function pa(a,m){if(a&1&&_(0,"img",31),a&2){let e=u();d("src",e.previewUrl,W)}}function ca(a,m){if(a&1){let e=S();i(0,"div",32)(1,"b"),s(2),r(),i(3,"span",33),h("click",function(){c(e);let t=u();return g(t.closeMessages())}),y(),i(4,"svg",34),_(5,"path",35),r()()()}if(a&2){let e=u();l(2),b(" ",e.successMessage," ")}}function ga(a,m){if(a&1){let e=S();i(0,"div",36),s(1),i(2,"span",33),h("click",function(){c(e);let t=u();return g(t.closeMessages())}),y(),i(3,"svg",34),_(4,"path",35),r()()()}if(a&2){let e=u();l(),b(" ",e.errorMessage," ")}}var xi=(()=>{class a{imageUploadService;selectedFile=null;previewUrl=null;isDragOver=!1;successMessage=null;errorMessage=null;selectedType="image";imageName="";imageUploaded=new G;constructor(e){this.imageUploadService=e}onDragOver(e){e.preventDefault(),this.isDragOver=!0}onDragLeave(e){e.preventDefault(),this.isDragOver=!1}onDrop(e){e.preventDefault(),this.isDragOver=!1,e.dataTransfer&&e.dataTransfer.files.length>0&&(this.selectedFile=e.dataTransfer.files[0],this.previewFile(this.selectedFile),e.dataTransfer.clearData())}onFileSelected(e){let n=e.target;n.files&&n.files.length>0&&(this.selectedFile=n.files[0],this.previewFile(this.selectedFile))}previewFile(e){let n=new FileReader;n.onload=()=>{this.previewUrl=n.result},n.readAsDataURL(e)}triggerFileInput(){document.querySelector('input[type="file"]').click()}uploadFile(){if(!this.selectedFile){this.errorMessage="\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043B \u0434\u043B\u044F \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438";return}console.log("\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u0435\u043C \u0444\u0430\u0439\u043B:",this.selectedFile.name),console.log("\u0412\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0439 \u0442\u0438\u043F:",this.selectedType),this.imageUploadService.uploadImage(this.selectedFile,this.selectedType,this.imageName.trim()).subscribe({next:e=>{console.log("\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E",e),this.imageUploaded.emit(e.path),this.successMessage="\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E",this.selectedFile=null,this.previewUrl=null,this.imageName="",this.selectedType="image"},error:e=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",e),this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F"}})}get canUpload(){return!!(this.selectedFile&&this.imageName?.trim().length>0&&this.selectedType?.length>0)}clearMessages(){this.successMessage=null,this.errorMessage=null}closeMessages(){this.successMessage=null,this.errorMessage=null}static \u0275fac=function(n){return new(n||a)(k(fi))};static \u0275cmp=B({type:a,selectors:[["app-image-upload"]],outputs:{imageUploaded:"imageUploaded"},decls:38,vars:10,consts:[["fileInput",""],[1,"image-upload","w-full"],[1,"flex","gap-8","justify-start","items-center","mt-4"],[1,"form-group","flex","flex-col"],["for","imageName",1,"text-indigo-500","font-bold","text-lg"],[1,"text-error"],["type","text","id","imageName","placeholder","\u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440: tg-bot, vote-arsenal, email-win",1,"input","mt-2","border","border-gray-300","px-4","py-2","ml-2","focus:ring","focus:ring-blue-300","focus:ring-opacity-40","ng-untouched","ng-pristine","ng-valid","w-[350px]","rounded-[35px]",3,"ngModelChange","ngModel"],[1,"flex","flex-col"],[1,""],[1,"flex","gap-4","mt-2"],["for","template-1",1,"label","btn","btn-ghost","px-2","cursor-pointer"],["type","radio","name","template-options","id","template-1","value","logo",1,"checkbox","checkbox-success",3,"ngModelChange","ngModel"],[1,"ml-2","text-[20px]"],["for","template-2",1,"label","btn","btn-ghost","px-2","cursor-pointer"],["type","radio","name","template-options","id","template-2","value","image",1,"checkbox","checkbox-success",3,"ngModelChange","ngModel"],["data-tip","1- \u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F, 2- \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043F \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435, 3- \u0434\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 !!!\u043A\u043D\u043E\u043F\u043A\u0430 \u0440\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u0443\u0435\u0442\u0441\u044F!!!",1,"upload-drop-zone","tooltip","tooltip-top","tooltip-primary",3,"dragover","dragleave","drop","click"],[4,"ngIf"],["alt","Preview","class","preview-image",3,"src",4,"ngIf"],["type","file","accept",".jpeg, .jpg, .png, .svg, .webp, .gif","hidden","",3,"change"],[1,"nj-toast-gradient","btn","w-full",3,"click","disabled"],[1,"flex","justify-center","mt-[4px]","cursor-pointer"],["xmlns","http://www.w3.org/2000/svg","width","60","height","60","viewBox","0 0 24 24"],["fill","none","stroke","#4E45E5","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","#4E45E5","fill-opacity","0","stroke-dasharray","20","stroke-dashoffset","20","d","M12 4h2v6h2.5l-4.5 4.5M12 4h-2v6h-2.5l4.5 4.5"],["attributeName","d","begin","0.5s","dur","1.5s","repeatCount","indefinite","values","M12 4h2v6h2.5l-4.5 4.5M12 4h-2v6h-2.5l4.5 4.5;M12 4h2v3h2.5l-4.5 4.5M12 4h-2v3h-2.5l4.5 4.5;M12 4h2v6h2.5l-4.5 4.5M12 4h-2v6h-2.5l4.5 4.5"],["fill","freeze","attributeName","fill-opacity","begin","0.7s","dur","0.5s","values","0;1"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.4s","values","20;0"],["stroke-dasharray","14","stroke-dashoffset","14","d","M6 19h12"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.5s","dur","0.2s","values","14;0"],["class","alert alert-success mb-4 relative flex justify-between",4,"ngIf"],["class","alert alert-error relative",4,"ngIf"],["alt","Preview",1,"preview-image",3,"src"],[1,"alert","alert-success","mb-4","relative","flex","justify-between"],[1,"close",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","viewBox","0 0 24 24"],["fill","currentColor","d","M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10s10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m3.59-13L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41z"],[1,"alert","alert-error","relative"]],template:function(n,t){if(n&1){let o=S();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"label",4),s(4,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F "),i(5,"span",5),s(6,"(\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E):"),r()(),i(7,"input",6),C("ngModelChange",function(E){return c(o),v(t.imageName,E)||(t.imageName=E),g(E)}),r()(),i(8,"div",7)(9,"h5",8),s(10," \u0412\u0438\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043F \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F (\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E): "),r(),i(11,"div",9)(12,"label",10)(13,"input",11),C("ngModelChange",function(E){return c(o),v(t.selectedType,E)||(t.selectedType=E),g(E)}),r(),i(14,"span",12),s(15,"Logo"),r()(),i(16,"label",13)(17,"input",14),C("ngModelChange",function(E){return c(o),v(t.selectedType,E)||(t.selectedType=E),g(E)}),r(),i(18,"span",12),s(19,"Image"),r()()()()(),i(20,"div",15),h("dragover",function(E){return c(o),g(t.onDragOver(E))})("dragleave",function(E){return c(o),g(t.onDragLeave(E))})("drop",function(E){return c(o),g(t.onDrop(E))})("click",function(){return c(o),g(t.triggerFileInput())}),f(21,ma,2,0,"p",16)(22,pa,1,1,"img",17),i(23,"input",18,0),h("change",function(E){return c(o),g(t.onFileSelected(E))}),r()(),i(25,"button",19),h("click",function(){return c(o),g(t.uploadFile())}),s(26," \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C "),r(),i(27,"div",20),y(),i(28,"svg",21)(29,"g",22)(30,"path",23),_(31,"animate",24)(32,"animate",25)(33,"animate",26),r(),i(34,"path",27),_(35,"animate",28),r()()()(),f(36,ca,6,1,"div",29)(37,ga,5,1,"div",30),r()}n&2&&(l(7),x("ngModel",t.imageName),l(6),x("ngModel",t.selectedType),l(4),x("ngModel",t.selectedType),l(3),U("dragover",t.isDragOver),l(),d("ngIf",!t.selectedFile),l(),d("ngIf",t.previewUrl),l(3),d("disabled",!t.canUpload),l(11),d("ngIf",t.successMessage),l(),d("ngIf",t.errorMessage))},dependencies:[A,Y,Nt,q,Q],styles:[".upload-drop-zone[_ngcontent-%COMP%]{padding:20px;text-align:center;cursor:pointer;transition:background-color .3s;margin:22px 0;border-radius:20px;height:55vh;background:linear-gradient(145deg,#fff,#5045e5);display:flex;justify-content:center;align-items:center;font-weight:600}.upload-drop-zone[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:100%;object-fit:contain}.btn[disabled][_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:disabled{opacity:.2}.upload-drop-zone.dragover[_ngcontent-%COMP%]{background-color:#e6f7ff}.preview-image[_ngcontent-%COMP%]{max-width:100%;margin-top:10px}.nj-toast-gradient.btn[_ngcontent-%COMP%]{width:95%;display:flex;justify-content:center;color:#fff;font-size:18px;font-weight:700;transition:.3s ease-in;margin:auto;height:65px}.nj-toast-gradient.btn[_ngcontent-%COMP%]:hover{transition:.3s ease-in;scale:1.025;box-shadow:0 0 15px #5045e5;padding:15px 0}"]})}return a})();var ha=(a,m)=>({"badge-success":a,"badge-info":m});function fa(a,m){if(a&1){let e=S();i(0,"span",24),h("click",function(){c(e);let t=u(),o=t.$implicit,p=t.index,E=u();return g(E.copyImageUrl(o,p))}),y(),i(1,"svg",22),_(2,"path",25),r()()}}function xa(a,m){a&1&&(i(0,"span",26),y(),i(1,"svg",27)(2,"g",28)(3,"path",29),_(4,"animate",30),r(),i(5,"path",31),_(6,"animate",32),r()()()())}function va(a,m){if(a&1){let e=S();i(0,"tr")(1,"td"),s(2),r(),i(3,"td")(4,"a",13),_(5,"img",14),r()(),i(6,"td",15),s(7),r(),i(8,"td")(9,"div",16),s(10),r()(),i(11,"td",17)(12,"div",18),f(13,fa,3,0,"span",19)(14,xa,7,0,"span",20),i(15,"span"),s(16),r()()(),i(17,"td")(18,"button",21),h("click",function(){let t=c(e),o=t.$implicit,p=t.index,E=u();return g(E.deleteImage(o,p))}),y(),i(19,"svg",22),_(20,"path",23),r()()()()}if(a&2){let e=m.$implicit,n=m.index,t=u();l(2),w(n+1),l(2),d("href",t.baseUrl+e,W),l(),d("src",t.baseUrl+e,W),l(2),w(t.getImageName(e)),l(2),d("ngClass",Fe(10,ha,t.getImageType(e)==="\u041B\u043E\u0433\u043E",t.getImageType(e)==="\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435")),l(),b(" ",t.getImageType(e)," "),l(3),d("ngIf",!t.copiedStates[n]),l(),d("ngIf",t.copiedStates[n]),l(2),Se("",t.baseUrl,"",e,"")}}function Ca(a,m){a&1&&(i(0,"div",33),s(1," \u041D\u0435\u0442 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0439 \u043F\u043E \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u043C \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u043C "),r())}function ba(a,m){if(a&1&&(i(0,"div",34),s(1),r()),a&2){let e=u();l(),b(" ",e.successMessage," ")}}function wa(a,m){if(a&1&&(i(0,"div",35),s(1),r()),a&2){let e=u();l(),b(" ",e.errorMessage," ")}}var vi=(()=>{class a{imageService;allImages=[];displayedImages=[];images=[];activeTab="all";searchTerm="";copiedStates=[];successMessage=null;errorMessage=null;baseUrl=I.auth.baseUrl;constructor(e){this.imageService=e}ngOnInit(){this.fetchImages(),this.imageService.onImageAdded().subscribe(()=>{this.fetchImages()})}fetchImages(){this.imageService.getImages().subscribe({next:e=>{this.allImages=e,this.applyFilters(),this.copiedStates=new Array(this.displayedImages.length).fill(!1)},error:e=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0439:",e),this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0441\u043F\u0438\u0441\u043A\u0430 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0439",this.clearMessagesAfterDelay()}})}applyFilters(){let e=[...this.allImages];if(this.activeTab==="logo"?e=e.filter(n=>n.includes("logo-")):this.activeTab==="image"&&(e=e.filter(n=>n.includes("image-")||!n.includes("logo-"))),this.searchTerm.trim()){let n=this.searchTerm.trim().toLowerCase();e=e.filter(t=>(t.split("/").pop()?.toLowerCase()||"").includes(n))}this.displayedImages=e.sort((n,t)=>{let o=this.extractTimestamp(n);return this.extractTimestamp(t)-o}),this.copiedStates=new Array(this.displayedImages.length).fill(!1)}setTab(e){this.activeTab=e,this.applyFilters()}onSearch(e){this.searchTerm=e.target.value,this.applyFilters()}extractTimestamp(e){let t=(e.split("/").pop()||"").match(/-(\d+)-\d+\./);return t?parseInt(t[1],10):0}getImageType(e){return e.includes("logo-")?"\u041B\u043E\u0433\u043E":"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435"}getImageName(e){return(e.split("/").pop()||"").split(/(image-|logo-)/)[0]||"\u2014"}copyImageUrl(e,n){let t=`${this.baseUrl}${e}`;navigator.clipboard.writeText(t).then(()=>{this.copiedStates[n]=!0,setTimeout(()=>this.copiedStates[n]=!1,3e3)}).catch(o=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F:",o),this.errorMessage="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C URL",this.clearMessagesAfterDelay()})}deleteImage(e,n){let t=e.split("/").pop();this.imageService.deleteImage(t).subscribe({next:()=>{this.allImages=this.allImages.filter(o=>o!==e),this.applyFilters(),this.successMessage=`\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 ${t} \u0443\u0434\u0430\u043B\u0435\u043D\u043E`,this.clearMessagesAfterDelay()},error:o=>{this.errorMessage=o.status===404?"\u0424\u0430\u0439\u043B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D":"\u041E\u0448\u0438\u0431\u043A\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F",this.clearMessagesAfterDelay()}})}clearMessagesAfterDelay(){setTimeout(()=>{this.successMessage=null,this.errorMessage=null},4e3)}static \u0275fac=function(n){return new(n||a)(k(_t))};static \u0275cmp=B({type:a,selectors:[["app-images-table"]],inputs:{images:"images"},decls:31,vars:11,consts:[[1,"overflow-x-auto","rounded-box","border","border-base-300","bg-base-100","w-full","pt-6","pb-10"],[1,"flex","flex-col","md:flex-row","justify-start","items-start","md:items-center","gap-4","mb-6","px-4","rounded-[35px]"],[1,"tabs","tabs-boxed"],[1,"tab","rounded-[35px]",3,"click"],[1,"form-control","w-full","max-w-xs"],["type","text","placeholder","\u041F\u043E\u0438\u0441\u043A \u043F\u043E \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044E...",1,"input","input-bordered","focus:ring","focus:ring-blue-300","rounded-[35px]","w-[350px]",3,"ngModelChange","input","ngModel"],[1,"table","table-zebra","w-full"],[1,"w-12"],[1,"w-16"],[4,"ngFor","ngForOf"],["class","alert alert-info mt-6",4,"ngIf"],["class","alert alert-success mt-6",4,"ngIf"],["class","alert alert-error mt-6",4,"ngIf"],["target","_blank",3,"href"],["alt","preview",1,"max-h-16","rounded",3,"src"],[1,"font-medium"],[1,"badge",3,"ngClass"],[1,"max-w-xs","truncate"],[1,"flex","items-center","gap-2"],["class","copy btn btn-ghost btn-circle",3,"click",4,"ngIf"],["class","copy-success",4,"ngIf"],["title","Delete User","title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435",1,"btn","bg-white","hover:btn-error","btn-circle","hover:text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","viewBox","0 0 24 24"],["fill","currentColor","d","M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12l1.41 1.41L13.41 14l2.12 2.12l-1.41 1.41L12 15.41l-2.12 2.12l-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"],[1,"copy","btn","btn-ghost","btn-circle",3,"click"],["fill","currentColor","d","M9.116 17q-.691 0-1.153-.462T7.5 15.385V4.615q0-.69.463-1.153T9.116 3h7.769q.69 0 1.153.462t.462 1.153v10.77q0 .69-.462 1.152T16.884 17zm-3 3q-.691 0-1.153-.462T4.5 18.385V6.615h1v11.77q0 .23.192.423t.423.192h8.77v1z"],[1,"copy-success"],["xmlns","http://www.w3.org/2000/svg","width","44","height","44","viewBox","0 0 24 24"],["fill","none","stroke","#1b8a1b","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","#1b8a1b","fill-opacity","0","d","M3 12c0 -4.97 4.03 -9 9 -9c4.97 0 9 4.03 9 9c0 4.97 -4.03 9 -9 9c-4.97 0 -9 -4.03 -9 -9Z"],["fill","freeze","attributeName","fill-opacity","dur","0.15s","values","0;0.3"],["stroke-dasharray","14","stroke-dashoffset","14","d","M8 12l3 3l5 -5"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.15s","dur","0.2s","values","14;0"],[1,"alert","alert-info","mt-6"],[1,"alert","alert-success","mt-6"],[1,"alert","alert-error","mt-6"]],template:function(n,t){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),h("click",function(){return t.setTab("all")}),s(4," \u0412\u0441\u0435 "),r(),i(5,"button",3),h("click",function(){return t.setTab("logo")}),s(6," \u041B\u043E\u0433\u043E "),r(),i(7,"button",3),h("click",function(){return t.setTab("image")}),s(8," \u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F "),r()(),i(9,"div",4)(10,"input",5),C("ngModelChange",function(p){return v(t.searchTerm,p)||(t.searchTerm=p),p}),h("input",function(p){return t.onSearch(p)}),r()()(),i(11,"table",6)(12,"thead")(13,"tr")(14,"th",7),s(15,"#"),r(),i(16,"th"),s(17,"\u041F\u0440\u0435\u0432\u044C\u044E"),r(),i(18,"th"),s(19,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"),r(),i(20,"th"),s(21,"\u0422\u0438\u043F"),r(),i(22,"th"),s(23,"\u0421\u0441\u044B\u043B\u043A\u0430"),r(),i(24,"th",8),s(25,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"),r()()(),i(26,"tbody"),f(27,va,21,13,"tr",9),r()(),f(28,Ca,2,0,"div",10)(29,ba,2,1,"div",11)(30,wa,2,1,"div",12),r()),n&2&&(l(3),U("tab-active",t.activeTab==="all"),l(2),U("tab-active",t.activeTab==="logo"),l(2),U("tab-active",t.activeTab==="image"),l(3),x("ngModel",t.searchTerm),l(17),d("ngForOf",t.displayedImages),l(),d("ngIf",t.displayedImages.length===0),l(),d("ngIf",t.successMessage),l(),d("ngIf",t.errorMessage))},dependencies:[ne,H,A,Y,q,Q],styles:[".img-hover[_ngcontent-%COMP%]{transition:all .3s ease;position:relative;width:100%;max-width:500px;z-index:0;padding:40px 0}.img-hover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:150px;max-width:500px;position:relative;z-index:0;transition:all .3s ease;object-fit:contain}.img-hover[_ngcontent-%COMP%]   .img-wrapp[_ngcontent-%COMP%]{transition:all .3s ease;position:relative;cursor:pointer;z-index:0}.img-hover[_ngcontent-%COMP%]   .img-wrapp[_ngcontent-%COMP%]:after{content:none;width:500px;height:200px;transition:all .3s ease;scale:2;position:fixed;left:32vw;top:40%;z-index:0;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);background:#0000000c;border-radius:15px}"]})}return a})();var Ci=(()=>{class a{imageService;uploadedImages=[];constructor(e){this.imageService=e}onImageUploaded(e){this.uploadedImages.push(e),this.imageService.notifyImageAdded()}static \u0275fac=function(n){return new(n||a)(k(_t))};static \u0275cmp=B({type:a,selectors:[["app-images"]],decls:22,vars:1,consts:[[1,"admin-page","ml-side","section"],[1,"container","mx-auto","pt-[10px]"],[1,"bg-main-trans2-gradient-90","header-tab","flex","items-center","justify-between","py-[10px]","mb-[0px]","rounded-[20px]","w-[100%]","pr-4"],[1,"title-tab","text-2xl","font-bold","text-indigo-600"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 24 24"],["fill","none","stroke","#4f45e5","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["stroke-dasharray","72","stroke-dashoffset","72","d","M3 14v-9h18v14h-18v-5"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.6s","values","72;0"],["stroke-dasharray","24","stroke-dashoffset","24","stroke-width","1","d","M3 16l4 -3l3 2l6 -5l5 4"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.6s","dur","0.4s","values","24;0"],["fill","#4f45e5","fill-opacity","0"],["cx","7.5","cy","9.5","r","1.5"],["fill","freeze","attributeName","fill-opacity","begin","1s","dur","0.2s","values","0;1"],["d","M3 16l4 -3l3 2l6 -5l5 4V19H3Z"],["fill","freeze","attributeName","fill-opacity","begin","1.3s","dur","0.15s","values","0;0.3"],[1,"carousel","carousel-vertical","rounded-box","h-[90vh]","w-full"],[1,"carousel-item","h-full","w-full"],[1,"w-full",3,"imageUploaded"],[1,"carousel-item","h-full","w-full","overflow-y-scroll"],[1,"w-full",3,"images"]],template:function(n,t){n&1&&(_(0,"app-sidebar"),i(1,"section",0)(2,"div",1)(3,"div",2)(4,"h2",3),s(5,"Add Images"),r(),y(),i(6,"svg",4)(7,"g",5)(8,"path",6),_(9,"animate",7),r(),i(10,"path",8),_(11,"animate",9),r()(),i(12,"g",10)(13,"circle",11),_(14,"animate",12),r(),i(15,"path",13),_(16,"animate",14),r()()()(),M(),i(17,"div",15)(18,"div",16)(19,"app-image-upload",17),h("imageUploaded",function(p){return t.onImageUploaded(p)}),r()(),i(20,"div",18),_(21,"app-images-table",19),r()()()()),n&2&&(l(21),d("images",t.uploadedImages))},dependencies:[de,xi,vi]})}return a})();var Qe=class a{sanitizer;templateHeader="Enter your header text here";templateBody="Enter your body text here.";templateSecondHeader="Enter your second header text here";templateButtonText="Click Me";templateButtonLink="https://www.example.com";templateLogo="https://i.ibb.co/NdFQjKMs/x-logo-bg.png";templateMainImage="https://i.ibb.co/hFvg6bYJ/ball-letter.png";templateWaveImage="https://i.ibb.co/yBFYmQPs/wave.png";templateFooterText="If you do not wish to receive emails from us, please write to this address 1111@gmail.com.";templateSocialLinks=[{href:"https://www.facebook.com/example",src:"https://i.ibb.co/NdFQjKMs/x-logo-bg.png",alt:"Facebook",title:"Facebook"}];bodyStyle="#ffffff";wrapperBg="#ffffff";logoWrappWidth="100%";logoBg="#ffffff";logoRadius="0";logoFloat="center";logoMarginT="15px";logoMarginB="15px";logoWidth="150px";headerTitleBg="#ffffff";headercolorText="#000000";headerTitleFontSize="25px";headerTitleStyle="normal";headerTitleWeight="bold";headerTitleMarginTop="0";headerTitleMarginBottom="0";headerTitleAlign="center";headerRadius="0";headerWidth="100%";headerMarginT="10px";headerMarginB="10px";headerDecoration="none";buttonColor="#00416D";buttonTextColor="#ffffff";buttonBorderRadius="30px";buttonWidth="80%";buttonTextSize="22px";buttonRadius="30px";buttonfontWeight="bold";buttonPaddingX="8px";buttonPaddingY="16px";buttonMarginY="0px";buttonWrapperBg="#ffffff";buttonWrappPaddingY="20px";buttonBoxShadow="";buttonDropShadow="";imgW="100%";imgBg="#ffffff";imgWrapRadius="0";imgWidth="100%";imgRadius="0";imgFloat="center";imgCenter="auto";imgMrTop="0";imgMrBottom="0";waveImageWidth="100%";h2TitleAlign="center";h2TitleColor="#000000";h2TitleStyle="normal";h2TitleSize="22px";h2TitleWeight="bold";h2TitleMarginTop="10px";h2TitleMarginBottom="10px";h2TextDecoration="none";h2Bg="#ffffff";h2Radius="0";textColor="#000000";textAlign="left";textBg="#ffffff";textPdLeft="0";textPdRight="0";textRadius="0";textDescrAlign="left";textDescrColor="#000000";textDescrFont="16px";textDescrWeight="normal";textDescrStyle="normal";textDescr="none";textWrapperBg="#ffffff";textWrapperRadius="0";textPadX="20px";textPadY="20px";footerBg="#ffffff";footerTextColor="#000000";footerTextFontSize="14px";footerTextPaddingLeft="10px";footerTextPaddingRight="10px";footerTextPaddingX="10px";footerTextPaddingY="10px";socialIconWidth="32px";mainTextColor="#000000";mainTextAlign="center";btnAlign="center";mainTextBg="#ffffff";mainTextPdLeft="0px";mainTextPdRight="0";mainTextSize="18px";mainTextWeight="normal";isLogoActive=!0;isHeaderActive=!0;isMainImageActive=!0;isWaveImageActive=!1;isSecondHeaderActive=!0;isBodyActive=!0;isButtonActive=!0;isFooterActive=!0;isSocialLinksActive=!0;logoDisplay="table-row";headerDisplay="table-row";mainImageDisplay="table-row";waveImageDisplay="none";secondHeaderDisplay="block";bodyDisplay="block";buttonDisplay="block";footerDisplay="table-row";socialLinksDisplay="table-row";imgCenterLogo="auto";constructor(m,e){this.sanitizer=m,e&&this.setTemplateData(e),this.updateDisplays()}updateDisplays(){this.logoDisplay=this.isLogoActive?"table-row":"none",this.headerDisplay=this.isHeaderActive?"table-row":"none",this.mainImageDisplay=this.isMainImageActive?"table-row":"none",this.waveImageDisplay=this.isWaveImageActive?"table-row":"none",this.secondHeaderDisplay=this.isSecondHeaderActive?"block":"none",this.bodyDisplay=this.isBodyActive?"block":"none",this.buttonDisplay=this.isButtonActive?"block":"none",this.footerDisplay=this.isFooterActive?"table-row":"none",this.socialLinksDisplay=this.isSocialLinksActive?"table-row":"none"}clone(){let m=this.getTemplateData();return new a(this.sanitizer,m)}onLogoActiveChange(m){let e=m.target;this.isLogoActive=e.checked,this.updateDisplays()}onHeaderActiveChange(m){let e=m.target;this.isHeaderActive=e.checked,this.updateDisplays()}onMainImageActiveChange(m){let e=m.target;this.isMainImageActive=e.checked,this.updateDisplays()}onWaveImageActiveChange(m){let e=m.target;this.isWaveImageActive=e.checked,this.updateDisplays()}onSecondHeaderActiveChange(m){let e=m.target;this.isSecondHeaderActive=e.checked,this.updateDisplays()}onBodyActiveChange(m){let e=m.target;this.isBodyActive=e.checked,this.updateDisplays()}onButtonActiveChange(m){let e=m.target;this.isButtonActive=e.checked,this.updateDisplays()}onFooterActiveChange(m){let e=m.target;this.isFooterActive=e.checked,this.updateDisplays()}onSocialLinksActiveChange(m){let e=m.target;this.isSocialLinksActive=e.checked,this.updateDisplays()}getTemplateData(){return{content:{templateHeader:this.templateHeader,templateBody:this.templateBody,templateSecondHeader:this.templateSecondHeader,templateButtonText:this.templateButtonText,templateButtonLink:this.templateButtonLink,templateLogo:this.templateLogo,templateMainImage:this.templateMainImage,templateWaveImage:this.templateWaveImage,templateFooterText:this.templateFooterText,templateSocialLinks:this.templateSocialLinks},styles:{bodyStyle:this.bodyStyle,wrapperBg:this.wrapperBg,logoWrappWidth:this.logoWrappWidth,logoBg:this.logoBg,logoRadius:this.logoRadius,logoFloat:this.logoFloat,logoMarginT:this.logoMarginT,logoMarginB:this.logoMarginB,logoWidth:this.logoWidth,headerTitleBg:this.headerTitleBg,headercolorText:this.headercolorText,headerTitleFontSize:this.headerTitleFontSize,headerTitleStyle:this.headerTitleStyle,headerTitleWeight:this.headerTitleWeight,headerTitleMarginTop:this.headerTitleMarginTop,headerTitleMarginBottom:this.headerTitleMarginBottom,headerTitleAlign:this.headerTitleAlign,headerRadius:this.headerRadius,headerWidth:this.headerWidth,headerMarginT:this.headerMarginT,headerMarginB:this.headerMarginB,headerDecoration:this.headerDecoration,buttonColor:this.buttonColor,buttonTextColor:this.buttonTextColor,buttonBorderRadius:this.buttonBorderRadius,buttonWidth:this.buttonWidth,buttonTextSize:this.buttonTextSize,buttonRadius:this.buttonRadius,buttonfontWeight:this.buttonfontWeight,buttonPaddingX:this.buttonPaddingX,buttonPaddingY:this.buttonPaddingY,buttonMarginY:this.buttonMarginY,buttonWrapperBg:this.buttonWrapperBg,buttonWrappPaddingY:this.buttonWrappPaddingY,buttonBoxShadow:this.buttonBoxShadow,buttonDropShadow:this.buttonDropShadow,imgW:this.imgW,imgBg:this.imgBg,imgWrapRadius:this.imgWrapRadius,imgWidth:this.imgWidth,imgRadius:this.imgRadius,imgFloat:this.imgFloat,imgCenter:this.imgCenter,imgMrTop:this.imgMrTop,imgMrBottom:this.imgMrBottom,waveImageWidth:this.waveImageWidth,h2TitleAlign:this.h2TitleAlign,h2TitleColor:this.h2TitleColor,h2TitleStyle:this.h2TitleStyle,h2TitleSize:this.h2TitleSize,h2TitleWeight:this.h2TitleWeight,h2TitleMarginTop:this.h2TitleMarginTop,h2TitleMarginBottom:this.h2TitleMarginBottom,h2TextDecoration:this.h2TextDecoration,h2Bg:this.h2Bg,h2Radius:this.h2Radius,textColor:this.textColor,textAlign:this.textAlign,textBg:this.textBg,textPdLeft:this.textPdLeft,textPdRight:this.textPdRight,textRadius:this.textRadius,textDescrAlign:this.textDescrAlign,textDescrColor:this.textDescrColor,textDescrFont:this.textDescrFont,textDescrWeight:this.textDescrWeight,textDescrStyle:this.textDescrStyle,textDescr:this.textDescr,textWrapperBg:this.textWrapperBg,textWrapperRadius:this.textWrapperRadius,textPadX:this.textPadX,textPadY:this.textPadY,footerBg:this.footerBg,footerTextColor:this.footerTextColor,footerTextFontSize:this.footerTextFontSize,footerTextPaddingLeft:this.footerTextPaddingLeft,footerTextPaddingRight:this.footerTextPaddingRight,footerTextPaddingX:this.footerTextPaddingX,footerTextPaddingY:this.footerTextPaddingY,socialIconWidth:this.socialIconWidth,mainTextColor:this.mainTextColor,mainTextAlign:this.mainTextAlign,btnAlign:this.btnAlign,mainTextBg:this.mainTextBg,mainTextPdLeft:this.mainTextPdLeft,mainTextPdRight:this.mainTextPdRight,mainTextSize:this.mainTextSize,mainTextWeight:this.mainTextWeight},displayFlags:{isLogoActive:this.isLogoActive,isHeaderActive:this.isHeaderActive,isMainImageActive:this.isMainImageActive,isWaveImageActive:this.isWaveImageActive,isSecondHeaderActive:this.isSecondHeaderActive,isBodyActive:this.isBodyActive,isButtonActive:this.isButtonActive,isFooterActive:this.isFooterActive,isSocialLinksActive:this.isSocialLinksActive}}}setTemplateData(m){m.content&&Object.assign(this,m.content),m.styles&&Object.assign(this,m.styles),m.displayFlags&&Object.assign(this,m.displayFlags),this.updateDisplays()}get htmlTemplate(){return`
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xmlns:o="urn:schemas-microsoft-com:office:office" lang="ru">
<head>
<meta charset="UTF-8" />
<meta content="width=device-width, initial-scale=1" name="viewport" />
<meta name="x-apple-disable-message-reformatting" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta content="telephone=no" name="format-detection" />
<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,400;0,500;0,600;0,700;0,800;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet" />
<style type="text/css">
  .rollover:hover .rollover-first { max-height: 0px !important; display: none !important; }
  .rollover:hover .rollover-second { max-height: none !important; display: block !important; }
  .rollover span { font-size: 0px; }
  u + .body img ~ div div { display: none; }
  #outlook a { padding: 0; }
  span.MsoHyperlink, span.MsoHyperlinkFollowed { color: inherit; mso-style-priority: 99; }
  a.es-button { mso-style-priority: 100 !important; text-decoration: none !important; }
  a[x-apple-data-detectors], #MessageViewBody a { color: inherit !important; text-decoration: none !important; font-size: inherit !important; font-family: inherit !important; font-weight: inherit !important; line-height: inherit !important; }
  .es-desk-hidden { display: none; float: left; overflow: hidden; width: 0; max-height: 0; line-height: 0; mso-hide: all; }
  .body-style { background: ${this.bodyStyle}; font-family: "Montserrat", sans-serif; }
  .es-wrapper-color { background: ${this.wrapperBg}; border-radius: ${this.textWrapperRadius}; overflow: hidden; max-width: 600px; margin: 0 auto; }
  .btn-wrapper { width: 100%; background: ${this.buttonWrapperBg}; padding-top: ${this.buttonWrappPaddingY}; padding-bottom: ${this.buttonWrappPaddingY}; }
  .btn-wrapper a { border: none; background: ${this.buttonColor}; padding: ${this.buttonPaddingY} ${this.buttonPaddingX}; display: block; width: ${this.buttonWidth}; border-radius: ${this.buttonBorderRadius}; color: ${this.buttonTextColor}; margin-left: auto; margin-right: auto; margin-top: ${this.buttonMarginY}; margin-bottom: ${this.buttonMarginY}; text-align: center; font-size: ${this.buttonTextSize}; font-weight: ${this.buttonfontWeight}; text-decoration: none; ${this.buttonBoxShadow?`box-shadow: ${this.buttonBoxShadow};`:""} ${this.buttonDropShadow?`filter: ${this.buttonDropShadow};`:""} }
  .logo-wrapper { width: ${this.logoWrappWidth}; background: ${this.logoBg}; height: 100%; border-radius: ${this.logoRadius}; }
  .logo-img { float: ${this.logoFloat}; margin-top: ${this.logoMarginT}; margin-bottom: ${this.logoMarginB}; width: ${this.logoWidth}; height: auto; margin-left: auto; margin-right: auto; }
  .header-title { background: ${this.headerTitleBg}; color: ${this.headercolorText}; border-radius: ${this.headerRadius}; font-weight: ${this.headerTitleWeight}; font-style: ${this.headerTitleStyle}; width: ${this.headerWidth}; text-align: ${this.headerTitleAlign}; text-decoration: ${this.headerDecoration}; }
  .header-title h1 { margin-top: ${this.headerMarginT}; margin-bottom: ${this.headerMarginB}; font-size: ${this.headerTitleFontSize}; }
  .letter-img-wrapper { width: ${this.imgW}; background: ${this.imgBg}; }
  .letter-img { width: ${this.imgWidth} !important; height: auto; border-radius: ${this.imgWrapRadius}; float: ${this.imgFloat}; margin: 0 ${this.imgCenter}; margin-top: ${this.imgMrTop}; margin-bottom: ${this.imgMrBottom}; margin-left: auto; margin-right: auto; }
  .wave-img { width: ${this.waveImageWidth} !important; height: auto; display: block; margin-left: auto; margin-right: auto; transform: translateY(5px); }
  .color-text { color: ${this.textColor}; text-align: ${this.textAlign}; background: ${this.textBg}; padding-left: ${this.textPdLeft}; padding-right: ${this.textPdRight}; border-radius: ${this.textRadius}; }
  .h2-title { text-align: ${this.h2TitleAlign}; color: ${this.h2TitleColor}; font-size: ${this.h2TitleSize}; font-weight: ${this.h2TitleWeight}; font-style: ${this.h2TitleStyle}; text-decoration: ${this.h2TextDecoration}; background: ${this.h2Bg}; border-radius: ${this.h2Radius}; }
  .h2-title-text { padding-top: ${this.h2TitleMarginTop}; padding-bottom: ${this.h2TitleMarginBottom}; }
  .text-wrapper { text-align: ${this.textDescrAlign}; color: ${this.textDescrColor}; font-size: ${this.textDescrFont}; font-weight: ${this.textDescrWeight}; font-style: ${this.textDescrStyle}; text-decoration: ${this.textDescr}; background: ${this.textWrapperBg}; border-radius: ${this.textWrapperRadius}; padding: ${this.textPadY} ${this.textPadX}; }
  .footer { background: ${this.footerBg}; color: ${this.footerTextColor}; font-size: ${this.footerTextFontSize}; padding: ${this.footerTextPaddingY} ${this.footerTextPaddingX}; text-align: center; }
  .social-links { display: flex; justify-content: center; gap: 10px; }
  .social-link img { width: ${this.socialIconWidth}; height: auto; }
  .logo-display { display: ${this.logoDisplay}; }
  .header-display { display: ${this.headerDisplay}; }
  .main-image-display { display: ${this.mainImageDisplay}; }
  .wave-image-display { display: ${this.waveImageDisplay}; }
  .second-header-display { display: ${this.secondHeaderDisplay}; }
  .body-display { display: ${this.bodyDisplay}; }
  .button-display { display: ${this.buttonDisplay}; }
  .footer-display { display: ${this.footerDisplay}; }
  .social-links-display { display: ${this.socialLinksDisplay}; }
  .main-text { color: ${this.mainTextColor}; text-align: ${this.mainTextAlign}; background: ${this.mainTextBg}; padding-left: ${this.mainTextPdLeft}; padding-right: ${this.mainTextPdRight}; font-size: ${this.mainTextSize}; font-weight: ${this.mainTextWeight}; }
  @media only screen and (max-width: 600px) {
    .es-content table, .es-header table, .es-footer table, .es-content, .es-footer, .es-header { width: 100% !important; max-width: 600px !important; }
    .esd-block-image img { width: 100% !important; max-width: 350px; height: auto !important; }
    .header-title h1 { font-size: 20px; text-align: center; }
    .h2-title { font-size: 18px; }
    .text-wrapper p { font-size: 14px; }
    .btn-wrapper a { font-size: 18px !important; padding: 10px 20px !important; }
    .footer { font-size: 12px; }
  }
</style>
</head>
<body class="body body-style">
<div dir="ltr" class="es-wrapper-color">
  <table width="100%" cellspacing="0" cellpadding="0" class="es-wrapper">
    <tbody>
      <tr>
        <td valign="top" class="esd-email-paddings es-m-margin">
          <table cellspacing="0" cellpadding="0" align="center" class="esd-header-popover es-header">
            <tbody>
              <tr class="logo-display">
                <td align="center" class="esd-stripe">
                  <table width="600" cellspacing="0" cellpadding="0" align="center" class="es-header-body" style="background-color: transparent">
                    <tbody>
                      <tr>
                        <td align="left" class="esd-structure">
                          <table cellpadding="0" cellspacing="0" width="100%">
                            <tbody>
                              <tr>
                                <td width="600" align="center" valign="top" class="esd-container-frame">
                                  <table cellpadding="0" cellspacing="0" width="100%">
                                    <tbody>
                                      <tr>
                                        <td align="center" height="40" class="esd-block-spacer logo-wrapper">
                                          <img class="logo-img" src="${this.templateLogo}" alt="Logo" />
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </td>
              </tr>
              <tr class="header-display">
                <td align="left" bgcolor="#ffffff" class="esd-structure es-p20" style="background-color: #ffffff">
                  <table cellpadding="0" cellspacing="0" width="100%">
                    <tbody>
                      <tr>
                        <td width="560" align="center" valign="top" class="esd-container-frame">
                          <table cellpadding="0" cellspacing="0" width="100%">
                            <tbody>
                              <tr>
                                <td align="center" class="esd-block-text header-title">
                                  <h1>${this.templateHeader}</h1>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </td>
              </tr>
            </tbody>
          </table>
          <table cellspacing="0" cellpadding="0" align="center" class="es-content">
            <tbody>
              <tr>
                <td align="center" class="esd-stripe">
                  <table width="600" cellspacing="0" cellpadding="0" align="center" class="es-content-body" style="background-color: transparent">
                    <tbody>
                      <tr class="main-image-display">
                        <td align="left" class="esd-structure">
                          <table cellpadding="0" cellspacing="0" width="100%">
                            <tbody>
                              <tr>
                                <td width="600" align="center" valign="top" class="esd-container-frame">
                                  <table cellpadding="0" cellspacing="0" width="100%">
                                    <tbody>
                                      <tr>
                                        <td class="letter-img-wrapper">
                                          <img class="letter-img" src="${this.templateMainImage}" alt="Main Image" style="display: block" />
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </td>
                      </tr>
                      <tr class="wave-image-display">
                        <td align="center" class="esd-structure">
                          <table cellpadding="0" cellspacing="0" width="100%">
                            <tbody>
                              <tr>
                                <td width="600" align="center" class="esd-container-frame">
                                  <img class="wave-img" src="${this.templateWaveImage}" alt="Wave Image" />
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </td>
                      </tr>
                      <tr>
                        <td align="left" class="esd-structure es-p25t es-p10b es-p25r es-p25l" style="background-color: #ffffff;">
                          <table width="100%" cellspacing="0" cellpadding="0">
                            <tbody>
                              <tr>
                                <td width="550" align="center" valign="top" class="esd-container-frame">
                                  <table width="100%" cellspacing="0" cellpadding="0">
                                    <tbody>

                                      <tr style="display: ${this.secondHeaderDisplay};">
                                        <td align="${this.h2TitleAlign}" class="esd-block-text h2-title" style="padding: 10px 20px; display: inline-block; width: 100%;">
                                          <h2 style="margin: ${this.h2TitleMarginTop} 0 ${this.h2TitleMarginBottom} 0; 
                                                    font-size: ${this.h2TitleSize}; 
                                                    font-weight: ${this.h2TitleWeight}; 
                                                    color: ${this.h2TitleColor}; 
                                                    text-decoration: ${this.h2TextDecoration};
                                                    line-height: 1.2;">
                                            ${this.templateSecondHeader}
                                          </h2>
                                        </td>
                                      </tr>

                                      <tr style="display: ${this.bodyDisplay};">
                                        <td align="${this.mainTextAlign}" 
                                            style="padding: 20px; 
                                                  color: ${this.mainTextColor}; 
                                                  font-size: ${this.mainTextSize}; 
                                                  line-height: 1.8; 
                                                  font-weight: ${this.mainTextWeight};">
                                          ${this.templateBody.replace(/\r\n/g,`
`).replace(/\n\n+/g,"<br><br>").replace(/\n/g,"<br>")}
                                        </td>
                                      </tr>

                                      <tr style="display: ${this.buttonDisplay}; width: 100%;">
                                        <td align="center" style="padding: 20px; display: block;">
                                          <a href="${this.templateButtonLink}" 
                                            target="_blank"
                                            style="background: ${this.buttonColor};
                                                    color: ${this.buttonTextColor};
                                                    padding: ${this.buttonPaddingY} ${this.buttonPaddingX};
                                                    font-size: ${this.buttonTextSize};
                                                    font-weight: ${this.buttonfontWeight};
                                                    text-decoration: none;
                                                    border-radius: ${this.buttonBorderRadius};
                                                    display: inline-block;
                                                    width: ${this.buttonWidth};
                                                    float: ${this.btnAlign};
                                                    margin-bottom: 10px;
                                                    "
                                                    >
                                            ${this.templateButtonText}
                                          </a>
                                        </td>
                                      </tr>

                                    </tbody>
                                  </table>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </td>
                      </tr>
                      <tr class="footer-display">
                        <td align="center" class="esd-structure footer">
                          <table width="100%" cellspacing="0" cellpadding="0">
                            <tbody>
                              <tr>
                                <td width="600" align="center" class="esd-container-frame">
                                  <p>${this.templateFooterText}</p>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
</div>
</body>
</html>
    `}get safeHtmlTemplate(){return this.sanitizer.bypassSecurityTrustHtml(this.htmlTemplate)}resetTemplate(){this.templateHeader="Enter your header text here",this.templateBody="Enter your body text here.",this.templateSecondHeader="Enter your second header text here",this.templateButtonText="Click Me",this.templateButtonLink="https://www.example.com",this.templateLogo="https://i.ibb.co/NdFQjKMs/x-logo-bg.png",this.templateMainImage="https://i.ibb.co/hFvg6bYJ/ball-letter.png",this.templateWaveImage="https://i.ibb.co/yBFYmQPs/wave.png",this.templateFooterText="If you do not wish to receive emails from us, please write to this address 1111@gmail.com.",this.templateSocialLinks=[{href:"https://www.facebook.com/example",src:"https://i.ibb.co/NdFQjKMs/x-logo-bg.png",alt:"Facebook",title:"Facebook"}],this.isLogoActive=!0,this.isHeaderActive=!0,this.isMainImageActive=!0,this.isWaveImageActive=!1,this.isSecondHeaderActive=!0,this.isBodyActive=!0,this.isButtonActive=!0,this.isFooterActive=!0,this.isSocialLinksActive=!0,this.updateDisplays()}};var bi=[{header:"Name",key:"first_name",class:"text-gray-800 font-bold"},{header:"Email",key:"email",class:"text-indigo-400"},{header:"Lang",key:"language_code"},{header:"Date",key:"created_at",pipe:"date",pipeFormat:"dd.MM.yyyy"}],wi=[{header:"Name",key:"user_name",class:"text-gray-800 font-bold"},{header:"Email",key:"email",class:"text-indigo-400"},{header:"Site",key:"site_url"},{header:"Date",key:"updated_at",pipe:"date",pipeFormat:"dd.MM.yyyy"}];var Re=(()=>{class a{http;apiUrl=pe.auth.baseUrl+"/users-sites";constructor(e){this.http=e}getSiteUsers(){return this.http.get(this.apiUrl).pipe(O(this.handleError))}deleteSiteUser(e){return this.http.delete(`${this.apiUrl}/${e}`).pipe(O(this.handleError))}handleError(e){let n="An error occurred";return e.status===404?n="User not found":e.error instanceof ErrorEvent?n=`Error: ${e.error.message}`:n=`Server returned code ${e.status}: ${e.message}`,we(()=>new Error(n))}static \u0275fac=function(n){return new(n||a)(N($))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var ht=(()=>{class a{http;apiUrlEmail=pe.auth.baseUrl+"/users";constructor(e){this.http=e}sendBulkEmails(e,n,t,o=!0){return this.http.post(`${this.apiUrlEmail}/email/send-bulk`,{emails:e,subject:n,content:t,isHtml:o}).pipe(Je(p=>{console.log("Raw server response:",p)}),O(this.handleError))}handleError(e){console.error("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430:",e);let n="\u041E\u0448\u0438\u0431\u043A\u0430 \u043D\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435";return e.status===0?n="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u044C\u0441\u044F \u043A \u0441\u0435\u0440\u0432\u0435\u0440\u0443. \u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0441\u0435\u0442\u044C \u0438\u043B\u0438 CORS-\u043F\u043E\u043B\u0438\u0442\u0438\u043A\u0443.":e.status>=400&&(n=`\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ${e.status} ${e.statusText}`),we(n)}static \u0275fac=function(n){return new(n||a)(N($))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var ft=(()=>{class a{http;sanitizer;apiUrl=`${I.auth.baseUrl}/email-templates`;constructor(e,n){this.http=e,this.sanitizer=n}getTemplates(){return this.http.get(this.apiUrl).pipe(R(e=>e.map(n=>{let t;try{let K=n.templateData.trim();K.startsWith('"')&&K.endsWith('"')&&(K=K.slice(1,-1)),K=K.replace(/\\"/g,'"'),t=JSON.parse(K)}catch(K){console.error("\u041A\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043A\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0430\u0440\u0441\u0438\u043D\u0433\u0430 \u0448\u0430\u0431\u043B\u043E\u043D\u0430:",n.name,K),t={}}let o=t.content||t,p=t.styles||t,E=t.displayFlags||t,F={templateHeader:o.templateHeader||"Enter your header text here",templateBody:o.templateBody||"Enter your body text here.",templateSecondHeader:o.templateSecondHeader||"Enter your second header text here",templateButtonText:o.templateButtonText||"Click Me",templateButtonLink:o.templateButtonLink||"https://www.example.com",templateLogo:o.templateLogo||"https://i.ibb.co/NdFQjKMs/x-logo-bg.png",templateMainImage:o.templateMainImage||"https://i.ibb.co/hFvg6bYJ/ball-letter.png",templateWaveImage:o.templateWaveImage||"https://i.ibb.co/yBFYmQPs/wave.png",templateFooterText:o.templateFooterText||"If you do not wish to receive emails from us, please write to this address 1111@gmail.com.",templateSocialLinks:o.templateSocialLinks||[{href:"https://www.facebook.com/example",src:"https://i.ibb.co/NdFQjKMs/x-logo-bg.png",alt:"Facebook",title:"Facebook"}]},z={bodyStyle:p.bodyStyle||"#ffffff",wrapperBg:p.wrapperBg||"#ffffff",logoWrappWidth:p.logoWrappWidth||"100%",logoBg:p.logoBg||"#ffffff",logoRadius:p.logoRadius||"0",logoFloat:p.logoFloat||"center",logoMarginT:p.logoMarginT||"15px",logoMarginB:p.logoMarginB||"15px",logoWidth:p.logoWidth||"150px",headerTitleBg:p.headerTitleBg||"#ffffff",headercolorText:p.headercolorText||"#000000",headerTitleFontSize:p.headerTitleFontSize||"25px",headerTitleStyle:p.headerTitleStyle||"normal",headerTitleWeight:p.headerTitleWeight||"bold",headerTitleMarginTop:p.headerTitleMarginTop||"0",headerTitleMarginBottom:p.headerTitleMarginBottom||"0",headerTitleAlign:p.headerTitleAlign||"center",headerRadius:p.headerRadius||"0",headerWidth:p.headerWidth||"100%",headerMarginT:p.headerMarginT||"10px",headerMarginB:p.headerMarginB||"10px",headerDecoration:p.headerDecoration||"none",buttonColor:p.buttonColor||"#00416D",buttonTextColor:p.buttonTextColor||"#ffffff",buttonBorderRadius:p.buttonBorderRadius||"30px",buttonWidth:p.buttonWidth||"80%",buttonTextSize:p.buttonTextSize||"22px",buttonRadius:p.buttonRadius||"30px",buttonfontWeight:p.buttonfontWeight||"bold",buttonPaddingX:p.buttonPaddingX||"8px",buttonPaddingY:p.buttonPaddingY||"16px",buttonMarginY:p.buttonMarginY||"0px",buttonWrapperBg:p.buttonWrapperBg||"#ffffff",buttonWrappPaddingY:p.buttonWrappPaddingY||"20px",buttonBoxShadow:p.buttonBoxShadow||"",buttonDropShadow:p.buttonDropShadow||"",imgW:p.imgW||"100%",imgBg:p.imgBg||"#ffffff",imgWrapRadius:p.imgWrapRadius||"0",imgWidth:p.imgWidth||"100%",imgRadius:p.imgRadius||"0",imgFloat:p.imgFloat||"center",imgCenter:p.imgCenter||"auto",imgMrTop:p.imgMrTop||"0",imgMrBottom:p.imgMrBottom||"0",waveImageWidth:p.waveImageWidth||"100%",h2TitleAlign:p.h2TitleAlign||"center",h2TitleColor:p.h2TitleColor||"#000000",h2TitleStyle:p.h2TitleStyle||"normal",h2TitleSize:p.h2TitleSize||"22px",h2TitleWeight:p.h2TitleWeight||"bold",h2TitleMarginTop:p.h2TitleMarginTop||"10px",h2TitleMarginBottom:p.h2TitleMarginBottom||"10px",h2TextDecoration:p.h2TextDecoration||"none",h2Bg:p.h2Bg||"#ffffff",h2Radius:p.h2Radius||"0",textColor:p.textColor||"#000000",textAlign:p.textAlign||"left",textBg:p.textBg||"#ffffff",textPdLeft:p.textPdLeft||"0",textPdRight:p.textPdRight||"0",textRadius:p.textRadius||"0",textDescrAlign:p.textDescrAlign||"left",textDescrColor:p.textDescrColor||"#000000",textDescrFont:p.textDescrFont||"16px",textDescrWeight:p.textDescrWeight||"normal",textDescrStyle:p.textDescrStyle||"normal",textDescr:p.textDescr||"none",textWrapperBg:p.textWrapperBg||"#ffffff",textWrapperRadius:p.textWrapperRadius||"0",textPadX:p.textPadX||"20px",textPadY:p.textPadY||"20px",footerBg:p.footerBg||"#ffffff",footerTextColor:p.footerTextColor||"#000000",footerTextFontSize:p.footerTextFontSize||"14px",footerTextPaddingLeft:p.footerTextPaddingLeft||"10px",footerTextPaddingRight:p.footerTextPaddingRight||"10px",footerTextPaddingX:p.footerTextPaddingX||"10px",footerTextPaddingY:p.footerTextPaddingY||"10px",socialIconWidth:p.socialIconWidth||"32px",mainTextColor:p.mainTextColor||"#000000",mainTextAlign:p.mainTextAlign||"left",mainTextBg:p.mainTextBg||"#ffffff",mainTextPdLeft:p.mainTextPdLeft||"0px",mainTextPdRight:p.mainTextPdRight||"0",mainTextSize:p.mainTextSize||"18px",mainTextWeight:p.mainTextWeight||"normal"},X={isLogoActive:E.isLogoActive??!0,isHeaderActive:E.isHeaderActive??!0,isMainImageActive:E.isMainImageActive??!0,isWaveImageActive:E.isWaveImageActive??!1,isSecondHeaderActive:E.isSecondHeaderActive??!0,isBodyActive:E.isBodyActive??!0,isButtonActive:E.isButtonActive??!0,isFooterActive:E.isFooterActive??!0,isSocialLinksActive:E.isSocialLinksActive??!0},me=new Qe(this.sanitizer,{content:F,styles:z,displayFlags:X});return{id:n.id,name:n.name,instance:me}})))}saveTemplate(e,n){return this.http.get(this.apiUrl).pipe(Tt(t=>{if(t.some(p=>p.name.toLowerCase()===e.toLowerCase()))throw new Error("\u0428\u0430\u0431\u043B\u043E\u043D \u0441 \u0442\u0430\u043A\u0438\u043C \u0438\u043C\u0435\u043D\u0435\u043C \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442");return this.http.post(this.apiUrl,{name:e,templateData:JSON.stringify(n)})}))}updateTemplate(e,n,t){return this.http.put(`${this.apiUrl}/${e}`,{name:n,templateData:JSON.stringify(t)})}deleteTemplate(e){return this.http.delete(`${this.apiUrl}/${e}`)}static \u0275fac=function(n){return new(n||a)(N($),N(je))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();function ya(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2);l(),b(" ",e.ascending?"\u2191":"\u2193"," ")}}function Sa(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2);l(),b(" ",e.ascending?"\u2191":"\u2193"," ")}}function Ma(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2);l(),b(" ",e.ascending?"\u2191":"\u2193"," ")}}function Ta(a,m){if(a&1&&_(0,"div",12),a&2){let e=u().$implicit;d("innerHTML",e.content,Ae)}}function ka(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u().$implicit;l(),w(e.content)}}function Ba(a,m){if(a&1&&(i(0,"tr")(1,"td"),s(2),r(),i(3,"td")(4,"a",7),s(5),r()(),i(6,"td"),s(7),r(),i(8,"td")(9,"div",8)(10,"div",9),s(11),r(),i(12,"div",10),f(13,Ta,1,1,"div",11)(14,ka,2,1,"span",5),r()()(),i(15,"td"),s(16),r(),i(17,"td"),s(18),P(19,"dateFormat"),r()()),a&2){let e=m.$implicit,n=m.index;l(2),w(n+1),l(2),d("href","mailto:"+e.email,W),l(),w(e.email||"-"),l(2),w(e.subject),l(4),b(" ",e.subject||"\u0421\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435"," "),l(2),d("ngIf",e.content.includes("<html")),l(),d("ngIf",!e.content.includes("<html")),l(2),w(e.status),l(2),w(Ee(19,9,e.sentAt))}}function Ia(a,m){if(a&1){let e=S();i(0,"div",1)(1,"h2",2),s(2," \u{1F973} Email - \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0434\u043E\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u043E \u043F\u043E\u043B\u0443\u0447\u0430\u0442\u0435\u043B\u044F\u043C "),r(),i(3,"table",3)(4,"thead")(5,"tr")(6,"th"),s(7,"$"),r(),i(8,"th",4),h("click",function(){c(e);let t=u();return g(t.toggleSort("email"))}),s(9," Email "),f(10,ya,2,1,"span",5),r(),i(11,"th",4),h("click",function(){c(e);let t=u();return g(t.toggleSort("subject"))}),s(12," \u0422\u0435\u043C\u0430 "),f(13,Sa,2,1,"span",5),r(),i(14,"th"),s(15,"\u0421\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435"),r(),i(16,"th"),s(17,"\u0421\u0442\u0430\u0442\u0443\u0441"),r(),i(18,"th",4),h("click",function(){c(e);let t=u();return g(t.toggleSort("sentAt"))}),s(19," \u0414\u0430\u0442\u0430 "),f(20,Ma,2,1,"span",5),r()()(),i(21,"tbody"),f(22,Ba,20,11,"tr",6),P(23,"sort"),r()()()}if(a&2){let e=u();l(10),d("ngIf",e.sortBy==="email"),l(3),d("ngIf",e.sortBy==="subject"),l(7),d("ngIf",e.sortBy==="sentAt"),l(2),d("ngForOf",ot(23,4,e.emailMessages,e.sortBy,e.ascending))}}var Mi=(()=>{class a{_emailMessages=[];set emailMessages(e){this._emailMessages=e||[],this.sortMessages()}get emailMessages(){return this._emailMessages}sortBy="sentAt";ascending=!1;toggleSort(e){this.sortBy===e?this.ascending=!this.ascending:(this.sortBy=e,this.ascending=!0),this.sortMessages()}sortMessages(){if(!this.sortBy||!this._emailMessages.length){this._emailMessages=[...this._emailMessages];return}}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=B({type:a,selectors:[["app-emails-table"]],inputs:{emailMessages:"emailMessages"},decls:1,vars:1,consts:[["class","mt-8",4,"ngIf"],[1,"mt-8"],[1,"block","text-lg","text-indigo-400","font-bold","mb-4","ml-2"],[1,"table","w-full"],[1,"cursor-pointer",3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-blue-500","hover:underline",3,"href"],["tabindex","0",1,"collapse","collapse-arrow"],[1,"collapse-title","font-semibold"],[1,"collapse-content","text-sm","bg-base-100","rounded-xl"],["class","h-full overflow-auto bg-base-200 rounded-xl",3,"innerHTML",4,"ngIf"],[1,"h-full","overflow-auto","bg-base-200","rounded-xl",3,"innerHTML"]],template:function(n,t){n&1&&f(0,Ia,24,8,"div",0),n&2&&d("ngIf",t.emailMessages.length>0)},dependencies:[H,A,Qt,Rt]})}return a})();function Fa(a,m){if(a&1){let e=S();i(0,"div",3)(1,"h2",4),s(2," \u270D\u{1F3FB} \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043A\u043E\u043D\u0442\u0435\u043D\u0442 \u043F\u0438\u0441\u044C\u043C\u0430 "),r(),i(3,"div",5)(4,"label",6),s(5,"URL \u043B\u043E\u0433\u043E\u0442\u0438\u043F\u0430:"),r(),i(6,"input",7),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.templateLogo,t)||(o.emailTemplate.templateLogo=t),g(t)}),r()(),i(7,"div",5)(8,"label",6),s(9,"\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A:"),r(),i(10,"input",8),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.templateHeader,t)||(o.emailTemplate.templateHeader=t),g(t)}),h("ngModelChange",function(){c(e);let t=u();return g(t.onModelChange())}),r()(),i(11,"div",5)(12,"label",6),s(13,"URL \u0433\u043B\u0430\u0432\u043D\u043E\u0433\u043E \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F:"),r(),i(14,"input",7),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.templateMainImage,t)||(o.emailTemplate.templateMainImage=t),g(t)}),r()(),i(15,"div",5)(16,"label",6),s(17,"URL \u0432\u043E\u043B\u043D\u043E\u0432\u043E\u0433\u043E \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F:"),r(),i(18,"input",7),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.templateWaveImage,t)||(o.emailTemplate.templateWaveImage=t),g(t)}),h("ngModelChange",function(){c(e);let t=u();return g(t.onModelChange())}),r()(),i(19,"div",5)(20,"label",6),s(21,"\u0422\u0435\u043A\u0441\u0442 \u0432\u0442\u043E\u0440\u043E\u0433\u043E \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430:"),r(),i(22,"input",8),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.templateSecondHeader,t)||(o.emailTemplate.templateSecondHeader=t),g(t)}),h("ngModelChange",function(){c(e);let t=u();return g(t.onModelChange())}),r()(),i(23,"div",9)(24,"label",10),s(25),i(26,"span",11),y(),i(27,"svg",12),_(28,"path",13),r()()(),M(),i(29,"textarea",14),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.templateBody,t)||(o.emailTemplate.templateBody=t),g(t)}),h("ngModelChange",function(){c(e);let t=u();return g(t.onModelChange())}),r()(),i(30,"div",5)(31,"label",6),s(32,"\u0422\u0435\u043A\u0441\u0442 \u043A\u043D\u043E\u043F\u043A\u0438:"),r(),i(33,"input",8),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.templateButtonText,t)||(o.emailTemplate.templateButtonText=t),g(t)}),h("ngModelChange",function(){c(e);let t=u();return g(t.onModelChange())}),r()(),i(34,"div",5)(35,"label",6),s(36,"\u0421\u0441\u044B\u043B\u043A\u0430 \u043A\u043D\u043E\u043F\u043A\u0438:"),r(),i(37,"input",15),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.templateButtonLink,t)||(o.emailTemplate.templateButtonLink=t),g(t)}),h("ngModelChange",function(){c(e);let t=u();return g(t.onModelChange())}),r()(),i(38,"div",5)(39,"label",6),s(40,"\u0422\u0435\u043A\u0441\u0442 \u0444\u0443\u0442\u0435\u0440\u0430:"),r(),i(41,"input",8),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.templateFooterText,t)||(o.emailTemplate.templateFooterText=t),g(t)}),h("ngModelChange",function(){c(e);let t=u();return g(t.onModelChange())}),r()(),i(42,"h2",4),s(43," \u{1F3A8} \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0442\u0438\u043B\u0438 \u043F\u0438\u0441\u044C\u043C\u0430 "),r(),i(44,"div",16)(45,"div",17)(46,"label",18),s(47," \u0426\u0432\u0435\u0442 \u0444\u043E\u043D\u0430 \u0442\u0435\u043B\u0430: "),i(48,"span",19),s(49),r()(),i(50,"input",20),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.bodyStyle,t)||(o.emailTemplate.bodyStyle=t),g(t)}),r()(),i(51,"div",17)(52,"label",18),s(53," \u0417\u0430\u043A\u0440\u0443\u0433\u043B\u0435\u043D\u0438\u0435 \u0442\u0435\u043B\u0430 \u043F\u0438\u0441\u044C\u043C\u0430: "),r(),i(54,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.textWrapperRadius,t)||(o.emailTemplate.textWrapperRadius=t),g(t)}),r()()(),i(55,"div",17)(56,"label",18),s(57," \u0426\u0432\u0435\u0442 \u0444\u043E\u043D\u0430 \u043E\u0431\u0435\u0440\u0442\u043A\u0438: "),i(58,"span",19),s(59),r()(),i(60,"input",22),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.wrapperBg,t)||(o.emailTemplate.wrapperBg=t),g(t)}),r()(),i(61,"div",23)(62,"div",24)(63,"h3",25),s(64," \u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0442\u0438\u043B\u044F\u043C\u0438 \u043B\u043E\u0433\u043E\u0442\u0438\u043F\u0430 "),r(),i(65,"div",26)(66,"label",27),s(67,"\u0410\u043A\u0442\u0438\u0432\u0435\u043D"),r(),i(68,"input",28),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.isLogoActive,t)||(o.emailTemplate.isLogoActive=t),g(t)}),r()()(),i(69,"div",16)(70,"div",29)(71,"label",27),s(72,"\u0428\u0438\u0440\u0438\u043D\u0430 \u043E\u0431\u0435\u0440\u0442\u043A\u0438"),r(),i(73,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.logoWrappWidth,t)||(o.emailTemplate.logoWrappWidth=t),g(t)}),r()(),i(74,"div",30)(75,"label",27),s(76,"\u0426\u0432\u0435\u0442 \u0444\u043E\u043D\u0430:"),r(),i(77,"input",31),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.logoBg,t)||(o.emailTemplate.logoBg=t),g(t)}),r(),i(78,"span",32),s(79),r()(),i(80,"div",33)(81,"label",27),s(82,"\u0420\u0430\u0434\u0438\u0443\u0441 \u043B\u043E\u0433\u043E\u0442\u0438\u043F\u0430:"),r(),i(83,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.logoRadius,t)||(o.emailTemplate.logoRadius=t),g(t)}),r()(),i(84,"div",29)(85,"label",27),s(86,"\u0412\u044B\u0440\u0430\u0432\u043D\u0438\u0432\u0430\u043D\u0438\u0435:"),r(),i(87,"select",34),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.logoFloat,t)||(o.emailTemplate.logoFloat=t),g(t)}),i(88,"option",35),s(89,"\u041B\u0435\u0432\u043E"),r(),i(90,"option",36),s(91,"\u0426\u0435\u043D\u0442\u0440"),r(),i(92,"option",37),s(93,"\u041F\u0440\u0430\u0432\u043E"),r()()(),i(94,"div",29)(95,"label",27),s(96,"\u041E\u0442\u0441\u0442\u0443\u043F \u0441\u0432\u0435\u0440\u0445\u0443:"),r(),i(97,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.logoMarginT,t)||(o.emailTemplate.logoMarginT=t),g(t)}),r()(),i(98,"div",29)(99,"label",27),s(100,"\u041E\u0442\u0441\u0442\u0443\u043F \u0441\u043D\u0438\u0437\u0443:"),r(),i(101,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.logoMarginB,t)||(o.emailTemplate.logoMarginB=t),g(t)}),r()(),i(102,"div",29)(103,"label",27),s(104,"\u0428\u0438\u0440\u0438\u043D\u0430 \u043B\u043E\u0433\u043E\u0442\u0438\u043F\u0430:"),r(),i(105,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.logoWidth,t)||(o.emailTemplate.logoWidth=t),g(t)}),r()()()(),i(106,"div",38)(107,"div",24)(108,"h3",25),s(109," \u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0442\u0438\u043B\u044F\u043C\u0438 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430 "),r(),i(110,"div",26)(111,"label",27),s(112,"\u0410\u043A\u0442\u0438\u0432\u0435\u043D"),r(),i(113,"input",28),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.isHeaderActive,t)||(o.emailTemplate.isHeaderActive=t),g(t)}),r()()(),i(114,"div",16)(115,"div",30)(116,"label",27),s(117,"\u0426\u0432\u0435\u0442 \u0444\u043E\u043D\u0430:"),r(),i(118,"input",31),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.headerTitleBg,t)||(o.emailTemplate.headerTitleBg=t),g(t)}),r(),i(119,"span",32),s(120),r()(),i(121,"div",30)(122,"label",27),s(123,"\u0426\u0432\u0435\u0442 \u0442\u0435\u043A\u0441\u0442\u0430:"),r(),i(124,"input",31),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.headercolorText,t)||(o.emailTemplate.headercolorText=t),g(t)}),r(),i(125,"span",32),s(126),r()(),i(127,"div",33)(128,"label",27),s(129,"\u0420\u0430\u0437\u043C\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430:"),r(),i(130,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.headerTitleFontSize,t)||(o.emailTemplate.headerTitleFontSize=t),g(t)}),r()(),i(131,"div",33)(132,"label",27),s(133,"\u041D\u0430\u043A\u043B\u043E\u043D \u0448\u0440\u0438\u0444\u0442\u0430:"),r(),i(134,"select",34),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.headerTitleStyle,t)||(o.emailTemplate.headerTitleStyle=t),g(t)}),i(135,"option",39),s(136,"\u041E\u0431\u044B\u0447\u043D\u044B\u0439"),r(),i(137,"option",40),s(138,"\u041A\u0443\u0440\u0441\u0438\u0432"),r()()(),i(139,"div",33)(140,"label",27),s(141,"\u0416\u0438\u0440\u043D\u043E\u0441\u0442\u044C \u0448\u0440\u0438\u0444\u0442\u0430:"),r(),i(142,"select",34),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.headerTitleWeight,t)||(o.emailTemplate.headerTitleWeight=t),g(t)}),i(143,"option",39),s(144,"\u041E\u0431\u044B\u0447\u043D\u044B\u0439"),r(),i(145,"option",41),s(146,"\u0416\u0438\u0440\u043D\u044B\u0439"),r()()(),i(147,"div",33)(148,"label",27),s(149,"\u041E\u0442\u0441\u0442\u0443\u043F \u0441\u0432\u0435\u0440\u0445\u0443:"),r(),i(150,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.headerTitleMarginTop,t)||(o.emailTemplate.headerTitleMarginTop=t),g(t)}),r()(),i(151,"div",33)(152,"label",27),s(153,"\u041E\u0442\u0441\u0442\u0443\u043F \u0441\u043D\u0438\u0437\u0443:"),r(),i(154,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.headerTitleMarginBottom,t)||(o.emailTemplate.headerTitleMarginBottom=t),g(t)}),r()(),i(155,"div",33)(156,"label",27),s(157,"\u0412\u044B\u0440\u0430\u0432\u043D\u0438\u0432\u0430\u043D\u0438\u0435:"),r(),i(158,"select",34),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.headerTitleAlign,t)||(o.emailTemplate.headerTitleAlign=t),g(t)}),i(159,"option",36),s(160,"\u0426\u0435\u043D\u0442\u0440"),r(),i(161,"option",35),s(162,"\u041B\u0435\u0432\u043E"),r(),i(163,"option",37),s(164,"\u041F\u0440\u0430\u0432\u043E"),r()()(),i(165,"div",33)(166,"label",27),s(167,"\u0417\u0430\u043A\u0440\u0443\u0433\u043B\u0435\u043D\u0438\u0435:"),r(),i(168,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.headerRadius,t)||(o.emailTemplate.headerRadius=t),g(t)}),r()(),i(169,"div",33)(170,"label",27),s(171,"\u0428\u0438\u0440\u0438\u043D\u0430 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430:"),r(),i(172,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.headerWidth,t)||(o.emailTemplate.headerWidth=t),g(t)}),r()(),i(173,"div",33)(174,"label",27),s(175,"\u0414\u0435\u043A\u043E\u0440\u0430\u0446\u0438\u044F \u0442\u0435\u043A\u0441\u0442\u0430 h1:"),r(),i(176,"select",34),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.headerDecoration,t)||(o.emailTemplate.headerDecoration=t),g(t)}),i(177,"option",42),s(178,"\u041D\u0435\u0442"),r(),i(179,"option",43),s(180,"\u041F\u043E\u0434\u0447\u0435\u0440\u043A\u043D\u0443\u0442\u044B\u0439"),r()()()()(),i(181,"div",44)(182,"div",24)(183,"h3",25),s(184," \u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0442\u0438\u043B\u044F\u043C\u0438 \u0433\u043B\u0430\u0432\u043D\u043E\u0433\u043E \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F "),r(),i(185,"div",26)(186,"label",27),s(187,"\u0410\u043A\u0442\u0438\u0432\u0435\u043D"),r(),i(188,"input",28),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.isMainImageActive,t)||(o.emailTemplate.isMainImageActive=t),g(t)}),r()()(),i(189,"div",16)(190,"div",33)(191,"label",27),s(192,"\u0428\u0438\u0440\u0438\u043D\u0430 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F:"),r(),i(193,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.imgWidth,t)||(o.emailTemplate.imgWidth=t),g(t)}),r()(),i(194,"div",30)(195,"label",27),s(196,"\u0426\u0432\u0435\u0442 \u0444\u043E\u043D\u0430:"),r(),i(197,"input",31),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.imgBg,t)||(o.emailTemplate.imgBg=t),g(t)}),r(),i(198,"span",32),s(199),r()(),i(200,"div",33)(201,"label",27),s(202,"\u0417\u0430\u043A\u0440\u0443\u0433\u043B\u0435\u043D\u0438\u0435 \u043E\u0431\u0435\u0440\u0442\u043A\u0438:"),r(),i(203,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.imgWrapRadius,t)||(o.emailTemplate.imgWrapRadius=t),g(t)}),r()(),i(204,"div",33)(205,"label",27),s(206,"\u0417\u0430\u043A\u0440\u0443\u0433\u043B\u0435\u043D\u0438\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F:"),r(),i(207,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.imgRadius,t)||(o.emailTemplate.imgRadius=t),g(t)}),r()(),i(208,"div",33)(209,"label",27),s(210,"\u0412\u044B\u0440\u0430\u0432\u043D\u0438\u0432\u0430\u043D\u0438\u0435:"),r(),i(211,"select",34),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.imgFloat,t)||(o.emailTemplate.imgFloat=t),g(t)}),i(212,"option",35),s(213,"\u041B\u0435\u0432\u043E"),r(),i(214,"option",36),s(215,"\u0426\u0435\u043D\u0442\u0440"),r(),i(216,"option",37),s(217,"\u041F\u0440\u0430\u0432\u043E"),r()()(),i(218,"div",33)(219,"label",27),s(220,"\u041E\u0442\u0441\u0442\u0443\u043F \u0441\u0432\u0435\u0440\u0445\u0443:"),r(),i(221,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.imgMrTop,t)||(o.emailTemplate.imgMrTop=t),g(t)}),r()(),i(222,"div",33)(223,"label",27),s(224,"\u041E\u0442\u0441\u0442\u0443\u043F \u0441\u043D\u0438\u0437\u0443:"),r(),i(225,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.imgMrBottom,t)||(o.emailTemplate.imgMrBottom=t),g(t)}),r()()()(),i(226,"div",45)(227,"div",24)(228,"h3",25),s(229," \u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0442\u0438\u043B\u044F\u043C\u0438 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430 h2 "),r(),i(230,"div",26)(231,"label",27),s(232,"\u0410\u043A\u0442\u0438\u0432\u0435\u043D"),r(),i(233,"input",28),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.isSecondHeaderActive,t)||(o.emailTemplate.isSecondHeaderActive=t),g(t)}),r()()(),i(234,"div",16)(235,"div",33)(236,"label",27),s(237,"\u0412\u044B\u0440\u0430\u0432\u043D\u0438\u0432\u0430\u043D\u0438\u0435:"),r(),i(238,"select",34),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.h2TitleAlign,t)||(o.emailTemplate.h2TitleAlign=t),g(t)}),i(239,"option",35),s(240,"\u041B\u0435\u0432\u043E"),r(),i(241,"option",36),s(242,"\u0426\u0435\u043D\u0442\u0440"),r(),i(243,"option",37),s(244,"\u041F\u0440\u0430\u0432\u043E"),r()()(),i(245,"div",30)(246,"label",27),s(247,"\u0426\u0432\u0435\u0442 h2:"),r(),i(248,"input",31),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.h2TitleColor,t)||(o.emailTemplate.h2TitleColor=t),g(t)}),r(),i(249,"span",32),s(250),r()(),i(251,"div",30)(252,"label",27),s(253,"\u0426\u0432\u0435\u0442 \u0444\u043E\u043D\u0430:"),r(),i(254,"input",31),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.h2Bg,t)||(o.emailTemplate.h2Bg=t),g(t)}),r(),i(255,"span",32),s(256),r()(),i(257,"div",33)(258,"label",27),s(259,"\u041D\u0430\u043A\u043B\u043E\u043D \u0448\u0440\u0438\u0444\u0442\u0430:"),r(),i(260,"select",34),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.h2TitleStyle,t)||(o.emailTemplate.h2TitleStyle=t),g(t)}),i(261,"option",39),s(262,"\u041E\u0431\u044B\u0447\u043D\u044B\u0439"),r(),i(263,"option",40),s(264,"\u041A\u0443\u0440\u0441\u0438\u0432"),r()()(),i(265,"div",33)(266,"label",27),s(267,"\u0420\u0430\u0437\u043C\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430:"),r(),i(268,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.h2TitleSize,t)||(o.emailTemplate.h2TitleSize=t),g(t)}),r()(),i(269,"div",33)(270,"label",27),s(271,"\u0416\u0438\u0440\u043D\u043E\u0441\u0442\u044C \u0448\u0440\u0438\u0444\u0442\u0430:"),r(),i(272,"select",34),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.h2TitleWeight,t)||(o.emailTemplate.h2TitleWeight=t),g(t)}),i(273,"option",39),s(274,"\u041E\u0431\u044B\u0447\u043D\u044B\u0439"),r(),i(275,"option",41),s(276,"\u0416\u0438\u0440\u043D\u044B\u0439"),r()()(),i(277,"div",33)(278,"label",27),s(279,"\u041E\u0442\u0441\u0442\u0443\u043F \u0441\u0432\u0435\u0440\u0445\u0443:"),r(),i(280,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.h2TitleMarginTop,t)||(o.emailTemplate.h2TitleMarginTop=t),g(t)}),r()(),i(281,"div",33)(282,"label",27),s(283,"\u041E\u0442\u0441\u0442\u0443\u043F \u0441\u043D\u0438\u0437\u0443:"),r(),i(284,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.h2TitleMarginBottom,t)||(o.emailTemplate.h2TitleMarginBottom=t),g(t)}),r()(),i(285,"div",33)(286,"label",27),s(287,"\u041F\u043E\u0434\u0447\u0435\u0440\u043A\u043D\u0443\u0442\u043E\u0441\u0442\u044C:"),r(),i(288,"select",34),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.h2TextDecoration,t)||(o.emailTemplate.h2TextDecoration=t),g(t)}),i(289,"option",42),s(290,"\u041D\u0435\u0442"),r(),i(291,"option",43),s(292,"\u041F\u043E\u0434\u0447\u0435\u0440\u043A\u043D\u0443\u0442\u044B\u0439"),r()()(),i(293,"div",33)(294,"label",27),s(295,"\u0417\u0430\u043A\u0440\u0443\u0433\u043B\u0435\u043D\u0438\u0435:"),r(),i(296,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.h2Radius,t)||(o.emailTemplate.h2Radius=t),g(t)}),r()()()(),i(297,"div",46)(298,"div",24)(299,"h3",25),s(300," \u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0442\u0438\u043B\u044F\u043C\u0438 \u0442\u0435\u043A\u0441\u0442\u043E\u0432\u043E\u0433\u043E \u0431\u043B\u043E\u043A\u0430 "),r(),i(301,"div",26)(302,"label",27),s(303,"\u0410\u043A\u0442\u0438\u0432\u0435\u043D"),r(),i(304,"input",28),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.isBodyActive,t)||(o.emailTemplate.isBodyActive=t),g(t)}),r()()(),i(305,"div",16)(306,"div",30)(307,"label",27),s(308,"\u0426\u0432\u0435\u0442 \u0442\u0435\u043A\u0441\u0442\u0430:"),r(),i(309,"input",31),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.mainTextColor,t)||(o.emailTemplate.mainTextColor=t),g(t)}),r(),i(310,"span",32),s(311),r()(),i(312,"div",33)(313,"label",27),s(314,"\u0412\u044B\u0440\u0430\u0432\u043D\u0438\u0432\u0430\u043D\u0438\u0435:"),r(),i(315,"select",34),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.mainTextAlign,t)||(o.emailTemplate.mainTextAlign=t),g(t)}),i(316,"option",35),s(317,"\u041B\u0435\u0432\u043E"),r(),i(318,"option",36),s(319,"\u0426\u0435\u043D\u0442\u0440"),r(),i(320,"option",37),s(321,"\u041F\u0440\u0430\u0432\u043E"),r()()(),i(322,"div",30)(323,"label",27),s(324,"\u0426\u0432\u0435\u0442 \u0444\u043E\u043D\u0430:"),r(),i(325,"input",31),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.mainTextBg,t)||(o.emailTemplate.mainTextBg=t),g(t)}),r(),i(326,"span",32),s(327),r()(),i(328,"div",33)(329,"label",27),s(330,"\u041E\u0442\u0441\u0442\u0443\u043F \u0441\u043B\u0435\u0432\u0430:"),r(),i(331,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.textPdLeft,t)||(o.emailTemplate.textPdLeft=t),g(t)}),r()(),i(332,"div",33)(333,"label",27),s(334,"\u041E\u0442\u0441\u0442\u0443\u043F \u0441\u043F\u0440\u0430\u0432\u0430:"),r(),i(335,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.textPdRight,t)||(o.emailTemplate.textPdRight=t),g(t)}),r()(),i(336,"div",33)(337,"label",27),s(338,"\u0417\u0430\u043A\u0440\u0443\u0433\u043B\u0435\u043D\u0438\u044F \u0444\u043E\u043D\u0430:"),r(),i(339,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.textRadius,t)||(o.emailTemplate.textRadius=t),g(t)}),r()()()(),i(340,"div",46)(341,"h3",47),s(342," \u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0442\u0438\u043B\u044F\u043C\u0438 \u043E\u0431\u0435\u0440\u0442\u043A\u0438 \u0442\u0435\u043A\u0441\u0442\u0430 "),r(),i(343,"div",16)(344,"div",33)(345,"label",27),s(346,"\u0412\u044B\u0440\u0430\u0432\u043D\u0438\u0432\u0430\u043D\u0438\u0435:"),r(),i(347,"select",34),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.textDescrAlign,t)||(o.emailTemplate.textDescrAlign=t),g(t)}),i(348,"option",35),s(349,"\u041B\u0435\u0432\u043E"),r(),i(350,"option",36),s(351,"\u0426\u0435\u043D\u0442\u0440"),r(),i(352,"option",37),s(353,"\u041F\u0440\u0430\u0432\u043E"),r()()(),i(354,"div",30)(355,"label",27),s(356,"\u0426\u0432\u0435\u0442 \u0442\u0435\u043A\u0441\u0442\u0430:"),r(),i(357,"input",31),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.textDescrColor,t)||(o.emailTemplate.textDescrColor=t),g(t)}),r(),i(358,"span",32),s(359),r()(),i(360,"div",30)(361,"label",27),s(362,"\u0426\u0432\u0435\u0442 \u0444\u043E\u043D\u0430:"),r(),i(363,"input",31),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.textWrapperBg,t)||(o.emailTemplate.textWrapperBg=t),g(t)}),r(),i(364,"span",32),s(365),r()(),i(366,"div",33)(367,"label",27),s(368,"\u0417\u0430\u043A\u0440\u0443\u0433\u043B\u0435\u043D\u0438\u0435:"),r(),i(369,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.textWrapperRadius,t)||(o.emailTemplate.textWrapperRadius=t),g(t)}),r()(),i(370,"div",33)(371,"label",27),s(372,"\u041E\u0442\u0441\u0442\u0443\u043F \u0432\u0435\u0440\u0445/\u043D\u0438\u0437:"),r(),i(373,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.textPadY,t)||(o.emailTemplate.textPadY=t),g(t)}),r()(),i(374,"div",33)(375,"label",27),s(376,"\u041E\u0442\u0441\u0442\u0443\u043F \u043B\u0435\u0432\u043E/\u043F\u0440\u0430\u0432\u043E:"),r(),i(377,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.textPadX,t)||(o.emailTemplate.textPadX=t),g(t)}),r()(),i(378,"div",33)(379,"label",27),s(380,"\u0420\u0430\u0437\u043C\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430:"),r(),i(381,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.textDescrFont,t)||(o.emailTemplate.textDescrFont=t),g(t)}),r()(),i(382,"div",33)(383,"label",27),s(384,"\u0416\u0438\u0440\u043D\u043E\u0441\u0442\u044C \u0448\u0440\u0438\u0444\u0442\u0430:"),r(),i(385,"select",34),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.textDescrWeight,t)||(o.emailTemplate.textDescrWeight=t),g(t)}),i(386,"option",39),s(387,"\u041E\u0431\u044B\u0447\u043D\u044B\u0439"),r(),i(388,"option",41),s(389,"\u0416\u0438\u0440\u043D\u044B\u0439"),r()()(),i(390,"div",33)(391,"label",27),s(392,"\u0421\u0442\u0438\u043B\u044C \u0448\u0440\u0438\u0444\u0442\u0430:"),r(),i(393,"select",34),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.textDescrStyle,t)||(o.emailTemplate.textDescrStyle=t),g(t)}),i(394,"option",39),s(395,"\u041E\u0431\u044B\u0447\u043D\u044B\u0439"),r(),i(396,"option",40),s(397,"\u041A\u0443\u0440\u0441\u0438\u0432"),r()()(),i(398,"div",33)(399,"label",27),s(400,"\u041F\u043E\u0434\u0447\u0435\u0440\u043A\u043D\u0443\u0442\u043E\u0441\u0442\u044C:"),r(),i(401,"select",34),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.textDescr,t)||(o.emailTemplate.textDescr=t),g(t)}),i(402,"option",42),s(403,"\u041D\u0435\u0442"),r(),i(404,"option",43),s(405,"\u041F\u043E\u0434\u0447\u0435\u0440\u043A\u043D\u0443\u0442\u044B\u0439"),r()()()()(),i(406,"div",48)(407,"div",24)(408,"h3",25),s(409," \u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0442\u0438\u043B\u044F\u043C\u0438 \u043A\u043D\u043E\u043F\u043A\u0438 "),r(),i(410,"div",26)(411,"label",27),s(412,"\u0410\u043A\u0442\u0438\u0432\u0435\u043D"),r(),i(413,"input",28),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.isButtonActive,t)||(o.emailTemplate.isButtonActive=t),g(t)}),r()()(),i(414,"div",16)(415,"div",30)(416,"label",27),s(417,"\u0426\u0432\u0435\u0442 \u043A\u043D\u043E\u043F\u043A\u0438:"),r(),i(418,"input",31),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.buttonColor,t)||(o.emailTemplate.buttonColor=t),g(t)}),r(),i(419,"span",32),s(420),r()(),i(421,"div",30)(422,"label",27),s(423,"\u0426\u0432\u0435\u0442 \u0444\u043E\u043D\u0430:"),r(),i(424,"input",31),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.buttonWrapperBg,t)||(o.emailTemplate.buttonWrapperBg=t),g(t)}),r(),i(425,"span",32),s(426),r()(),i(427,"div",30)(428,"label",27),s(429,"\u0426\u0432\u0435\u0442 \u0442\u0435\u043A\u0441\u0442\u0430:"),r(),i(430,"input",31),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.buttonTextColor,t)||(o.emailTemplate.buttonTextColor=t),g(t)}),r(),i(431,"span",32),s(432),r()(),i(433,"div",33)(434,"label",27),s(435,"\u0417\u0430\u043A\u0440\u0443\u0433\u043B\u0435\u043D\u0438\u0435:"),r(),i(436,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.buttonBorderRadius,t)||(o.emailTemplate.buttonBorderRadius=t),g(t)}),r()(),i(437,"div",33)(438,"label",27),s(439,"\u0412\u044B\u0440\u0430\u0432\u043D\u0438\u0432\u0430\u043D\u0438\u0435:"),r(),i(440,"select",34),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.btnAlign,t)||(o.emailTemplate.btnAlign=t),g(t)}),i(441,"option",35),s(442,"\u041B\u0435\u0432\u043E"),r(),i(443,"option",36),s(444,"\u0426\u0435\u043D\u0442\u0440"),r(),i(445,"option",37),s(446,"\u041F\u0440\u0430\u0432\u043E"),r()()(),i(447,"div",33)(448,"label",27),s(449,"\u041E\u0442\u0441\u0442\u0443\u043F \u043B\u0435\u0432\u043E/\u043F\u0440\u0430\u0432\u043E:"),r(),i(450,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.buttonPaddingX,t)||(o.emailTemplate.buttonPaddingX=t),g(t)}),r()(),i(451,"div",33)(452,"label",27),s(453,"\u041E\u0442\u0441\u0442\u0443\u043F \u0432\u0435\u0440\u0445/\u043D\u0438\u0437:"),r(),i(454,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.buttonPaddingY,t)||(o.emailTemplate.buttonPaddingY=t),g(t)}),r()(),i(455,"div",33)(456,"label",27),s(457,"\u0428\u0438\u0440\u0438\u043D\u0430 \u043A\u043D\u043E\u043F\u043A\u0438:"),r(),i(458,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.buttonWidth,t)||(o.emailTemplate.buttonWidth=t),g(t)}),r()(),i(459,"div",33)(460,"label",27),s(461,"\u0420\u0430\u0437\u043C\u0435\u0440 \u0442\u0435\u043A\u0441\u0442\u0430:"),r(),i(462,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.buttonTextSize,t)||(o.emailTemplate.buttonTextSize=t),g(t)}),r()(),i(463,"div",33)(464,"label",27),s(465,"\u0416\u0438\u0440\u043D\u043E\u0441\u0442\u044C \u0448\u0440\u0438\u0444\u0442\u0430:"),r(),i(466,"select",34),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.buttonfontWeight,t)||(o.emailTemplate.buttonfontWeight=t),g(t)}),i(467,"option",39),s(468,"\u041E\u0431\u044B\u0447\u043D\u044B\u0439"),r(),i(469,"option",41),s(470,"\u0416\u0438\u0440\u043D\u044B\u0439"),r()()()()(),i(471,"div",49)(472,"div",24)(473,"h3",25),s(474," \u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0442\u0438\u043B\u044F\u043C\u0438 \u0444\u0443\u0442\u0435\u0440\u0430 "),r(),i(475,"div",26)(476,"label",27),s(477,"\u0410\u043A\u0442\u0438\u0432\u0435\u043D"),r(),i(478,"input",28),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.isFooterActive,t)||(o.emailTemplate.isFooterActive=t),g(t)}),r()()(),i(479,"div",16)(480,"div",30)(481,"label",27),s(482,"\u0426\u0432\u0435\u0442 \u0444\u043E\u043D\u0430:"),r(),i(483,"input",31),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.footerBg,t)||(o.emailTemplate.footerBg=t),g(t)}),r(),i(484,"span",32),s(485),r()(),i(486,"div",30)(487,"label",27),s(488,"\u0426\u0432\u0435\u0442 \u0442\u0435\u043A\u0441\u0442\u0430:"),r(),i(489,"input",31),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.footerTextColor,t)||(o.emailTemplate.footerTextColor=t),g(t)}),r(),i(490,"span",32),s(491),r()(),i(492,"div",33)(493,"label",27),s(494,"\u0420\u0430\u0437\u043C\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430:"),r(),i(495,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.footerTextFontSize,t)||(o.emailTemplate.footerTextFontSize=t),g(t)}),r()(),i(496,"div",33)(497,"label",27),s(498,"\u041E\u0442\u0441\u0442\u0443\u043F \u043B\u0435\u0432\u043E/\u043F\u0440\u0430\u0432\u043E:"),r(),i(499,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.footerTextPaddingX,t)||(o.emailTemplate.footerTextPaddingX=t),g(t)}),r()(),i(500,"div",33)(501,"label",27),s(502,"\u041E\u0442\u0441\u0442\u0443\u043F \u0432\u0435\u0440\u0445/\u043D\u0438\u0437:"),r(),i(503,"input",21),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailTemplate.footerTextPaddingY,t)||(o.emailTemplate.footerTextPaddingY=t),g(t)}),r()()()()()}if(a&2){let e=u();l(6),x("ngModel",e.emailTemplate.templateLogo),d("disabled",e.isSending),l(4),x("ngModel",e.emailTemplate.templateHeader),d("disabled",e.isSending),l(4),x("ngModel",e.emailTemplate.templateMainImage),d("disabled",e.isSending),l(4),x("ngModel",e.emailTemplate.templateWaveImage),d("disabled",e.isSending),l(4),x("ngModel",e.emailTemplate.templateSecondHeader),d("disabled",e.isSending),l(3),b("\u0422\u0435\u043A\u0441\u0442: \u0434\u043B\u044F \u043E\u0442\u0441\u0442\u0443\u043F\u0430 \u0441 \u043D\u043E\u0432\u043E\u0439 \u0441\u0442\u0440\u043E\u043A\u043E\u0439 \u0441\u043B\u0435\u0434\u0443\u0435\u0442 \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0442\u044D\u0433 ",e.br," "),l(4),x("ngModel",e.emailTemplate.templateBody),d("disabled",e.isSending),l(4),x("ngModel",e.emailTemplate.templateButtonText),d("disabled",e.isSending),l(4),x("ngModel",e.emailTemplate.templateButtonLink),d("disabled",e.isSending),l(4),x("ngModel",e.emailTemplate.templateFooterText),d("disabled",e.isSending),l(8),w(e.emailTemplate.bodyStyle),l(),x("ngModel",e.emailTemplate.bodyStyle),l(4),x("ngModel",e.emailTemplate.textWrapperRadius),l(5),w(e.emailTemplate.wrapperBg),l(),x("ngModel",e.emailTemplate.wrapperBg),l(8),x("ngModel",e.emailTemplate.isLogoActive),l(5),x("ngModel",e.emailTemplate.logoWrappWidth),l(4),x("ngModel",e.emailTemplate.logoBg),l(2),w(e.emailTemplate.logoBg.slice(0,8)),l(4),x("ngModel",e.emailTemplate.logoRadius),l(4),x("ngModel",e.emailTemplate.logoFloat),l(10),x("ngModel",e.emailTemplate.logoMarginT),l(4),x("ngModel",e.emailTemplate.logoMarginB),l(4),x("ngModel",e.emailTemplate.logoWidth),l(8),x("ngModel",e.emailTemplate.isHeaderActive),l(5),x("ngModel",e.emailTemplate.headerTitleBg),l(2),w(e.emailTemplate.headerTitleBg.slice(0,8)),l(4),x("ngModel",e.emailTemplate.headercolorText),l(2),w(e.emailTemplate.headercolorText.slice(0,8)),l(4),x("ngModel",e.emailTemplate.headerTitleFontSize),l(4),x("ngModel",e.emailTemplate.headerTitleStyle),l(8),x("ngModel",e.emailTemplate.headerTitleWeight),l(8),x("ngModel",e.emailTemplate.headerTitleMarginTop),l(4),x("ngModel",e.emailTemplate.headerTitleMarginBottom),l(4),x("ngModel",e.emailTemplate.headerTitleAlign),l(10),x("ngModel",e.emailTemplate.headerRadius),l(4),x("ngModel",e.emailTemplate.headerWidth),l(4),x("ngModel",e.emailTemplate.headerDecoration),l(12),x("ngModel",e.emailTemplate.isMainImageActive),l(5),x("ngModel",e.emailTemplate.imgWidth),l(4),x("ngModel",e.emailTemplate.imgBg),l(2),w(e.emailTemplate.imgBg.slice(0,8)),l(4),x("ngModel",e.emailTemplate.imgWrapRadius),l(4),x("ngModel",e.emailTemplate.imgRadius),l(4),x("ngModel",e.emailTemplate.imgFloat),l(10),x("ngModel",e.emailTemplate.imgMrTop),l(4),x("ngModel",e.emailTemplate.imgMrBottom),l(8),x("ngModel",e.emailTemplate.isSecondHeaderActive),l(5),x("ngModel",e.emailTemplate.h2TitleAlign),l(10),x("ngModel",e.emailTemplate.h2TitleColor),l(2),w(e.emailTemplate.h2TitleColor.slice(0,8)),l(4),x("ngModel",e.emailTemplate.h2Bg),l(2),w(e.emailTemplate.h2Bg.slice(0,8)),l(4),x("ngModel",e.emailTemplate.h2TitleStyle),l(8),x("ngModel",e.emailTemplate.h2TitleSize),l(4),x("ngModel",e.emailTemplate.h2TitleWeight),l(8),x("ngModel",e.emailTemplate.h2TitleMarginTop),l(4),x("ngModel",e.emailTemplate.h2TitleMarginBottom),l(4),x("ngModel",e.emailTemplate.h2TextDecoration),l(8),x("ngModel",e.emailTemplate.h2Radius),l(8),x("ngModel",e.emailTemplate.isBodyActive),l(5),x("ngModel",e.emailTemplate.mainTextColor),l(2),w(e.emailTemplate.mainTextColor.slice(0,8)),l(4),x("ngModel",e.emailTemplate.mainTextAlign),l(10),x("ngModel",e.emailTemplate.mainTextBg),l(2),w(e.emailTemplate.mainTextBg.slice(0,8)),l(4),x("ngModel",e.emailTemplate.textPdLeft),l(4),x("ngModel",e.emailTemplate.textPdRight),l(4),x("ngModel",e.emailTemplate.textRadius),l(8),x("ngModel",e.emailTemplate.textDescrAlign),l(10),x("ngModel",e.emailTemplate.textDescrColor),l(2),w(e.emailTemplate.textDescrColor.slice(0,8)),l(4),x("ngModel",e.emailTemplate.textWrapperBg),l(2),w(e.emailTemplate.textWrapperBg.slice(0,8)),l(4),x("ngModel",e.emailTemplate.textWrapperRadius),l(4),x("ngModel",e.emailTemplate.textPadY),l(4),x("ngModel",e.emailTemplate.textPadX),l(4),x("ngModel",e.emailTemplate.textDescrFont),l(4),x("ngModel",e.emailTemplate.textDescrWeight),l(8),x("ngModel",e.emailTemplate.textDescrStyle),l(8),x("ngModel",e.emailTemplate.textDescr),l(12),x("ngModel",e.emailTemplate.isButtonActive),l(5),x("ngModel",e.emailTemplate.buttonColor),l(2),w(e.emailTemplate.buttonColor.slice(0,8)),l(4),x("ngModel",e.emailTemplate.buttonWrapperBg),l(2),w(e.emailTemplate.buttonColor.slice(0,8)),l(4),x("ngModel",e.emailTemplate.buttonTextColor),l(2),w(e.emailTemplate.buttonTextColor.slice(0,8)),l(4),x("ngModel",e.emailTemplate.buttonBorderRadius),l(4),x("ngModel",e.emailTemplate.btnAlign),l(10),x("ngModel",e.emailTemplate.buttonPaddingX),l(4),x("ngModel",e.emailTemplate.buttonPaddingY),l(4),x("ngModel",e.emailTemplate.buttonWidth),l(4),x("ngModel",e.emailTemplate.buttonTextSize),l(4),x("ngModel",e.emailTemplate.buttonfontWeight),l(12),x("ngModel",e.emailTemplate.isFooterActive),l(5),x("ngModel",e.emailTemplate.footerBg),l(2),w(e.emailTemplate.footerBg.slice(0,8)),l(4),x("ngModel",e.emailTemplate.footerTextColor),l(2),w(e.emailTemplate.footerTextColor.slice(0,8)),l(4),x("ngModel",e.emailTemplate.footerTextFontSize),l(4),x("ngModel",e.emailTemplate.footerTextPaddingX),l(4),x("ngModel",e.emailTemplate.footerTextPaddingY)}}var Ti=(()=>{class a{emailTemplate=null;isSending=!1;emailTemplateChange=new G;br="<br>";ngOnChanges(e){e.emailTemplate&&console.log("emailTemplate \u0438\u0437\u043C\u0435\u043D\u0438\u043B\u0441\u044F:",{templateHeader:this.emailTemplate?.templateHeader,templateBody:this.emailTemplate?.templateBody,templateSecondHeader:this.emailTemplate?.templateSecondHeader})}onModelChange(){this.emailTemplate&&(console.log("Editor emitted changes:",{templateHeader:this.emailTemplate.templateHeader,templateBody:this.emailTemplate.templateBody,templateSecondHeader:this.emailTemplate.templateSecondHeader,bodyStyle:this.emailTemplate.bodyStyle,isLogoActive:this.emailTemplate.isLogoActive}),this.emailTemplateChange.emit(this.emailTemplate))}onLogoActiveChange(e){this.emailTemplate&&(this.emailTemplate.isLogoActive=e.target.checked,console.log("Logo active changed:",this.emailTemplate.isLogoActive),this.onModelChange())}onHeaderActiveChange(e){this.emailTemplate&&(this.emailTemplate.isHeaderActive=e.target.checked,console.log("Header active changed:",this.emailTemplate.isHeaderActive),this.onModelChange())}onMainImageActiveChange(e){this.emailTemplate&&(this.emailTemplate.isMainImageActive=e.target.checked,console.log("Main image active changed:",this.emailTemplate.isMainImageActive),this.onModelChange())}onWaveImageActiveChange(e){this.emailTemplate&&(this.emailTemplate.isWaveImageActive=e.target.checked,console.log("Wave image active changed:",this.emailTemplate.isWaveImageActive),this.onModelChange())}onSecondHeaderActiveChange(e){this.emailTemplate&&(this.emailTemplate.isSecondHeaderActive=e.target.checked,console.log("Second header active changed:",this.emailTemplate.isSecondHeaderActive),this.onModelChange())}onBodyActiveChange(e){this.emailTemplate&&(this.emailTemplate.isBodyActive=e.target.checked,console.log("Body active changed:",this.emailTemplate.isBodyActive),this.onModelChange())}onButtonActiveChange(e){this.emailTemplate&&(this.emailTemplate.isButtonActive=e.target.checked,console.log("Button active changed:",this.emailTemplate.isButtonActive),this.onModelChange())}onFooterActiveChange(e){this.emailTemplate&&(this.emailTemplate.isFooterActive=e.target.checked,console.log("Footer active changed:",this.emailTemplate.isFooterActive),this.onModelChange())}onSocialLinksActiveChange(e){this.emailTemplate&&(this.emailTemplate.isSocialLinksActive=e.target.checked,console.log("Social links active changed:",this.emailTemplate.isSocialLinksActive),this.onModelChange())}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=B({type:a,selectors:[["app-email-template-editor"]],inputs:{emailTemplate:"emailTemplate",isSending:"isSending"},outputs:{emailTemplateChange:"emailTemplateChange"},features:[ve],decls:3,vars:1,consts:[[1,"w-[100%]","h-[1150px]"],[1,"overflow-y-auto","h-[100%]","bg-aliceblue","rounded-3xl","pl-4","mr-8"],["class","text-edit w-full pr-5",4,"ngIf"],[1,"text-edit","w-full","pr-5"],[1,"text-xl","font-bold","text-gray-600","mb-2","py-4","text-center"],[1,"form-group","mb-4"],[1,"block","text-sm","text-indigo-400","font-bold","mb-1"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 URL \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",1,"w-full","border","rounded-lg","px-4","py-2","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel","disabled"],[1,"w-full","border","rounded-lg","px-4","py-2","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel","disabled"],[1,"form-group","mb-6"],[1,"text-sm","text-indigo-400","font-bold","mb-1","flex","items-center"],["data-tip","\u041F\u0440\u0438\u043C\u0435\u0440: \u041F\u0440\u0438\u0432\u0435\u0442!<br>\u042D\u0442\u043E \u043D\u043E\u0432\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430. \u041F\u0440\u0438\u043C\u0435\u0440: \u041F\u0440\u0438\u0432\u0435\u0442!<br><br>\u042D\u0442\u043E \u043D\u043E\u0432\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430.",1,"tooltip","tooltip-left","tooltip-info"],["xmlns","http://www.w3.org/2000/svg","width","18","height","32","viewBox","0 0 24 24"],["fill","currentColor","d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"],[1,"w-full","h-[25dvh]","border","rounded-lg","px-4","py-2","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel","disabled"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 URL (\u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, https://www.example.com)",1,"w-full","border","rounded-lg","px-4","py-2","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel","disabled"],[1,"controlls"],[1,"mb-2","w-fit","relative"],[1,"block","text-xs","pr-2"],[1,"text-xs"],["type","color",1,"w-full","rounded-[20px]",3,"ngModelChange","ngModel"],["type","text",1,"w-full","border","rounded","px-2","py-1",3,"ngModelChange","ngModel"],["type","text","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u0440\u0430\u0434\u0438\u0435\u043D\u0442 \u0438\u043B\u0438 \u0446\u0432\u0435\u0442 (\u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, #ffffff)",1,"w-full","border","rounded","px-2","py-1",3,"ngModelChange","ngModel"],[1,"logo-controlls"],[1,"style-header-wrapper","flex","items-center","justify-between","mb-4"],[1,"text-lg","font-bold","text-indigo-600"],[1,"w-fit","flex","items-center","gap-2","pr-2"],[1,"block","text-xs"],["type","checkbox",1,"checkbox","checkbox-primary",3,"ngModelChange","ngModel"],[1,"mb-2","w-fit"],[1,"mb-2","relative"],["type","color",1,"w-full",3,"ngModelChange","ngModel"],[1,"text-xs","pos-absolute"],[1,"mb-2"],[1,"w-full","border","rounded","px-2","py-1",3,"ngModelChange","ngModel"],["value","left"],["value","center"],["value","right"],[1,"header-controlls"],["value","normal"],["value","italic"],["value","bold"],["value","none"],["value","underline"],[1,"img-controlls"],[1,"h2-controlls"],[1,"text-controlls"],[1,"text-lg","font-bold","text-indigo-600","mb-2"],[1,"btn-controlls"],[1,"footer-controlls"]],template:function(n,t){n&1&&(i(0,"div",0)(1,"div",1),f(2,Fa,504,112,"div",2),r()()),n&2&&(l(2),d("ngIf",t.emailTemplate))},dependencies:[A,Z,ee,Y,Be,re,q,Q],styles:[".controlls[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(100px,1fr) minmax(100px,1fr) minmax(100px,1fr) minmax(100px,1fr);gap:0 10px}.controlls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:130px;height:fit-content}.pos-absolute[_ngcontent-%COMP%]{position:absolute;left:80px;bottom:34px;z-index:1}.controlls[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .controlls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .controlls[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{width:130px;border-radius:15px}input[type=color i][_ngcontent-%COMP%]::-webkit-color-swatch-wrapper{padding:0}input[type=color i][_ngcontent-%COMP%]::-webkit-color-swatch{border-radius:20px;color-scheme:light only;border-color:#7773}"]})}return a})();var Pa=[[["","extra-header",""]]],Aa=["[extra-header]"];function za(a,m){if(a&1&&(i(0,"th",6),s(1),r()),a&2){let e=m.$implicit;l(),b(" ",e.header," ")}}function La(a,m){if(a&1&&(i(0,"span"),s(1),P(2,"date"),r()),a&2){let e=u().$implicit,n=u().$implicit;l(),b(" ",j(2,1,n[e.key],e.pipeFormat||"dd.MM.yyyy")," ")}}function Wa(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u().$implicit,n=u().$implicit;l(),b(" ",n[e.key]," ")}}function Ua(a,m){if(a&1&&(i(0,"td",14),se(1,15),f(2,La,3,4,"span",16)(3,Wa,2,1,"span",17),ue(),r()),a&2){let e=m.$implicit;d("ngClass",e.class||""),l(),d("ngSwitch",e.pipe),l(),d("ngSwitchCase","date")}}function Oa(a,m){if(a&1&&(i(0,"tr",12)(1,"td",6),s(2),r(),f(3,Ua,4,3,"td",13),r()),a&2){let e=m.index,n=u();l(2),w(e+1),l(),d("ngForOf",n.columns)}}var ki=(()=>{class a{users=[];columns=[];title="";totalCount=0;extraContent=!1;static \u0275fac=function(n){return new(n||a)};static \u0275cmp=B({type:a,selectors:[["app-users-table"]],inputs:{users:"users",columns:"columns",title:"title",totalCount:"totalCount",extraContent:"extraContent"},ngContentSelectors:Aa,decls:17,vars:4,consts:[[1,"mb-5","pt-2","pb-8"],[1,"text-xl","font-bold","py-4","text-center","flex","justify-center","items-center"],[1,"h-[250px]","overflow-x-auto","mx-auto","w-[96%]","shadow-2xl","rounded-3xl"],[1,"min-w-full","divide-y-2","divide-gray-200"],[1,"sticky","top-0","bg-white","text-left"],[1,"text-sm","text-gray-400"],[1,"px-3","py-2","whitespace-nowrap"],["class","px-3 py-2 whitespace-nowrap",4,"ngFor","ngForOf"],[1,"divide-y","divide-gray-100"],["class","text-gray-500 text-sm",4,"ngFor","ngForOf"],[1,"mr-[35px]","text-lg","font-bold","text-gray-400","py-2","text-center","flex","justify-end","items-center","gap-2"],[1,"text-2xl","font-bold","text-black"],[1,"text-gray-500","text-sm"],["class","px-3 py-2 whitespace-nowrap",3,"ngClass",4,"ngFor","ngForOf"],[1,"px-3","py-2","whitespace-nowrap",3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(n,t){n&1&&(it(Pa),i(0,"div",0)(1,"h3",1),s(2),r(),nt(3),i(4,"div",2)(5,"table",3)(6,"thead",4)(7,"tr",5)(8,"th",6),s(9,"#"),r(),f(10,za,2,1,"th",7),r()(),i(11,"tbody",8),f(12,Oa,4,2,"tr",9),r()()(),i(13,"h3",10),s(14," \u0412\u0441\u0435\u0433\u043E \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439: "),i(15,"span",11),s(16),r()()()),n&2&&(l(2),b(" ",t.title," "),l(8),d("ngForOf",t.columns),l(2),d("ngForOf",t.users),l(4),w(t.totalCount))},dependencies:[ne,H,Vt,Pt,At,le]})}return a})();var vt=a=>({"bg-gradient-to-r from-indigo-500 to-blue-500 text-white":a}),Bi=(()=>{class a{currentMode=null;telegramCount=0;siteCount=0;modeChange=new G;setMode(e){this.modeChange.emit(e)}isActive(e){return this.currentMode===e}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=B({type:a,selectors:[["app-send-mode-tabs"]],inputs:{currentMode:"currentMode",telegramCount:"telegramCount",siteCount:"siteCount"},outputs:{modeChange:"modeChange"},decls:16,vars:11,consts:[[1,"chosie-email-sent","flex","gap-2","mb-4"],[1,"manual-enter-email","btn-block","shadow-2xl","px-5","py-8","mx-2","my-4","ml-1","rounded-3xl","cursor-pointer","hover-shadow","transition-all","duration-300",3,"click","ngClass"],[1,"text-xl"],[1,"telegram-users","btn-block","shadow-2xl","px-5","py-8","mx-2","my-4","rounded-3xl","cursor-pointer","hover-shadow","transition-all","duration-300",3,"click","ngClass"],[1,"site-users","btn-block","shadow-2xl","px-5","py-8","mx-2","my-4","rounded-3xl","cursor-pointer","hover-shadow","transition-all","duration-300",3,"click","ngClass"]],template:function(n,t){n&1&&(i(0,"div",0)(1,"div",1),h("click",function(){return t.setMode("manual")}),i(2,"p",2),s(3,"\u0412\u0441\u0442\u0430\u0432\u044C\u0442\u0435 email-\u0430\u0434\u0440\u0435\u0441(\u0430) \u0432\u0440\u0443\u0447\u043D\u0443\u044E"),r()(),i(4,"div",3),h("click",function(){return t.setMode("telegram")}),i(5,"p",2),s(6," Telegram \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438 "),i(7,"b"),s(8,"\u0412\u0441\u0435\u0433\u043E:"),r(),s(9),r()(),i(10,"div",4),h("click",function(){return t.setMode("site")}),i(11,"p",2),s(12," Site \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438 "),i(13,"b"),s(14,"\u0412\u0441\u0435\u0433\u043E:"),r(),s(15),r()()()),n&2&&(l(),d("ngClass",ie(5,vt,t.isActive("manual"))),l(3),d("ngClass",ie(7,vt,t.isActive("telegram"))),l(5),b(" (",t.telegramCount,") "),l(),d("ngClass",ie(9,vt,t.isActive("site"))),l(5),b(" (",t.siteCount,") "))},dependencies:[ne]})}return a})();function Ha(a,m){if(a&1&&(i(0,"div",49),_(1,"app-users-table",50),r()),a&2){let e=u(2);l(),d("users",e.users)("title","\u{1F447} \u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C Telegram \u{1F60E} \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F\u043C \u{1F447}")("totalCount",e.telegramUsersEmails.length)("columns",e.telegramColumns)}}function $a(a,m){if(a&1&&(i(0,"option",56),s(1),r()),a&2){let e=m.$implicit;d("value",e),l(),b(" ",e," ")}}function qa(a,m){if(a&1){let e=S();i(0,"div",51)(1,"app-users-table",50)(2,"div",52)(3,"select",53),C("ngModelChange",function(t){c(e);let o=u(2);return v(o.selectedSiteUrl,t)||(o.selectedSiteUrl=t),g(t)}),h("ngModelChange",function(){c(e);let t=u(2);return g(t.onSiteUrlFilterChange())}),i(4,"option",54),s(5,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0430\u0439\u0442"),r(),f(6,$a,2,2,"option",55),r()()()()}if(a&2){let e=u(2);l(),d("users",e.filteredSiteUsers)("title","\u{1F447} \u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0430\u0439\u0442 \u{1F310} \u0434\u043B\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 email-\u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0439 \u{1F447}")("totalCount",e.siteUsersEmails.length)("columns",e.siteColumns),l(2),x("ngModel",e.selectedSiteUrl),l(3),d("ngForOf",e.uniqueSiteUrls)}}function Qa(a,m){if(a&1){let e=S();i(0,"div",30)(1,"label",31),s(2," \u0412\u0441\u0442\u0430\u0432\u044C\u0442\u0435 email-\u0430\u0434\u0440\u0435\u0441\u0430 \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043F\u044F\u0442\u0443\u044E \u043B\u0438\u0431\u043E \u0432\u0441\u0442\u0430\u0432\u044C\u0442\u0435 \u043E\u0434\u0438\u043D \u0430\u0434\u0440\u0435\u0441: "),r(),i(3,"input",57),C("ngModelChange",function(t){c(e);let o=u(2);return v(o.whoSentStr,t)||(o.whoSentStr=t),g(t)}),r()()}if(a&2){let e=u(2);l(3),x("ngModel",e.whoSentStr),d("disabled",e.isSending)}}function Ra(a,m){if(a&1){let e=S();i(0,"div",30)(1,"label",31),s(2," \u0421\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435 \u043F\u0438\u0441\u044C\u043C\u0430 (\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E): "),r(),i(3,"textarea",58),C("ngModelChange",function(t){c(e);let o=u(2);return v(o.emailContent,t)||(o.emailContent=t),g(t)}),r()()}if(a&2){let e=u(2);l(3),x("ngModel",e.emailContent),d("disabled",e.isSending)}}function Ga(a,m){if(a&1){let e=S();i(0,"div",71)(1,"label",72)(2,"input",73),h("click",function(){let t=c(e).$implicit,o=u(3);return g(o.selectTemplate(t.instance,t.id))}),r(),i(3,"span",74),s(4),r()(),i(5,"button",75),h("click",function(t){let o=c(e).$implicit,p=u(3);return g(p.deleteTemplate(o.id,o.name,t))}),y(),i(6,"svg",76),_(7,"path",77)(8,"path",78)(9,"path",79)(10,"path",80)(11,"path",81),r()()()}if(a&2){let e=m.$implicit,n=m.index,t=u(3);l(),d("for","template-"+n),l(),d("id","template-"+n)("value",e.id)("checked",t.selectedTemplateId===e.id),l(2),w(e.name)}}function Ya(a,m){if(a&1&&_(0,"div",82),a&2){let e=u(3);d("innerHTML",e.selectedTemplate.safeHtmlTemplate,Ae)}}function Xa(a,m){if(a&1){let e=S();i(0,"div",59)(1,"label",31),s(2," \u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0448\u0430\u0431\u043B\u043E\u043D: "),r(),i(3,"div",60),f(4,Ga,12,5,"div",61),r(),i(5,"label",31),s(6," \u0420\u0435\u0434\u0430\u043A\u0442\u043E\u0440 \u0438 \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u0448\u0430\u0431\u043B\u043E\u043D\u0430: "),r(),i(7,"div",62)(8,"div",63)(9,"app-email-template-editor",64),h("emailTemplateChange",function(t){c(e);let o=u(2);return g(o.selectedTemplate=t)}),r(),i(10,"div",65)(11,"button",66),h("click",function(){c(e);let t=u(2);return g(t.updateTemplate())}),s(12," \u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D "),r(),i(13,"button",67),h("click",function(){c(e);let t=u(2);return g(t.saveTemplate())}),s(14," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043A\u0430\u043A \u043D\u043E\u0432\u044B\u0439 "),r()()(),i(15,"div",68)(16,"div",69),f(17,Ya,1,1,"div",70),r()()()()}if(a&2){let e=u(2);l(4),d("ngForOf",e.templates),l(5),d("emailTemplate",e.selectedTemplate)("isSending",e.isSending),l(2),d("disabled",e.isSending||!e.selectedTemplate||e.selectedTemplateId===0),l(2),d("disabled",e.isSending||!e.selectedTemplate),l(4),d("ngIf",e.selectedTemplate)}}function Ja(a,m){if(a&1){let e=S();se(0),f(1,Ha,2,4,"div",22)(2,qa,7,6,"div",23),i(3,"div",24)(4,"label",25),s(5," \u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0430\u0440\u0438\u0430\u043D\u0442 \u043A\u043E\u043D\u0442\u0435\u043D\u0442\u0430 \u043F\u0438\u0441\u044C\u043C\u0430: "),r(),i(6,"div",26)(7,"p",27),s(8," \u041D\u0430\u043F\u0438\u0441\u0430\u0442\u044C \u0432\u0440\u0443\u0447\u043D\u0443\u044E \u0442\u0435\u043A\u0441\u0442 "),r(),i(9,"input",28),C("ngModelChange",function(t){c(e);let o=u();return v(o.useTemplate,t)||(o.useTemplate=t),g(t)}),h("change",function(t){c(e);let o=u();return g(o.toggleContentChoice(t))}),r(),i(10,"p",27),s(11," \u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0438\u0437 \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432 "),r()()(),f(12,Qa,4,2,"div",29),i(13,"div",30)(14,"label",31),s(15," \u0422\u0435\u043C\u0430 \u043F\u0438\u0441\u044C\u043C\u0430 (\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E): "),r(),i(16,"input",32),C("ngModelChange",function(t){c(e);let o=u();return v(o.emailSubject,t)||(o.emailSubject=t),g(t)}),r()(),f(17,Ra,4,2,"div",29)(18,Xa,18,6,"div",33),i(19,"div",34)(20,"button",35),h("click",function(){c(e);let t=u();return g(t.sendEmails())}),s(21),i(22,"span"),y(),i(23,"svg",36)(24,"mask",37)(25,"g",38)(26,"path",39),_(27,"animate",8),r(),i(28,"path",9),_(29,"animate",10),r(),i(30,"path",40),_(31,"animate",41),r(),i(32,"path",42),_(33,"set",43),r(),i(34,"path",44),_(35,"animate",45),r(),i(36,"path",46),_(37,"animate",47),r()()(),_(38,"rect",48),r()()()(),ue()}if(a&2){let e=u();l(),d("ngIf",e.sendMode==="telegram"),l(),d("ngIf",e.sendMode==="site"),l(5),d("ngClass",e.useTemplate?"px-[10px] py-[5px]":"nj-toast-gradient"),l(2),x("ngModel",e.useTemplate),d("disabled",e.isSending),l(),d("ngClass",e.useTemplate?"nj-toast-grad-access":"px-[10px] py-[5px]"),l(2),d("ngIf",e.sendMode==="manual"),l(4),x("ngModel",e.emailSubject),d("disabled",e.isSending),l(),d("ngIf",!e.useTemplate),l(),d("ngIf",e.useTemplate),l(2),d("disabled",e.isSending),l(),b(" ",e.isSending?"\u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430...":"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C"," ")}}function Ka(a,m){if(a&1){let e=S();i(0,"div",83)(1,"b"),s(2),r(),i(3,"span",84),h("click",function(){c(e);let t=u();return g(t.cancelMessage())}),y(),i(4,"svg",85),_(5,"path",86),r()()()}if(a&2){let e=u();l(2),w(e.resultMessage)}}var Ii=(()=>{class a{usersService;siteUsersService;usersEmailsService;emailTemplatesService;sanitizer;sendMode=null;emailSubject="";emailContent="";isSending=!1;resultMessage="";users=[];siteUsers=[];emailMessages=[];useTemplate=!1;whoSent=[];telegramUsersEmails=[];siteUsersEmails=[];selectedSiteUrl=null;templates=[];selectedTemplate=null;selectedTemplateId=null;telegramColumns=bi;siteColumns=wi;constructor(e,n,t,o,p){this.usersService=e,this.siteUsersService=n,this.usersEmailsService=t,this.emailTemplatesService=o,this.sanitizer=p}ngOnInit(){let e=localStorage.getItem("emailSendMode");this.sendMode=e||"manual";let n=localStorage.getItem("emailSiteUrlFilter");n&&n!=="null"&&(this.selectedSiteUrl=n),this.loadUsers(),this.loadTemplates();let t=localStorage.getItem("emailContentChoice");this.useTemplate=t==="template"}setSendMode(e){this.sendMode=e,localStorage.setItem("emailSendMode",e),(e==="telegram"||e==="site")&&(this.whoSent=[])}loadUsers(){this.usersService.getUsers().subscribe({next:e=>{this.users=e,this.telegramUsersEmails=e.filter(n=>!!n.email&&n.email.trim().length>0).map(n=>n.email)},error:e=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 Telegram \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439:",e),this.resultMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 Telegram \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439"}}),this.siteUsersService.getSiteUsers().subscribe({next:e=>{this.siteUsers=e,this.updateSiteUsersEmails(),this.selectedSiteUrl&&!this.uniqueSiteUrls.includes(this.selectedSiteUrl)&&(this.selectedSiteUrl=null,localStorage.setItem("emailSiteUrlFilter","null")),!this.selectedSiteUrl&&this.uniqueSiteUrls.length>0&&(this.selectedSiteUrl=this.uniqueSiteUrls[0],localStorage.setItem("emailSiteUrlFilter",this.selectedSiteUrl),this.updateSiteUsersEmails())},error:e=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 Site \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439:",e),this.resultMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 Site \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439"}})}updateSiteUsersEmails(){this.siteUsersEmails=this.siteUsers.filter(e=>!!e.email&&e.email.trim().length>0&&(!this.selectedSiteUrl||e.site_url===this.selectedSiteUrl)).map(e=>e.email)}get filteredSiteUsers(){return this.siteUsers.filter(e=>!this.selectedSiteUrl||e.site_url===this.selectedSiteUrl)}get uniqueSiteUrls(){return[...new Set(this.siteUsers.map(e=>e.site_url))].filter(e=>e!=null)}onSiteUrlFilterChange(){localStorage.setItem("emailSiteUrlFilter",this.selectedSiteUrl===null?"null":this.selectedSiteUrl),this.updateSiteUsersEmails()}loadTemplates(){this.emailTemplatesService.getTemplates().subscribe({next:e=>{if(this.templates=e,console.log("\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043D\u044B\u0435 \u0448\u0430\u0431\u043B\u043E\u043D\u044B:",this.templates),e.length>0){let n=this.selectedTemplateId&&e.find(t=>t.id===this.selectedTemplateId)||e[0];this.selectTemplate(n.instance,n.id)}else this.selectedTemplate=null,this.selectedTemplateId=null,this.resultMessage=this.resultMessage||"\u0428\u0430\u0431\u043B\u043E\u043D\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B"},error:e=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432:",e),this.resultMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432"}})}sendEmails(){if(!this.emailSubject.trim()){this.resultMessage="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043C\u0443 \u043F\u0438\u0441\u044C\u043C\u0430";return}if(!this.useTemplate&&!this.emailContent.trim()){this.resultMessage="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435 \u043F\u0438\u0441\u044C\u043C\u0430";return}let e=[];if(this.sendMode==="telegram")e=[...new Set(this.telegramUsersEmails)];else if(this.sendMode==="site"){if(!this.selectedSiteUrl){this.resultMessage="\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u043E\u043D\u043A\u0440\u0435\u0442\u043D\u044B\u0439 \u0441\u0430\u0439\u0442 \u0434\u043B\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438";return}e=[...new Set(this.siteUsersEmails)]}else this.sendMode==="manual"&&(e=[...new Set(this.whoSent)]);if(e.length===0){this.resultMessage="\u041D\u0435\u0442 email \u0434\u043B\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438";return}if(this.isSending=!0,this.resultMessage="",this.useTemplate&&!this.selectedTemplate){this.resultMessage="\u0428\u0430\u0431\u043B\u043E\u043D \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D",this.isSending=!1;return}let n=this.useTemplate?this.selectedTemplate?.htmlTemplate??"":this.emailContent,t=this.useTemplate;((p,E=1,F=3)=>{this.usersEmailsService.sendBulkEmails(p,this.emailSubject,n,t).subscribe({next:z=>{console.log("\u041E\u0442\u0432\u0435\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 \u043F\u0438\u0441\u0435\u043C:",z);let X=z?.message||"\u041F\u0438\u0441\u044C\u043C\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u044B",me=z?.sentEmails?.length?z.sentEmails:p;this.resultMessage=X;let K=me.map(te=>({email:te,subject:this.emailSubject,content:n,status:"sent",isSent:!0,sentAt:new Date().toISOString()}));this.emailMessages=[...this.emailMessages,...K],this.isSending=!1,this.emailSubject="",this.emailContent="",this.whoSent=[]},error:z=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 \u043F\u0438\u0441\u0435\u043C:",z),this.resultMessage=z||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 \u043F\u0438\u0441\u0435\u043C",this.isSending=!1;let X=p.map(me=>({email:me,subject:this.emailSubject,content:n,status:"failed",isSent:!1,sentAt:new Date().toISOString()}));this.emailMessages=[...this.emailMessages,...X],z.includes("CORS")&&console.warn("CORS-\u043E\u0448\u0438\u0431\u043A\u0430, \u043D\u043E \u0437\u0430\u043F\u0440\u043E\u0441 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u0443\u0441\u043F\u0435\u0448\u0435\u043D. \u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u043D\u044B\u0435 \u043B\u043E\u0433\u0438.")}})})(e)}createNewTemplate(){let e=prompt("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F \u043D\u043E\u0432\u043E\u0433\u043E \u0448\u0430\u0431\u043B\u043E\u043D\u0430:","New Template");if(!e){this.resultMessage="\u0418\u043C\u044F \u0448\u0430\u0431\u043B\u043E\u043D\u0430 \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u043E";return}let n=new Qe(this.sanitizer);this.templates.push({id:0,name:e,instance:n}),this.selectTemplate(n,0),this.resultMessage="\u041D\u043E\u0432\u044B\u0439 \u0448\u0430\u0431\u043B\u043E\u043D \u0441\u043E\u0437\u0434\u0430\u043D"}saveTemplate(){if(!this.selectedTemplate){this.resultMessage="\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0448\u0430\u0431\u043B\u043E\u043D \u0434\u043B\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F";return}let e=prompt("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F \u0448\u0430\u0431\u043B\u043E\u043D\u0430:","New Template");if(!e){this.resultMessage="\u0418\u043C\u044F \u0448\u0430\u0431\u043B\u043E\u043D\u0430 \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u043E";return}if(confirm(`\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u0448\u0430\u0431\u043B\u043E\u043D \u0441 \u0438\u043C\u0435\u043D\u0435\u043C "${e}"?`)){let n=this.selectedTemplate.getTemplateData();this.emailTemplatesService.saveTemplate(e,n).subscribe({next:t=>{this.resultMessage=`\u041D\u043E\u0432\u044B\u0439 \u0448\u0430\u0431\u043B\u043E\u043D "${e}" \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D`,this.selectedTemplateId=t.id,this.loadTemplates()},error:t=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0430:",t),this.resultMessage=t.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0430"}})}}updateTemplate(){if(!this.selectedTemplate||!this.selectedTemplateId||this.selectedTemplateId===0){this.resultMessage="\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0451\u043D\u043D\u044B\u0439 \u0448\u0430\u0431\u043B\u043E\u043D \u0434\u043B\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F";return}let e=this.templates.find(t=>t.id===this.selectedTemplateId)?.name||"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u043E";if(!confirm(`\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D "${e}"?`))return;let n=this.selectedTemplate.getTemplateData();this.emailTemplatesService.updateTemplate(this.selectedTemplateId,e,n).subscribe({next:t=>{console.log("\u0428\u0430\u0431\u043B\u043E\u043D \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0451\u043D:",t),this.resultMessage=`\u0428\u0430\u0431\u043B\u043E\u043D "${e}" \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0451\u043D`,this.loadTemplates()},error:t=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0430:",t),this.resultMessage=t.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0430"}})}deleteTemplate(e,n,t){t.stopPropagation(),confirm(`\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D "${n}"? \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C.`)&&this.emailTemplatesService.deleteTemplate(e).subscribe({next:()=>{console.log("\u0428\u0430\u0431\u043B\u043E\u043D \u0443\u0434\u0430\u043B\u0451\u043D:",e),this.resultMessage=`\u0428\u0430\u0431\u043B\u043E\u043D "${n}" \u0443\u0434\u0430\u043B\u0451\u043D`,this.templates=this.templates.filter(o=>o.id!==e),this.selectedTemplateId===e&&(this.selectedTemplate=null,this.selectedTemplateId=null,this.templates.length>0&&this.selectTemplate(this.templates[0].instance,this.templates[0].id))},error:o=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0430:",o),this.resultMessage=o.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0430"}})}selectTemplate(e,n){this.selectedTemplate=e.clone(),this.selectedTemplateId=n}get whoSentStr(){return this.whoSent.join(", ")}set whoSentStr(e){let n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,t=e.split(",").map(o=>o.trim()).filter(o=>o.length>0);this.whoSent=t.filter(o=>n.test(o)),t.length>0&&this.whoSent.length===0?this.resultMessage="\u0412\u0432\u0435\u0434\u0435\u043D\u044B \u043D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0435 email-\u0430\u0434\u0440\u0435\u0441\u0430":this.resultMessage=""}toggleContentChoice(e){this.useTemplate=e.target.checked,localStorage.setItem("emailContentChoice",this.useTemplate?"template":"text"),this.useTemplate&&!this.selectedTemplate&&this.templates.length>0&&this.selectTemplate(this.templates[0].instance,this.templates[0].id)}cancelMessage(){this.resultMessage=""}static \u0275fac=function(n){return new(n||a)(k(gt),k(Re),k(ht),k(ft),k(je))};static \u0275cmp=B({type:a,selectors:[["app-email-sent"]],decls:25,vars:6,consts:[[1,"admin-page","ml-side"],[1,"container","mx-auto","pt-[10px]"],[1,"bg-main-trans2-gradient-90","header-tab","flex","items-center","justify-between","py-[10px]","mb-[0px]","rounded-[20px]","w-[100%]","pr-4"],[1,"title-tab","text-2xl","font-bold","text-indigo-600"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 24 24"],["fill","none","stroke","#4f45e5","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","#4f45e5","fill-opacity","0","stroke-dasharray","64","stroke-dashoffset","64","d","M4 5h16c0.55 0 1 0.45 1 1v12c0 0.55 -0.45 1 -1 1h-16c-0.55 0 -1 -0.45 -1 -1v-12c0 -0.55 0.45 -1 1 -1Z"],["fill","freeze","attributeName","fill-opacity","begin","0.7s","dur","0.15s","values","0;0.3"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.6s","values","64;0"],["stroke-dasharray","24","stroke-dashoffset","24","d","M3 6.5l9 5.5l9 -5.5"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.6s","dur","0.2s","values","24;0"],[1,"collapse-wrapper","flex","flex-col","gap-2","mt-[30px]"],[1,"collapse","hover-shadow","border"],["type","radio","name","my-accordion-3","checked","checked",1,"peer"],[1,"collapse-title","text-xl","font-medium","peer-checked:bg-gradient"],[1,"collapse-content","peer-checked:bg-white"],[1,"form-group"],[1,"block","text-2xl","text-gray-600","font-bold","mb-1","text-center"],[3,"modeChange","currentMode","telegramCount","siteCount"],[4,"ngIf"],[3,"emailMessages"],["class","alert mb-4 relative flex justify-between bg-info",4,"ngIf"],["class","telegram-users-email pt-2",4,"ngIf"],["class","site-users-email pt-2",4,"ngIf"],[1,"form-group","pb-4","pt-2"],[1,"block","text-lg","text-gray-600","font-bold","mb-1","text-center"],[1,"checked-var","flex","items-center","justify-center","gap-4","py-2"],[3,"ngClass"],["type","checkbox",1,"toggle","border-indigo-600","bg-indigo-500","checked:bg-green-400","checked:text-green-500","checked:border-green-500",3,"ngModelChange","change","ngModel","disabled"],["class","form-group w-[75%] mx-auto",4,"ngIf"],[1,"form-group","w-[75%]","mx-auto"],[1,"block","text-sm","text-indigo-400","font-bold","mb-1"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043C\u0443 \u043F\u0438\u0441\u044C\u043C\u0430",1,"input","w-full","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel","disabled"],["class","form-group mb-4",4,"ngIf"],[1,"btn-wrapper","w-full","flex","items-center","justify-center","py-[40px]"],[1,"btn","btn-accent","w-[40%]","text-white","text-xl","rounded-[35px]","min-h-[70px]","items-center",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24"],["id","lineMdEmailArrowRightTwotone0"],["fill","none","stroke","#fff","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["stroke-dasharray","64","stroke-dashoffset","64","d","M4 5h16c0.55 0 1 0.45 1 1v12c0 0.55 -0.45 1 -1 1h-16c-0.55 0 -1 -0.45 -1 -1v-12c0 -0.55 0.45 -1 1 -1Z"],["fill","#fff","fill-opacity","0","stroke","none","d","M12 11l-8 -5h16l-8 5Z"],["fill","freeze","attributeName","fill-opacity","begin","1.2s","dur","0.15s","values","0;0.3"],["fill","#000","fill-opacity","0","stroke","none","d","M19 13c3.31 0 6 2.69 6 6c0 3.31 -2.69 6 -6 6c-3.31 0 -6 -2.69 -6 -6c0 -3.31 2.69 -6 6 -6Z"],["fill","freeze","attributeName","fill-opacity","begin","0.8s","to","1"],["stroke-dasharray","6","stroke-dashoffset","6","d","M16 19h5"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.8s","dur","0.2s","values","6;0"],["stroke-dasharray","4","stroke-dashoffset","4","d","M21 19l-2 2M21 19l-2 -2"],["fill","freeze","attributeName","stroke-dashoffset","begin","1s","dur","0.2s","values","4;0"],["width","24","height","24","fill","#fff","mask","url(#lineMdEmailArrowRightTwotone0)"],[1,"telegram-users-email","pt-2"],[3,"users","title","totalCount","columns"],[1,"site-users-email","pt-2"],["extra-header","",1,"title-group","flex","items-center","gap-4","mb-4","justify-center"],["required","",1,"select","select-primary","text-xl","w-[40%]","mx-auto","rounded-[25px]",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placeholder","example@gmail.com, 2-example@gmail.com, 3-example@gmail.com",1,"input","w-full","mb-4","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel","disabled"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043A\u0441\u0442 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F",1,"w-full","h-[24dvh]","border","rounded-lg","px-4","py-2","focus:ring","focus:ring-blue-300","focus:ring-opacity-40",3,"ngModelChange","ngModel","disabled"],[1,"form-group","mb-4"],[1,"template-list","flex","mb-4","flex-wrap"],["class","flex items-center rounded-btn py-2 mx-2",4,"ngFor","ngForOf"],[1,"w-full","border","rounded-lg","p-4","overflow-auto","grid","grid-cols-2","gap-4"],[1,"editor-wrapper","flex","flex-col","gap-4"],[3,"emailTemplateChange","emailTemplate","isSending"],[1,"btn-wrapper","gap-4","flex","justify-center","items-center","w-[96%]"],["title","\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0439 \u0448\u0430\u0431\u043B\u043E\u043D (\u0442\u043E\u043B\u044C\u043A\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0451\u043D\u043D\u044B\u0435)",1,"btn","btn-outline","btn-info","w-[44%]","mx-auto","text-lg","rounded-[35px]","mt-4","min-h-[60px]","items-center",3,"click","disabled"],[1,"btn","btn-primary","w-[44%]","mx-auto","text-white","text-lg","rounded-[35px]","mt-4","min-h-[60px]","items-center",3,"click","disabled"],[1,"emeil-template-wrapper","h-[1200px]","overflow-auto"],[1,"h-[1800px]","p-4","pt-[100px]","bg-base-200","relative","flex","flex-col","justify-start","shadow-2xl","rounded-3xl"],["class","w-[100%] h-fit",3,"innerHTML",4,"ngIf"],[1,"flex","items-center","rounded-btn","py-2","mx-2"],[1,"label","btn","btn-ghost","px-2","cursor-pointer",3,"for"],["type","radio","name","template-options",1,"checkbox","checkbox-success",3,"click","id","value","checked"],[1,"ml-2"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D",1,"btn","btn-circle","btn-sm","text-error","hover:scale-110","transition-transform",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M3 6h18"],["d","M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],["d","M5 6v14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6"],["d","M10 11v6"],["d","M14 11v6"],[1,"w-[100%]","h-fit",3,"innerHTML"],[1,"alert","mb-4","relative","flex","justify-between","bg-info"],[1,"close","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","currentColor","d","M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10s10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m3.59-13L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41z"]],template:function(n,t){n&1&&(_(0,"app-sidebar"),i(1,"section",0)(2,"div",1)(3,"div",2)(4,"h2",3),s(5," \u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C email-\u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 "),r(),y(),i(6,"svg",4)(7,"g",5)(8,"path",6),_(9,"animate",7)(10,"animate",8),r(),i(11,"path",9),_(12,"animate",10),r()()()(),M(),i(13,"div",11)(14,"div",12),_(15,"input",13)(16,"div",14),i(17,"div",15)(18,"div",16)(19,"label",17),s(20," \u{1F447} \u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u043E\u043C\u0443 \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u{1F447} "),r(),i(21,"app-send-mode-tabs",18),h("modeChange",function(p){return t.setSendMode(p)}),r(),f(22,Ja,39,13,"ng-container",19),r()()()(),_(23,"app-emails-table",20),f(24,Ka,6,1,"div",21),r()()),n&2&&(l(21),d("currentMode",t.sendMode)("telegramCount",t.telegramUsersEmails.length)("siteCount",t.siteUsersEmails.length),l(),d("ngIf",t.sendMode),l(),d("emailMessages",t.emailMessages),l(),d("ngIf",t.resultMessage))},dependencies:[ne,H,A,de,Z,ee,Y,Be,re,q,ut,Q,Mi,Ti,ki,Bi],styles:[".all-users-email[_ngcontent-%COMP%]{height:fit-content;max-height:250px;overflow-y:auto;border-radius:22px}.all-users-email[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:20px;display:grid;grid-template-columns:repeat(3,minmax(100px,1fr));gap:0 10px}"]})}return a})();var Za=a=>({hover:a});function eo(a,m){if(a&1&&(i(0,"option",10),s(1),r()),a&2){let e=m.$implicit;d("ngValue",e),l(),b(" ",e," ")}}function to(a,m){a&1&&(i(0,"div",18),_(1,"app-loading"),r())}function io(a,m){if(a&1&&(i(0,"div",19),s(1),r()),a&2){let e=u();l(),b(" ",e.error," ")}}function no(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2);l(),b(" ",e.ascending?"\u2191":"\u2193"," ")}}function ro(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2);l(),b(" ",e.ascending?"\u2191":"\u2193"," ")}}function ao(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2);l(),b(" ",e.ascending?"\u2191":"\u2193"," ")}}function oo(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2);l(),b(" ",e.ascending?"\u2191":"\u2193"," ")}}function lo(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2);l(),b(" ",e.ascending?"\u2191":"\u2193"," ")}}function so(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2);l(),b(" ",e.ascending?"\u2191":"\u2193"," ")}}function uo(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2);l(),b(" ",e.ascending?"\u2191":"\u2193"," ")}}function mo(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2);l(),b(" ",e.ascending?"\u2191":"\u2193"," ")}}function po(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2);l(),b(" ",e.ascending?"\u2191":"\u2193"," ")}}function co(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u().$implicit,n=u(2).$implicit,t=u(2);l(),b(" ",t.getEventTitle(n.user_submit_data[e])," ")}}function go(a,m){if(a&1&&(i(0,"span")(1,"a",35),s(2),r()()),a&2){let e=u(2).$implicit,n=u(2).$implicit;l(),d("href",n.user_submit_data[e],W),l(),b(" ",n.user_submit_data[e]," ")}}function _o(a,m){if(a&1&&(i(0,"span"),s(1),r()),a&2){let e=u(2).$implicit,n=u(2).$implicit,t=u(2);l(),b(" ",t.displayValue(n.user_submit_data[e])," ")}}function ho(a,m){if(a&1&&f(0,go,3,2,"span",25)(1,_o,2,1,"span",25),a&2){let e=u().$implicit,n=u(2).$implicit,t=u(2);d("ngIf",t.isUrl(n.user_submit_data[e])),l(),d("ngIf",!t.isUrl(n.user_submit_data[e]))}}function fo(a,m){if(a&1&&(i(0,"div")(1,"span",34),s(2),r(),f(3,co,2,1,"span",29)(4,ho,2,2,"ng-template",null,1,fe),r()),a&2){let e=m.$implicit,n=he(5),t=u(4);l(2),b("",t.formatKey(e),":"),l(),d("ngIf",e==="event")("ngIfElse",n)}}function xo(a,m){if(a&1&&(se(0),f(1,fo,6,3,"div",33),ue()),a&2){let e=u().$implicit,n=u(2);l(),d("ngForOf",n.getUserSubmitDataKeys(e.user_submit_data))}}function vo(a,m){a&1&&s(0,"-")}function Co(a,m){if(a&1){let e=S();i(0,"tr",27)(1,"th"),s(2),r(),i(3,"td"),s(4),r(),i(5,"td"),s(6),r(),i(7,"td")(8,"a",28),s(9),r()(),i(10,"td"),f(11,xo,2,1,"ng-container",29)(12,vo,1,0,"ng-template",null,0,fe),r(),i(14,"td"),s(15),r(),i(16,"td"),s(17),r(),i(18,"td"),s(19),r(),i(20,"td"),s(21),r(),i(22,"td"),s(23),r(),i(24,"td"),s(25),r(),i(26,"td"),s(27),r(),i(28,"td"),s(29),r(),i(30,"td")(31,"button",30),h("click",function(){let t=c(e).$implicit,o=u(2);return g(o.deleteUser(t.id,t.email))}),y(),i(32,"svg",31),_(33,"path",32),r()()()()}if(a&2){let e=m.$implicit,n=m.index,t=he(13);d("ngClass",ie(16,Za,n%2===1)),l(2),w(n+1),l(2),w(e.user_name||"-"),l(2),w(e.email||"-"),l(2),d("href",e.site_url,W),l(),w(e.site_url||"-"),l(2),d("ngIf",e.user_submit_data)("ngIfElse",t),l(4),w(e.state||"-"),l(2),w(e.browser||"-"),l(2),w(e.os||"-"),l(2),w(e.screen||"-"),l(2),w(e.language_code||"-"),l(2),w(e.javascriptEnabled||"-"),l(2),w((e.last_active==null?null:e.last_active.slice(0,16))||"-"),l(2),w(e.updated_at.slice(0,16))}}function bo(a,m){if(a&1){let e=S();i(0,"div",20)(1,"div",21)(2,"table",22)(3,"thead")(4,"tr")(5,"th"),s(6,"#"),r(),i(7,"th",23),s(8,"name"),r(),i(9,"th",24),h("click",function(){c(e);let t=u();return g(t.toggleSort("email"))}),s(10," Email "),f(11,no,2,1,"span",25),r(),i(12,"th",24),h("click",function(){c(e);let t=u();return g(t.toggleSort("site_url"))}),s(13," Site URL "),f(14,ro,2,1,"span",25),r(),i(15,"th"),s(16,"User Submit Data"),r(),i(17,"th",24),h("click",function(){c(e);let t=u();return g(t.toggleSort("state"))}),s(18," State "),f(19,ao,2,1,"span",25),r(),i(20,"th",24),h("click",function(){c(e);let t=u();return g(t.toggleSort("browser"))}),s(21," Browser "),f(22,oo,2,1,"span",25),r(),i(23,"th",24),h("click",function(){c(e);let t=u();return g(t.toggleSort("os"))}),s(24," OS "),f(25,lo,2,1,"span",25),r(),i(26,"th",24),h("click",function(){c(e);let t=u();return g(t.toggleSort("screen"))}),s(27," Screen "),f(28,so,2,1,"span",25),r(),i(29,"th",24),h("click",function(){c(e);let t=u();return g(t.toggleSort("language_code"))}),s(30," Language "),f(31,uo,2,1,"span",25),r(),i(32,"th"),s(33,"JavaScript"),r(),i(34,"th",24),h("click",function(){c(e);let t=u();return g(t.toggleSort("last_active"))}),s(35," Last Active "),f(36,mo,2,1,"span",25),r(),i(37,"th",24),h("click",function(){c(e);let t=u();return g(t.toggleSort("updated_at"))}),s(38," Updated At "),f(39,po,2,1,"span",25),r(),i(40,"th"),s(41,"Action"),r()()(),i(42,"tbody"),f(43,Co,34,18,"tr",26),P(44,"filterBySiteName"),r()()()()}if(a&2){let e=u();l(11),d("ngIf",e.sortBy==="email"),l(3),d("ngIf",e.sortBy==="site_url"),l(5),d("ngIf",e.sortBy==="state"),l(3),d("ngIf",e.sortBy==="browser"),l(3),d("ngIf",e.sortBy==="os"),l(3),d("ngIf",e.sortBy==="screen"),l(3),d("ngIf",e.sortBy==="language_code"),l(5),d("ngIf",e.sortBy==="last_active"),l(3),d("ngIf",e.sortBy==="updated_at"),l(4),d("ngForOf",j(44,10,e.sortedUsers,e.selectedSiteName))}}function wo(a,m){a&1&&(i(0,"div",36),s(1," \u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B. "),r())}var Di=(()=>{class a{siteUserService;users=[];isLoading=!1;error="";sortBy="updated_at";ascending=!1;selectedSiteName=null;baseUrl=I.auth.domenUrl;constructor(e){this.siteUserService=e}ngOnInit(){let e=localStorage.getItem("userSortBy"),n=localStorage.getItem("userSortAscending"),t=localStorage.getItem("userSiteNameFilter");e&&(this.sortBy=e),n!==null&&(this.ascending=n==="true"),t!==null&&(this.selectedSiteName=t==="null"?null:t),this.loadSiteUsers()}loadSiteUsers(){this.isLoading=!0,this.error="",this.siteUserService.getSiteUsers().subscribe({next:e=>{this.users=e.map(n=>V(T({},n),{site_name:this.extractSiteName(n.site_url)||n.site_name||""})),console.log("Normalized site users:",this.users.map(n=>({id:n.id,email:n.email,site_url:n.site_url,site_name:n.site_name}))),this.selectedSiteName&&!this.uniqueSiteNames.includes(this.selectedSiteName)&&(this.selectedSiteName=null,localStorage.setItem("userSiteNameFilter","null")),!this.selectedSiteName&&this.uniqueSiteNames.length>0&&(this.selectedSiteName=this.uniqueSiteNames[0],localStorage.setItem("userSiteNameFilter",this.selectedSiteName)),this.isLoading=!1,this.sortUsers()},error:e=>{this.error=e.message,this.isLoading=!1}})}extractSiteName(e){return!e||!e.startsWith(this.baseUrl)?void 0:e.replace(this.baseUrl,"").replace(/\/$/,"")||void 0}deleteUser(e,n){confirm(`\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u0441 email ${n}?`)&&(this.isLoading=!0,this.error="",this.siteUserService.deleteSiteUser(e).subscribe({next:()=>{this.users=this.users.filter(t=>t.id!==e),this.selectedSiteName&&!this.uniqueSiteNames.includes(this.selectedSiteName)&&(this.selectedSiteName=null,localStorage.setItem("userSiteNameFilter","null")),this.isLoading=!1,this.sortUsers()},error:t=>{this.error=t.message,this.isLoading=!1}}))}toggleSort(e){this.sortBy===e?this.ascending=!this.ascending:(this.sortBy=e,this.ascending=e!=="updated_at"),this.sortUsers(),localStorage.setItem("userSortBy",this.sortBy),localStorage.setItem("userSortAscending",this.ascending.toString())}get sortedUsers(){return this.users.length?[...this.users].sort((e,n)=>{let t=e[this.sortBy]??"",o=n[this.sortBy]??"";if(["updated_at","last_active"].includes(this.sortBy)){let p=new Date(t).getTime(),E=new Date(o).getTime();return this.ascending?p-E:E-p}return typeof t=="string"&&typeof o=="string"?this.ascending?t.localeCompare(o):o.localeCompare(t):typeof t=="number"&&typeof o=="number"?this.ascending?t-o:o-t:0}):[...this.users]}sortUsers(){this.users=this.sortedUsers}getUserSubmitDataKeys(e){return console.log("User submit data:",e),e?Object.keys(e):[]}displayValue(e){return e==null||typeof e=="object"?"-":String(e)}getEventTitle(e){return e?e.typeEventId?e.typeEventId:e.name?e.name:"Unknown Event":"-"}formatKey(e){return e.replace(/([A-Z])/g," $1").replace(/^./,n=>n.toUpperCase()).replace("Id ","ID ").replace("Fb","Facebook").replace("Ig","Instagram").replace("Tt","TikTok").replace("Tw","Twitter").replace("Yt","YouTube")}isUrl(e){return typeof e!="string"?!1:e.startsWith("http://")||e.startsWith("https://")}get uniqueSiteNames(){let e=[...new Set(this.users.map(n=>n.site_name))].filter(n=>n!=null&&n!=="");return console.log("Unique site names:",e),e.sort()}onSiteNameFilterChange(){console.log("Selected site name changed to:",this.selectedSiteName),localStorage.setItem("userSiteNameFilter",this.selectedSiteName===null?"null":this.selectedSiteName)}static \u0275fac=function(n){return new(n||a)(k(Re))};static \u0275cmp=B({type:a,selectors:[["app-site-users"]],decls:21,vars:11,consts:[["noData",""],["regularValue",""],[1,"admin-page","ml-side","section"],[1,"container","mx-auto","pt-[10px]"],[1,"bg-main-trans2-gradient-90","header-tab","flex","items-center","justify-between","py-[10px]","mb-0","rounded-[20px]","w-full","pr-4"],[1,"title-group","flex","items-center","gap-4"],[1,"title-tab","text-2xl","font-bold","text-indigo-600"],[1,"text-black"],[1,"title-tab","text-main-trans","font-bold"],[1,"select","select-primary","text-xl","w-fit","rounded-[25px]",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 24 24"],["fill","#4f45e5","d","M4 13.525L6.525 11L4 8.475L1.475 11zM17.5 13L20 9l2.5 4zM12 12q-1.25 0-2.125-.875T9 9q0-1.275.875-2.137T12 6q1.275 0 2.138.863T15 9q0 1.25-.862 2.125T12 12M0 18v-1.575q0-1.1 1.113-1.763T4 14q.325 0 .625.013t.575.062q-.35.5-.525 1.075T4.5 16.375V18zm6 0v-1.625q0-1.625 1.663-2.625t4.337-1q2.7 0 4.35 1T18 16.375V18zm14-4q1.8 0 2.9.663t1.1 1.762V18h-4.5v-1.625q0-.65-.162-1.225t-.488-1.075q.275-.05.563-.062T20 14"],["class","text-center py-4",4,"ngIf"],["class","text-red-500 text-center",4,"ngIf"],["class","overflow-x-auto mt-4",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"text-center","py-4"],[1,"text-red-500","text-center"],[1,"overflow-x-auto","mt-4"],[1,"overflow-x-auto"],[1,"table"],[1,"cursor-pointer"],[1,"cursor-pointer",3,"click"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["target","_blank",3,"href"],[4,"ngIf","ngIfElse"],["title","Delete User",1,"btn","hover:btn-error","btn-circle","hover:text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","viewBox","0 0 24 24"],["fill","currentColor","d","M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12l1.41 1.41L13.41 14l2.12 2.12l-1.41 1.41L12 15.41l-2.12 2.12l-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"],[4,"ngFor","ngForOf"],[1,"font-semibold"],["target","_blank",1,"text-blue-600","hover:underline",3,"href"],[1,"text-center"]],template:function(n,t){n&1&&(_(0,"app-sidebar"),i(1,"section",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h2",6)(6,"span",7),s(7," \u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438 \u0441\u0430\u0439\u0442\u0430 "),r(),s(8),r(),i(9,"div",8)(10,"select",9),C("ngModelChange",function(p){return v(t.selectedSiteName,p)||(t.selectedSiteName=p),p}),h("ngModelChange",function(){return t.onSiteNameFilterChange()}),i(11,"option",10),s(12,"\u0412\u0441\u0435 \u0441\u0430\u0439\u0442\u044B"),r(),f(13,eo,2,2,"option",11),r()()(),y(),i(14,"svg",12),_(15,"path",13),r()(),f(16,to,2,0,"div",14)(17,io,2,1,"div",15)(18,bo,45,13,"div",16)(19,wo,2,0,"div",17),P(20,"filterBySiteName"),r()()),n&2&&(l(8),b(" ",t.baseUrl," "),l(2),x("ngModel",t.selectedSiteName),l(),d("ngValue",null),l(2),d("ngForOf",t.uniqueSiteNames),l(3),d("ngIf",t.isLoading),l(),d("ngIf",t.error),l(),d("ngIf",!t.isLoading&&t.users.length),l(),d("ngIf",!t.isLoading&&j(20,8,t.sortedUsers,t.selectedSiteName).length===0))},dependencies:[ne,H,A,de,Te,Z,ee,re,q,Q,Gt]})}return a})();var Fi=(()=>{class a{static \u0275fac=function(n){return new(n||a)};static \u0275cmp=B({type:a,selectors:[["app-tutorials"]],decls:139,vars:0,consts:[[1,"admin-page","ml-side","section"],[1,"container","mx-auto","pt-[10px]"],[1,"bg-main-trans2-gradient-90","header-tab","flex","items-center","justify-between","py-[10px]","mb-0","rounded-[20px]","w-full","pr-4","pl-4"],[1,"title-tab","text-2xl","font-bold","text-indigo-600"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 24 24"],["fill","none","stroke","#4f45e5","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["stroke-dasharray","64","stroke-dashoffset","64","d","M12 3c4.97 0 9 4.03 9 9c0 4.97 -4.03 9 -9 9c-4.97 0 -9 -4.03 -9 -9c0 -4.97 4.03 -9 9 -9Z"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.6s","values","64;0"],["stroke-dasharray","16","stroke-dashoffset","16","d","M9 10c0 -1.66 1.34 -3 3 -3c1.66 0 3 1.34 3 3c0 0.98 -0.47 1.85 -1.2 2.4c-0.73 0.55 -1.3 0.6 -1.8 1.6"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.6s","dur","0.2s","values","16;0"],["stroke-dasharray","2","stroke-dashoffset","2","d","M12 17v0.01"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.8s","dur","0.2s","values","2;0"],[1,"list-items","grid","grid-cols-1","gap-4","sm:grid-cols-2","lg:grid-cols-3","py-8","px-4"],["href","https://drive.google.com/file/d/1kw0H49K6No9gIqc2G1BeKFfvMVSuowFr/view?usp=sharing","target","_blank"],[1,"overflow-hidden","rounded-lg","transition","shadow-xl","hover-shadow","cursor-pointer"],["alt","","src","https://i.ibb.co/8g3V1bxq/2.png",1,"h-56","w-full","object-cover"],[1,"bg-white","p-4","sm:p-6","relative"],[1,"new"],["datetime","2022-10-10",1,"block","text-xs","text-indigo-500"],[1,"mt-0.5","text-lg","text-gray-900"],[1,"mt-2","line-clamp-3","text-sm/relaxed","text-indigo-500"],["href","https://drive.google.com/file/d/1tnGQMhr1ReOj-uAjYa7GOGCgvtWEHnvJ/view?usp=sharing","target","_blank"],["alt","","src","https://i.ibb.co/mr5g5zJg/2025-06-12-12-21-21.png",1,"h-56","w-full","object-cover"],[1,"items"],["href","https://drive.google.com/file/d/1vD-Le6VMdGPDUY2y1WHrPiMW9XJqMuIR/view?usp=sharing","target","_blank"],[1,"overflow-hidden","rounded-lg","transition","shadow-xl","hover-shadow"],["alt","","src","https://i.ibb.co/B2SRJVsV/1.png",1,"h-56","w-full","object-cover"],[1,"bg-white","p-4","sm:p-6"],[1,"opacity-50","cursor-not-allowed"],["alt","","src","https://i.ibb.co/YT3vbtg5/1.png",1,"h-56","w-full","object-cover"],["href","https://drive.google.com/file/d/1r1TO4ok5JKWU9SPx0xG9Y4SWDtsu3aHr/view?usp=sharing","target","_blank"],["href","https://drive.google.com/file/d/1J1-PRBqPhlFC_WTgl3IfVFuzonfOm1_e/view?usp=sharing","target","_blank"],["alt","","src","https://i.ibb.co/9mx6hcBH/4.png",1,"h-56","w-full","object-cover"],[1,"mt-0.5","text-lg"],["href","https://drive.google.com/file/d/1aeV3nUQULJ2mHDRmTg_Vxrq5qS5lolKq/view?usp=sharing","target","_blank","rel","noopener noreferrer"],["alt","","src","https://i.ibb.co/dwf13rhJ/5.png",1,"h-56","w-full","object-cover"]],template:function(n,t){n&1&&(_(0,"app-sidebar"),i(1,"section",0)(2,"div",1)(3,"div",2)(4,"h2",3),s(5," Video tutorials "),r(),y(),i(6,"svg",4)(7,"g",5)(8,"path",6),_(9,"animate",7),r(),i(10,"path",8),_(11,"animate",9),r(),i(12,"path",10),_(13,"animate",11),r()()()(),M(),i(14,"ul",12)(15,"li")(16,"a",13)(17,"article",14),_(18,"img",15),i(19,"div",16)(20,"span",17),s(21,"new"),r(),i(22,"time",18),s(23," 12th August 2025 "),r(),i(24,"h3",19),s(25," \u0412\u043A\u043B\u0430\u0434\u043A\u0430 #7 \u041E\u043F\u0440\u043E\u0441 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439 "),r(),i(26,"p",20),s(27," - 3 \u0412\u0430\u0440\u0438\u0430\u043D\u0442\u0430 \u043E\u043F\u0440\u043E\u0441\u0430 "),_(28,"br"),s(29," 1 \u041A\u0432\u0438\u0437 \u0441 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u043C \u043E\u0442\u0432\u0435\u0442\u043E\u043C "),_(30,"br"),s(31," 2 \u0410\u043D\u043E\u043D\u0438\u043C\u043D\u044B\u0439 \u043E\u043F\u0440\u043E\u0441 "),_(32,"br"),s(33," 3 \u041E\u043F\u0440\u043E\u0441 \u043E\u0431\u044B\u0447\u043D\u044B\u0439 "),r()()()()(),i(34,"li")(35,"a",21)(36,"article",14),_(37,"img",22),i(38,"div",16)(39,"span",17),s(40,"new"),r(),i(41,"time",18),s(42," 12th June 2025 "),r(),i(43,"h3",19),s(44," \u0412\u043A\u043B\u0430\u0434\u043A\u0430 #6 Sites Event "),r(),i(45,"p",20),s(46," - \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0441\u0430\u0439\u0442\u043E\u0432 \u0441\u043E\u0431\u044B\u0442\u0438\u0439 "),_(47,"br"),s(48," - \u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0438 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0441\u0430\u0439\u0442\u0430 "),_(49,"br"),s(50," - \u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0441\u043E\u0431\u044B\u0442\u0438\u044F, \u0442\u0438\u043F \u0441\u043E\u0431\u044B\u0442\u0438\u044F, \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442, \u0434\u0430\u0442\u0430, \u043F\u0440\u0438\u0437\u044B"),_(51,"br"),r()()()()(),i(52,"li",23)(53,"a",24)(54,"article",25),_(55,"img",26),i(56,"div",27)(57,"span",17),s(58,"new"),r(),i(59,"time",18),s(60," 16th June 2025 "),r(),i(61,"h3",19),s(62," \u0412\u043A\u043B\u0430\u0434\u043A\u0430 #3 Send e-mail "),r(),i(63,"p",20),s(64," - \u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C e-mail \u043D\u0430 \u043F\u0440\u043E\u0438\u0437\u0432\u043E\u043B\u044C\u043D\u044B\u0439 \u0430\u0434\u0440\u0435\u0441\u0441"),_(65,"br"),s(66," - \u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C e-mail \u0422\u0413 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F\u043C"),_(67,"br"),s(68," - \u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C e-mail \u0433\u0440\u0443\u043F\u043F\u0435 \u0438\u0437 \u0441\u0430\u0439\u0442\u0430"),_(69,"br"),s(70," - \u0412\u044B\u0431\u043E\u0440 \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432 \u043F\u0438\u0441\u0435\u043C"),_(71,"br"),s(72," - \u0420\u0435\u0434\u0430\u043A\u0442\u043E\u0440 \u0449\u0430\u0431\u043B\u043E\u043D\u043E\u0432 \u043F\u0438\u0441\u0435\u043C"),_(73,"br"),r()()()()(),i(74,"li",28)(75,"article",25),_(76,"img",29),i(77,"div",27)(78,"time",18),s(79," 22th May 2025 "),r(),i(80,"h3",19),s(81,"\u0412\u043A\u043B\u0430\u0434\u043A\u0430 #1 Edit"),r(),i(82,"p",20),s(83," - \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0422\u0413 \u043F\u043E\u0441\u0442\u043E\u0432 \u0438 \u043A\u043D\u043E\u043F\u043E\u043A "),_(84,"br"),s(85," - \u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0438 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043D\u043E\u0432\u043E\u0441\u0442\u0435\u0439 "),_(86,"br"),s(87," - \u0414\u043E\u0441\u0442\u043F\u0443\u043D\u043E \u0444\u043E\u0440\u043C\u0430\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0442\u0435\u043A\u0441\u0442\u0430"),_(88,"br"),r()()()(),i(89,"li")(90,"a",30)(91,"article",14),_(92,"img",15),i(93,"div",27)(94,"time",18),s(95," 22th May 2025 "),r(),i(96,"h3",19),s(97," \u0412\u043A\u043B\u0430\u0434\u043A\u0430 #2 TG send notification "),r(),i(98,"p",20),s(99," - \u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u0442\u0435\u043B\u0435\u0433\u0440\u0430\u043C \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435 \u044E\u0437\u0430\u0440\u0430\u043C "),_(100,"br"),s(101," - \u0412\u044B\u0431\u043E\u0440\u0430 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438"),_(102,"br"),s(103," - \u0414\u043E\u0441\u0442\u043F\u0443\u043D\u043E \u0444\u043E\u0440\u043C\u0430\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0442\u0435\u043A\u0441\u0442\u0430"),_(104,"br"),r()()()()(),i(105,"li")(106,"a",31)(107,"article",14),_(108,"img",32),i(109,"div",27)(110,"time",18),s(111," 22th May 2025 "),r(),i(112,"h3",33),s(113,"\u0412\u043A\u043B\u0430\u0434\u043A\u0430 #4 TG Users | Site users"),r(),i(114,"p",20),s(115," - \u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438 \u0422\u0413 \u0431\u043E\u0442\u0430"),_(116,"br"),s(117," - \u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438 \u0441\u0430\u0442\u043E\u0432 \u0434\u043E\u043C\u0435\u043D\u0430"),_(118,"br"),s(119," - \u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0441\u043E\u043C\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0445 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439"),_(120,"br"),r()()()()(),i(121,"li")(122,"a",34)(123,"article",14),_(124,"img",35),i(125,"div",27)(126,"time",18),s(127," 22th May 2025 "),r(),i(128,"h3",33),s(129,"\u0412\u043A\u043B\u0430\u0434\u043A\u0430 #5 Images"),r(),i(130,"p",20),s(131," - \u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F "),_(132,"br"),s(133," - \u0413\u0430\u043B\u0435\u0440\u0435\u044F \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u044B\u0445 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0439 "),_(134,"br"),s(135," - \u041A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0441\u0441\u044B\u043B\u043A\u0438 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F "),_(136,"br"),s(137," - \u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043B\u0438\u0448\u043D\u0438\u0439 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0439 "),_(138,"br"),r()()()()()()()())},dependencies:[de]})}return a})();var Vi=["Football","Basketball","Boxing","Horse Racing","Tennis","Ice Hockey","Volleyball","Virtual Sport","Baseball"];var Pi={Basketball:{imageBgDesk:`${I.auth.imageUrl}/images/image-1752486968349-962169144.jpg`,imageBgMob:`${I.auth.imageUrl}/images/image-1752486986877-986415740.jpg`},Volleyball:{imageBgDesk:`${I.auth.imageUrl}/images/image-1752486909941-339741107.jpg`,imageBgMob:`${I.auth.imageUrl}/images/image-1752486923642-810076218.jpg`},"Virtual Sport":{imageBgDesk:`${I.auth.imageUrl}/images/image-1752487042224-108265948.jpg`,imageBgMob:`${I.auth.imageUrl}/images/image-1752486977894-55142984.jpg'`},"Ice Hockey":{imageBgDesk:`${I.auth.imageUrl}/images/image-1752487029450-604109994.jpg`,imageBgMob:`${I.auth.imageUrl}/images/image-1752487035350-689487540.jpg`},Boxing:{imageBgDesk:`${I.auth.imageUrl}/images/image-1752486997859-743414256.jpg`,imageBgMob:`${I.auth.imageUrl}/images/image-1752486991296-459445824.jpg`},Tennis:{imageBgDesk:`${I.auth.imageUrl}/images/image-1752486899463-78497651.jpg`,imageBgMob:`${I.auth.imageUrl}/images/image-1752486904894-686278754.jpg`},"Horse Racing":{imageBgDesk:`${I.auth.imageUrl}/images/image-1752487019447-279554761.jpg`,imageBgMob:`${I.auth.imageUrl}/images/image-1752486935871-735081635.jpg`},Football:{imageBgDesk:`${I.auth.imageUrl}/images/image-1750717647828-246428478.jpg`,imageBgMob:`${I.auth.imageUrl}/images/image-1750717627254-753162484.jpg`},Baseball:{imageBgDesk:`${I.auth.imageUrl}/images/image-1752487005556-400888572.jpg`,imageBgMob:`${I.auth.imageUrl}/images/image-1752487012576-520834519.jpg`}};var Ai=(a="")=>({name:"",type:"",endAt:"",memberA:"",memberB:"",imageMemberA:null,imageMemberB:null,imageBgDesk:null,imageBgMob:null,grandPrize:null,everyoneForPrize:null,landing_url:a,status:"active",result:null});var zi=(()=>{class a{http;apiUrl=I.auth.apiUrlEvents;secret=I.auth.secret;constructor(e){this.http=e}getHeaders(){return new Ve({"X-Admin-Secret":this.secret,"Content-Type":"application/json"})}getAdminEvents(){return this.http.get(this.apiUrl,{headers:this.getHeaders()}).pipe(O(this.handleError))}getAdminEventById(e){return this.http.get(`${this.apiUrl}/by-id/${e}`,{headers:this.getHeaders()}).pipe(O(this.handleError))}updateEvents(e,n){return console.log("Sending update request to:",`${this.apiUrl}/${e}`,"Data:",n),this.http.patch(`${this.apiUrl}/${e}`,n,{headers:this.getHeaders()}).pipe(Je(t=>console.log("Update response:",t)),R(t=>t.event),O(t=>(console.error("Update request failed:",t),this.handleError(t))))}createEvent(e){return console.log("Sending create request to:",this.apiUrl,"Data:",e),this.http.post(this.apiUrl,e,{headers:this.getHeaders()}).pipe(Je(n=>console.log("Create response:",n)),R(n=>n.event),O(this.handleError))}updateEventById(e,n){return this.http.patch(`${this.apiUrl}/by-id/${e}`,n,{headers:this.getHeaders()}).pipe(R(t=>t.event),O(this.handleError))}handleError(e){let n="\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430";return e.status===401?n="\u041D\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F\u0430: \u043D\u0435\u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u044B\u0439 \u043A\u043B\u044E\u0447 \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0430":e.status===400?n=`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0437\u0430\u043F\u0440\u043E\u0441: ${e.error?.error?.message||e.message}`:e.status===404?n="\u0421\u043E\u0431\u044B\u0442\u0438\u0435 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E":e.error instanceof ErrorEvent?n=`\u041E\u0448\u0438\u0431\u043A\u0430: ${e.error.message}`:n=`\u0421\u0435\u0440\u0432\u0435\u0440 \u0432\u0435\u0440\u043D\u0443\u043B \u043A\u043E\u0434 ${e.status}: ${e.message}`,console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0432 EventsSitesService:",n,"Full error:",e),we(()=>new Error(n))}static \u0275fac=function(n){return new(n||a)(N($))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var Li=(()=>{class a{http;apiUrl=I.auth.apiUrlEventLandings;secret=I.auth.secret;constructor(e){this.http=e}getHeaders(){return new Ve({"X-Admin-Secret":this.secret,"Content-Type":"application/json"})}getLandings(){return this.http.get(this.apiUrl,{headers:this.getHeaders()}).pipe(O(this.handleError))}getLandingById(e){return this.http.get(`${this.apiUrl}/${e}`,{headers:this.getHeaders()}).pipe(O(this.handleError))}createLanding(e){return this.http.post(this.apiUrl,e,{headers:this.getHeaders()}).pipe(O(this.handleError))}updateLanding(e,n){return this.http.patch(`${this.apiUrl}/${e}`,n,{headers:this.getHeaders()}).pipe(O(this.handleError))}deleteLanding(e){return this.http.delete(`${this.apiUrl}/${e}`,{headers:this.getHeaders()}).pipe(O(this.handleError))}handleError(e){let n="\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430";return e.status===401?n="\u041D\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F\u0430: \u043D\u0435\u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u044B\u0439 \u043A\u043B\u044E\u0447 \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0430":e.status===400?n=`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0437\u0430\u043F\u0440\u043E\u0441: ${e.error?.message||e.message}`:e.status===404?n="\u041B\u0435\u043D\u0434\u0438\u043D\u0433 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D":e.error instanceof ErrorEvent?n=`\u041E\u0448\u0438\u0431\u043A\u0430: ${e.error.message}`:n=`\u0421\u0435\u0440\u0432\u0435\u0440 \u0432\u0435\u0440\u043D\u0443\u043B \u043A\u043E\u0434 ${e.status}: ${e.message}`,console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0432 LandingsService:",n),we(()=>new Error(n))}static \u0275fac=function(n){return new(n||a)(N($))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var Ge=(()=>{class a{cachedUsers={};cachedFiltered={};normalizeUrl(e){return e?e.trim().replace(/\/+$/,"").toLowerCase():""}getUsersForEvent(e,n,t){let o=this.normalizeUrl(n),p=t!=null?`${o}_${t}`:o;return this.cachedUsers[p]||(this.cachedUsers[p]=e.filter(E=>{let F=!1;try{let me=new URL(n||"").pathname.replace(/\/$/,""),K=new URL(E.site_url||"").pathname.replace(/\/$/,"");F=me===K}catch{F=!1}let z=!!E.user_submit_data?.selected_option,X=!0;if(t!=null&&z){let me=E.user_submit_data,K=me?.event,te;K&&typeof K=="object"&&(te=K.id??K.eventId),te===void 0&&(te=me?.eventId),X=te!==void 0?te===t:!1}return F&&z&&X})),this.cachedUsers[p]}getFilteredUsersForEvent(e,n,t,o,p="all"){let F=`${this.normalizeUrl(n)}_${t}_${o}_${p}`;if(!this.cachedFiltered[F]){let z=this.getUsersForEvent(e,n,t);p==="all"||o===null?this.cachedFiltered[F]=z:this.cachedFiltered[F]=z.filter(X=>{let K=Number(X.user_submit_data.selected_option)===o;return p==="win"?K:!K})}return this.cachedFiltered[F]}getUsersForLandingOnly(e,n){let o=`landing_${this.normalizeUrl(n)}`;return this.cachedUsers[o]||(this.cachedUsers[o]=e.filter(p=>{let E=!1;try{let z=new URL(n||"").pathname.replace(/\/$/,""),X=new URL(p.site_url||"").pathname.replace(/\/$/,"");E=z===X}catch{E=!1}let F=!!p.user_submit_data?.selected_option;return E&&F})),this.cachedUsers[o]}clearCache(){this.cachedUsers={},this.cachedFiltered={}}static \u0275fac=function(n){return new(n||a)};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var Wi=(()=>{class a{usersEmailsService;eventUsersFilter;isSending=!1;emailMessages=[];constructor(e,n){this.usersEmailsService=e,this.eventUsersFilter=n}sendPush(e,n,t,o,p,E,F=""){return be(this,null,function*(){if(this.isSending)return;this.isSending=!0,this.emailMessages=[];let z=F.trim()||`\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442 \u0441\u043E\u0431\u044B\u0442\u0438\u044F "${e.name}"`,X=this.eventUsersFilter.getFilteredUsersForEvent(n,e.landing_url||"",e.id,e.result??null,"win").map(te=>te.email).filter((te,Ce,Xe)=>Xe.indexOf(te)===Ce),me=this.eventUsersFilter.getFilteredUsersForEvent(n,e.landing_url||"",e.id,e.result??null,"lose").map(te=>te.email).filter((te,Ce,Xe)=>Xe.indexOf(te)===Ce),K=(te,Ce)=>be(this,null,function*(){return te.length===0?{message:"\u041D\u0435\u0442 \u043F\u043E\u043B\u0443\u0447\u0430\u0442\u0435\u043B\u0435\u0439",sentEmails:[]}:yield this.usersEmailsService.sendBulkEmails(te,z,Ce,!0).toPromise()});try{let[te,Ce]=yield Promise.all([K(X,p),K(me,E)]);this.emailMessages=[...this.processResponse(te,X,p),...this.processResponse(Ce,me,E)]}catch{let Ce=(Xe,mn)=>Xe.map(pn=>({email:pn,subject:z,content:mn,status:"failed",isSent:!1,sentAt:new Date().toISOString()}));this.emailMessages=[...Ce(X,p),...Ce(me,E)]}finally{this.isSending=!1}})}processResponse(e,n,t){return e?.sentEmails?.length?e.sentEmails.map(o=>({email:o,subject:"",content:t,status:"sent",isSent:!0,sentAt:new Date().toISOString()})):n.map(o=>({email:o,subject:"",content:t,status:"failed",isSent:!1,sentAt:new Date().toISOString()}))}clearMessages(){this.emailMessages=[]}static \u0275fac=function(n){return new(n||a)(N(ht),N(Ge))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var Mo=["*"];function To(a,m){if(a&1&&(i(0,"div",5)(1,"label",6)(2,"span",7),y(),i(3,"svg",8),_(4,"path",9),r(),s(5),r(),s(6," \u2757\uFE0F\u041D\u0435\u0442 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439 \u0434\u043B\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 email\u2757\uFE0F "),r()()),a&2){let e=u(3);l(5),b(" (",e.usersCount,")")}}function ko(a,m){a&1&&nt(0,0,["*ngIf","usersCount == 0"],To,7,1)}function Bo(a,m){if(a&1&&(i(0,"option",32),s(1),r()),a&2){let e=m.$implicit;d("value",e.id),l(),b(" ",e.name," ")}}function Io(a,m){if(a&1&&(i(0,"option",32),s(1),r()),a&2){let e=m.$implicit;d("value",e.id),l(),b(" ",e.name," ")}}function Do(a,m){if(a&1&&(i(0,"tr",33)(1,"td",27),s(2),r(),i(3,"td",34),s(4),r(),i(5,"td",35),s(6),r(),i(7,"td",27),s(8),r(),i(9,"td",27),s(10),r(),i(11,"td",27),s(12),P(13,"date"),r()()),a&2){let e=m.$implicit,n=m.index;l(2),w(n+1),l(2),b(" ",e.user_name||"N/A"," "),l(2),b(" ",e.email," "),l(2),b(" ",(e==null||e.user_submit_data==null?null:e.user_submit_data.selected_option)||"N/A"," "),l(2),b(" ",e.site_url," "),l(2),b(" ",j(13,6,e.updated_at,"dd.MM.yyyy")," ")}}function Fo(a,m){if(a&1){let e=S();se(0),i(1,"div",5)(2,"label",6)(3,"span",7),y(),i(4,"svg",8),_(5,"path",9),r(),s(6),r(),s(7," \u2757\uFE0F\u0414\u043B\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 email \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0448\u0430\u0431\u043B\u043E\u043D\u044B\u2757\uFE0F "),r()(),M(),i(8,"div",10)(9,"div",11)(10,"div",12)(11,"label",13),s(12," \u0428\u0430\u0431\u043B\u043E\u043D \u0434\u043B\u044F \u043F\u043E\u0431\u0435\u0434\u0438\u0442\u0435\u043B\u0435\u0439 "),i(13,"span",14),s(14,"Win"),r()(),i(15,"select",15),h("ngModelChange",function(t){c(e);let o=u(2);return g(o.onTemplateChange("win",t))}),i(16,"option",16),s(17,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0448\u0430\u0431\u043B\u043E\u043D"),r(),f(18,Bo,2,2,"option",17),r()(),i(19,"div",12)(20,"label",13),s(21," \u0428\u0430\u0431\u043B\u043E\u043D \u0434\u043B\u044F \u043F\u0440\u043E\u0438\u0433\u0440\u0430\u0432\u0448\u0438\u0445 "),i(22,"span",18),s(23,"Lose"),r()(),i(24,"select",15),h("ngModelChange",function(t){c(e);let o=u(2);return g(o.onTemplateChange("lose",t))}),i(25,"option",16),s(26,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0448\u0430\u0431\u043B\u043E\u043D"),r(),f(27,Io,2,2,"option",17),r()(),i(28,"div",12)(29,"label",13),s(30," \u0422\u0435\u043C\u0430 \u043F\u0438\u0441\u044C\u043C\u0430 "),i(31,"span",19),s(32,"\u2709\uFE0F"),r()(),i(33,"input",20),C("ngModelChange",function(t){c(e);let o=u(2);return v(o.selectedSubject,t)||(o.selectedSubject=t),g(t)}),r()(),i(34,"div",21)(35,"h3",22),s(36),r(),i(37,"div",23)(38,"table",24)(39,"thead",25)(40,"tr",26)(41,"th",27),s(42,"#"),r(),i(43,"th",27),s(44,"Name"),r(),i(45,"th",27),s(46,"Email"),r(),i(47,"th",27),s(48,"Result"),r(),i(49,"th",27),s(50,"Site"),r(),i(51,"th",27),s(52,"Date"),r()()(),i(53,"tbody",28),f(54,Do,14,9,"tr",29),r()()()(),i(55,"div",30)(56,"button",31),h("click",function(){c(e);let t=u(2);return g(t.sendPush())}),s(57),_(58,"span"),r()()()(),ue()}if(a&2){let e=u(2);l(6),b(" (",e.usersCount,")"),l(9),d("ngModel",e.selectedWinTemplateId)("disabled",e.isSending),l(3),d("ngForOf",e.templates),l(6),d("ngModel",e.selectedLoseTemplateId)("disabled",e.isSending),l(3),d("ngForOf",e.templates),l(6),x("ngModel",e.selectedSubject),d("disabled",e.isSending),l(3),b(" \u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438 (",e.usersCount,"): "),l(18),d("ngForOf",e.getFilteredUsersForEvent()),l(2),d("disabled",e.isSending||e.event.result===null||!e.selectedWinTemplateId||!e.selectedLoseTemplateId),l(),b(" ",e.isSending?"\u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430...":"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C"," ")}}function Vo(a,m){if(a&1&&(i(0,"div",2),_(1,"input",3),f(2,ko,2,0,"ng-content",4)(3,Fo,59,13,"ng-container",4),r()),a&2){let e=u();l(),rt("name","my-accordion-",e.event.id,""),l(),d("ngIf",e.usersCount==0),l(),d("ngIf",e.usersCount)}}function Po(a,m){if(a&1){let e=S();i(0,"div",39)(1,"div",40),y(),i(2,"svg",41),_(3,"path",42),r(),M(),i(4,"span"),s(5),r()(),y(),i(6,"svg",43),h("click",function(){c(e);let t=u(2);return g(t.sendSuccess=!1)}),_(7,"path",44),r()()}if(a&2){let e=u(2);l(5),w(e.sendReport)}}function Ao(a,m){if(a&1){let e=S();i(0,"div",45)(1,"div",40),y(),i(2,"svg",41),_(3,"path",46),r(),M(),i(4,"span"),s(5),r()(),y(),i(6,"svg",43),h("click",function(){c(e);let t=u(2);return g(t.sendError=!1)}),_(7,"path",44),r()()}if(a&2){let e=u(2);l(5),w(e.sendReport)}}function zo(a,m){if(a&1&&(i(0,"div",36),f(1,Po,8,1,"div",37)(2,Ao,8,1,"div",38),r()),a&2){let e=u();l(),d("ngIf",e.sendSuccess),l(),d("ngIf",e.sendError)}}var Ui=(()=>{class a{emailPushService;eventUsersFilter;cdr;event;templates=[];siteUsers=[];sendSuccess=!1;sendError=!1;sendReport="";selectedWinTemplateId=null;selectedLoseTemplateId=null;selectedSubject="";isSending=!1;constructor(e,n,t){this.emailPushService=e,this.eventUsersFilter=n,this.cdr=t}ngOnInit(){this.initDefaultTemplates()}ngOnChanges(e){this.initDefaultTemplates(),(e.siteUsers||e.event||e.templates)&&this.cdr.markForCheck()}get usersCount(){return this.eventUsersFilter.getUsersForEvent(this.siteUsers,this.event.landing_url||"",this.event.id).length}initDefaultTemplates(){this.templates.length>0&&(this.selectedWinTemplateId===null&&(this.selectedWinTemplateId=this.templates[0].id),this.selectedLoseTemplateId===null&&(this.selectedLoseTemplateId=this.templates[0].id))}getFilteredUsersForEvent(e="all"){let n=this.eventUsersFilter.getUsersForEvent(this.siteUsers,this.event.landing_url||"",this.event.id);return e==="all"||this.event.result===null?n:n.filter(t=>{let p=Number(t.user_submit_data.selected_option)===this.event.result;return e==="win"?p:!p})}onTemplateChange(e,n){let t=Number(n);e==="win"?this.selectedWinTemplateId=isNaN(t)?null:t:this.selectedLoseTemplateId=isNaN(t)?null:t,console.log(`Template changed for ${e}:`,this.selectedWinTemplateId||this.selectedLoseTemplateId),this.cdr.markForCheck()}sendPush(){return be(this,null,function*(){if(this.isSending||!this.event.result||!this.selectedWinTemplateId||!this.selectedLoseTemplateId)return;let e=this.templates.find(t=>t.id===this.selectedWinTemplateId),n=this.templates.find(t=>t.id===this.selectedLoseTemplateId);if(!e||!n){this.showError("\u0428\u0430\u0431\u043B\u043E\u043D \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D");return}if(!e.instance?.htmlTemplate||!n.instance?.htmlTemplate){this.showError("\u0423 \u0448\u0430\u0431\u043B\u043E\u043D\u0430 \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 HTML");return}this.isSending=!0,this.sendSuccess=!1,this.sendError=!1,this.cdr.markForCheck();try{yield this.emailPushService.sendPush(this.event,this.siteUsers,this.selectedWinTemplateId,this.selectedLoseTemplateId,e.instance.htmlTemplate,n.instance.htmlTemplate,this.selectedSubject);let t=this.usersCount;this.showSuccess(`\u0423\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E ${t} \u043F\u0438\u0441\u0435\u043C!`)}catch(t){this.showError(t?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 email")}finally{this.isSending=!1,this.cdr.markForCheck(),setTimeout(()=>{this.sendSuccess=!1,this.sendError=!1,this.cdr.markForCheck()},1e4)}})}showSuccess(e){this.sendSuccess=!0,this.sendError=!1,this.sendReport=e}showError(e){this.sendSuccess=!1,this.sendError=!0,this.sendReport=e}static \u0275fac=function(n){return new(n||a)(k(Wi),k(Ge),k(ce))};static \u0275cmp=B({type:a,selectors:[["app-event-email-push"]],inputs:{event:"event",templates:"templates",siteUsers:"siteUsers"},features:[ve],ngContentSelectors:Mo,decls:2,vars:2,consts:[["class","collapse hover-shadow-white card bg-base-100 mx-auto cursor-pointer w-[90%] mt-8",4,"ngIf"],["class","toast toast-top toast-center z-50 w-full fixed translate-center-x-1/2 translate-center-y-1/2 h-full",4,"ngIf"],[1,"collapse","hover-shadow-white","card","bg-base-100","mx-auto","cursor-pointer","w-[90%]","mt-8"],["type","radio",1,"peer",3,"name"],[4,"ngIf"],[1,"collapse-title","text-xl","font-medium","peer-checked:bg-gradient"],[1,"text-xl","font-bold","text-center","flex","items-center","justify-center","gap-4"],[1,"flex","items-center","text-indigo-600"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","viewBox","0 0 24 24"],["fill","currentColor","d","M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4s-4 1.79-4 4s1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4"],[1,"collapse-content","peer-checked:bg-white"],[1,"users-groups","flex","flex-col","pt-[10px]"],[1,"form-group","mb-4","flex","items-center","justify-center","gap-8"],[1,"block","text-lg","font-bold","mb-1","w-[33%]","text-right"],[1,"text-success","text-3xl"],[1,"select","select-primary","text-xl","w-fit","mx-auto","rounded-[25px]","flex-1",3,"ngModelChange","ngModel","disabled"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"text-error","text-3xl"],[1,"text-warning","text-3xl"],["type","text","placeholder","\u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440: \u041F\u043E\u0437\u0434\u0440\u0430\u0432\u043B\u044F\u0435\u043C! \u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u0433\u043E\u043B\u043E\u0441\u043E\u0432\u0430\u043D\u0438\u044F \u{1F389}",1,"input","input-primary","text-xl","w-fit","mx-auto","rounded-[25px]","flex-1","px-6",3,"ngModelChange","ngModel","disabled"],[1,"users-all-wrapper","pb-3"],[1,"text-lg","font-bold","text-center","mb-2"],[1,"h-[200px]","overflow-x-auto","mx-auto","w-[96%]","shadow-2xl","rounded-3xl"],[1,"min-w-full","divide-y-2","divide-gray-200"],[1,"sticky","top-0","bg-white","text-left"],[1,"text-sm","text-gray-400"],[1,"px-3","py-2","whitespace-nowrap"],[1,"divide-y","divide-gray-200"],["class","text-gray-500 text-sm",4,"ngFor","ngForOf"],[1,"btn-wrapper","w-full","flex","items-center","justify-center","py-[20px]","gap-4"],[1,"btn","btn-accent","w-[30%]","text-white","text-xl","rounded-[35px]","min-h-[70px]",3,"click","disabled"],[3,"value"],[1,"text-gray-500","text-sm"],[1,"px-3","py-2","whitespace-nowrap","text-gray-800","font-bold"],[1,"px-3","py-2","whitespace-nowrap","text-indigo-400"],[1,"toast","toast-top","toast-center","z-50","w-full","fixed","translate-center-x-1/2","translate-center-y-1/2","h-full"],["class","alert alert-success shadow-lg",4,"ngIf"],["class","alert alert-error shadow-lg",4,"ngIf"],[1,"alert","alert-success","shadow-lg"],[1,"flex","gap-2","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","flex-shrink-0","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","viewBox","0 0 24 24",3,"click"],["fill","currentColor","d","M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12z"],[1,"alert","alert-error","shadow-lg"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"]],template:function(n,t){n&1&&(it(),f(0,Vo,4,4,"div",0)(1,zo,3,2,"div",1)),n&2&&(d("ngIf",t.event.status==="inactive"||t.event.status==="ended"),l(),d("ngIf",t.sendSuccess||t.sendError))},dependencies:[H,A,Z,ee,Y,re,q,Q,le],changeDetection:0})}return a})();function Wo(a,m){if(a&1&&(i(0,"picture",34),_(1,"img",35),r()),a&2){let e=u();Oe("data-tip",e.event.imageMemberA),l(),ze("alt",e.event.memberA),d("src",e.event.imageMemberA,W)}}function Uo(a,m){if(a&1&&(i(0,"span",36),s(1),r()),a&2){let e=u();l(),b(" \u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 URL, \u043F\u0440\u0438\u043C\u0435\u0440: ",e.imageUrl,"/images/example.png ")}}function Oo(a,m){a&1&&(i(0,"picture"),_(1,"img",37),r())}function No(a,m){if(a&1&&(i(0,"div",38),s(1),r()),a&2){let e=u();l(),b(" ",e.event.result===1?e.event.memberA+" \u043F\u043E\u0431\u0435\u0434\u0438\u043B":e.event.result===2?e.event.memberB+" \u043F\u043E\u0431\u0435\u0434\u0438\u043B":"\u041D\u0438\u0447\u044C\u044F"," ")}}function jo(a,m){if(a&1&&(i(0,"picture",34),_(1,"img",35),r()),a&2){let e=u();Oe("data-tip",e.event.imageMemberB),l(),ze("alt",e.event.memberB),d("src",e.event.imageMemberB,W)}}function Ho(a,m){if(a&1&&(i(0,"span",36),s(1),r()),a&2){let e=u();l(),b(" \u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 URL, \u043F\u0440\u0438\u043C\u0435\u0440: ",e.imageUrl,"/images/example.png ")}}function $o(a,m){if(a&1){let e=S();i(0,"div",39)(1,"label",40),s(2," \u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442: "),i(3,"div",41)(4,"select",42),C("ngModelChange",function(t){c(e);let o=u();return v(o.event.result,t)||(o.event.result=t),g(t)}),h("ngModelChange",function(t){c(e);let o=u();return g(o.onResultChange(t))}),i(5,"option",43),s(6,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442"),r(),i(7,"option",43),s(8),r(),i(9,"option",43),s(10),r(),i(11,"option",43),s(12,"Draw (\u041D\u0438\u0447\u044C\u044F)"),r()()()()()}if(a&2){let e=u();l(4),x("ngModel",e.event.result),l(),d("value",null),l(2),d("value",1),l(),w(e.event.memberA),l(),d("value",2),l(),w(e.event.memberB),l(),d("value",3)}}var Oi=(()=>{class a{urlValidationService;event;imageUrl=I.auth.imageUrl;save=new G;cancel=new G;constructor(e){this.urlValidationService=e}refreshImage(){}onResultChange(e){this.event.result=e,this.save.emit(this.event)}saveChanges(){this.save.emit(this.event)}cancelEdit(){this.cancel.emit()}static \u0275fac=function(n){return new(n||a)(k(ye))};static \u0275cmp=B({type:a,selectors:[["app-event-edit"]],inputs:{event:"event"},outputs:{save:"save",cancel:"cancel"},decls:65,vars:22,consts:[[1,"card","bg-base-100","mx-auto","hover-shadow-white","cursor-pointer","w-[90%]","flex","flex-col","gap-8"],[1,"card-primary-inner","flex","flex-col","gap-4","items-center","p-6"],[1,"text-lg","text-gray-600","text-center"],[1,"card-primary-text","flex","flex-col","gap-4","items-center","w-full","pb-4"],[1,"text-lg","font-bold","w-full","text-center","grid","justify-center","items-center","label-grid"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0441\u043E\u0431\u044B\u0442\u0438\u044F",1,"input","w-fit","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-indigo-300","focus:ring-opacity-40","text-indigo-600",3,"ngModelChange","ngModel"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0438\u043F \u0441\u043E\u0431\u044B\u0442\u0438\u044F (\u043D\u0430\u043F\u0440., Ultra Liga)",1,"input","w-fit","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-indigo-300","focus:ring-opacity-40","text-indigo-600",3,"ngModelChange","ngModel"],[1,"flex","flex-col"],[1,"text-gray-400","text-xs"],["type","datetime-local",1,"input","w-fit","border","border-gray-400","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-indigo-300","focus:ring-opacity-40","text-indigo-600",3,"ngModelChange","ngModel"],[1,"select","select-primary","text-xl","w-fit","rounded-[25px]",3,"ngModelChange","ngModel"],["value","active"],["value","inactive"],[1,"card-primary-image","flex","items-center","w-full","pb-8"],[1,"mebmer","flex","flex-col","items-center","w-[40%]"],["class","tooltip tooltip-bottom tooltip-primary",4,"ngIf"],[1,"text-sm","font-bold","w-full","text-center","flex","flex-col","justify-center","items-center","gap-2","mb-2"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 URL \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",1,"input","w-fit","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-indigo-300","focus:ring-opacity-40","text-indigo-600",3,"ngModelChange","blur","ngModel"],["class","text-red-500 text-sm mt-2 block",4,"ngIf"],[1,"text-sm","font-bold","w-full","text-center","flex","flex-col","justify-center","items-center"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043C\u0430\u043D\u0434\u044B/\u0438\u0433\u0440\u043E\u043A\u0430",1,"input","w-fit","border","border-gray-300","rounded-lg","px-4","focus:ring","focus:ring-indigo-300","focus:ring-opacity-40","text-indigo-600",3,"ngModelChange","ngModel"],[1,"result","flex","flex-col","items-center","w-[20%]"],[4,"ngIf"],["class","text-5xl font-bold w-full text-center flex flex-col justify-center items-center",4,"ngIf"],[1,"card-primary-image","flex","flex-col","gap-4","items-center","w-full"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u0441\u043D\u043E\u0432\u043D\u043E\u0439 \u043F\u0440\u0438\u0437 (\u043D\u0430\u043F\u0440., 100 FREESPINS)",1,"input","w-fit","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-indigo-300","focus:ring-opacity-40","text-indigo-600",3,"ngModelChange","ngModel"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0440\u0438\u0437 \u0434\u043B\u044F \u043A\u0430\u0436\u0434\u043E\u0433\u043E (\u043D\u0430\u043F\u0440., +10 FS)",1,"input","w-fit","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-indigo-300","focus:ring-opacity-40","text-indigo-600",3,"ngModelChange","ngModel"],["class","w-full flex flex-col justify-center items-center gap-4",4,"ngIf"],[1,"card-actions","justify-center","pt-4","gap-4"],[1,"btn","btn-ghost","pr-0","text-success",3,"click"],[1,"btn","btn-accent"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24"],["fill","currentColor","d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"],[1,"btn","btn-ghost","text-error","hover:bg-error","hover:text-white",3,"click"],[1,"tooltip","tooltip-bottom","tooltip-primary"],[1,"team-image","mt-2",3,"src","alt"],[1,"text-red-500","text-sm","mt-2","block"],["src","https://vietget.online/lp200/img/card-primary/VS.svg","alt","VS",1,"vs-img","bg-base-300","rounded-xl","p-[10px]"],[1,"text-5xl","font-bold","w-full","text-center","flex","flex-col","justify-center","items-center"],[1,"w-full","flex","flex-col","justify-center","items-center","gap-4"],[1,"text-3xl","font-bold","w-full","text-center","flex","justify-center","items-center","gap-4"],[1,"dropdown","dropdown-bottom","dropdown-center"],[1,"select","select-bordered","w-[200px]","text-xl",3,"ngModelChange","ngModel"],[3,"value"]],template:function(n,t){n&1&&(i(0,"div",0)(1,"div",1)(2,"span",2)(3,"b"),s(4,"Event id: "),r(),s(5),r(),i(6,"div",3)(7,"label",4),s(8," \u0412\u0438\u0434 \u0441\u043F\u043E\u0440\u0442\u0430: "),i(9,"input",5),C("ngModelChange",function(p){return v(t.event.name,p)||(t.event.name=p),p}),r()(),i(10,"label",4),s(11," \u0422\u0438\u043F \u0441\u043E\u0431\u044B\u0442\u0438\u044F: "),i(12,"input",6),C("ngModelChange",function(p){return v(t.event.type,p)||(t.event.type=p),p}),r()(),i(13,"label",4)(14,"span",7),s(15," \u0414\u0430\u0442\u0430: "),i(16,"span",8),s(17),P(18,"date"),r()(),i(19,"input",9),C("ngModelChange",function(p){return v(t.event.endAt,p)||(t.event.endAt=p),p}),r()(),i(20,"label",4),s(21," \u0421\u0442\u0430\u0442\u0443\u0441: "),i(22,"select",10),C("ngModelChange",function(p){return v(t.event.status,p)||(t.event.status=p),p}),i(23,"option",11),s(24,"\u0410\u043A\u0442\u0438\u0432\u043D\u043E"),r(),i(25,"option",12),s(26,"\u041D\u0435\u0430\u043A\u0442\u0438\u0432\u043D\u043E"),r()()()(),i(27,"div",13)(28,"div",14),f(29,Wo,2,3,"picture",15),i(30,"label",16),s(31," URL \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u043A\u043E\u043C\u0430\u043D\u0434\u044B A: "),i(32,"input",17),C("ngModelChange",function(p){return v(t.event.imageMemberA,p)||(t.event.imageMemberA=p),p}),h("blur",function(){return t.refreshImage()}),r(),f(33,Uo,2,1,"span",18),r(),i(34,"label",19),s(35," \u041A\u043E\u043C\u0430\u043D\u0434\u0430/\u0418\u0433\u0440\u043E\u043A 1: "),i(36,"input",20),C("ngModelChange",function(p){return v(t.event.memberA,p)||(t.event.memberA=p),p}),r()()(),i(37,"div",21),f(38,Oo,2,0,"picture",22)(39,No,2,1,"div",23),r(),i(40,"div",14),f(41,jo,2,3,"picture",15),i(42,"label",16),s(43," URL \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u043A\u043E\u043C\u0430\u043D\u0434\u044B B: "),i(44,"input",17),C("ngModelChange",function(p){return v(t.event.imageMemberB,p)||(t.event.imageMemberB=p),p}),h("blur",function(){return t.refreshImage()}),r(),f(45,Ho,2,1,"span",18),r(),i(46,"label",19),s(47," \u041A\u043E\u043C\u0430\u043D\u0434\u0430/\u0418\u0433\u0440\u043E\u043A 2: "),i(48,"input",20),C("ngModelChange",function(p){return v(t.event.memberB,p)||(t.event.memberB=p),p}),r()()()(),i(49,"div",24)(50,"label",4),s(51," \u041E\u0441\u043D\u043E\u0432\u043D\u043E\u0439 \u043F\u0440\u0438\u0437: "),i(52,"input",25),C("ngModelChange",function(p){return v(t.event.grandPrize,p)||(t.event.grandPrize=p),p}),r()(),i(53,"label",4),s(54," \u041F\u0440\u0438\u0437 \u0434\u043B\u044F \u043A\u0430\u0436\u0434\u043E\u0433\u043E: "),i(55,"input",26),C("ngModelChange",function(p){return v(t.event.everyoneForPrize,p)||(t.event.everyoneForPrize=p),p}),r()()(),f(56,$o,13,7,"div",27),i(57,"div",28)(58,"button",29),h("click",function(){return t.saveChanges()}),s(59," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C "),i(60,"span",30),y(),i(61,"svg",31),_(62,"path",32),r()()(),M(),i(63,"button",33),h("click",function(){return t.cancelEdit()}),s(64," \u041E\u0442\u043C\u0435\u043D\u0430 "),r()()()()),n&2&&(l(5),b("",t.event.typeEventId," "),l(4),x("ngModel",t.event.name),l(3),x("ngModel",t.event.type),l(5),w(j(18,19,t.event.endAt,"medium")),l(2),x("ngModel",t.event.endAt),l(3),x("ngModel",t.event.status),l(7),d("ngIf",t.event.imageMemberA),l(3),x("ngModel",t.event.imageMemberA),l(),d("ngIf",t.event.imageMemberA&&!t.urlValidationService.isValidImageUrl(t.event.imageMemberA)),l(3),x("ngModel",t.event.memberA),l(2),d("ngIf",t.event.result===null),l(),d("ngIf",t.event.result!==null),l(2),d("ngIf",t.event.imageMemberB),l(3),x("ngModel",t.event.imageMemberB),l(),d("ngIf",t.event.imageMemberB&&!t.urlValidationService.isValidImageUrl(t.event.imageMemberB)),l(3),x("ngModel",t.event.memberB),l(4),x("ngModel",t.event.grandPrize),l(3),x("ngModel",t.event.everyoneForPrize),l(),d("ngIf",t.event.status==="ended"||t.event.status==="inactive"))},dependencies:[A,Z,ee,Y,re,q,Q,le],changeDetection:0})}return a})();var Ni=(a,m)=>{if(!a||m==="inactive"||m==="ended")return{days:0,hours:0,minutes:0,seconds:0};let e=new Date(a).getTime(),n=Date.now(),t=e-n;return t<=0?{days:0,hours:0,minutes:0,seconds:0}:{days:Math.floor(t/864e5),hours:Math.floor(t%864e5/36e5),minutes:Math.floor(t%36e5/6e4),seconds:Math.floor(t%6e4/1e3)}};var ji=(()=>{class a{cdr;endAt;status;countdown={days:0,hours:0,minutes:0,seconds:0};intervalId;constructor(e){this.cdr=e}ngOnInit(){this.updateCountdown(),this.intervalId=setInterval(()=>{this.updateCountdown()},1e3)}ngOnDestroy(){this.intervalId&&clearInterval(this.intervalId)}updateCountdown(){!this.endAt||!this.status?this.countdown={days:0,hours:0,minutes:0,seconds:0}:this.countdown=Ni(this.endAt,this.status),this.cdr.markForCheck()}static \u0275fac=function(n){return new(n||a)(k(ce))};static \u0275cmp=B({type:a,selectors:[["app-countdown-timer"]],inputs:{endAt:"endAt",status:"status"},decls:16,vars:25,consts:[[1,"countdown","font-mono","text-lg","text-gray-400","items-end"],["aria-live","polite",1,"countdown","font-mono","text-2xl","text-black"],[1,"countdown","font-mono","text-2xl","pl-2"],["aria-live","polite"]],template:function(n,t){n&1&&(i(0,"span",0)(1,"span",1),s(2),r(),s(3," days "),r(),i(4,"span",2)(5,"span",3),s(6),P(7,"number"),r(),s(8,": "),i(9,"span",3),s(10),P(11,"number"),r(),s(12,": "),i(13,"span",3),s(14),P(15,"number"),r()()),n&2&&(l(),Ke("--value: ",t.countdown.days,""),l(),b(" ",t.countdown.days," "),l(3),Ke("--value: ",t.countdown.hours,""),l(),b(" ",j(7,16,t.countdown.hours,"2.0")," "),l(3),Ke("--value: ",t.countdown.minutes,""),l(),b(" ",j(11,19,t.countdown.minutes,"2.0")," "),l(3),Ke("--value: ",t.countdown.seconds,""),l(),b(" ",j(15,22,t.countdown.seconds,"2.0")," "))},dependencies:[Lt],encapsulation:2,changeDetection:0})}return a})();function Ro(a,m){if(a&1&&_(0,"img",21),a&2){let e=u();d("src",e.event.imageMemberA,W)("alt",e.event.memberA)}}function Go(a,m){if(a&1&&(i(0,"p",22),s(1),r()),a&2){let e=u();l(),b(" ",e.event.result===1?e.event.memberA+" \u043F\u043E\u0431\u0435\u0434\u0438\u043B":e.event.result===2?e.event.memberB+" \u043F\u043E\u0431\u0435\u0434\u0438\u043B":"\u041D\u0438\u0447\u044C\u044F"," ")}}function Yo(a,m){a&1&&(i(0,"picture"),_(1,"img",23),r())}function Xo(a,m){if(a&1&&_(0,"img",21),a&2){let e=u();d("src",e.event.imageMemberB,W)("alt",e.event.memberB)}}function Jo(a,m){if(a&1&&(i(0,"div",24),_(1,"app-countdown-timer",25),r()),a&2){let e=u();l(),d("endAt",e.event.endAt)("status",e.event.status)}}function Ko(a,m){a&1&&(i(0,"div",24)(1,"span",26),s(2,"\u0421\u043E\u0431\u044B\u0442\u0438\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043E"),r()())}var Hi=(()=>{class a{event;edit=new G;constructor(){}onEdit(){this.edit.emit()}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=B({type:a,selectors:[["app-event-view"]],inputs:{event:"event"},outputs:{edit:"edit"},decls:40,vars:19,consts:[[1,"card","bg-base-100","mx-auto","hover-shadow-white","cursor-pointer","w-[90%]"],[1,"card-primary-inner","flex","flex-col","gap-6","items-center","p-6"],[1,"text-lg","text-gray-600","text-center"],[1,"card-primary-text","flex","flex-col","gap-2","items-center"],[1,"card-primary-title","text-3xl","font-bold"],[1,"card-primary-text","text-center"],[1,"card-primary-subtext","block","text-center"],[1,"card-primary-image","flex","gap-8","items-center"],[1,"mebmer","flex","flex-col","items-center"],["class","team-image",3,"src","alt",4,"ngIf"],[1,"text-sm"],[1,"result"],["class","text-5xl text-nowrap",4,"ngIf"],[4,"ngIf"],["class","timer",4,"ngIf"],[1,"card-primary-image","flex","flex-col","gap-4","items-center","pb-6"],[1,"flex","flex-col","items-start","btn","btn-ghost","btn-access","w-fit","my-4"],[1,"text-3xl","font-bold"],[1,"text-xl"],[1,"btn","btn-ghost","pr-0",3,"click","disabled"],[1,"btn","btn-primary"],[1,"team-image",3,"src","alt"],[1,"text-5xl","text-nowrap"],["src","https://vietget.online/lp200/img/card-primary/VS.svg","alt","VS",1,"vs-img","bg-base-300","rounded-xl","p-[10px]"],[1,"timer"],[3,"endAt","status"],[1,"text-lg","text-gray-400"]],template:function(n,t){n&1&&(i(0,"div",0)(1,"div",1)(2,"span",2)(3,"b"),s(4,"Event ID: "),r(),s(5),r(),i(6,"div",3)(7,"h5",4),s(8),r(),i(9,"p",5),s(10),i(11,"span",6),s(12),P(13,"date"),r()()(),i(14,"div",7)(15,"div",8)(16,"picture"),f(17,Ro,1,2,"img",9),r(),i(18,"p",10),s(19),r()(),i(20,"div",11),f(21,Go,2,1,"p",12)(22,Yo,2,0,"picture",13),r(),i(23,"div",8)(24,"picture"),f(25,Xo,1,2,"img",9),r(),i(26,"p",10),s(27),r()()(),f(28,Jo,2,2,"div",14)(29,Ko,3,0,"div",14),i(30,"div",15)(31,"div",16)(32,"h2",17),s(33),r()(),i(34,"p",18),s(35),r()(),i(36,"button",19),h("click",function(){return t.onEdit()}),s(37," \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C "),i(38,"span",20),_(39,"app-edit-icon"),r()()()()),n&2&&(l(5),Se("",t.event.id," (",t.event.typeEventId,") "),l(3),b(" ",t.event.name," "),l(2),b(" ",t.event.type," "),l(2),b(" ",j(13,16,t.event.endAt,"dd/MM/yyyy HH:mm")," "),l(5),d("ngIf",t.event.imageMemberA),l(2),w(t.event.memberA),l(2),d("ngIf",t.event.result!==null),l(),d("ngIf",t.event.result===null),l(3),d("ngIf",t.event.imageMemberB),l(2),w(t.event.memberB),l(),d("ngIf",t.event.status==="active"),l(),d("ngIf",t.event.status!=="active"),l(4),w(t.event.grandPrize),l(2),w(t.event.everyoneForPrize),l(),d("disabled",t.event.status!=="active"))},dependencies:[A,Me,ji,le],changeDetection:0})}return a})();function el(a,m){if(a&1&&(i(0,"div",29),_(1,"img",30),r()),a&2){let e=u();l(),d("src",e.newEvent.imageBgDesk,W)}}function tl(a,m){if(a&1&&(i(0,"option",6),s(1),r()),a&2){let e=m.$implicit;d("ngValue",e),l(),b(" ",e," ")}}function il(a,m){if(a&1&&(i(0,"picture",31),_(1,"img",32),r()),a&2){let e=u();Oe("data-tip",e.newEvent.imageMemberA),l(),d("src",e.newEvent.imageMemberA,W)("alt",e.newEvent.memberA||"\u041A\u043E\u043C\u0430\u043D\u0434\u0430 A")}}function nl(a,m){if(a&1&&(i(0,"span",33),s(1),r()),a&2){let e=u();l(),b(" \u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 URL, \u043F\u0440\u0438\u043C\u0435\u0440: ",e.imageUrl,"/images/example.png ")}}function rl(a,m){if(a&1&&(i(0,"picture",31),_(1,"img",32),r()),a&2){let e=u();Oe("data-tip",e.newEvent.imageMemberB),l(),d("src",e.newEvent.imageMemberB,W)("alt",e.newEvent.memberB||"\u041A\u043E\u043C\u0430\u043D\u0434\u0430 B")}}function al(a,m){if(a&1&&(i(0,"span",33),s(1),r()),a&2){let e=u();l(),b(" \u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 URL, \u043F\u0440\u0438\u043C\u0435\u0440: ",e.imageUrl,"/images/example.png ")}}var $i=(()=>{class a{urlValidationService;newEvent;sports=[];sportBackgrounds={};landingUrl;hasActiveEvent=!1;imageUrl=I.auth.imageUrl;sportChange=new G;create=new G;cancel=new G;constructor(e){this.urlValidationService=e}onSportChange(){this.sportChange.emit()}refreshImage(){}get isCreateDisabled(){return!this.newEvent.name||!this.sports.includes(this.newEvent.name)||!this.newEvent.type||!this.newEvent.endAt||!this.newEvent.memberA||!this.newEvent.memberB||!this.landingUrl||this.newEvent.imageMemberA&&!this.urlValidationService.isValidImageUrl(this.newEvent.imageMemberA)||this.newEvent.imageMemberB&&!this.urlValidationService.isValidImageUrl(this.newEvent.imageMemberB)||this.hasActiveEvent}onCreate(){this.create.emit()}onCancel(){this.cancel.emit()}static \u0275fac=function(n){return new(n||a)(k(ye))};static \u0275cmp=B({type:a,selectors:[["app-event-create"]],inputs:{newEvent:"newEvent",sports:"sports",sportBackgrounds:"sportBackgrounds",landingUrl:"landingUrl",hasActiveEvent:"hasActiveEvent"},outputs:{sportChange:"sportChange",create:"create",cancel:"cancel"},decls:54,vars:17,consts:[[1,"card","bg-base-100","mx-auto","hover-shadow-white","cursor-pointer","w-[98%]","flex","flex-col","gap-8","py-4","relative","overflow-hidden"],["class","img-bg absolute w-full h-full top-0 left-0 z-[-1] border-radius-[20px] overflow-hidden",4,"ngIf"],[1,"text-2xl","font-bold","text-indigo-600","text-center"],[1,"card-primary-text","flex","flex-col","gap-4","items-center","w-full","pb-4"],[1,"text-lg","font-bold","w-full","text-center","grid","justify-center","items-center","label-grid"],[1,"select","select-primary","text-xl","w-fit","rounded-[25px]",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0438\u043F \u0441\u043E\u0431\u044B\u0442\u0438\u044F (\u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, Ultra Liga)",1,"input","w-fit","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-indigo-300","focus:ring-opacity-40","text-indigo-600",3,"ngModelChange","ngModel"],["type","datetime-local",1,"input","w-fit","border","border-gray-400","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-indigo-300","focus:ring-opacity-40","text-indigo-600",3,"ngModelChange","ngModel"],[1,"card-primary-image","flex","items-center","w-full","pb-8"],[1,"mebmer","flex","flex-col","items-center","w-[40%]"],["class","tooltip tooltip-bottom tooltip-primary",4,"ngIf"],[1,"text-sm","font-bold","w-full","text-center","flex","flex-col","justify-center","items-center","gap-2","mb-2"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 URL \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",1,"input","w-fit","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-indigo-300","focus:ring-opacity-40","text-indigo-600",3,"ngModelChange","ngModel"],["class","text-red-500 text-sm mt-2 block",4,"ngIf"],[1,"text-sm","font-bold","w-full","text-center","flex","flex-col","justify-center","items-center"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043C\u0430\u043D\u0434\u044B/\u0438\u0433\u0440\u043E\u043A\u0430",1,"input","w-fit","border","border-gray-300","rounded-lg","px-4","focus:ring","focus:ring-indigo-300","focus:ring-opacity-40","text-indigo-600",3,"ngModelChange","ngModel"],[1,"result","flex","flex-col","items-center","w-[20%]"],["src","https://vietget.online/lp200/img/card-primary/VS.svg","alt","VS",1,"vs-img","bg-base-300","rounded-xl","p-[10px]"],[1,"card-primary-image","flex","flex-col","gap-4","items-center","w-full"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u0441\u043D\u043E\u0432\u043D\u043E\u0439 \u043F\u0440\u0438\u0437 (\u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, 100 FREESPINS)",1,"input","w-fit","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-indigo-300","focus:ring-opacity-40","text-indigo-600",3,"ngModelChange","ngModel"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0440\u0438\u0437 \u0434\u043B\u044F \u043A\u0430\u0436\u0434\u043E\u0433\u043E (\u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, +10 FS)",1,"input","w-fit","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring","focus:ring-indigo-300","focus:ring-opacity-40","text-indigo-600",3,"ngModelChange","ngModel"],[1,"card-actions","justify-center","pt-4","gap-4"],[1,"btn","btn-ghost","pr-0","text-success",3,"click","disabled"],[1,"btn","btn-accent"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24"],["fill","currentColor","d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"],[1,"btn","btn-ghost","text-error","hover:bg-error","hover:text-white",3,"click"],[1,"img-bg","absolute","w-full","h-full","top-0","left-0","z-[-1]","border-radius-[20px]","overflow-hidden"],["alt","\u0424\u043E\u043D \u0434\u0435\u0441\u043A\u0442\u043E\u043F",1,"mt-2","object-cover","w-full","h-full","opacity-50",3,"src"],[1,"tooltip","tooltip-bottom","tooltip-primary"],[1,"team-image","mt-2",3,"src","alt"],[1,"text-red-500","text-sm","mt-2","block"]],template:function(n,t){n&1&&(i(0,"div",0),f(1,el,2,1,"div",1),i(2,"h3",2),s(3," \u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043D\u043E\u0432\u043E\u0435 \u0441\u043E\u0431\u044B\u0442\u0438\u0435 "),r(),i(4,"div",3)(5,"label",4),s(6," \u0412\u0438\u0434 \u0441\u043F\u043E\u0440\u0442\u0430: "),i(7,"select",5),C("ngModelChange",function(p){return v(t.newEvent.name,p)||(t.newEvent.name=p),p}),h("ngModelChange",function(){return t.onSportChange()}),i(8,"option",6),s(9,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0438\u0434 \u0441\u043F\u043E\u0440\u0442\u0430"),r(),f(10,tl,2,2,"option",7),r()(),i(11,"label",4),s(12," \u0422\u0438\u043F \u0441\u043E\u0431\u044B\u0442\u0438\u044F: "),i(13,"input",8),C("ngModelChange",function(p){return v(t.newEvent.type,p)||(t.newEvent.type=p),p}),r()(),i(14,"label",4),s(15," \u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F \u043E\u043A\u043E\u043D\u0447\u0430\u043D\u0438\u044F: "),i(16,"input",9),C("ngModelChange",function(p){return v(t.newEvent.endAt,p)||(t.newEvent.endAt=p),p}),r()()(),i(17,"div",10)(18,"div",11),f(19,il,2,3,"picture",12),i(20,"label",13),s(21," URL \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u043A\u043E\u043C\u0430\u043D\u0434\u044B A: "),i(22,"input",14),C("ngModelChange",function(p){return v(t.newEvent.imageMemberA,p)||(t.newEvent.imageMemberA=p),p}),h("ngModelChange",function(){return t.refreshImage()}),r(),f(23,nl,2,1,"span",15),r(),i(24,"label",16),s(25," \u041A\u043E\u043C\u0430\u043D\u0434\u0430/\u0418\u0433\u0440\u043E\u043A 1: "),i(26,"input",17),C("ngModelChange",function(p){return v(t.newEvent.memberA,p)||(t.newEvent.memberA=p),p}),r()()(),i(27,"div",18)(28,"picture"),_(29,"img",19),r()(),i(30,"div",11),f(31,rl,2,3,"picture",12),i(32,"label",13),s(33," URL \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u043A\u043E\u043C\u0430\u043D\u0434\u044B B: "),i(34,"input",14),C("ngModelChange",function(p){return v(t.newEvent.imageMemberB,p)||(t.newEvent.imageMemberB=p),p}),h("ngModelChange",function(){return t.refreshImage()}),r(),f(35,al,2,1,"span",15),r(),i(36,"label",16),s(37," \u041A\u043E\u043C\u0430\u043D\u0434\u0430/\u0418\u0433\u0440\u043E\u043A 2: "),i(38,"input",17),C("ngModelChange",function(p){return v(t.newEvent.memberB,p)||(t.newEvent.memberB=p),p}),r()()()(),i(39,"div",20)(40,"label",4),s(41," \u041E\u0441\u043D\u043E\u0432\u043D\u043E\u0439 \u043F\u0440\u0438\u0437: "),i(42,"input",21),C("ngModelChange",function(p){return v(t.newEvent.grandPrize,p)||(t.newEvent.grandPrize=p),p}),r()(),i(43,"label",4),s(44," \u041F\u0440\u0438\u0437 \u0434\u043B\u044F \u043A\u0430\u0436\u0434\u043E\u0433\u043E: "),i(45,"input",22),C("ngModelChange",function(p){return v(t.newEvent.everyoneForPrize,p)||(t.newEvent.everyoneForPrize=p),p}),r()()(),i(46,"div",23)(47,"button",24),h("click",function(){return t.onCreate()}),s(48," \u0421\u043E\u0437\u0434\u0430\u0442\u044C "),i(49,"span",25),y(),i(50,"svg",26),_(51,"path",27),r()()(),M(),i(52,"button",28),h("click",function(){return t.onCancel()}),s(53," \u041E\u0442\u043C\u0435\u043D\u0430 "),r()()()),n&2&&(l(),d("ngIf",t.newEvent.imageBgDesk),l(6),x("ngModel",t.newEvent.name),l(),d("ngValue",""),l(2),d("ngForOf",t.sports),l(3),x("ngModel",t.newEvent.type),l(3),x("ngModel",t.newEvent.endAt),l(3),d("ngIf",t.newEvent.imageMemberA&&t.urlValidationService.isValidImageUrl(t.newEvent.imageMemberA)),l(3),x("ngModel",t.newEvent.imageMemberA),l(),d("ngIf",t.newEvent.imageMemberA&&!t.urlValidationService.isValidImageUrl(t.newEvent.imageMemberA)),l(3),x("ngModel",t.newEvent.memberA),l(5),d("ngIf",t.newEvent.imageMemberB&&t.urlValidationService.isValidImageUrl(t.newEvent.imageMemberB)),l(3),x("ngModel",t.newEvent.imageMemberB),l(),d("ngIf",t.newEvent.imageMemberB&&!t.urlValidationService.isValidImageUrl(t.newEvent.imageMemberB)),l(3),x("ngModel",t.newEvent.memberB),l(4),x("ngModel",t.newEvent.grandPrize),l(3),x("ngModel",t.newEvent.everyoneForPrize),l(2),d("disabled",t.isCreateDisabled))},dependencies:[H,A,Z,ee,Y,re,q,Q],changeDetection:0})}return a})();var ll=a=>({inactive:a}),sl=(a,m)=>({"text-green-500":a,"text-red-500":m});function ul(a,m){if(a&1&&(i(0,"option",7),s(1),r()),a&2){let e=m.$implicit,n=u();d("ngValue",e.url),l(),at(" ",e.url," (",e.status==="0"?"\u041D\u0435\u0430\u043A\u0442\u0438\u0432\u0435\u043D":"\u0410\u043A\u0442\u0438\u0432\u0435\u043D",") ",n.getActiveEventTypeEventId(e.url)?" - "+n.getActiveEventTypeEventId(e.url):""," ")}}function dl(a,m){if(a&1){let e=S();i(0,"div",13)(1,"app-event-create",14),h("sportChange",function(){c(e);let t=u();return g(t.onSportChange())})("create",function(){c(e);let t=u();return g(t.createEvent())})("cancel",function(){c(e);let t=u();return g(t.cancelCreateEvent())}),r()()}if(a&2){let e=u();l(),d("newEvent",e.newEvent)("sports",e.sports)("sportBackgrounds",e.sportBackgrounds)("landingUrl",e.selectedLandingUrl)("hasActiveEvent",e.hasActiveEvent(e.selectedLandingUrl))}}function ml(a,m){if(a&1){let e=S();i(0,"app-event-view",27),h("edit",function(){c(e);let t=u().$implicit,o=u(2);return g(o.toggleEdit(t))}),r()}if(a&2){let e=u().$implicit;d("event",e)}}function pl(a,m){if(a&1){let e=S();i(0,"app-event-edit",28),h("save",function(t){c(e);let o=u(3);return g(o.saveChanges(t))})("cancel",function(){c(e);let t=u().$implicit,o=u(2);return g(o.toggleEdit(t))}),r()}if(a&2){let e=u().$implicit;d("event",e)}}function cl(a,m){if(a&1&&(i(0,"div",17)(1,"div",18)(2,"p",19),s(3," \u{1F310} \u0421\u0430\u0439\u0442 "),i(4,"a",20),s(5),r(),i(6,"span",21),s(7),r()(),i(8,"div",22)(9,"p",23),s(10),P(11,"date"),r()()(),f(12,ml,1,1,"app-event-view",24)(13,pl,1,1,"app-event-edit",25),_(14,"app-event-email-push",26),r()),a&2){let e=m.$implicit,n=u(2);d("ngClass",ie(14,ll,e.status==="inactive")),l(4),ze("href",e.landing_url,W),l(),w(e.landing_url),l(),d("ngClass",Fe(16,sl,e.status==="active",e.status!=="active")),l(),b(" (",e.status==="active"?"\u0410\u043A\u0442\u0438\u0432\u043D\u043E":e.status==="inactive"?"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043E":"\u041D\u0435\u0430\u043A\u0442\u0438\u0432\u043D\u043E",") "),l(3),b(" \u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F: ",j(11,11,e.createdAt,"medium")," "),l(2),d("ngIf",!e.isEditing),l(),d("ngIf",e.isEditing),l(),d("event",e)("templates",n.templates)("siteUsers",n.siteUsers)}}function gl(a,m){if(a&1&&(i(0,"div",15),f(1,cl,15,19,"div",16),r()),a&2){let e=u();l(),d("ngForOf",e.filteredEvents)}}function _l(a,m){a&1&&(i(0,"div",29),s(1," \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430... "),_(2,"app-loading"),r())}var qi=(()=>{class a{eventsSitesService;landingsService;siteUsersService;emailTemplatesService;urlValidationService;cdr;eventUsersFilter;loading=!0;successMessage=null;errorMessage=null;events=[];landings=[];siteUsers=[];emailMessages=[];templates=[];selectedWinTemplateId=null;selectedLoseTemplateId=null;selectedLandingUrl=null;uniqueLandingUrls=[];isCreatingEvent=!1;isSending=!1;selectedGroup={};uniqueLatestLandings=[];selectedSubject="";imageUrl=I.auth.imageUrl;sports=Vi;sportBackgrounds=Pi;newEvent=Ai();timerInterval;subscriptions=new Et;constructor(e,n,t,o,p,E,F){this.eventsSitesService=e,this.landingsService=n,this.siteUsersService=t,this.emailTemplatesService=o,this.urlValidationService=p,this.cdr=E,this.eventUsersFilter=F}ngOnInit(){this.loadSelectedLandingUrl(),this.newEvent.landing_url=this.selectedLandingUrl||"",this.loadData(),this.subscriptions.add(Mt(15*60*1e3).subscribe(()=>this.loadData()))}resetNewEvent(){this.newEvent={name:"",type:"",endAt:"",memberA:"",memberB:"",imageMemberA:null,imageMemberB:null,imageBgDesk:null,imageBgMob:null,grandPrize:null,everyoneForPrize:null,landing_url:this.selectedLandingUrl||"",status:"active",result:null}}ngOnDestroy(){this.timerInterval&&clearInterval(this.timerInterval),this.subscriptions.unsubscribe()}onSportChange(){if(this.newEvent.name&&this.sports.includes(this.newEvent.name)){let e=this.sportBackgrounds[this.newEvent.name];this.newEvent.imageBgDesk=e.imageBgDesk,this.newEvent.imageBgMob=e.imageBgMob}else this.newEvent.imageBgDesk=null,this.newEvent.imageBgMob=null;this.cdr.markForCheck()}get filteredEvents(){return(this.selectedLandingUrl?this.events.filter(n=>n.landing_url===this.selectedLandingUrl):this.events).sort((n,t)=>{if(n.status==="active"&&t.status!=="active")return-1;if(t.status==="active"&&n.status!=="active")return 1;if(n.status!=="active"&&t.status!=="active"){let o=n.createdAt?new Date(n.createdAt).getTime():0;return(t.createdAt?new Date(t.createdAt).getTime():0)-o}return 0})}get selectedLanding(){return this.landings.find(e=>e.url===this.selectedLandingUrl)}loadSelectedLandingUrl(){let e=localStorage.getItem("eventLandingUrlFilter");this.selectedLandingUrl=e==="null"?null:e}loadData(){this.loading=!0;let e=St({landings:this.landingsService.getLandings(),events:this.eventsSitesService.getAdminEvents(),templates:this.emailTemplatesService.getTemplates(),users:this.siteUsersService.getSiteUsers()}).subscribe({next:({landings:n,events:t,templates:o,users:p})=>{this.landings=n,this.updateUniqueLandingUrls(),this.events=t.map(E=>V(T({},E),{isEditing:!1,landing_url:E.landing_url,result:E.result??null,status:E.status||"active"})),this.templates=o,console.log("tempates",this.templates),this.siteUsers=[...p.filter(E=>E.email&&E.email.trim().length>0)],this.eventUsersFilter.clearCache(),this.loading=!1,this.isCreatingEvent=this.canCreateEvent(),this.successMessage="\u0414\u0430\u043D\u043D\u044B\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u044B",this.cdr.markForCheck()},error:n=>{this.errorMessage=`\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0434\u0430\u043D\u043D\u044B\u0445: ${n.message}`,this.cdr.markForCheck(),this.loading=!1,this.landings.length>0&&(this.updateUniqueLandingUrls(),this.cdr.markForCheck())}});this.subscriptions.add(e)}updateUniqueLandingUrls(){let e=new Map;this.landings.forEach(p=>{if(!p.url)return;let E=e.get(p.url);(!E||new Date(p.createdAt).getTime()>new Date(E.createdAt).getTime())&&e.set(p.url,p)});let n=p=>{let E=p.match(/\/vote\/(\d+)/);return E?Number(E[1]):1/0},t=Array.from(e.values()).sort((p,E)=>n(p.url)-n(E.url));(this.uniqueLatestLandings.length!==t.length||this.uniqueLatestLandings.some((p,E)=>p.url!==t[E].url))&&(this.uniqueLatestLandings=t,this.selectedLandingUrl&&!this.uniqueLatestLandings.some(p=>p.url===this.selectedLandingUrl)&&(this.selectedLandingUrl=null,localStorage.setItem("eventLandingUrlFilter","null")),!this.selectedLandingUrl&&this.uniqueLatestLandings.length>0&&(this.selectedLandingUrl=this.uniqueLatestLandings[0].url,localStorage.setItem("eventLandingUrlFilter",this.selectedLandingUrl)),this.isCreatingEvent=this.canCreateEvent(),this.cdr.markForCheck())}onLandingUrlFilterChange(){localStorage.setItem("eventLandingUrlFilter",this.selectedLandingUrl===null?"null":this.selectedLandingUrl),this.isCreatingEvent=this.canCreateEvent(),this.newEvent.landing_url=this.selectedLandingUrl||"",this.cdr.markForCheck()}toggleCreateEvent(){if(!this.canCreateEvent()){this.errorMessage='\u041D\u0435\u043B\u044C\u0437\u044F \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u043D\u043E\u0432\u043E\u0435 \u0441\u043E\u0431\u044B\u0442\u0438\u0435, \u043F\u043E\u043A\u0430 \u043B\u0435\u043D\u0434\u0438\u043D\u0433 \u043D\u0435 \u0438\u043C\u0435\u0435\u0442 \u0441\u0442\u0430\u0442\u0443\u0441 "inactive"',this.cdr.markForCheck();return}this.isCreatingEvent=!this.isCreatingEvent,this.isCreatingEvent?this.newEvent.landing_url=this.selectedLandingUrl||"":this.resetNewEvent(),this.clearMessages(),this.cdr.markForCheck()}cancelCreateEvent(){this.isCreatingEvent=!1,this.resetNewEvent(),this.clearMessages(),this.cdr.markForCheck()}canCreateEvent(){return this.landings.find(n=>n.url===this.selectedLandingUrl)?.status==="0"||!this.selectedLandingUrl}hasAnyEvent(e){return this.events.some(n=>n.landing_url===e)}hasActiveEvent(e=this.selectedLandingUrl||""){return this.events.some(n=>n.landing_url===e&&n.status==="active"&&n.endAt&&new Date(n.endAt).getTime()>Date.now())}getActiveEventTypeEventId(e){let n=this.events.find(t=>t.landing_url===e&&t.status==="active"&&t.endAt&&new Date(t.endAt).getTime()>Date.now());return n?n.typeEventId:null}createEvent(){if(this.hasActiveEvent(this.newEvent.landing_url)){this.errorMessage="\u041D\u0430 \u044D\u0442\u043E\u043C \u043B\u0435\u043D\u0434\u0438\u043D\u0433\u0435 \u0443\u0436\u0435 \u0435\u0441\u0442\u044C \u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0435 \u0441\u043E\u0431\u044B\u0442\u0438\u0435",this.cdr.markForCheck();return}if(!this.newEvent.name||!this.sports.includes(this.newEvent.name)||!this.newEvent.type||!this.newEvent.endAt||!this.newEvent.memberA||!this.newEvent.memberB||!this.newEvent.landing_url||this.newEvent.imageMemberA&&!this.urlValidationService.isValidImageUrl(this.newEvent.imageMemberA)||this.newEvent.imageMemberB&&!this.urlValidationService.isValidImageUrl(this.newEvent.imageMemberB)){this.errorMessage="\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u0441\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u043F\u043E\u043B\u044F \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u043E \u0438 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0438\u0434 \u0441\u043F\u043E\u0440\u0442\u0430 \u0438\u0437 \u0441\u043F\u0438\u0441\u043A\u0430",this.cdr.markForCheck();return}let e=new Date(this.newEvent.endAt).toISOString().slice(0,10).replace(/-/g,""),n=`${this.newEvent.type.toLowerCase().replace(/\s+/g,"-")}-${this.newEvent.name.toLowerCase().replace(/\s+/g,"-")}-${e}-${this.newEvent.memberA.toLowerCase().replace(/\s+/g,"-")}-${this.newEvent.memberB.toLowerCase().replace(/\s+/g,"-")}`,t=this.eventsSitesService.getAdminEvents().subscribe({next:o=>{if(o.some(F=>F.typeEventId===n)){this.errorMessage=`\u0421\u043E\u0431\u044B\u0442\u0438\u0435 \u0441 typeEventId "${n}" \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442`,this.cdr.markForCheck();return}let p={typeEventId:n,name:this.newEvent.name,type:this.newEvent.type,endAt:new Date(this.newEvent.endAt).toISOString(),memberA:this.newEvent.memberA,memberB:this.newEvent.memberB,imageMemberA:this.newEvent.imageMemberA||null,imageMemberB:this.newEvent.imageMemberB||null,imageBgDesk:this.newEvent.imageBgDesk||null,imageBgMob:this.newEvent.imageBgMob||null,grandPrize:this.newEvent.grandPrize||null,everyoneForPrize:this.newEvent.everyoneForPrize||null,landing_url:this.newEvent.landing_url,status:"active",result:null},E=this.eventsSitesService.createEvent(p).subscribe({next:F=>{let z=this.landings.find(X=>X.url===F.landing_url);z?this.landingsService.updateLanding(z.id,{status:"active"}).subscribe({next:()=>{this.successMessage="\u0421\u043E\u0431\u044B\u0442\u0438\u0435 \u0441\u043E\u0437\u0434\u0430\u043D\u043E, \u0438 \u0441\u0442\u0430\u0442\u0443\u0441 \u043B\u0435\u043D\u0434\u0438\u043D\u0433\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0451\u043D \u043D\u0430 active!",z.status="active",this.isCreatingEvent=!1,this.resetNewEvent(),this.loadData(),setTimeout(()=>{this.closeMessages()},3e3)},error:X=>{this.errorMessage=`\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043B\u0435\u043D\u0434\u0438\u043D\u0433\u0430: ${X.message}`,this.cdr.markForCheck()}}):(this.successMessage="\u0421\u043E\u0431\u044B\u0442\u0438\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D\u043E!",this.isCreatingEvent=!1,this.resetNewEvent(),this.loadData(),setTimeout(()=>{this.closeMessages()},3e3))},error:F=>{this.errorMessage=`\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0438 \u0441\u043E\u0431\u044B\u0442\u0438\u044F: ${F.message}`,this.cdr.markForCheck()}});this.subscriptions.add(E)},error:o=>{this.errorMessage=`\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0435 typeEventId: ${o.message}`,this.cdr.markForCheck()}});this.subscriptions.add(t)}toggleEdit(e){if(e.status==="inactive"){this.errorMessage="\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043D\u043D\u044B\u0445 \u0438\u043B\u0438 \u043D\u0435\u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0445 \u0441\u043E\u0431\u044B\u0442\u0438\u0439 \u0437\u0430\u043F\u0440\u0435\u0449\u0435\u043D\u043E",this.cdr.markForCheck();return}e.isEditing=!e.isEditing,e.isEditing||this.loadData(),this.clearMessages(),this.cdr.markForCheck()}saveChanges(e){if(console.log("Starting saveChanges for event:",JSON.stringify(e,null,2)),e.result!==null&&![1,2,3].includes(Number(e.result))){this.errorMessage="\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442 \u0441\u043E\u0431\u044B\u0442\u0438\u044F. \u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 1, 2 \u0438\u043B\u0438 3",console.log("Invalid result value:",e.result),this.cdr.markForCheck();return}let n={name:e.name,type:e.type,endAt:e.endAt?new Date(e.endAt).toISOString():void 0,memberA:e.memberA,memberB:e.memberB,imageMemberA:e.imageMemberA,imageMemberB:e.imageMemberB,imageBgDesk:e.imageBgDesk,imageBgMob:e.imageBgMob,grandPrize:e.grandPrize,everyoneForPrize:e.everyoneForPrize,status:e.status,result:e.result!==null?Number(e.result):null};console.log("Update data being sent:",JSON.stringify(n,null,2)),console.log("Attempting to send PATCH request for event:",e.typeEventId);let t=this.eventsSitesService.updateEventById(e.id,n).subscribe({next:o=>{Object.assign(e,o,{isEditing:!1}),this.successMessage="\u0421\u043E\u0431\u044B\u0442\u0438\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E!",this.loadData(),this.cdr.markForCheck()},error:o=>{this.errorMessage=`\u041E\u0448\u0438\u0431\u043A\u0430: ${o.message}`,this.cdr.markForCheck()}});this.subscriptions.add(t)}onResultChange(e,n){console.log("Result changed for event:",n.typeEventId,"New result:",e),n.result=e!==null?Number(e):null,this.saveChanges(n)}refreshImage(e){this.clearMessages(),this.cdr.markForCheck()}loadTemplates(){let e=this.emailTemplatesService.getTemplates().subscribe({next:n=>{this.templates=n,n.length>0&&(this.selectedWinTemplateId=n[0].id,this.selectedLoseTemplateId=n[0].id),this.cdr.markForCheck()},error:n=>{this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432",this.cdr.markForCheck()}});this.subscriptions.add(e)}loadSiteUsers(){let e=this.siteUsersService.getSiteUsers().subscribe({next:n=>{this.siteUsers=n.filter(t=>t.email&&t.email.trim().length>0),console.log("Loaded site users in loadSiteUsers:",JSON.stringify(this.siteUsers,null,2)),this.cdr.markForCheck()},error:n=>{this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439 \u0441\u0430\u0439\u0442\u0430",this.cdr.markForCheck()}});this.subscriptions.add(e)}getUsersForEvent(e,n){return this.eventUsersFilter.getUsersForEvent(this.siteUsers,e,n)}getFilteredUsersForEvent(e,n,t,o="all"){return e?this.eventUsersFilter.getFilteredUsersForEvent(this.siteUsers,e,n,t??null,o):[]}closeMessages(){this.successMessage=null,this.errorMessage=null,this.cdr.markForCheck()}clearMessages(){this.successMessage=null,this.errorMessage=null,this.cdr.markForCheck()}static \u0275fac=function(n){return new(n||a)(k(zi),k(Li),k(Re),k(ft),k(ye),k(ce),k(Ge))};static \u0275cmp=B({type:a,selectors:[["app-events-sites"]],decls:16,vars:6,consts:[[1,"events-page","ml-side","section-full"],[1,"mx-auto","pt-[10px]"],[1,"bg-main-trans2-gradient-90","header-tab","flex","items-center","justify-between","py-[10px]","mb-0","rounded-[20px]","w-full","pr-4","max-w-[1200px]","mx-auto"],[1,"title-group","flex","items-center","gap-4"],[1,"title-tab","text-xl","font-bold","text-indigo-600","w-fit"],[1,"title-tab","text-main-trans","font-bold","w-fit"],[1,"select","select-primary","text-xl","rounded-[25px]","w-full",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 24 24"],["class","card-wrapper bg-main-trans-gradient-0 rounded-[20px] px-[20px] pt-[15px] pb-[80px]",4,"ngIf"],["class","card-wrapper bg-main-trans-gradient-0 rounded-[20px] px-[20px] pt-[15px] pb-[80px] min-h-[91dvh] h-auto",4,"ngIf"],["class","text-center py-20 text-3xl font-bold text-indigo-700",4,"ngIf"],[1,"card-wrapper","bg-main-trans-gradient-0","rounded-[20px]","px-[20px]","pt-[15px]","pb-[80px]"],[3,"sportChange","create","cancel","newEvent","sports","sportBackgrounds","landingUrl","hasActiveEvent"],[1,"card-wrapper","bg-main-trans-gradient-0","rounded-[20px]","px-[20px]","pt-[15px]","pb-[80px]","min-h-[91dvh]","h-auto"],["class","event-card",3,"ngClass",4,"ngFor","ngForOf"],[1,"event-card",3,"ngClass"],[1,"flex","items-center","justify-between","w-[90%]","mx-auto","pt-[20px]","pb-[20px]"],[1,"text-lg","font-bold","text-indigo-600","nj-toast-gradient"],["target","_blank",3,"href"],[1,"text-sm",3,"ngClass"],[1,"card-date","flex","items-center","gap-2"],[1,"text-xs","text-gray-500"],[3,"event","edit",4,"ngIf"],[3,"event","save","cancel",4,"ngIf"],[3,"event","templates","siteUsers"],[3,"edit","event"],[3,"save","cancel","event"],[1,"text-center","py-20","text-3xl","font-bold","text-indigo-700"]],template:function(n,t){n&1&&(_(0,"app-sidebar"),i(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h2",4),s(6," \u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0430\u0439\u0442 \u0441\u043E\u0431\u044B\u0442\u0438\u044F: \u{1F449} "),r(),i(7,"div",5)(8,"select",6),C("ngModelChange",function(p){return v(t.selectedLandingUrl,p)||(t.selectedLandingUrl=p),p}),h("ngModelChange",function(){return t.onLandingUrlFilterChange()}),i(9,"option",7),s(10,"\u0412\u0441\u0435 \u043B\u0435\u043D\u0434\u0438\u043D\u0433\u0438"),r(),f(11,ul,2,4,"option",8),r()()(),y(),_(12,"svg",9),r(),f(13,dl,2,5,"div",10)(14,gl,2,1,"div",11)(15,_l,3,0,"div",12),r()()),n&2&&(l(8),x("ngModel",t.selectedLandingUrl),l(),d("ngValue",null),l(2),d("ngForOf",t.uniqueLatestLandings),l(2),d("ngIf",t.selectedLandingUrl&&t.canCreateEvent()),l(),d("ngIf",!t.loading&&t.filteredEvents.length>0),l(),d("ngIf",t.filteredEvents.length===0))},dependencies:[ne,H,A,de,Te,Z,ee,re,q,Q,Ui,Oi,Hi,$i,le],changeDetection:0})}return a})();var Qi=(()=>{class a{http;apiUrl=I.auth.localQuiz+"/admin/quizzes";secret=I.auth.adminSecretQuiz;geo=I.auth.geo;constructor(e){this.http=e}getHeaders(){return new Ve({"X-Admin-Secret":this.secret,"X-Geo":this.geo,"Content-Type":"application/json"})}getAllQuizzes(){return this.http.get(this.apiUrl,{headers:this.getHeaders()}).pipe(R(e=>e.data||[]),R(e=>e.map(n=>({id:n.id,typeQuizId:n.typeQuizId,name:n.name,nameAdm:n.nameAdm??null,description:n.description??"",descriptionAdm:n.descriptionAdm??null,theme:n.theme??null,isActive:n.isActive??!1,endAt:n.endAt,questions:n.questions??"[]",quizInfo:n.quizInfo??null,result:n.result??null,resultsStats:n.resultsStats??null,imageBgDesk:n.imageBgDesk??null,imageBgMob:n.imageBgMob??null,imageHero:n.imageHero??null,grandPrize:n.grandPrize??null,prizeForEveryOne:n.prizeForEveryOne??null,type:n.type??"byScore",status:n.status??"active",geo:n.geo??"vn",createdAt:n.createdAt,rating:n.rating??0,landing:n.landing||{id:n.landingId,url:"unknown",name:"\u041B\u0435\u043D\u0434\u0438\u043D\u0433"},questionsCount:JSON.parse(n.questions||"[]").length}))),O(e=>(console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043A\u0432\u0438\u0437\u043E\u0432:",e),we(()=>new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043A\u0432\u0438\u0437\u044B")))))}getAllLandings(){let e=I.auth.localQuiz+"/admin/landings";return this.http.get(e,{headers:this.getHeaders()}).pipe(R(n=>n||[]),R(n=>n.map(t=>({id:t.id,url:t.url,name:t.name,status:t.status,createdAt:t.createdAt,quizCount:t.quizCount}))),O(n=>(console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043B\u0435\u043D\u0434\u0438\u043D\u0433\u043E\u0432:",n),we(()=>new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043B\u0435\u043D\u0434\u0438\u043D\u0433\u0438")))))}getQuizzesByLanding(e){let n=I.auth.localQuiz+"/admin/quizzes";return e!==null&&(n=`${I.auth.localQuiz}/admin/landings/${e}/quizzes`),this.http.get(n,{headers:this.getHeaders()}).pipe(R(t=>t||[]),R(t=>t.map(o=>({id:o.id,typeQuizId:o.typeQuizId,name:o.name,nameAdm:o.nameAdm??null,description:o.description??"",descriptionAdm:o.descriptionAdm??null,theme:o.theme??null,isActive:o.isActive??!1,endAt:o.endAt,questions:o.questions??"[]",quizInfo:o.quizInfo??null,result:o.result??null,resultsStats:o.resultsStats??null,imageBgDesk:o.imageBgDesk??null,imageBgMob:o.imageBgMob??null,imageHero:o.imageHero??null,grandPrize:o.grandPrize??null,prizeForEveryOne:o.prizeForEveryOne??null,type:o.type??"byScore",status:o.status??"active",geo:o.geo??"vn",createdAt:o.createdAt,rating:o.rating??0,landing:o.landing||{id:o.landingId,url:"unknown",name:"\u0411\u0435\u0437 \u043B\u0435\u043D\u0434\u0438\u043D\u0433\u0430"},questionsCount:o.questions?JSON.parse(o.questions).length:0}))),O(t=>(console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043A\u0432\u0438\u0437\u043E\u0432:",t),we(()=>new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043A\u0432\u0438\u0437\u044B")))))}getQuizById(e){let n=`${this.apiUrl}/${e}`;return this.http.get(n,{headers:this.getHeaders()}).pipe(R(t=>t.data||t),R(t=>({id:t.id,typeQuizId:t.typeQuizId,name:t.name,nameAdm:t.nameAdm??null,description:t.description??"",descriptionAdm:t.descriptionAdm??null,theme:t.theme??null,isActive:t.isActive??!1,endAt:t.endAt,questions:t.questions??"[]",quizInfo:t.quizInfo??null,result:t.result??null,resultsStats:t.resultsStats??null,imageBgDesk:t.imageBgDesk??null,imageBgMob:t.imageBgMob??null,imageHero:t.imageHero??null,grandPrize:t.grandPrize??null,prizeForEveryOne:t.prizeForEveryOne??null,type:t.type??"byScore",status:t.status??"active",geo:t.geo??"vn",createdAt:t.createdAt,rating:t.rating??0,landingId:t.landingId??t.landing?.id??0})),O(t=>(console.error(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043A\u0432\u0438\u0437\u0430 #${e}:`,t),we(()=>new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043A\u0432\u0438\u0437")))))}updateQuiz(e,n){let t=`${this.apiUrl}/${e}`;return this.http.patch(t,n,{headers:this.getHeaders()}).pipe(R(o=>o.data||o),O(o=>{throw console.error(`\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043A\u0432\u0438\u0437\u0430 #${e}:`,o),new Error(o.error?.message||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u043A\u0432\u0438\u0437")}))}createQuiz(e){return console.log("\u0427\u0442\u043E \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u0435\u043C \u043D\u0430 \u0441\u0435\u0440\u0432\u0435\u0440:",JSON.stringify(e,null,2)),this.http.post(this.apiUrl,e,{headers:this.getHeaders()}).pipe(R(n=>n.data||n),O(n=>{throw console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u043A\u0432\u0438\u0437\u0430:",n),new Error(n.error?.message||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u043A\u0432\u0438\u0437")}))}static \u0275fac=function(n){return new(n||a)(N($))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var Ri=(()=>{class a{quiz;onEdit=new G;isFutureDate(e){return new Date(e).getTime()>Date.now()}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=B({type:a,selectors:[["app-quiz-preview"]],inputs:{quiz:"quiz"},outputs:{onEdit:"onEdit"},decls:32,vars:12,consts:[[1,"card-body"],[1,"badge",3,"ngClass"],[1,"card-title","text-xl"],[1,"text-base-content/70","mt-[10px]"],[1,"mt-4","text-sm","opacity-70"],[1,"card-actions","justify-center","mt-6"],[1,"btn","btn-primary","gap-2",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["d","M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"]],template:function(n,t){n&1&&(i(0,"div",0)(1,"div",1),s(2),r(),i(3,"h2",2),s(4),r(),i(5,"p",3)(6,"b"),s(7,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435:"),r(),_(8,"br"),s(9),r(),i(10,"p",3)(11,"b"),s(12,"\u041F\u0440\u0438\u0437:"),r(),_(13,"br"),s(14),r(),i(15,"p",3)(16,"b"),s(17,"\u041F\u0440\u0438\u0437\u044B \u0434\u043B\u044F \u0432\u0441\u0435\u0445:"),r(),_(18,"br"),s(19),r(),i(20,"div",4),s(21),_(22,"br"),s(23),_(24,"br"),s(25),P(26,"date"),r(),i(27,"div",5)(28,"button",6),h("click",function(){return t.onEdit.emit(t.quiz)}),y(),i(29,"svg",7),_(30,"path",8),r(),s(31," \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C "),r()()()),n&2&&(l(),d("ngClass",t.quiz.isActive?"badge-success":"badge-error"),l(),b(" ",t.quiz.isActive?"\u0410\u043A\u0442\u0438\u0432\u0435\u043D":"\u041D\u0435\u0430\u043A\u0442\u0438\u0432\u0435\u043D"," "),l(2),b(" ",t.quiz.name||"\u0411\u0435\u0437 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044F"," "),l(5),b(" ",t.quiz.description||"\u041D\u0435\u0442 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u044F"," "),l(5),b(" ",t.quiz.grandPrize||"\u041D\u0435\u0442 \u043F\u0440\u0438\u0437\u0430"," "),l(5),b(" ",t.quiz.prizeForEveryOne||"\u041D\u0435\u0442 \u043F\u0440\u0438\u0437\u043E\u0432"," "),l(2),b(" \u0422\u0438\u043F: ",t.quiz.type==="byScore"?"\u041F\u043E \u0431\u0430\u043B\u043B\u0430\u043C":"\u041F\u043E \u0432\u0435\u0441\u0430\u043C",""),l(2),b(" \u0412\u043E\u043F\u0440\u043E\u0441\u043E\u0432: ",t.quiz.questionsCount,""),l(2),b(" \u0421\u043E\u0437\u0434\u0430\u043D: ",j(26,9,t.quiz.createdAt,"dd.MM.yyyy HH:mm")," "))},dependencies:[ne,le]})}return a})();var ae={primaryColor:"#667eea",secondaryColor:"#764ba2",accentColor:"#3b82f6",textColor:"#2c3e50",textSecondaryColor:"#777777",bgColor:"#ffffff",cardBgColor:"#f8f9fa",headerBgStart:"#667eea",headerBgEnd:"#764ba2",btnBgStart:"#667eea",btnBgEnd:"#764ba2",btnTextColor:"#ffffff",logoUrl:"https://via.placeholder.com/150x60/667eea/ffffff?text=LOGO",greeting:"Xin ch\xE0o",titleText:"Ch\xFAc m\u1EEBng b\u1EA1n!",highlightText:"B\u1EA1n \u0111\xE3 \u0111\u1EA1t \u0111\u01B0\u1EE3c {{score}}% \u0111i\u1EC3m!",prizeText:"",descriptionText:"C\u1EA3m \u01A1n b\u1EA1n \u0111\xE3 tham gia b\xE0i ki\u1EC3m tra c\u1EE7a ch\xFAng t\xF4i.",callToAction:"Nh\u1EADn ph\u1EA7n th\u01B0\u1EDFng c\u1EE7a b\u1EA1n ngay!",btnText:"Nh\u1EADn th\u01B0\u1EDFng",btnLink:"https://example.com",footerText:"C\u1EA3m \u01A1n b\u1EA1n \u0111\xE3 tham gia!",subject:"Ch\xFAc m\u1EEBng {{name}}! B\u1EA1n \u0111\u1EA1t {{score}}% \u0111i\u1EC3m",showHighlight:!0,showPrize:!0,showDescription:!0,showCTA:!0,showButton:!0},bt=[{step:1,delayMinutes:1440,delayLabel:"24 \u0447\u0430\u0441\u0430",subject:"Nh\u1EAFc nh\u1EDF: B\u1EA1n c\xF3 ph\u1EA7n th\u01B0\u1EDFng \u0111ang ch\u1EDD!",html:"",config:V(T({},ae),{titleText:"\u0110\u1EEBng b\u1ECF l\u1EE1 ph\u1EA7n th\u01B0\u1EDFng c\u1EE7a b\u1EA1n!",highlightText:"B\u1EA1n \u0111\xE3 ho\xE0n th\xE0nh quiz nh\u01B0ng ch\u01B0a nh\u1EADn th\u01B0\u1EDFng",descriptionText:"Ph\u1EA7n th\u01B0\u1EDFng c\u1EE7a b\u1EA1n v\u1EABn \u0111ang ch\u1EDD. H\xE3y nh\u1EADn ngay!",callToAction:"Nh\u1EADn ph\u1EA7n th\u01B0\u1EDFng ngay h\xF4m nay!"}),isExpanded:!0,isDirty:!1},{step:2,delayMinutes:2880,delayLabel:"48 \u0447\u0430\u0441\u043E\u0432",subject:"C\u01A1 h\u1ED9i cu\u1ED1i: Ph\u1EA7n th\u01B0\u1EDFng s\u1EAFp h\u1EBFt h\u1EA1n!",html:"",config:V(T({},ae),{titleText:"C\u01A1 h\u1ED9i cu\u1ED1i c\xF9ng!",highlightText:"Ph\u1EA7n th\u01B0\u1EDFng c\u1EE7a b\u1EA1n s\u1EAFp h\u1EBFt h\u1EA1n",descriptionText:"\u0110\xE2y l\xE0 l\u1EA7n nh\u1EAFc nh\u1EDF cu\u1ED1i c\xF9ng. \u0110\u1EEBng b\u1ECF l\u1EE1 c\u01A1 h\u1ED9i nh\u1EADn th\u01B0\u1EDFng!",callToAction:"Nh\u1EADn ngay tr\u01B0\u1EDBc khi h\u1EBFt h\u1EA1n!",primaryColor:"#e74c3c",headerBgStart:"#e74c3c",headerBgEnd:"#c0392b"}),isExpanded:!1,isDirty:!1},{step:3,delayMinutes:8640,delayLabel:"6 \u0434\u043D\u0435\u0439",subject:"Ch\xFAng t\xF4i nh\u1EDB b\u1EA1n! Quay l\u1EA1i nh\u1EADn th\u01B0\u1EDFng",html:"",config:V(T({},ae),{titleText:"Ch\xFAng t\xF4i nh\u1EDB b\u1EA1n!",highlightText:"\u0110\xE3 l\xE2u kh\xF4ng g\u1EB7p b\u1EA1n",descriptionText:"H\xE3y quay l\u1EA1i v\xE0 kh\xE1m ph\xE1 th\xEAm nhi\u1EC1u quiz th\xFA v\u1ECB v\u1EDBi ph\u1EA7n th\u01B0\u1EDFng h\u1EA5p d\u1EABn!",callToAction:"Kh\xE1m ph\xE1 quiz m\u1EDBi!",primaryColor:"#9b59b6",headerBgStart:"#9b59b6",headerBgEnd:"#8e44ad"}),isExpanded:!1,isDirty:!1}];function Pe(a){if(a<60)return`${a} \u043C\u0438\u043D\u0443\u0442`;if(a<1440)return`${Math.round(a/60)} \u0447\u0430\u0441\u043E\u0432`;let m=Math.round(a/1440);return m===1?"1 \u0434\u0435\u043D\u044C":m<5?`${m} \u0434\u043D\u044F`:`${m} \u0434\u043D\u0435\u0439`}var Gi=[{label:"1 \u0447\u0430\u0441",minutes:60},{label:"6 \u0447\u0430\u0441\u043E\u0432",minutes:360},{label:"12 \u0447\u0430\u0441\u043E\u0432",minutes:720},{label:"24 \u0447\u0430\u0441\u0430",minutes:1440},{label:"48 \u0447\u0430\u0441\u043E\u0432",minutes:2880},{label:"3 \u0434\u043D\u044F",minutes:4320},{label:"6 \u0434\u043D\u0435\u0439",minutes:8640},{label:"7 \u0434\u043D\u0435\u0439",minutes:10080}];var Yi=(()=>{class a{PREFIX="quiz-draft-";saveDraft(e,n){let t=this.PREFIX+e,o=V(T({},n),{id:void 0,savedAt:new Date().toISOString()});localStorage.setItem(t,JSON.stringify(o)),console.log(`\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A \u0441\u043E\u0445\u0440\u0430\u043D\u0451\u043D: ${t}`)}loadDraft(e){let n=this.PREFIX+e,t=localStorage.getItem(n);if(!t)return null;try{let o=JSON.parse(t);return console.log(`\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D: ${n}`),o}catch(o){return console.error(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430 ${n}:`,o),this.clearDraft(e),null}}clearDraft(e){let n=this.PREFIX+e;localStorage.removeItem(n),console.log(`\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A \u043E\u0447\u0438\u0449\u0435\u043D: ${n}`)}getCreateDraftKey(){return"create"}getEditDraftKey(e){return`edit-${e}`}static \u0275fac=function(n){return new(n||a)};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var Ye=(()=>{class a{http;apiUrl=I.auth.emailServiceUrl||"http://localhost:3500";constructor(e){this.http=e}getHeaders(){return new Ve({"Content-Type":"application/json"})}getTemplates(e,n,t){let o=`${this.apiUrl}/api/templates?domain=${encodeURIComponent(e)}`;return n&&(o+=`&app=${encodeURIComponent(n)}`),t&&(o+=`&quiz_id=${encodeURIComponent(t)}`),this.http.get(o,{headers:this.getHeaders()}).pipe(R(p=>p.templates||[]),O(p=>(console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432:",p),xe([]))))}getTemplateById(e){return this.http.get(`${this.apiUrl}/api/templates/${e}`,{headers:this.getHeaders()}).pipe(R(n=>n.template||null),O(n=>(console.error(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0430 #${e}:`,n),xe(null))))}createTemplate(e){return this.http.post(`${this.apiUrl}/api/templates`,e,{headers:this.getHeaders()}).pipe(R(n=>({success:n.success,id:n.id})),O(n=>xe({success:!1,error:n.error?.error||n.message})))}updateTemplate(e,n){return this.http.put(`${this.apiUrl}/api/templates/${e}`,n,{headers:this.getHeaders()}).pipe(R(t=>({success:t.success})),O(t=>xe({success:!1,error:t.error?.error||t.message})))}updateTemplateByClient(e){return this.http.put(`${this.apiUrl}/api/templates/by-client`,e,{headers:this.getHeaders()}).pipe(R(n=>({success:n.success,action:n.action,id:n.id})),O(n=>xe({success:!1,error:n.error?.error||n.message})))}deleteTemplate(e){return this.http.delete(`${this.apiUrl}/api/templates/${e}`,{headers:this.getHeaders()}).pipe(R(n=>({success:n.success})),O(n=>xe({success:!1,error:n.error?.error||n.message})))}getChainTemplates(e,n,t){let o=`${this.apiUrl}/api/chain/templates?app=${encodeURIComponent(e)}&quizId=${encodeURIComponent(n)}`;return t&&(o+=`&chainType=${encodeURIComponent(t)}`),console.log("Fetching chain templates:",o),this.http.get(o,{headers:this.getHeaders()}).pipe(R(p=>{let E=p.templates||[];return console.log("Received chain templates:",E),E.map(F=>this.mapChainTemplate(F))}),O(p=>(console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432 \u0446\u0435\u043F\u043E\u0447\u043A\u0438:",p),xe([]))))}getChainTemplateById(e){return this.http.get(`${this.apiUrl}/api/chain/templates/${e}`,{headers:this.getHeaders()}).pipe(R(n=>n.template?this.mapChainTemplate(n.template):null),O(n=>(console.error(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0430 \u0446\u0435\u043F\u043E\u0447\u043A\u0438 #${e}:`,n),xe(null))))}createChainTemplate(e){return this.http.post(`${this.apiUrl}/api/chain/templates`,e,{headers:this.getHeaders()}).pipe(R(n=>({success:n.success,id:n.id})),O(n=>xe({success:!1,error:n.error?.error||n.message})))}updateChainTemplate(e,n){return this.http.put(`${this.apiUrl}/api/chain/templates/${e}`,n,{headers:this.getHeaders()}).pipe(R(t=>({success:t.success})),O(t=>xe({success:!1,error:t.error?.error||t.message})))}upsertChainTemplate(e){return this.http.put(`${this.apiUrl}/api/chain/templates/by-client`,e,{headers:this.getHeaders()}).pipe(R(n=>({success:n.success,action:n.action,id:n.id})),O(n=>xe({success:!1,error:n.error?.error||n.message})))}upsertChainTemplatesBulk(e){return this.http.put(`${this.apiUrl}/api/chain/templates/bulk`,e,{headers:this.getHeaders()}).pipe(R(n=>({success:n.success,created:n.created,updated:n.updated,ids:n.ids})),O(n=>xe({success:!1,error:n.error?.error||n.message})))}deleteChainTemplate(e){return this.http.delete(`${this.apiUrl}/api/chain/templates/${e}`,{headers:this.getHeaders()}).pipe(R(n=>({success:n.success})),O(n=>xe({success:!1,error:n.error?.error||n.message})))}getChainSettings(e,n){let t=`${this.apiUrl}/api/chain/settings?domain=${encodeURIComponent(e)}`;return n&&(t+=`&app=${encodeURIComponent(n)}`),this.http.get(t,{headers:this.getHeaders()}).pipe(R(o=>o.settings?this.mapChainSettings(o.settings):null),O(o=>(console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A \u0446\u0435\u043F\u043E\u0447\u043A\u0438:",o),xe(null))))}updateChainSettings(e){return this.http.put(`${this.apiUrl}/api/chain/settings`,e,{headers:this.getHeaders()}).pipe(R(n=>({success:n.success})),O(n=>xe({success:!1,error:n.error?.error||n.message})))}mapChainTemplate(e){return{id:e.id,clientId:e.client_id,chainType:e.chain_type,quizId:e.quiz_id,app:e.app,step:e.step,delayMinutes:e.delay_minutes,subject:e.subject,html:e.html,active:!!e.active,createdAt:e.created_at,updatedAt:e.updated_at}}mapChainSettings(e){return{id:e.id,clientId:e.client_id,defaultDelays:Array.isArray(e.default_delays)?e.default_delays:JSON.parse(e.default_delays||"[1440, 2880, 8640]"),mergeWindowMinutes:e.merge_window_minutes,minQuizzesForGeneral:e.min_quizzes_for_general,enabled:!!e.enabled}}generateHtmlFromConfig(e){return`<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Arial, sans-serif; background-color: #f5f5f5;">
  <div style="max-width: 600px; margin: 20px auto; background: ${e.bgColor}; border-radius: 20px; overflow: hidden; box-shadow: 0 15px 40px rgba(0,0,0,0.1);">
    
    <div style="background: linear-gradient(135deg, ${e.headerBgStart} 0%, ${e.headerBgEnd} 100%); padding: 25px 20px; text-align: center;">
      <img src="${e.logoUrl}" alt="Logo" style="height: 60px;" />
    </div>

    <div style="padding: 35px 30px; color: ${e.textColor};">
      <p style="font-size: 22px; font-weight: 700; margin: 0 0 15px; text-align: center;">
        ${e.greeting}, <span style="color: ${e.primaryColor};">{{name}}</span>!
      </p>

      ${e.titleText?`<div style="font-size: 26px; font-weight: 800; color: ${e.primaryColor}; line-height: 1.3; margin: 10px 0; text-align: center;">${e.titleText}</div>`:""}

      ${e.highlightText?`<div style="font-size: 18px; font-weight: 600; color: ${e.textColor}; background: ${e.cardBgColor}; padding: 20px; border-radius: 12px; border-left: 6px solid ${e.primaryColor}; margin: 25px 0;">${e.highlightText}</div>`:""}

      ${e.prizeText?`<div style="font-size: 17px; color: #e74c3c; background: #fff5f5; padding: 18px; border-radius: 12px; border-left: 5px solid #e74c3c; margin: 25px 0;"><strong>Ch\xFA \xFD!</strong> ${e.prizeText}</div>`:""}

      ${e.descriptionText?`<div style="font-size: 16px; line-height: 1.7; color: #34495e; margin: 25px 0;">${e.descriptionText}</div>`:""}

      ${e.callToAction?`<div style="background: #f0f2ff; padding: 25px; border-radius: 16px; text-align: center; margin: 0; border-left: 5px solid ${e.accentColor};"><p style="font-size: 18px; font-weight: 600; color: ${e.textColor}; margin: 0;">${e.callToAction}</p></div>`:""}

      <div style="text-align: center; margin: 40px 0;">
        <a href="${e.btnLink}" style="display: inline-block; padding: 18px 50px; background: linear-gradient(135deg, ${e.btnBgStart}, ${e.btnBgEnd}); color: ${e.btnTextColor}; font-weight: 700; font-size: 19px; border-radius: 16px; text-decoration: none; box-shadow: 0 8px 25px rgba(59, 130, 246, 0.5);">
          ${e.btnText}
        </a>
      </div>

      <div style="margin-top: 50px; padding-top: 25px; border-top: 2px solid #eee; color: ${e.textSecondaryColor}; font-size: 14px; text-align: center; line-height: 1.6;">
        ${e.footerText}
        <br><br>
        \xA9 {{year}} VoteVibe. All rights reserved.
      </div>
    </div>
  </div>
</body>
</html>`.trim()}static \u0275fac=function(n){return new(n||a)(N($))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var Xi=a=>({"background-image":a}),Ji=()=>({"background-image":"linear-gradient(90deg, var(--text-gradient-start), var(--text-gradient-end))","-webkit-background-clip":"text","-webkit-text-fill-color":"transparent"}),Ki=()=>({background:"linear-gradient(90deg, var(--desc-gradient-start),  var(--desc-gradient-end))"}),Zi=()=>({"background-image":"url(https://vi.devsmm.pro/images/quiz-qeustions-bg-image-1768391344275-45020816.png)"}),en=()=>[],tn=()=>({"background-image":"linear-gradient(90deg, var(--btn-color-gradient-start) 15%, var(--btn-color-gradient-end) 100%)"});function vl(a,m){if(a&1&&_(0,"img",29),a&2){let e=u(2);d("src",e.currentQuestion.image,W)}}function Cl(a,m){if(a&1&&(i(0,"div",30),s(1),r()),a&2){let e=m.$implicit;d("ngStyle",oe(2,tn)),l(),b(" ",e.text||"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430"," ")}}function bl(a,m){if(a&1&&(i(0,"div",23)(1,"div",24),f(2,vl,1,1,"img",25),_(3,"h2",26),i(4,"div",27),f(5,Cl,2,3,"div",28),r()()()),a&2){let e=u();l(),d("ngStyle",oe(4,Zi)),l(),d("ngIf",e.currentQuestion.image),l(),d("innerHTML",e.currentQuestion.text||"<em>\u041D\u0435\u0442 \u0442\u0435\u043A\u0441\u0442\u0430 \u0432\u043E\u043F\u0440\u043E\u0441\u0430</em>",Ae),l(2),d("ngForOf",e.currentQuestion.answers||oe(5,en))}}function wl(a,m){if(a&1){let e=S();i(0,"button",34),h("click",function(){let t=c(e).index,o=u(2);return g(o.selectQuestion(t))}),s(1),r()}if(a&2){let e=m.index,n=u(2);U("btn-primary",e===n.currentQuestionIndex),l(),b(" ",e+1," ")}}function El(a,m){if(a&1&&(i(0,"div",31)(1,"div",32),f(2,wl,2,3,"button",33),r()()),a&2){let e=u();l(2),d("ngForOf",e.quizData==null?null:e.quizData.questions)}}function yl(a,m){a&1&&(i(0,"div",35),s(1," \u0412\u043E\u043F\u0440\u043E\u0441\u044B \u0435\u0449\u0451 \u043D\u0435 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u044B "),r())}function Sl(a,m){if(a&1&&(i(0,"div",36),_(1,"img",37),r()),a&2){let e=u();l(),d("src",e.quizData==null?null:e.quizData.imageHero,W)}}function Ml(a,m){a&1&&_(0,"div",38)}function Tl(a,m){if(a&1&&_(0,"img",29),a&2){let e=u(2);d("src",e.currentQuestion.image,W)}}function kl(a,m){if(a&1&&(i(0,"div",30),s(1),r()),a&2){let e=m.$implicit;d("ngStyle",oe(2,tn)),l(),b(" ",e.text||"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430"," ")}}function Bl(a,m){if(a&1&&(i(0,"div",23)(1,"div",24),f(2,Tl,1,1,"img",25),_(3,"h2",26),i(4,"div",27),f(5,kl,2,3,"div",28),r()()()),a&2){let e=u();l(),d("ngStyle",oe(4,Zi)),l(),d("ngIf",e.currentQuestion.image),l(),d("innerHTML",e.currentQuestion.text||"<em>\u041D\u0435\u0442 \u0442\u0435\u043A\u0441\u0442\u0430 \u0432\u043E\u043F\u0440\u043E\u0441\u0430</em>",Ae),l(2),d("ngForOf",e.currentQuestion.answers||oe(5,en))}}function Il(a,m){if(a&1){let e=S();i(0,"button",34),h("click",function(){let t=c(e).index,o=u(2);return g(o.selectQuestion(t))}),s(1),r()}if(a&2){let e=m.index,n=u(2);U("btn-primary",e===n.currentQuestionIndex),l(),b(" ",e+1," ")}}function Dl(a,m){if(a&1&&(i(0,"div",31)(1,"div",32),f(2,Il,2,3,"button",33),r()()),a&2){let e=u();l(2),d("ngForOf",e.quizData==null?null:e.quizData.questions)}}function Fl(a,m){a&1&&(i(0,"div",35),s(1," \u0412\u043E\u043F\u0440\u043E\u0441\u044B \u0435\u0449\u0451 \u043D\u0435 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u044B "),r())}function Vl(a,m){if(a&1&&(i(0,"div",36),_(1,"img",37),r()),a&2){let e=u();l(),d("src",e.quizData==null?null:e.quizData.imageHero,W)}}function Pl(a,m){a&1&&_(0,"div",38)}var nn=(()=>{class a{renderer;el;quizData=null;themeColors={};currentQuestionIndex=0;styleElement=null;constructor(e,n){this.renderer=e,this.el=n}ngOnChanges(e){e.quizData&&this.quizData&&(this.currentQuestionIndex=0,this.applyTheme(),this.parseThemeColors(this.quizData?.quizInfo||this.quizData?.theme||""))}parseThemeColors(e){if(this.themeColors={},!e.trim())return;e.split(/[\r\n;]/).map(t=>t.trim()).filter(t=>t.startsWith("--")&&t.includes(":")).forEach(t=>{let[o,p]=t.split(":").map(E=>E.trim());o&&p&&(this.themeColors[o]=p.replace(";",""))})}applyTheme(){this.styleElement&&this.renderer.removeChild(document.head,this.styleElement);let e=this.quizData?.theme||"";if(!e.trim())return;let t=e.replace(/\r\n|\r|\n/g,";").replace(/\s+/g," ").replace(/;\s*;/g,";").trim().split(/--primary:/),o="";for(let E=t.length-1;E>=0;E--)if(t[E].trim()){o=t[E].trim();break}o&&!o.startsWith("--primary:")&&(o="--primary:"+o);let p=`:root { ${o} }`;this.styleElement=this.renderer.createElement("style"),this.renderer.setProperty(this.styleElement,"type","text/css"),this.renderer.appendChild(this.styleElement,this.renderer.createText(p)),this.renderer.appendChild(document.head,this.styleElement)}get currentQuestion(){return this.quizData?.questions?.[this.currentQuestionIndex]}get hasQuestions(){return(this.quizData?.questions?.length||0)>0}get questionCount(){return this.quizData?.questions?.length||0}selectQuestion(e){e>=0&&e<this.questionCount&&(this.currentQuestionIndex=e)}static \u0275fac=function(n){return new(n||a)(k(Bt),k(kt))};static \u0275cmp=B({type:a,selectors:[["app-view-page"]],inputs:{quizData:"quizData"},features:[ve],decls:46,vars:32,consts:[[1,"preview-wrapper","rounded-2xl","overflow-hidden","relative",2,"max-height","100vh","overflow-y","auto"],[1,"drawer","drawer-end","z-10"],["id","my-drawer-5","type","checkbox",1,"drawer-toggle"],[1,"drawer-content"],["for","my-drawer-5",1,"drawer-button","btn","btn-accent","w-[80%]","flex","items-center","my-[10px]","mx-auto"],[1,"drawer-side"],["for","my-drawer-5","aria-label","close sidebar",1,"drawer-overlay"],[1,"first_screen","min-h-[100vh]","bg-cover","bg-center","relative","w-[90%]","overflow-hidden",3,"ngStyle"],[1,"relative","z-10","container","mx-auto","px-6","py-6","pb-0"],[1,"header__wrapper"],[1,"logo","w-[80px]","h-[80px]","mb-4","bg-contain","bg-no-repeat","bg-center","flex","items-center","mx-auto",2,"background-image","url('https://vi.devsmm.pro/images/image-1755812695784-421049271.png')"],[1,"text-5xl","font-bold","text-center","title","mb-8","text-[var(--main-text)]"],[1,"text-gradient-accent","text-5xl","block","mt-4","accent-text",3,"ngStyle"],["class","test_block max-w-4xl mx-auto mb-4",4,"ngIf"],["class","flex justify-center text-white mb-4",4,"ngIf"],[1,"desc","text-xl","text-center","max-w-4xl","mx-auto","mb-4","p-8","rounded-3xl","text-[var(--desc-color)]",3,"ngStyle"],[1,"font-bold","mt-2","block"],["class","text-center text-xl text-white/70 mb-16",4,"ngIf"],["class","girl flex justify-end",4,"ngIf"],["class","text-center text-gray-400",4,"ngIf"],[1,"first_screen","min-h-[100vh]","bg-cover","bg-center","relative","z-0","rounded-xl",3,"ngStyle"],[1,"logo","w-[80px]","h-[80px]","bg-contain","bg-no-repeat","bg-center","flex","items-center","mx-auto","py-4",2,"background-image","url('https://vi.devsmm.pro/images/image-1755812695784-421049271.png')"],[1,"text-4xl","font-bold","text-center","title","mb-8","text-[var(--main-text)]"],[1,"test_block","max-w-4xl","mx-auto","mb-4"],[1,"test_block__inner","relative","p-[1rem]","rounded-3xl","border","border-[var(--primary)]","shadow-2xl","bg-[var(--quiz-bg)]",3,"ngStyle"],["class","flex mx-auto mb-6 w-full h-full rounded-3xl","alt","",3,"src",4,"ngIf"],[1,"text-3xl","md:text-4xl","font-bold","text-center","mb-6","text-[var(--quiz-text)]","relative","z-10",3,"innerHTML"],[1,"test_vars__block","grid","grid-cols-2","gap-6","relative","z-10"],["class","item btn btn-lg w-full text-lg font-bold text-[var(--btn-text)] uppercase tracking-wide",3,"ngStyle",4,"ngFor","ngForOf"],["alt","",1,"flex","mx-auto","mb-6","w-full","h-full","rounded-3xl",3,"src"],[1,"item","btn","btn-lg","w-full","text-lg","font-bold","text-[var(--btn-text)]","uppercase","tracking-wide",3,"ngStyle"],[1,"flex","justify-center","text-white","mb-4"],[1,"flex","items-center","gap-2"],["class","join-item text-white btn btn-circle btn-outline",3,"btn-primary","click",4,"ngFor","ngForOf"],[1,"join-item","text-white","btn","btn-circle","btn-outline",3,"click"],[1,"text-center","text-xl","text-white/70","mb-16"],[1,"girl","flex","justify-end"],["alt","Hero \u043F\u0435\u0440\u0441\u043E\u043D\u0430\u0436",1,"",3,"src"],[1,"text-center","text-gray-400"]],template:function(n,t){n&1&&(i(0,"div",0)(1,"div",1),_(2,"input",2),i(3,"div",3)(4,"label",4),s(5,"Open page"),r()(),i(6,"div",5),_(7,"label",6),i(8,"div",7)(9,"div",8)(10,"div",9),_(11,"div",10),r(),i(12,"h1",11),s(13),_(14,"br"),i(15,"span",12),s(16),r()(),f(17,bl,6,6,"div",13)(18,El,3,1,"div",14),i(19,"p",15),s(20),_(21,"br"),i(22,"span",16),s(23),r()(),f(24,yl,2,0,"div",17),r(),f(25,Sl,2,1,"div",18)(26,Ml,1,0,"div",19),r()()(),i(27,"div",20)(28,"div",8)(29,"div",9),_(30,"div",21),r(),i(31,"h1",22),s(32),_(33,"br"),i(34,"span",12),s(35),r()(),f(36,Bl,6,6,"div",13)(37,Dl,3,1,"div",14),i(38,"p",15),s(39),_(40,"br"),i(41,"span",16),s(42),r()(),f(43,Fl,2,0,"div",17),r(),f(44,Vl,2,1,"div",18)(45,Pl,1,0,"div",19),r()()),n&2&&(l(8),d("ngStyle",ie(24,Xi,"url("+((t.quizData==null?null:t.quizData.imageBgDesk)||"https://vi.devsmm.pro/images/bg-bonanza-image-1768389304702-874388329.jpg")+")")),l(5),b(" ",(t.quizData==null?null:t.quizData.name)||"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u0432\u0438\u0437\u0430"," "),l(2),d("ngStyle",oe(26,Ji)),l(),b(" ",(t.quizData==null?null:t.quizData.grandPrize)||"\u0413\u043B\u0430\u0432\u043D\u044B\u0439 \u043F\u0440\u0438\u0437"," "),l(),d("ngIf",t.currentQuestion),l(),d("ngIf",t.hasQuestions),l(),d("ngStyle",oe(27,Ki)),l(),b(" ",(t.quizData==null?null:t.quizData.description)||"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043A\u0432\u0438\u0437\u0430 \u0438 \u0443\u0441\u043B\u043E\u0432\u0438\u044F \u0443\u0447\u0430\u0441\u0442\u0438\u044F"," "),l(3),b(" ",t.quizData==null?null:t.quizData.prizeForEveryOne," "),l(),d("ngIf",!t.hasQuestions),l(),d("ngIf",t.quizData==null?null:t.quizData.imageHero),l(),d("ngIf",!(t.quizData!=null&&t.quizData.imageHero)),l(),d("ngStyle",ie(28,Xi,"url("+((t.quizData==null?null:t.quizData.imageBgDesk)||"")+")")),l(5),b(" ",(t.quizData==null?null:t.quizData.name)||"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u0432\u0438\u0437\u0430"," "),l(2),d("ngStyle",oe(30,Ji)),l(),b(" ",(t.quizData==null?null:t.quizData.grandPrize)||"\u0413\u043B\u0430\u0432\u043D\u044B\u0439 \u043F\u0440\u0438\u0437"," "),l(),d("ngIf",t.currentQuestion),l(),d("ngIf",t.hasQuestions),l(),d("ngStyle",oe(31,Ki)),l(),b(" ",(t.quizData==null?null:t.quizData.description)||"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043A\u0432\u0438\u0437\u0430 \u0438 \u0443\u0441\u043B\u043E\u0432\u0438\u044F \u0443\u0447\u0430\u0441\u0442\u0438\u044F"," "),l(3),b(" ",t.quizData==null?null:t.quizData.prizeForEveryOne," "),l(),d("ngIf",!t.hasQuestions),l(),d("ngIf",t.quizData==null?null:t.quizData.imageHero),l(),d("ngIf",!(t.quizData!=null&&t.quizData.imageHero)))},dependencies:[H,A,zt],styles:[".btn-outline.btn-primary[_ngcontent-%COMP%]{color:#fff!important;border:1px solid!important;border-color:#00f!important}.drawer[_ngcontent-%COMP%]   .girl[_ngcontent-%COMP%]{position:absolute;right:-12%;top:35%}.drawer[_ngcontent-%COMP%]   .girl[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:850px}.drawer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{max-width:675px!important;height:100%}.collapse[_ngcontent-%COMP%]{overflow:visible!important}"],changeDetection:0})}return a})();var zl=["previewFrame"];function Ll(a,m){a&1&&(i(0,"span"),s(1,"\u{1F4E7} \u0412\u0438\u0434 \u043D\u0430 \u0434\u0435\u0441\u043A\u0442\u043E\u043F\u0435 (600px)"),r())}function Wl(a,m){a&1&&(i(0,"span"),s(1,"\u{1F4F1} \u0412\u0438\u0434 \u043D\u0430 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u043E\u043C (375px)"),r())}var rn=(()=>{class a{sanitizer;config=T({},ae);variables={name:"Nguyen",score:85,code:"123456",year:new Date().getFullYear()};html="";previewFrame;renderedHtml="";viewMode="desktop";constructor(e){this.sanitizer=e}ngAfterViewInit(){this.updatePreview()}ngOnChanges(e){(e.config||e.variables||e.html)&&this.updatePreview()}updatePreview(){let e=this.html||this.generateDefaultHtml(),n=this.replaceVariables(e);if(this.previewFrame?.nativeElement){let t=this.previewFrame.nativeElement,o=t.contentDocument||t.contentWindow?.document;o&&(o.open(),o.write(n),o.close())}this.renderedHtml=this.sanitizer.bypassSecurityTrustHtml(n)}replaceVariables(e){let n=e;return Object.entries(this.variables).forEach(([t,o])=>{let p=new RegExp(`\\{\\{${t}\\}\\}`,"g");n=n.replace(p,String(o))}),n}generateDefaultHtml(){let e=this.config;return`
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { margin: 0; padding: 0; font-family: 'Segoe UI', Arial, sans-serif; background-color: #f5f5f5; }
    * { box-sizing: border-box; }
  </style>
</head>
<body>
  <div style="max-width: 600px; margin: 20px auto; background: ${e.bgColor}; border-radius: 20px; overflow: hidden; box-shadow: 0 15px 40px rgba(0,0,0,0.1);">
    
    <!-- Header -->
    <div style="background: linear-gradient(135deg, ${e.headerBgStart} 0%, ${e.headerBgEnd} 100%); padding: 25px 20px; text-align: center;">
      <img src="${e.logoUrl}" alt="Logo" style="height: 60px;" />
    </div>

    <div style="padding: 35px 30px; color: ${e.textColor};">

      <!-- Greeting -->
      <p style="font-size: 22px; font-weight: 700; margin: 0 0 15px; text-align: center;">
        ${e.greeting}, <span style="color: ${e.primaryColor};">{{name}}</span>!
      </p>

      <!-- Title -->
      ${e.titleText?`
        <div style="font-size: 26px; font-weight: 800; color: ${e.primaryColor}; line-height: 1.3; margin: 10px 0; text-align: center;">
          ${e.titleText}
        </div>
      `:""}

      <!-- Highlight -->
      ${e.highlightText?`
        <div style="font-size: 18px; font-weight: 600; color: ${e.textColor}; background: ${e.cardBgColor}; padding: 20px; border-radius: 12px; border-left: 6px solid ${e.primaryColor}; margin: 25px 0;">
          ${e.highlightText}
        </div>
      `:""}

      <!-- Prize -->
      ${e.prizeText?`
        <div style="font-size: 17px; color: #e74c3c; background: #fff5f5; padding: 18px; border-radius: 12px; border-left: 5px solid #e74c3c; margin: 25px 0;">
          <strong>Ch\xFA \xFD!</strong> ${e.prizeText}
        </div>
      `:""}

      <!-- Description -->
      ${e.descriptionText?`
        <div style="font-size: 16px; line-height: 1.7; color: #34495e; margin: 25px 0;">
          ${e.descriptionText}
        </div>
      `:""}

      <!-- Call to Action -->
      ${e.callToAction?`
        <div style="background: #f0f2ff; padding: 25px; border-radius: 16px; text-align: center; margin: 0; border-left: 5px solid ${e.accentColor};">
          <p style="font-size: 18px; font-weight: 600; color: ${e.textColor}; margin: 0;">
            ${e.callToAction}
          </p>
        </div>
      `:""}

      <!-- Button -->
      <div style="text-align: center; margin: 40px 0;">
        <a href="${e.btnLink}" style="display: inline-block; padding: 18px 50px; background: linear-gradient(135deg, ${e.btnBgStart}, ${e.btnBgEnd}); color: ${e.btnTextColor}; font-weight: 700; font-size: 19px; border-radius: 16px; text-decoration: none; box-shadow: 0 8px 25px rgba(59, 130, 246, 0.5);">
          ${e.btnText}
        </a>
      </div>

      <!-- Footer -->
      <div style="margin-top: 50px; padding-top: 25px; border-top: 2px solid #eee; color: ${e.textSecondaryColor}; font-size: 14px; text-align: center; line-height: 1.6;">
        ${e.footerText}
        <br><br>
        \xA9 {{year}} VoteVibe. All rights reserved.
      </div>
    </div>
  </div>
</body>
</html>`.trim()}toggleViewMode(){this.viewMode=this.viewMode==="desktop"?"mobile":"desktop"}static \u0275fac=function(n){return new(n||a)(k(je))};static \u0275cmp=B({type:a,selectors:[["app-email-template-preview"]],viewQuery:function(n,t){if(n&1&&It(zl,5),n&2){let o;Dt(o=Ft())&&(t.previewFrame=o.first)}},inputs:{config:"config",variables:"variables",html:"html"},features:[ve],decls:25,vars:12,consts:[["previewFrame",""],[1,"email-preview-container"],[1,"preview-header","flex","items-center","justify-between","mb-4","p-3","bg-base-200","rounded-lg"],[1,"font-bold","text-lg","flex","items-center","gap-2"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"],["points","22,6 12,13 2,6"],[1,"flex","items-center","gap-2"],[1,"btn-group"],[1,"btn","btn-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x","2","y","3","width","20","height","14","rx","2","ry","2"],["x1","8","y1","21","x2","16","y2","21"],["x1","12","y1","17","x2","12","y2","21"],["x","5","y","2","width","14","height","20","rx","2","ry","2"],["x1","12","y1","18","x2","12.01","y2","18"],[1,"preview-wrapper"],[1,"device-frame"],["sandbox","allow-same-origin","title","Email Preview",1,"preview-iframe"],[1,"mt-4","text-center","text-sm","text-base-content/60"],[4,"ngIf"]],template:function(n,t){if(n&1){let o=S();i(0,"div",1)(1,"div",2)(2,"h3",3),y(),i(3,"svg",4),_(4,"path",5)(5,"polyline",6),r(),s(6," \u041F\u0440\u0435\u0432\u044C\u044E \u043F\u0438\u0441\u044C\u043C\u0430 "),r(),M(),i(7,"div",7)(8,"div",8)(9,"button",9),h("click",function(){return c(o),g(t.viewMode="desktop")}),y(),i(10,"svg",10),_(11,"rect",11)(12,"line",12)(13,"line",13),r()(),M(),i(14,"button",9),h("click",function(){return c(o),g(t.viewMode="mobile")}),y(),i(15,"svg",10),_(16,"rect",14)(17,"line",15),r()()()()(),M(),i(18,"div",16)(19,"div",17),_(20,"iframe",18,0),r()(),i(22,"div",19),f(23,Ll,2,0,"span",20)(24,Wl,2,0,"span",20),r()()}n&2&&(l(9),U("btn-active",t.viewMode==="desktop"),l(5),U("btn-active",t.viewMode==="mobile"),l(4),U("desktop-view",t.viewMode==="desktop")("mobile-view",t.viewMode==="mobile"),l(2),U("mobile",t.viewMode==="mobile"),l(3),d("ngIf",t.viewMode==="desktop"),l(),d("ngIf",t.viewMode==="mobile"))},dependencies:[A],styles:['.email-preview-container[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.preview-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:flex-start;padding:20px;background:linear-gradient(135deg,#667eea15,#764ba215);border-radius:16px;overflow:auto;min-height:500px}.preview-wrapper.desktop-view[_ngcontent-%COMP%]   .device-frame[_ngcontent-%COMP%]{width:100%;max-width:650px}.preview-wrapper.desktop-view[_ngcontent-%COMP%]   .preview-iframe[_ngcontent-%COMP%]{width:100%;height:800px}.preview-wrapper.mobile-view[_ngcontent-%COMP%]   .device-frame[_ngcontent-%COMP%]{width:375px;border-radius:30px;padding:10px;background:#1a1a2e;box-shadow:0 25px 50px #0000004d}.preview-wrapper.mobile-view[_ngcontent-%COMP%]   .device-frame[_ngcontent-%COMP%]:before{content:"";display:block;width:60px;height:6px;background:#333;border-radius:3px;margin:8px auto 12px}.preview-wrapper.mobile-view[_ngcontent-%COMP%]   .preview-iframe[_ngcontent-%COMP%]{width:100%;height:700px;border-radius:20px}.device-frame[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 40px #00000026;overflow:hidden}.preview-iframe[_ngcontent-%COMP%]{border:none;display:block;background:#f5f5f5}.preview-iframe.mobile[_ngcontent-%COMP%]{transform-origin:top center}.preview-header[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .btn.btn-active[_ngcontent-%COMP%]{background:#667eea;color:#fff;border-color:#667eea}.preview-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.preview-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.preview-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:4px}.preview-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}'],changeDetection:0})}return a})();function Ol(a,m){if(a&1){let e=S();i(0,"div",6)(1,"div",7)(2,"label",8)(3,"span",9),s(4,"\u{1F4E7} \u0422\u0435\u043C\u0430 \u043F\u0438\u0441\u044C\u043C\u0430 (Subject)"),r(),i(5,"span",10),tt(),s(6,"{{name}}, {{score}}"),et(),r()(),i(7,"input",11),h("input",function(t){c(e);let o=u(2);return g(o.updateConfig("subject",t.target.value))}),r()(),_(8,"div",12),i(9,"div",7)(10,"label",8)(11,"span",9),s(12,"URL \u043B\u043E\u0433\u043E\u0442\u0438\u043F\u0430"),r()(),i(13,"input",13),h("input",function(t){c(e);let o=u(2);return g(o.updateConfig("logoUrl",t.target.value))}),r()(),i(14,"div",7)(15,"label",8)(16,"span",9),s(17,"\u041F\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435"),r(),i(18,"span",10),tt(),s(19,'\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u0441\u044F ", {{name}}!"'),et(),r()(),i(20,"input",14),h("input",function(t){c(e);let o=u(2);return g(o.updateConfig("greeting",t.target.value))}),r()(),i(21,"div",7)(22,"label",8)(23,"span",9),s(24,"\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A \u0432 \u0448\u0430\u043F\u043A\u0435"),r()(),i(25,"input",15),h("input",function(t){c(e);let o=u(2);return g(o.updateConfig("titleText",t.target.value))}),r()(),i(26,"div",16)(27,"div",17)(28,"span",18),s(29,"\u{1F4CA} \u0411\u043B\u043E\u043A \u0441 \u0431\u0430\u043B\u043B\u0430\u043C\u0438"),r(),i(30,"label",19)(31,"span",20),s(32),r(),i(33,"input",21),h("change",function(){c(e);let t=u(2);return g(t.toggleBlock("showHighlight"))}),r()()(),i(34,"div")(35,"div",7)(36,"label",8)(37,"span",20),s(38,"\u0422\u0435\u043A\u0441\u0442 \u043F\u043E\u0434 \u0431\u0430\u043B\u043B\u0430\u043C\u0438"),r(),i(39,"span",22),tt(),s(40,"{{score}} = \u0431\u0430\u043B\u043B\u044B"),et(),r()(),i(41,"textarea",23),h("input",function(t){c(e);let o=u(2);return g(o.updateConfig("highlightText",t.target.value))}),r()()()(),i(42,"div",16)(43,"div",17)(44,"span",18),s(45,"\u{1F381} \u0411\u043B\u043E\u043A \u0441 \u043F\u0440\u0438\u0437\u043E\u043C"),r(),i(46,"label",19)(47,"span",20),s(48),r(),i(49,"input",24),h("change",function(){c(e);let t=u(2);return g(t.toggleBlock("showPrize"))}),r()()(),i(50,"div")(51,"div",7)(52,"label",8)(53,"span",20),s(54,"\u0422\u0435\u043A\u0441\u0442 \u043E \u043F\u0440\u0438\u0437\u0435"),r()(),i(55,"textarea",25),h("input",function(t){c(e);let o=u(2);return g(o.updateConfig("prizeText",t.target.value))}),r()()()(),i(56,"div",16)(57,"div",17)(58,"span",18),s(59,"\u{1F4DD} \u0411\u043B\u043E\u043A \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u044F"),r(),i(60,"label",19)(61,"span",20),s(62),r(),i(63,"input",26),h("change",function(){c(e);let t=u(2);return g(t.toggleBlock("showDescription"))}),r()()(),i(64,"div")(65,"div",7)(66,"label",8)(67,"span",20),s(68,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"),r()(),i(69,"textarea",27),h("input",function(t){c(e);let o=u(2);return g(o.updateConfig("descriptionText",t.target.value))}),r()()()(),i(70,"div",16)(71,"div",17)(72,"span",18),s(73,"\u{1F4E2} \u041F\u0440\u0438\u0437\u044B\u0432 \u043A \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044E"),r(),i(74,"label",19)(75,"span",20),s(76),r(),i(77,"input",28),h("change",function(){c(e);let t=u(2);return g(t.toggleBlock("showCTA"))}),r()()(),i(78,"div")(79,"div",7)(80,"label",8)(81,"span",20),s(82,"\u0422\u0435\u043A\u0441\u0442 \u043F\u0440\u0438\u0437\u044B\u0432\u0430"),r()(),i(83,"input",29),h("input",function(t){c(e);let o=u(2);return g(o.updateConfig("callToAction",t.target.value))}),r()()()(),i(84,"div",16)(85,"div",17)(86,"span",18),s(87,"\u{1F518} \u041A\u043D\u043E\u043F\u043A\u0430"),r(),i(88,"label",19)(89,"span",20),s(90),r(),i(91,"input",30),h("change",function(){c(e);let t=u(2);return g(t.toggleBlock("showButton"))}),r()()(),i(92,"div")(93,"div",31)(94,"div",7)(95,"label",8)(96,"span",20),s(97,"\u0422\u0435\u043A\u0441\u0442 \u043A\u043D\u043E\u043F\u043A\u0438"),r()(),i(98,"input",32),h("input",function(t){c(e);let o=u(2);return g(o.updateConfig("btnText",t.target.value))}),r()(),i(99,"div",7)(100,"label",8)(101,"span",20),s(102,"\u0421\u0441\u044B\u043B\u043A\u0430"),r()(),i(103,"input",33),h("input",function(t){c(e);let o=u(2);return g(o.updateConfig("btnLink",t.target.value))}),r()()()()(),i(104,"div",7)(105,"label",8)(106,"span",9),s(107,"\u0422\u0435\u043A\u0441\u0442 \u0444\u0443\u0442\u0435\u0440\u0430"),r()(),i(108,"textarea",34),h("input",function(t){c(e);let o=u(2);return g(o.updateConfig("footerText",t.target.value))}),r()()()}if(a&2){let e=u().ngIf,n=u();l(7),d("value",e.subject)("placeholder",n.subjectPlaceholder),l(6),d("value",e.logoUrl),l(7),d("value",e.greeting),l(5),d("value",e.titleText),l(7),w(e.showHighlight?"\u0412\u043A\u043B":"\u0412\u044B\u043A\u043B"),l(),d("checked",e.showHighlight),l(),U("opacity-50",!e.showHighlight)("pointer-events-none",!e.showHighlight),l(7),d("value",e.highlightText)("placeholder",n.scorePlaceholder),l(7),w(e.showPrize?"\u0412\u043A\u043B":"\u0412\u044B\u043A\u043B"),l(),d("checked",e.showPrize),l(),U("opacity-50",!e.showPrize)("pointer-events-none",!e.showPrize),l(5),d("value",e.prizeText),l(7),w(e.showDescription?"\u0412\u043A\u043B":"\u0412\u044B\u043A\u043B"),l(),d("checked",e.showDescription),l(),U("opacity-50",!e.showDescription)("pointer-events-none",!e.showDescription),l(5),d("value",e.descriptionText),l(7),w(e.showCTA?"\u0412\u043A\u043B":"\u0412\u044B\u043A\u043B"),l(),d("checked",e.showCTA),l(),U("opacity-50",!e.showCTA)("pointer-events-none",!e.showCTA),l(5),d("value",e.callToAction),l(7),w(e.showButton?"\u0412\u043A\u043B":"\u0412\u044B\u043A\u043B"),l(),d("checked",e.showButton),l(),U("opacity-50",!e.showButton)("pointer-events-none",!e.showButton),l(6),d("value",e.btnText),l(5),d("value",e.btnLink),l(5),d("value",e.footerText)}}function Nl(a,m){if(a&1){let e=S();i(0,"div",35)(1,"div",16)(2,"h4",36),s(3,"\u{1F51D} \u0428\u0430\u043F\u043A\u0430 (\u0433\u0440\u0430\u0434\u0438\u0435\u043D\u0442)"),r(),i(4,"div",37)(5,"div",7)(6,"label",8)(7,"span",20),s(8,"\u041D\u0430\u0447\u0430\u043B\u043E"),r()(),i(9,"div",38)(10,"input",39),h("input",function(t){c(e);let o=u(2);return g(o.updateColor("headerBgStart",t))}),r(),i(11,"span",40),s(12),r()()(),i(13,"div",7)(14,"label",8)(15,"span",20),s(16,"\u041A\u043E\u043D\u0435\u0446"),r()(),i(17,"div",38)(18,"input",39),h("input",function(t){c(e);let o=u(2);return g(o.updateColor("headerBgEnd",t))}),r(),i(19,"span",40),s(20),r()()()()(),i(21,"div",16)(22,"h4",36),s(23,"\u{1F3A8} \u041E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u0446\u0432\u0435\u0442\u0430"),r(),i(24,"div",41)(25,"div",7)(26,"label",8)(27,"span",20),s(28,"\u041E\u0441\u043D\u043E\u0432\u043D\u043E\u0439"),r()(),i(29,"div",38)(30,"input",39),h("input",function(t){c(e);let o=u(2);return g(o.updateColor("primaryColor",t))}),r(),i(31,"span",40),s(32),r()()(),i(33,"div",7)(34,"label",8)(35,"span",20),s(36,"\u0412\u0442\u043E\u0440\u0438\u0447\u043D\u044B\u0439"),r()(),i(37,"div",38)(38,"input",39),h("input",function(t){c(e);let o=u(2);return g(o.updateColor("secondaryColor",t))}),r(),i(39,"span",40),s(40),r()()(),i(41,"div",7)(42,"label",8)(43,"span",20),s(44,"\u0410\u043A\u0446\u0435\u043D\u0442"),r()(),i(45,"div",38)(46,"input",39),h("input",function(t){c(e);let o=u(2);return g(o.updateColor("accentColor",t))}),r(),i(47,"span",40),s(48),r()()()()(),i(49,"div",16)(50,"h4",36),s(51,"\u{1F4DD} \u0426\u0432\u0435\u0442\u0430 \u0442\u0435\u043A\u0441\u0442\u0430"),r(),i(52,"div",37)(53,"div",7)(54,"label",8)(55,"span",20),s(56,"\u041E\u0441\u043D\u043E\u0432\u043D\u043E\u0439 \u0442\u0435\u043A\u0441\u0442"),r()(),i(57,"div",38)(58,"input",39),h("input",function(t){c(e);let o=u(2);return g(o.updateColor("textColor",t))}),r(),i(59,"span",40),s(60),r()()(),i(61,"div",7)(62,"label",8)(63,"span",20),s(64,"\u0412\u0442\u043E\u0440\u0438\u0447\u043D\u044B\u0439 \u0442\u0435\u043A\u0441\u0442"),r()(),i(65,"div",38)(66,"input",39),h("input",function(t){c(e);let o=u(2);return g(o.updateColor("textSecondaryColor",t))}),r(),i(67,"span",40),s(68),r()()()()(),i(69,"div",16)(70,"h4",36),s(71,"\u{1F518} \u041A\u043D\u043E\u043F\u043A\u0430 (\u0433\u0440\u0430\u0434\u0438\u0435\u043D\u0442)"),r(),i(72,"div",41)(73,"div",7)(74,"label",8)(75,"span",20),s(76,"\u041D\u0430\u0447\u0430\u043B\u043E"),r()(),i(77,"div",38)(78,"input",39),h("input",function(t){c(e);let o=u(2);return g(o.updateColor("btnBgStart",t))}),r(),i(79,"span",40),s(80),r()()(),i(81,"div",7)(82,"label",8)(83,"span",20),s(84,"\u041A\u043E\u043D\u0435\u0446"),r()(),i(85,"div",38)(86,"input",39),h("input",function(t){c(e);let o=u(2);return g(o.updateColor("btnBgEnd",t))}),r(),i(87,"span",40),s(88),r()()(),i(89,"div",7)(90,"label",8)(91,"span",20),s(92,"\u0422\u0435\u043A\u0441\u0442"),r()(),i(93,"div",38)(94,"input",39),h("input",function(t){c(e);let o=u(2);return g(o.updateColor("btnTextColor",t))}),r(),i(95,"span",40),s(96),r()()()()(),i(97,"div",16)(98,"h4",36),s(99,"\u{1F5BC}\uFE0F \u0424\u043E\u043D"),r(),i(100,"div",37)(101,"div",7)(102,"label",8)(103,"span",20),s(104,"\u041E\u0441\u043D\u043E\u0432\u043D\u043E\u0439 \u0444\u043E\u043D"),r()(),i(105,"div",38)(106,"input",39),h("input",function(t){c(e);let o=u(2);return g(o.updateColor("bgColor",t))}),r(),i(107,"span",40),s(108),r()()(),i(109,"div",7)(110,"label",8)(111,"span",20),s(112,"\u0424\u043E\u043D \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438"),r()(),i(113,"div",38)(114,"input",39),h("input",function(t){c(e);let o=u(2);return g(o.updateColor("cardBgColor",t))}),r(),i(115,"span",40),s(116),r()()()()()()}if(a&2){let e=u().ngIf;l(10),d("value",e.headerBgStart),l(2),w(e.headerBgStart),l(6),d("value",e.headerBgEnd),l(2),w(e.headerBgEnd),l(10),d("value",e.primaryColor),l(2),w(e.primaryColor),l(6),d("value",e.secondaryColor),l(2),w(e.secondaryColor),l(6),d("value",e.accentColor),l(2),w(e.accentColor),l(10),d("value",e.textColor),l(2),w(e.textColor),l(6),d("value",e.textSecondaryColor),l(2),w(e.textSecondaryColor),l(10),d("value",e.btnBgStart),l(2),w(e.btnBgStart),l(6),d("value",e.btnBgEnd),l(2),w(e.btnBgEnd),l(6),d("value",e.btnTextColor),l(2),w(e.btnTextColor),l(10),d("value",e.bgColor),l(2),w(e.bgColor),l(6),d("value",e.cardBgColor),l(2),w(e.cardBgColor)}}function jl(a,m){if(a&1){let e=S();i(0,"div",6)(1,"div",16)(2,"h4",42),s(3,"\u{1F50D} \u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0434\u043B\u044F \u043F\u0440\u0435\u0432\u044C\u044E"),r(),i(4,"div",37)(5,"div",7)(6,"label",8)(7,"span",20),s(8,"\u0418\u043C\u044F"),r()(),i(9,"input",43),C("ngModelChange",function(t){c(e);let o=u(2);return v(o.previewVariables.name,t)||(o.previewVariables.name=t),g(t)}),r()(),i(10,"div",7)(11,"label",8)(12,"span",20),s(13,"\u0411\u0430\u043B\u043B\u044B"),r()(),i(14,"input",44),C("ngModelChange",function(t){c(e);let o=u(2);return v(o.previewVariables.score,t)||(o.previewVariables.score=t),g(t)}),r()()()(),i(15,"div",16)(16,"h4",42),s(17,"\u26A1 \u0411\u044B\u0441\u0442\u0440\u043E\u0435 \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0431\u043B\u043E\u043A\u0430\u043C\u0438"),r(),i(18,"div",45)(19,"button",46),h("click",function(){c(e);let t=u(2);return g(t.toggleBlock("showHighlight"))}),s(20," \u{1F4CA} \u0411\u0430\u043B\u043B\u044B "),r(),i(21,"button",46),h("click",function(){c(e);let t=u(2);return g(t.toggleBlock("showPrize"))}),s(22," \u{1F381} \u041F\u0440\u0438\u0437 "),r(),i(23,"button",46),h("click",function(){c(e);let t=u(2);return g(t.toggleBlock("showDescription"))}),s(24," \u{1F4DD} \u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 "),r(),i(25,"button",46),h("click",function(){c(e);let t=u(2);return g(t.toggleBlock("showCTA"))}),s(26," \u{1F4E2} CTA "),r(),i(27,"button",46),h("click",function(){c(e);let t=u(2);return g(t.toggleBlock("showButton"))}),s(28," \u{1F518} \u041A\u043D\u043E\u043F\u043A\u0430 "),r()()(),i(29,"div",47)(30,"button",48),h("click",function(){c(e);let t=u(2);return g(t.resetToDefault())}),y(),i(31,"svg",49),_(32,"path",50)(33,"path",51),r(),s(34," \u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u043A \u0434\u0435\u0444\u043E\u043B\u0442\u043D\u044B\u043C "),r()()()}if(a&2){let e=u().ngIf,n=u();l(9),x("ngModel",n.previewVariables.name),l(5),x("ngModel",n.previewVariables.score),l(5),U("btn-success",e.showHighlight)("btn-ghost",!e.showHighlight),l(2),U("btn-warning",e.showPrize)("btn-ghost",!e.showPrize),l(2),U("btn-info",e.showDescription)("btn-ghost",!e.showDescription),l(2),U("btn-accent",e.showCTA)("btn-ghost",!e.showCTA),l(2),U("btn-primary",e.showButton)("btn-ghost",!e.showButton)}}function Hl(a,m){if(a&1){let e=S();i(0,"div",1)(1,"div",2)(2,"a",3),h("click",function(){c(e);let t=u();return g(t.setActiveSection("content"))}),s(3," \u{1F4DD} \u041A\u043E\u043D\u0442\u0435\u043D\u0442 "),r(),i(4,"a",3),h("click",function(){c(e);let t=u();return g(t.setActiveSection("colors"))}),s(5," \u{1F3A8} \u0426\u0432\u0435\u0442\u0430 "),r(),i(6,"a",3),h("click",function(){c(e);let t=u();return g(t.setActiveSection("advanced"))}),s(7," \u2699\uFE0F \u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u043D\u044B\u0435 "),r()(),f(8,Ol,109,43,"div",4)(9,Nl,117,24,"div",5)(10,jl,35,22,"div",4),r()}if(a&2){let e=u();l(2),U("tab-active",e.activeSection==="content"),l(2),U("tab-active",e.activeSection==="colors"),l(2),U("tab-active",e.activeSection==="advanced"),l(2),d("ngIf",e.activeSection==="content"),l(),d("ngIf",e.activeSection==="colors"),l(),d("ngIf",e.activeSection==="advanced")}}var an=(()=>{class a{cdr;quizName="";grandPrize="";prizeForEveryOne="";initialConfig=null;mode="create";configChange=new G;htmlChange=new G;config$=new Le(T({},ae));subjectPlaceholder="Ch\xFAc m\u1EEBng {{name}}! B\u1EA1n \u0111\u1EA1t {{score}}% \u0111i\u1EC3m";scorePlaceholder="B\u1EA1n \u0111\xE3 \u0111\u1EA1t \u0111\u01B0\u1EE3c {{score}}% \u0111i\u1EC3m!";previewVariables={name:"Nguyen",score:85,code:"123456",quizName:"Quiz Demo",grandPrize:"1000 Freespins",prizeForEveryOne:"+10 FS",year:new Date().getFullYear()};activeSection="content";constructor(e){this.cdr=e}ngOnInit(){console.log("[Editor] ngOnInit, mode:",this.mode),console.log("[Editor] ngOnInit, initialConfig:",this.initialConfig),this.initConfig()}ngOnChanges(e){if(console.log("[Editor] ngOnChanges called"),(e.quizName||e.grandPrize||e.prizeForEveryOne)&&this.updatePreviewVariables(),e.initialConfig&&(console.log("[Editor] initialConfig changed:"),console.log("[Editor]   previousValue:",e.initialConfig.previousValue),console.log("[Editor]   currentValue:",e.initialConfig.currentValue),console.log("[Editor]   firstChange:",e.initialConfig.firstChange)),e.initialConfig&&this.initialConfig){let n=T(T({},ae),this.initialConfig);console.log("[Editor] Applying new config:",n),console.log("[Editor]   greeting:",n.greeting),console.log("[Editor]   titleText:",n.titleText),console.log("[Editor]   logoUrl:",n.logoUrl),this.config$.next(n),this.emitChanges(n),this.cdr.markForCheck()}}initConfig(){if(console.log("[Editor] initConfig, mode:",this.mode),this.mode==="edit"){this.initialConfig?(console.log("[Editor] initConfig: edit mode with initialConfig"),this.config$.next(T(T({},ae),this.initialConfig))):(console.log("[Editor] initConfig: edit mode WITHOUT initialConfig, using defaults"),this.config$.next(T({},ae)));return}let e=this.initialConfig?T(T({},ae),this.initialConfig):T({},ae);console.log("[Editor] initConfig: create mode, config:",e),this.config$.next(e),this.emitChanges(e)}updatePreviewVariables(){this.previewVariables=V(T({},this.previewVariables),{quizName:this.quizName||"Quiz Demo",grandPrize:this.grandPrize||"1000 Freespins",prizeForEveryOne:this.prizeForEveryOne||"+10 FS"})}updateConfig(e,n){let t=this.config$.value,o=V(T({},t),{[e]:n});this.config$.next(o),this.emitChanges(o)}updateConfigBool(e,n){let t=this.config$.value,o=V(T({},t),{[e]:n});this.config$.next(o),this.emitChanges(o)}updateColor(e,n){let t=n.target;t?.value&&this.updateConfig(e,t.value)}emitChanges(e){this.configChange.emit(e),this.htmlChange.emit(this.generateHtml(e))}toggleBlock(e){let n=this.config$.value,t=V(T({},n),{[e]:!n[e]});this.config$.next(t),this.emitChanges(t)}generateHtml(e){return`<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz Result</title>
  <style>
    body { font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f6f9; margin: 0; padding: 0; color: #333; }
    .container { max-width: 600px; margin: 20px auto; background-color: ${e.bgColor}; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    .header { background: linear-gradient(135deg, ${e.headerBgStart} 0%, ${e.headerBgEnd} 100%); color: white; padding: 30px 20px; text-align: center; }
    .header img { height: 60px; margin-bottom: 15px; }
    .header h1 { margin: 0; font-size: 24px; font-weight: 600; }
    .content { padding: 30px 25px; }
    .greeting { font-size: 18px; margin-bottom: 20px; color: ${e.textColor}; }
    .highlight-box { background: ${e.cardBgColor}; padding: 20px; border-radius: 10px; text-align: center; margin: 20px 0; border-left: 5px solid ${e.primaryColor}; }
    .score { font-size: 32px; font-weight: 700; color: ${e.primaryColor}; margin: 8px 0; }
    .prize-box { font-size: 17px; color: #e74c3c; background: #fff5f5; padding: 18px; border-radius: 12px; border-left: 5px solid #e74c3c; margin: 25px 0; }
    .description { font-size: 16px; line-height: 1.7; color: #34495e; margin: 25px 0; }
    .cta-box { background: #f0f2ff; padding: 25px; border-radius: 16px; text-align: center; margin: 25px 0; border-left: 5px solid ${e.accentColor}; }
    .btn { display: inline-block; padding: 18px 50px; background: linear-gradient(135deg, ${e.btnBgStart}, ${e.btnBgEnd}); color: ${e.btnTextColor}; font-weight: 700; font-size: 19px; border-radius: 16px; text-decoration: none; box-shadow: 0 8px 25px rgba(59, 130, 246, 0.5); }
    .footer { background-color: #f8f9fa; padding: 20px; text-align: center; font-size: 14px; color: ${e.textSecondaryColor}; }
    .footer a { color: ${e.primaryColor}; text-decoration: none; }
    @media (max-width: 480px) { .container { margin: 10px; } .header { padding: 20px 15px; } .content { padding: 20px 15px; } }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <img src="${e.logoUrl}" alt="Logo" />
      <h1>${e.titleText||"Ch\xFAc m\u1EEBng b\u1EA1n!"}</h1>
    </div>

    <div class="content">
      <p class="greeting">${e.greeting}, <strong>{{name}}</strong>! {{quizTitle}}</p>

      ${e.showHighlight?`
      <div class="highlight-box">
        <div>\u0110i\u1EC3m s\u1ED1 c\u1EE7a b\u1EA1n</div>
        <div class="score">{{score}}%</div>
        <div>${e.highlightText}</div>
      </div>
      `:""}

      ${e.showPrize&&e.prizeText?`
      <div class="prize-box">
        <strong>Ch\xFA \xFD!</strong> ${e.prizeText}
      </div>
      `:""}

      ${e.showDescription&&e.descriptionText?`
      <div class="description">${e.descriptionText}</div>
      `:""}

      ${e.showCTA&&e.callToAction?`
      <div class="cta-box">
        <p style="margin: 0; font-weight: 600;">${e.callToAction}</p>
      </div>
      `:""}

      ${e.showButton?`
      <div style="text-align: center; margin: 40px 0;">
        <a href="${e.btnLink}" class="btn">${e.btnText}</a>
      </div>
      `:""}
    </div>

    <div class="footer">
      <p>${e.footerText}</p>
      <p>&copy; {{year}} VoteVibe. All rights reserved.</p>
    </div>
  </div>
</body>
</html>`}resetToDefault(){confirm("\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0432\u0441\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043A \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F\u043C \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E?")&&(this.config$.next(T({},ae)),this.emitChanges(ae),this.cdr.markForCheck())}setActiveSection(e){this.activeSection=e,this.cdr.markForCheck()}static \u0275fac=function(n){return new(n||a)(k(ce))};static \u0275cmp=B({type:a,selectors:[["app-quiz-email-template-editor"]],inputs:{quizName:"quizName",grandPrize:"grandPrize",prizeForEveryOne:"prizeForEveryOne",initialConfig:"initialConfig",mode:"mode"},outputs:{configChange:"configChange",htmlChange:"htmlChange"},features:[ve],decls:2,vars:3,consts:[["class","email-editor-container",4,"ngIf"],[1,"email-editor-container"],[1,"tabs","tabs-boxed","bg-base-200","mb-4"],[1,"tab",3,"click"],["class","space-y-4",4,"ngIf"],["class","space-y-6",4,"ngIf"],[1,"space-y-4"],[1,"form-control"],[1,"label"],[1,"label-text","font-medium"],[1,"label-text-alt","text-info"],["type","text",1,"input","input-bordered","w-full","input-primary",3,"input","value","placeholder"],[1,"divider"],["type","url","placeholder","https://...",1,"input","input-bordered","w-full",3,"input","value"],["type","text","placeholder","Xin ch\xE0o",1,"input","input-bordered","w-full",3,"input","value"],["type","text","placeholder","Ch\xFAc m\u1EEBng b\u1EA1n!",1,"input","input-bordered","w-full",3,"input","value"],[1,"card","bg-base-200","p-4"],[1,"flex","items-center","justify-between","mb-3"],[1,"font-medium"],[1,"label","cursor-pointer","gap-2"],[1,"label-text","text-sm"],["type","checkbox",1,"toggle","toggle-success","toggle-sm",3,"change","checked"],[1,"label-text-alt","text-info","text-xs"],[1,"textarea","textarea-bordered","w-full","h-16","text-sm",3,"input","value","placeholder"],["type","checkbox",1,"toggle","toggle-warning","toggle-sm",3,"change","checked"],["placeholder","B\u1EA1n nh\u1EADn \u0111\u01B0\u1EE3c ph\u1EA7n th\u01B0\u1EDFng \u0111\u1EB7c bi\u1EC7t!",1,"textarea","textarea-bordered","w-full","h-16","text-sm",3,"input","value"],["type","checkbox",1,"toggle","toggle-info","toggle-sm",3,"change","checked"],["placeholder","C\u1EA3m \u01A1n b\u1EA1n \u0111\xE3 tham gia...",1,"textarea","textarea-bordered","w-full","h-20","text-sm",3,"input","value"],["type","checkbox",1,"toggle","toggle-accent","toggle-sm",3,"change","checked"],["type","text","placeholder","Nh\u1EADn ph\u1EA7n th\u01B0\u1EDFng c\u1EE7a b\u1EA1n ngay!",1,"input","input-bordered","input-sm","w-full",3,"input","value"],["type","checkbox",1,"toggle","toggle-primary","toggle-sm",3,"change","checked"],[1,"grid","grid-cols-2","gap-3"],["type","text","placeholder","Nh\u1EADn th\u01B0\u1EDFng",1,"input","input-bordered","input-sm","w-full",3,"input","value"],["type","url","placeholder","https://...",1,"input","input-bordered","input-sm","w-full",3,"input","value"],["placeholder","C\u1EA3m \u01A1n b\u1EA1n \u0111\xE3 tham gia!",1,"textarea","textarea-bordered","w-full","h-16",3,"input","value"],[1,"space-y-6"],[1,"font-bold","mb-4","text-primary"],[1,"grid","grid-cols-2","gap-4"],[1,"flex","items-center","gap-2"],["type","color",1,"w-10","h-10","rounded","cursor-pointer","border",3,"input","value"],[1,"text-xs","font-mono"],[1,"grid","grid-cols-3","gap-4"],[1,"font-bold","mb-4"],["type","text",1,"input","input-bordered","input-sm","w-full",3,"ngModelChange","ngModel"],["type","number",1,"input","input-bordered","input-sm","w-full",3,"ngModelChange","ngModel"],[1,"flex","flex-wrap","gap-2"],[1,"btn","btn-sm",3,"click"],[1,"flex","justify-center","mt-6"],[1,"btn","btn-outline","btn-error","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"],["d","M3 3v5h5"]],template:function(n,t){n&1&&(f(0,Hl,11,9,"div",0),P(1,"async")),n&2&&d("ngIf",Ee(1,1,t.config$))},dependencies:[A,Y,st,q,Q,Ne],styles:[".email-editor-container[_ngcontent-%COMP%]{max-height:calc(100vh - 200px);overflow-y:auto;padding-right:8px}.email-editor-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.email-editor-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.email-editor-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.email-editor-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.form-control[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{padding-bottom:4px}.form-control[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{font-weight:500}input[type=color][_ngcontent-%COMP%]{-webkit-appearance:none;border:2px solid #e2e8f0;padding:0}input[type=color][_ngcontent-%COMP%]::-webkit-color-swatch-wrapper{padding:2px}input[type=color][_ngcontent-%COMP%]::-webkit-color-swatch{border:none;border-radius:4px}.form-control[_ngcontent-%COMP%]{position:relative}.card[_ngcontent-%COMP%]{border:1px solid rgba(99,102,241,.1)}code[_ngcontent-%COMP%]{font-family:Fira Code,Monaco,monospace}"],changeDetection:0})}return a})();function ql(a,m){a&1&&(i(0,"span",23),s(1,"\u0438\u0437\u043C\u0435\u043D\u0435\u043D\u043E"),r())}function Ql(a,m){a&1&&(y(),i(0,"svg",24),_(1,"line",10)(2,"polyline",25),r())}function Rl(a,m){if(a&1){let e=S();se(0),i(1,"button",17),h("click",function(){let t=c(e).index,o=u(2);return g(o.selectStep(t))}),i(2,"div",18),s(3),r(),i(4,"div",19),s(5),r(),i(6,"div",20),s(7),P(8,"slice"),r(),f(9,ql,2,0,"span",21),r(),f(10,Ql,3,0,"svg",22),ue()}if(a&2){let e=m.$implicit,n=m.index,t=m.last,o=u(2);l(),U("active",o.activeStepIndex===n)("bg-primary",o.activeStepIndex===n)("text-white",o.activeStepIndex===n)("bg-base-200",o.activeStepIndex!==n),l(2),w(e.step),l(2),w(e.delayLabel),l(),d("title",e.subject),l(),Se(" ",ot(8,15,e.subject,0,12),"",e.subject.length>12?"...":""," "),l(2),d("ngIf",e.isDirty),l(),d("ngIf",!t)}}function Gl(a,m){a&1&&(i(0,"span",38),s(1,"\u0438\u0437\u043C\u0435\u043D\u0435\u043D\u043E"),r())}function Yl(a,m){if(a&1){let e=S();i(0,"button",39),h("click",function(t){c(e);let o=u().index,p=u(2);return t.stopPropagation(),g(p.removeStep(o))}),y(),i(1,"svg",40),_(2,"polyline",41)(3,"path",42),r()()}if(a&2){let e=u().$implicit;U("text-white",e.isExpanded)}}function Xl(a,m){if(a&1&&(i(0,"option",63),s(1),r()),a&2){let e=m.$implicit;d("value",e.minutes),l(),b(" ",e.label," ")}}function Jl(a,m){if(a&1){let e=S();i(0,"div",43)(1,"div",44)(2,"div",45)(3,"label",46)(4,"span",47),s(5,"\u0422\u0435\u043C\u0430 \u043F\u0438\u0441\u044C\u043C\u0430"),r()(),i(6,"input",48),h("input",function(t){c(e);let o=u().index,p=u(2);return g(p.updateStepSubject(o,t.target.value))}),r()(),i(7,"div",45)(8,"label",46)(9,"span",47),s(10,"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u0447\u0435\u0440\u0435\u0437"),r()(),i(11,"select",49),h("change",function(t){c(e);let o=u().index,p=u(2);return g(p.updateStepDelay(o,+t.target.value))}),f(12,Xl,2,2,"option",50),r()()(),i(13,"div",51)(14,"a",52),s(15,"\u{1F4DD} \u041A\u043E\u043D\u0442\u0435\u043D\u0442"),r(),i(16,"a",53),s(17,"\u{1F3A8} \u0426\u0432\u0435\u0442\u0430"),r()(),i(18,"div",54)(19,"div",45)(20,"label",46)(21,"span",55),s(22,"\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A"),r()(),i(23,"input",56),h("input",function(t){c(e);let o=u().index,p=u(2);return g(p.updateStepConfig(o,"titleText",t.target.value))}),r()(),i(24,"div",45)(25,"label",46)(26,"span",55),s(27,"\u0412\u044B\u0434\u0435\u043B\u0435\u043D\u043D\u044B\u0439 \u0431\u043B\u043E\u043A"),r()(),i(28,"textarea",57),h("input",function(t){c(e);let o=u().index,p=u(2);return g(p.updateStepConfig(o,"highlightText",t.target.value))}),r()(),i(29,"div",45)(30,"label",46)(31,"span",55),s(32,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"),r()(),i(33,"textarea",57),h("input",function(t){c(e);let o=u().index,p=u(2);return g(p.updateStepConfig(o,"descriptionText",t.target.value))}),r()(),i(34,"div",45)(35,"label",46)(36,"span",55),s(37,"\u041F\u0440\u0438\u0437\u044B\u0432 \u043A \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044E"),r()(),i(38,"input",56),h("input",function(t){c(e);let o=u().index,p=u(2);return g(p.updateStepConfig(o,"callToAction",t.target.value))}),r()(),i(39,"div",58)(40,"div",45)(41,"label",46)(42,"span",55),s(43,"\u0422\u0435\u043A\u0441\u0442 \u043A\u043D\u043E\u043F\u043A\u0438"),r()(),i(44,"input",56),h("input",function(t){c(e);let o=u().index,p=u(2);return g(p.updateStepConfig(o,"btnText",t.target.value))}),r()(),i(45,"div",45)(46,"label",46)(47,"span",55),s(48,"\u0421\u0441\u044B\u043B\u043A\u0430 \u043A\u043D\u043E\u043F\u043A\u0438"),r()(),i(49,"input",59),h("input",function(t){c(e);let o=u().index,p=u(2);return g(p.updateStepConfig(o,"btnLink",t.target.value))}),r()()()(),i(50,"div",60)(51,"div",45)(52,"label",46)(53,"span",61),s(54,"\u041E\u0441\u043D\u043E\u0432\u043D\u043E\u0439 \u0446\u0432\u0435\u0442"),r()(),i(55,"input",62),h("input",function(t){c(e);let o=u().index,p=u(2);return g(p.updateStepColor(o,"primaryColor",t))}),r()(),i(56,"div",45)(57,"label",46)(58,"span",61),s(59,"\u0428\u0430\u043F\u043A\u0430 (\u043D\u0430\u0447\u0430\u043B\u043E)"),r()(),i(60,"input",62),h("input",function(t){c(e);let o=u().index,p=u(2);return g(p.updateStepColor(o,"headerBgStart",t))}),r()(),i(61,"div",45)(62,"label",46)(63,"span",61),s(64,"\u0428\u0430\u043F\u043A\u0430 (\u043A\u043E\u043D\u0435\u0446)"),r()(),i(65,"input",62),h("input",function(t){c(e);let o=u().index,p=u(2);return g(p.updateStepColor(o,"headerBgEnd",t))}),r()(),i(66,"div",45)(67,"label",46)(68,"span",61),s(69,"\u041A\u043D\u043E\u043F\u043A\u0430"),r()(),i(70,"input",62),h("input",function(t){c(e);let o=u().index,p=u(2);return g(p.updateStepColor(o,"btnBgStart",t))}),r()()()()}if(a&2){let e=u().$implicit,n=u(2);l(6),d("value",e.subject),l(5),d("value",e.delayMinutes),l(),d("ngForOf",n.delayPresets),l(11),d("value",e.config.titleText),l(5),d("value",e.config.highlightText),l(5),d("value",e.config.descriptionText),l(5),d("value",e.config.callToAction),l(6),d("value",e.config.btnText),l(5),d("value",e.config.btnLink),l(6),d("value",e.config.primaryColor),l(5),d("value",e.config.headerBgStart),l(5),d("value",e.config.headerBgEnd),l(5),d("value",e.config.btnBgStart)}}function Kl(a,m){if(a&1){let e=S();i(0,"div",26)(1,"div",27),h("click",function(){let t=c(e).index,o=u(2);return g(o.toggleStep(t))}),i(2,"div",28)(3,"div",29),s(4),r(),i(5,"div")(6,"div",30),s(7),r(),i(8,"div",31),s(9),r()()(),i(10,"div",32),f(11,Gl,2,0,"span",33)(12,Yl,4,2,"button",34),y(),i(13,"svg",35),_(14,"polyline",36),r()()(),f(15,Jl,71,13,"div",37),r()}if(a&2){let e=m.$implicit,n=u().ngIf;U("border-primary",e.isExpanded)("shadow-lg",e.isExpanded),l(),U("bg-primary",e.isExpanded)("text-white",e.isExpanded)("bg-base-200",!e.isExpanded),l(2),U("bg-white",e.isExpanded)("text-primary",e.isExpanded)("bg-primary",!e.isExpanded)("text-white",!e.isExpanded),l(),b(" ",e.step," "),l(3),w(e.subject||"\u041F\u0438\u0441\u044C\u043C\u043E #"+e.step),l(2),b("\u0427\u0435\u0440\u0435\u0437 ",e.delayLabel,""),l(2),d("ngIf",e.isDirty),l(),d("ngIf",n.length>1),l(),U("rotate-180",e.isExpanded),l(2),d("ngIf",e.isExpanded)}}function Zl(a,m){if(a&1){let e=S();i(0,"div",64),y(),i(1,"svg",65),_(2,"path",5)(3,"polyline",6),r(),M(),i(4,"p",66),s(5,"\u041D\u0435\u0442 \u043F\u0438\u0441\u0435\u043C \u0432 \u0446\u0435\u043F\u043E\u0447\u043A\u0435"),r(),i(6,"button",67),h("click",function(){c(e);let t=u(2);return g(t.addStep())}),s(7," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435 \u043F\u0438\u0441\u044C\u043C\u043E "),r()()}}function es(a,m){if(a&1){let e=S();i(0,"div",1)(1,"div",2)(2,"h3",3),y(),i(3,"svg",4),_(4,"path",5)(5,"polyline",6),r(),s(6),r(),M(),i(7,"button",7),h("click",function(){c(e);let t=u();return g(t.addStep())}),y(),i(8,"svg",8),_(9,"line",9)(10,"line",10),r(),s(11," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043F\u0438\u0441\u044C\u043C\u043E "),r()(),M(),i(12,"div",11)(13,"div",12),f(14,Rl,11,19,"ng-container",13),r()(),i(15,"div",14),f(16,Kl,16,26,"div",15),r(),f(17,Zl,8,0,"div",16),r()}if(a&2){let e=m.ngIf,n=u();l(6),Se(" \u0426\u0435\u043F\u043E\u0447\u043A\u0430 \u043F\u0438\u0441\u0435\u043C (",e.length," ",e.length===1?"\u043F\u0438\u0441\u044C\u043C\u043E":"\u043F\u0438\u0441\u0435\u043C",") "),l(8),d("ngForOf",e),l(2),d("ngForOf",e)("ngForTrackBy",n.trackByStep),l(),d("ngIf",e.length===0)}}var on=(()=>{class a{cdr;emailService;quizName="";quizId=null;mode="create";chainType="PERSONAL";existingTemplates=[];stepsChange=new G;stepSelect=new G;save=new G;previewHtmlChange=new G;steps$=new Le([]);delayPresets=Gi;previewHtml="";activeStepIndex=0;initialized=!1;constructor(e,n){this.cdr=e,this.emailService=n}ngOnInit(){this.initSteps()}ngOnChanges(e){e.existingTemplates&&this.existingTemplates.length>0&&!this.initialized&&(this.loadExistingTemplates(),this.initialized=!0)}initSteps(){if(this.existingTemplates.length>0)this.loadExistingTemplates(),this.initialized=!0;else if(this.mode==="create"){let e=bt.map(n=>V(T({},n),{html:this.emailService.generateHtmlFromConfig(n.config)}));this.steps$.next(e),this.emitChanges(),this.updatePreview()}}loadExistingTemplates(){let e=this.existingTemplates.sort((n,t)=>n.step-t.step).map((n,t)=>({step:n.step,delayMinutes:n.delayMinutes,delayLabel:Pe(n.delayMinutes),subject:n.subject,html:n.html,config:this.extractConfigFromHtml(n.html),isExpanded:t===0,isDirty:!1}));if(e.length===0){let n=bt.map(t=>V(T({},t),{html:this.emailService.generateHtmlFromConfig(t.config)}));this.steps$.next(n)}else this.steps$.next(e);this.emitChanges(),this.updatePreview(),this.cdr.markForCheck()}extractConfigFromHtml(e){let n=T({},ae),t=e.match(/font-size:\s*22px[^>]*>([^,<]+),/i);t&&(n.greeting=t[1].trim());let o=e.match(/font-size:\s*26px[^"]*font-weight:\s*800[^>]*>([^<]+)</i);o&&(n.titleText=o[1].trim());let p=e.match(/linear-gradient\(135deg,\s*(#[0-9a-fA-F]{6})\s*0%,\s*(#[0-9a-fA-F]{6})/i);p&&(n.headerBgStart=p[1],n.headerBgEnd=p[2]);let E=e.match(/color:\s*(#[0-9a-fA-F]{6})[^>]*>\{\{name\}\}/i);E&&(n.primaryColor=E[1]);let F=e.match(/border-left:\s*6px[^>]*padding:\s*20px[^>]*>([^<]+)</i);F&&(n.highlightText=F[1].trim());let z=e.match(/line-height:\s*1\.7[^>]*color:\s*#34495e[^>]*>([^<]+)</i);z&&(n.descriptionText=z[1].trim());let X=e.match(/border-left:\s*5px\s+solid[^>]*accentColor[^>]*>.*?<p[^>]*>([^<]+)</is);X&&(n.callToAction=X[1].trim());let me=e.match(/border-radius:\s*16px[^>]*text-decoration:\s*none[^>]*>([^<]+)<\/a>/i);me&&(n.btnText=me[1].trim());let K=e.match(/href="([^"]+)"[^>]*style="[^"]*border-radius:\s*16px/i);K&&(n.btnLink=K[1]);let te=e.match(/<img[^>]*src="([^"]+)"[^>]*alt="Logo"/i);te&&(n.logoUrl=te[1]);let Ce=e.match(/border-top:\s*2px\s+solid[^>]*>([^<]+)/i);return Ce&&(n.footerText=Ce[1].trim()),n}addStep(){let e=this.steps$.value,n=e.length+1,t={step:n,delayMinutes:1440*n,delayLabel:Pe(1440*n),subject:`Nh\u1EAFc nh\u1EDF #${n}`,html:"",config:T({},ae),isExpanded:!0,isDirty:!0};t.html=this.emailService.generateHtmlFromConfig(t.config),e.forEach(o=>o.isExpanded=!1),this.steps$.next([...e,t]),this.activeStepIndex=e.length,this.emitChanges(),this.updatePreview()}removeStep(e){if(!confirm(`\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u0438\u0441\u044C\u043C\u043E #${e+1}?`))return;let n=this.steps$.value.filter((t,o)=>o!==e);n.forEach((t,o)=>{t.step=o+1,t.isDirty=!0}),this.steps$.next(n),this.activeStepIndex>=n.length&&(this.activeStepIndex=Math.max(0,n.length-1)),this.emitChanges(),this.updatePreview()}updateStepSubject(e,n){let t=[...this.steps$.value];t[e]=V(T({},t[e]),{subject:n,isDirty:!0}),this.steps$.next(t),this.emitChanges(),e===this.activeStepIndex&&this.updatePreview()}updateStepDelay(e,n){let t=[...this.steps$.value];t[e]=V(T({},t[e]),{delayMinutes:n,delayLabel:Pe(n),isDirty:!0}),this.steps$.next(t),this.emitChanges()}updateStepConfig(e,n,t){let o=[...this.steps$.value],p=V(T({},o[e].config),{[n]:t}),E=this.emailService.generateHtmlFromConfig(p);o[e]=V(T({},o[e]),{config:p,html:E,isDirty:!0}),this.steps$.next(o),this.emitChanges(),e===this.activeStepIndex&&this.updatePreview()}updateStepColor(e,n,t){let o=t.target;o?.value&&this.updateStepConfig(e,n,o.value)}selectStep(e){this.activeStepIndex=e;let n=[...this.steps$.value];n.forEach((t,o)=>t.isExpanded=o===e),this.steps$.next(n),this.stepSelect.emit(e),this.updatePreview(),this.cdr.markForCheck()}toggleStep(e){let n=[...this.steps$.value],t=n[e].isExpanded;n.forEach(o=>o.isExpanded=!1),n[e].isExpanded=!t,this.steps$.next(n),n[e].isExpanded&&(this.activeStepIndex=e,this.stepSelect.emit(e),this.updatePreview()),this.cdr.markForCheck()}updatePreview(){let e=this.steps$.value[this.activeStepIndex];e&&(this.previewHtml=e.html||"",this.previewHtmlChange.emit(this.previewHtml)),this.cdr.markForCheck()}emitChanges(){this.stepsChange.emit(this.steps$.value)}onSave(){this.save.emit(this.steps$.value)}get currentStep(){return this.steps$.value[this.activeStepIndex]}trackByStep(e,n){return n.step}static \u0275fac=function(n){return new(n||a)(k(ce),k(Ye))};static \u0275cmp=B({type:a,selectors:[["app-chain-email-editor"]],inputs:{quizName:"quizName",quizId:"quizId",mode:"mode",chainType:"chainType",existingTemplates:"existingTemplates"},outputs:{stepsChange:"stepsChange",stepSelect:"stepSelect",save:"save",previewHtmlChange:"previewHtmlChange"},features:[ve],decls:2,vars:3,consts:[["class","chain-editor",4,"ngIf"],[1,"chain-editor"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-bold","text-primary","flex","items-center","gap-2"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"],["points","22,6 12,13 2,6"],[1,"btn","btn-sm","btn-primary","gap-1",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"timeline-wrapper","mb-6"],[1,"flex","items-center","gap-2","overflow-x-auto","pb-2"],[4,"ngFor","ngForOf"],[1,"steps-list","space-y-4"],["class","step-card border rounded-xl overflow-hidden transition-all",3,"border-primary","shadow-lg",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-center py-12 bg-base-200 rounded-xl",4,"ngIf"],[1,"timeline-step","flex","flex-col","items-center","p-3","rounded-lg","transition-all","min-w-[100px]",3,"click"],[1,"text-2xl","font-bold"],[1,"text-xs","opacity-80"],[1,"text-xs","truncate","max-w-[80px]",3,"title"],["class","badge badge-warning badge-xs mt-1",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","class","text-base-300 flex-shrink-0",4,"ngIf"],[1,"badge","badge-warning","badge-xs","mt-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"text-base-300","flex-shrink-0"],["points","12 5 19 12 12 19"],[1,"step-card","border","rounded-xl","overflow-hidden","transition-all"],[1,"step-header","flex","items-center","justify-between","p-4","cursor-pointer",3,"click"],[1,"flex","items-center","gap-3"],[1,"step-number","w-8","h-8","rounded-full","flex","items-center","justify-center","font-bold"],[1,"font-semibold"],[1,"text-sm","opacity-70"],[1,"flex","items-center","gap-2"],["class","badge badge-warning",4,"ngIf"],["class","btn btn-ghost btn-sm btn-circle",3,"text-white","click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"transition-transform"],["points","6 9 12 15 18 9"],["class","step-content p-4 bg-base-100 space-y-4",4,"ngIf"],[1,"badge","badge-warning"],[1,"btn","btn-ghost","btn-sm","btn-circle",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"step-content","p-4","bg-base-100","space-y-4"],[1,"grid","grid-cols-2","gap-4"],[1,"form-control"],[1,"label"],[1,"label-text","font-medium"],["type","text","placeholder","\u0422\u0435\u043C\u0430 \u043F\u0438\u0441\u044C\u043C\u0430...",1,"input","input-bordered","w-full",3,"input","value"],[1,"select","select-bordered","w-full",3,"change","value"],[3,"value",4,"ngFor","ngForOf"],[1,"tabs","tabs-boxed","bg-base-200"],[1,"tab","tab-active"],[1,"tab"],[1,"space-y-3"],[1,"label-text"],["type","text",1,"input","input-bordered","w-full","input-sm",3,"input","value"],[1,"textarea","textarea-bordered","w-full","textarea-sm","h-16",3,"input","value"],[1,"grid","grid-cols-2","gap-3"],["type","url",1,"input","input-bordered","w-full","input-sm",3,"input","value"],[1,"flex","flex-wrap","gap-4","pt-2","border-t"],[1,"label-text","text-xs"],["type","color",1,"w-8","h-8","rounded","cursor-pointer",3,"input","value"],[3,"value"],[1,"text-center","py-12","bg-base-200","rounded-xl"],["xmlns","http://www.w3.org/2000/svg","width","48","height","48","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1",1,"mx-auto","text-base-content/30","mb-4"],[1,"text-base-content/50","mb-4"],[1,"btn","btn-primary",3,"click"]],template:function(n,t){n&1&&(f(0,es,18,6,"div",0),P(1,"async")),n&2&&d("ngIf",Ee(1,1,t.steps$))},dependencies:[H,A,Z,ee,Ne,Wt],styles:[".chain-editor[_ngcontent-%COMP%]   .timeline-wrapper[_ngcontent-%COMP%]   .timeline-step[_ngcontent-%COMP%]{cursor:pointer;transition:all .2s ease}.chain-editor[_ngcontent-%COMP%]   .timeline-wrapper[_ngcontent-%COMP%]   .timeline-step[_ngcontent-%COMP%]:hover:not(.active){background:var(--fallback-p, oklch(var(--p)/.1))}.chain-editor[_ngcontent-%COMP%]   .timeline-wrapper[_ngcontent-%COMP%]   .timeline-step.active[_ngcontent-%COMP%]{transform:scale(1.05);box-shadow:0 4px 12px #00000026}.chain-editor[_ngcontent-%COMP%]   .steps-list[_ngcontent-%COMP%]   .step-card[_ngcontent-%COMP%]{transition:all .3s ease}.chain-editor[_ngcontent-%COMP%]   .steps-list[_ngcontent-%COMP%]   .step-card[_ngcontent-%COMP%]:hover:not(:has(.step-content)){border-color:var(--fallback-p, oklch(var(--p)/.5))}.chain-editor[_ngcontent-%COMP%]   .steps-list[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]{transition:background .2s ease}.chain-editor[_ngcontent-%COMP%]   .steps-list[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;max-height:0}to{opacity:1;max-height:2000px}}"],changeDetection:0})}return a})();function is(a,m){a&1&&(i(0,"span",27),s(1,"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435"),r())}function ns(a,m){a&1&&(i(0,"span",28),s(1,"\u041D\u043E\u0432\u044B\u0439"),r())}function rs(a,m){if(a&1&&(i(0,"span",29),s(1),r()),a&2){let e=u();l(),b(" ",e.existingChainTemplates.length," ")}}function as(a,m){a&1&&(i(0,"div",30),_(1,"span",31),r())}function os(a,m){if(a&1&&(i(0,"div",32),y(),i(1,"svg",33),_(2,"path",34),r(),M(),i(3,"span"),s(4),r()()),a&2){let e=u();l(4),w(e.errorMessage)}}function ls(a,m){if(a&1&&(i(0,"div",35),y(),i(1,"svg",33),_(2,"path",36),r(),M(),i(3,"span"),s(4),r()()),a&2){let e=u();l(4),w(e.successMessage)}}function ss(a,m){if(a&1){let e=S();i(0,"div",42)(1,"a",43),h("click",function(){c(e);let t=u(2);return g(t.switchTemplateType("result"))}),s(2," \u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u043A\u0432\u0438\u0437\u0430 "),r()()}if(a&2){let e=u(2);l(),U("tab-active",e.templateType==="result")}}function us(a,m){if(a&1){let e=S();se(0),i(1,"app-quiz-email-template-editor",44),h("configChange",function(t){c(e);let o=u(2);return g(o.onConfigChange(t))})("htmlChange",function(t){c(e);let o=u(2);return g(o.onHtmlChange(t))}),r(),ue()}if(a&2){let e=u(2);l(),d("quizName",e.quizName)("grandPrize",e.grandPrize)("prizeForEveryOne",e.prizeForEveryOne)("initialConfig",e.currentConfig)("mode",e.mode)}}function ds(a,m){if(a&1){let e=S();se(0),i(1,"app-chain-email-editor",45),h("stepsChange",function(t){c(e);let o=u(2);return g(o.onChainStepsChange(t))})("previewHtmlChange",function(t){c(e);let o=u(2);return g(o.onChainPreviewChange(t))}),r(),ue()}if(a&2){let e=u(2);l(),d("quizName",e.quizName)("quizId",e.quizId)("mode",e.mode)("chainType",e.chainType)("existingTemplates",e.existingChainTemplates)}}function ms(a,m){if(a&1&&(i(0,"div",37)(1,"div",38),f(2,ss,3,2,"div",39)(3,us,2,5,"ng-container",23)(4,ds,2,5,"ng-container",23),r(),i(5,"div",40),_(6,"app-email-template-preview",41),r()()),a&2){let e=u();l(2),d("ngIf",e.editorMode==="single"),l(),d("ngIf",e.editorMode==="single"),l(),d("ngIf",e.editorMode==="chain"),l(2),d("config",e.currentConfig)("variables",e.previewVariables)("html",e.previewHtml)}}function ps(a,m){a&1&&(i(0,"span"),s(1," \u{1F4A1} \u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u044F\u0442\u0441\u044F \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438 \u043A\u0432\u0438\u0437\u0430 "),r())}function cs(a,m){a&1&&(i(0,"span",47),s(1,"\u2022 \u0435\u0441\u0442\u044C \u043D\u0435\u0441\u043E\u0445\u0440\u0430\u043D\u0451\u043D\u043D\u044B\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F"),r())}function gs(a,m){if(a&1&&(i(0,"span"),s(1),f(2,cs,2,0,"span",46),r()),a&2){let e=u();l(),b(" \u{1F4A1} \u0426\u0435\u043F\u043E\u0447\u043A\u0430: ",e.chainSteps.length," \u043F\u0438\u0441\u0435\u043C "),l(),d("ngIf",e.hasDirtySteps)}}function _s(a,m){a&1&&_(0,"span",51)}function hs(a,m){a&1&&(y(),i(0,"svg",13),_(1,"path",52)(2,"polyline",53)(3,"polyline",54),r())}function fs(a,m){if(a&1){let e=S();i(0,"button",48),h("click",function(){c(e);let t=u();return g(t.saveSingleTemplate())}),f(1,_s,1,0,"span",49)(2,hs,4,0,"svg",50),s(3," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043F\u0438\u0441\u044C\u043C\u043E "),r()}if(a&2){let e=u();d("disabled",e.saving||!e.currentHtml),l(),d("ngIf",e.saving),l(),d("ngIf",!e.saving)}}function xs(a,m){a&1&&_(0,"span",51)}function vs(a,m){a&1&&(y(),i(0,"svg",13),_(1,"path",52)(2,"polyline",53)(3,"polyline",54),r())}function Cs(a,m){if(a&1){let e=S();i(0,"button",48),h("click",function(){c(e);let t=u();return g(t.saveChainTemplates())}),f(1,xs,1,0,"span",49)(2,vs,4,0,"svg",50),s(3," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0446\u0435\u043F\u043E\u0447\u043A\u0443 "),r()}if(a&2){let e=u();d("disabled",e.saving||e.chainSteps.length===0),l(),d("ngIf",e.saving),l(),d("ngIf",!e.saving)}}var ln=(()=>{class a{cdr;emailService;quizName="";quizId=null;grandPrize="";prizeForEveryOne="";initialConfig=null;mode="create";existingChainTemplates=[];configChange=new G;htmlChange=new G;chainStepsChange=new G;close=new G;editorMode="single";currentSubject="";currentHtml="";currentConfig=T({},ae);templateType="result";codeTemplate=null;resultTemplate=null;chainSteps=[];chainType="PERSONAL";previewHtml="";activeChainStep=0;savingSingle=!1;previewVariables={name:"Nguyen",score:85,code:"123456",quizName:"Quiz Demo",grandPrize:"1000 Freespins",prizeForEveryOne:"+10 FS",year:new Date().getFullYear()};loading=!1;saving=!1;errorMessage=null;successMessage=null;constructor(e,n){this.cdr=e,this.emailService=n}ngOnInit(){console.log("[Container] ngOnInit, mode:",this.mode,"quizId:",this.quizId),this.updatePreviewVariables(),this.initFromExistingTemplates(),this.loadSingleTemplates()}ngOnChanges(e){(e.quizName||e.grandPrize||e.prizeForEveryOne)&&this.updatePreviewVariables(),e.existingChainTemplates&&this.existingChainTemplates.length>0&&this.initFromExistingTemplates()}initFromExistingTemplates(){this.existingChainTemplates.length>0&&(console.log("Initializing from existing chain templates:",this.existingChainTemplates),this.chainSteps=this.existingChainTemplates.sort((e,n)=>e.step-n.step).map((e,n)=>this.chainTemplateToStep(e,n===0)),this.cdr.markForCheck())}chainTemplateToStep(e,n){return{step:e.step,delayMinutes:e.delayMinutes,delayLabel:Pe(e.delayMinutes),subject:e.subject,html:e.html,config:this.extractConfigFromHtml(e.html),isExpanded:n,isDirty:!1}}extractConfigFromHtml(e){let n=T({},ae);if(n.showHighlight=!1,n.showPrize=!1,n.showDescription=!1,n.showCTA=!1,n.showButton=!1,e.includes('class="highlight-box"')||e.includes("class='highlight-box'")){n.showHighlight=!0;let z=e.match(/<div[^>]*class="highlight-box"[^>]*>[\s\S]*?<div>([^<]+)<\/div>\s*<\/div>/i);z&&(n.highlightText=z[1].trim())}if(e.includes('class="prize-box"')||e.includes("class='prize-box'")){n.showPrize=!0;let z=e.match(/<div[^>]*class="prize-box"[^>]*>.*?<strong>[^<]*<\/strong>\s*([^<]+)/is);z&&(n.prizeText=z[1].trim())}if(e.includes('class="description"')||e.includes("class='description'")){n.showDescription=!0;let z=e.match(/<div[^>]*class="description"[^>]*>([^<]+)/i);z&&(n.descriptionText=z[1].trim())}if(e.includes('class="cta-box"')||e.includes("class='cta-box'")){n.showCTA=!0;let z=e.match(/<div[^>]*class="cta-box"[^>]*>.*?<p[^>]*>([^<]+)/is);z&&(n.callToAction=z[1].trim())}if(e.includes('class="btn"')||e.includes("class='btn'")){n.showButton=!0;let z=e.match(/<a[^>]*class="btn"[^>]*>([^<]+)<\/a>/i);z&&(n.btnText=z[1].trim());let X=e.match(/<a[^>]*href="([^"]+)"[^>]*class="btn"/i);X&&(n.btnLink=X[1])}let t=e.match(/<p[^>]*class="greeting"[^>]*>([^,<]+),/i);t&&(n.greeting=t[1].trim());let o=e.match(/<h1[^>]*>([^<]+)<\/h1>/i);o&&(n.titleText=o[1].trim());let p=e.match(/linear-gradient\(135deg,\s*(#[0-9a-fA-F]{6})\s*0%,\s*(#[0-9a-fA-F]{6})/i);p&&(n.headerBgStart=p[1],n.headerBgEnd=p[2]);let E=e.match(/<img[^>]*src="([^"]+)"[^>]*alt="Logo"/i);E&&(n.logoUrl=E[1]);let F=e.match(/<div[^>]*class="footer"[^>]*>.*?<p>([^<]+)/is);return F&&(n.footerText=F[1].trim()),console.log("[Container] extractConfigFromHtml result:",{showHighlight:n.showHighlight,showPrize:n.showPrize,showDescription:n.showDescription,showCTA:n.showCTA,showButton:n.showButton,greeting:n.greeting,titleText:n.titleText}),n}updatePreviewVariables(){this.previewVariables=V(T({},this.previewVariables),{quizName:this.quizName||"Quiz Demo",grandPrize:this.grandPrize||"1000 Freespins",prizeForEveryOne:this.prizeForEveryOne||"+10 FS"})}loadSingleTemplates(){if(!this.quizId){console.log("[Container] loadSingleTemplates: no quizId, skipping");return}let e=this.getDomain(),n=this.getApp();if(!n){console.log("[Container] loadSingleTemplates: no app, skipping");return}console.log("[Container] loadSingleTemplates: loading for quizId:",this.quizId),this.loading=!0,this.cdr.markForCheck(),this.emailService.getTemplates(e,n,this.quizId).subscribe(t=>{this.loading=!1,console.log("[Container] loadSingleTemplates: received templates:",t);let o=t.find(E=>E.type==="code"),p=t.find(E=>E.type==="result");o&&(this.codeTemplate={subject:o.subject,html:o.html,config:this.extractConfigFromHtml(o.html)},console.log("[Container] codeTemplate loaded:",this.codeTemplate)),p&&(this.resultTemplate={subject:p.subject,html:p.html,config:this.extractConfigFromHtml(p.html)},console.log("[Container] resultTemplate loaded:",this.resultTemplate)),this.switchTemplateType(this.templateType),this.cdr.markForCheck()})}switchTemplateType(e){console.log("[Container] switchTemplateType called with:",e),this.templateType=e;let n=e==="code"?this.codeTemplate:this.resultTemplate;console.log("[Container] selected template:",n),n?(this.currentSubject=n.subject,this.currentHtml=n.html,this.currentConfig=T({},n.config),this.previewHtml=n.html,console.log("[Container] after switch - currentConfig:",this.currentConfig),console.log("[Container] after switch - currentConfig.greeting:",this.currentConfig.greeting),console.log("[Container] after switch - currentConfig.titleText:",this.currentConfig.titleText),console.log("[Container] after switch - currentConfig.logoUrl:",this.currentConfig.logoUrl)):(console.log("[Container] no template found, using defaults"),this.currentSubject=e==="code"?"M\xE3 x\xE1c nh\u1EADn c\u1EE7a b\u1EA1n l\xE0 {{code}}":"K\u1EBFt qu\u1EA3 k\u1ECBch b\u1EA3n c\u1EE7a b\u1EA1n",this.currentHtml="",this.currentConfig=T({},ae),this.previewHtml=this.emailService.generateHtmlFromConfig(this.currentConfig)),this.cdr.markForCheck()}switchEditorMode(e){this.editorMode=e,e==="chain"?this.chainSteps.length>0&&(this.previewHtml=this.chainSteps[0].html):this.previewHtml=this.currentHtml,this.cdr.markForCheck()}onConfigChange(e){console.log("[Container] onConfigChange received:",e),this.currentConfig=T({},e),this.configChange.emit(this.currentConfig),this.cdr.markForCheck()}onHtmlChange(e){this.currentHtml=e,this.htmlChange.emit(e),this.editorMode==="single"&&(this.previewHtml=e),this.cdr.markForCheck()}saveSingleTemplate(){return be(this,null,function*(){if(this.quizId===null){this.errorMessage="Quiz ID \u043D\u0435 \u0437\u0430\u0434\u0430\u043D",this.autoCloseMessage();return}if(!this.currentHtml){this.errorMessage="\u041D\u0435\u0442 \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0433\u043E \u043F\u0438\u0441\u044C\u043C\u0430",this.autoCloseMessage();return}this.savingSingle=!0,this.errorMessage=null,this.successMessage=null,this.cdr.markForCheck();let e=this.getDomain(),n=this.getApp();if(!n){this.errorMessage="App \u043D\u0435 \u0437\u0430\u0434\u0430\u043D \u0432 \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438",this.autoCloseMessage(),this.savingSingle=!1;return}try{let t={domain:e,app:n,quiz_id:this.quizId,type:this.templateType,subject:this.currentConfig.greeting?`${this.currentConfig.greeting}, {{name}}!`:"\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u043A\u0432\u0438\u0437\u0430",html:this.currentHtml},o=yield this.emailService.updateTemplateByClient(t).toPromise();o?.success?(this.successMessage=o.action==="created"?"\u041F\u0438\u0441\u044C\u043C\u043E \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D\u043E":"\u041F\u0438\u0441\u044C\u043C\u043E \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E",yield this.reloadTemplates(),this.autoCloseMessage()):(this.errorMessage=o?.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u043F\u0438\u0441\u044C\u043C\u0430",this.autoCloseMessage())}catch(t){this.errorMessage=t.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u043F\u0438\u0441\u044C\u043C\u0430",this.autoCloseMessage()}finally{this.savingSingle=!1,this.cdr.markForCheck()}})}onChainStepsChange(e){this.chainSteps=e,this.chainStepsChange.emit(e),e[this.activeChainStep]&&(this.previewHtml=e[this.activeChainStep].html),this.cdr.markForCheck()}onChainStepSelect(e){this.activeChainStep=e,this.chainSteps[e]&&(this.previewHtml=this.chainSteps[e].html),this.cdr.markForCheck()}saveChainTemplates(){return be(this,null,function*(){if(this.quizId===null){this.errorMessage="Quiz ID \u043D\u0435 \u0437\u0430\u0434\u0430\u043D",this.autoCloseMessage();return}if(this.chainSteps.length===0){this.errorMessage="\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u043D\u043E \u043F\u0438\u0441\u044C\u043C\u043E \u0432 \u0446\u0435\u043F\u043E\u0447\u043A\u0443",this.autoCloseMessage();return}this.saving=!0,this.errorMessage=null,this.cdr.markForCheck();let e=this.getDomain(),n=this.getApp();if(!n){this.errorMessage="App \u043D\u0435 \u0437\u0430\u0434\u0430\u043D \u0432 \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438",this.autoCloseMessage(),this.saving=!1;return}try{let t=this.chainSteps.map(p=>({step:p.step,delayMinutes:p.delayMinutes,subject:p.subject,html:p.html})),o=yield this.emailService.upsertChainTemplatesBulk({domain:e,app:n,chainType:this.chainType,quizId:this.quizId,templates:t}).toPromise();o?.success?(this.successMessage=`\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E: ${o.created} \u0441\u043E\u0437\u0434\u0430\u043D\u043E, ${o.updated} \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E`,this.chainSteps.forEach(p=>p.isDirty=!1),this.chainStepsChange.emit(this.chainSteps),yield this.reloadTemplates(),this.autoCloseMessage()):(this.errorMessage=o?.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F",this.autoCloseMessage())}catch(t){this.errorMessage=t.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F",this.autoCloseMessage()}finally{this.saving=!1,this.cdr.markForCheck()}})}reloadTemplates(){return be(this,null,function*(){if(!this.quizId)return;let e=this.getApp();if(e)try{if(this.editorMode==="single"){let n=this.getDomain();this.emailService.getTemplates(n,e,this.quizId).subscribe(t=>{let o=t.find(p=>p.type===this.templateType);o&&(this.currentHtml=o.html,this.currentConfig=this.extractConfigFromHtml(o.html),this.currentSubject=o.subject,this.previewHtml=o.html,this.cdr.markForCheck())})}this.editorMode==="chain"&&this.emailService.getChainTemplates(e,this.quizId).subscribe(n=>{this.existingChainTemplates=n,this.chainSteps=n.sort((t,o)=>t.step-o.step).map((t,o)=>this.chainTemplateToStep(t,o===0)),this.chainSteps.length>0&&(this.previewHtml=this.chainSteps[0].html),this.cdr.markForCheck()})}catch(n){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432:",n)}})}onChainPreviewChange(e){this.previewHtml=e,this.cdr.markForCheck()}getDomain(){return I.auth.emailDomein||"localhost"}getApp(){return I.auth.app}autoCloseMessage(){setTimeout(()=>{this.errorMessage=null,this.successMessage=null,this.cdr.markForCheck()},3e3)}onClose(){this.chainSteps.some(n=>n.isDirty)&&!confirm("\u0415\u0441\u0442\u044C \u043D\u0435\u0441\u043E\u0445\u0440\u0430\u043D\u0451\u043D\u043D\u044B\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F. \u0417\u0430\u043A\u0440\u044B\u0442\u044C \u0431\u0435\u0437 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F?")||this.close.emit()}get hasDirtySteps(){return this.chainSteps.some(e=>e.isDirty)}static \u0275fac=function(n){return new(n||a)(k(ce),k(Ye))};static \u0275cmp=B({type:a,selectors:[["app-email-editor-container"]],inputs:{quizName:"quizName",quizId:"quizId",grandPrize:"grandPrize",prizeForEveryOne:"prizeForEveryOne",initialConfig:"initialConfig",mode:"mode",existingChainTemplates:"existingChainTemplates"},outputs:{configChange:"configChange",htmlChange:"htmlChange",chainStepsChange:"chainStepsChange",close:"close"},features:[ve],decls:38,vars:19,consts:[[1,"email-editor-wrapper"],[1,"editor-header","flex","items-center","justify-between","p-4","bg-gradient-to-r","from-indigo-600","to-purple-600","text-white","rounded-t-xl"],[1,"text-xl","font-bold","flex","items-center","gap-3"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"],["points","22,6 12,13 2,6"],["class","badge badge-warning text-xs",4,"ngIf"],["class","badge badge-success text-xs",4,"ngIf"],[1,"btn","btn-ghost","btn-circle","text-white","hover:bg-white/20",3,"click"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"mode-switcher","flex","items-center","justify-center","gap-4","p-3","bg-base-200","border-b"],[1,"btn","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"],["d","M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"],["class","badge badge-sm",4,"ngIf"],["class","flex items-center justify-center p-12",4,"ngIf"],["class","alert alert-error m-4",4,"ngIf"],["class","alert alert-success m-4",4,"ngIf"],["class","editor-content grid grid-cols-2 gap-0 bg-base-100 overflow-hidden",4,"ngIf"],[1,"editor-footer","flex","items-center","justify-between","p-4","bg-base-200","border-t","border-base-300","rounded-b-xl"],[1,"text-sm","text-base-content/60"],[4,"ngIf"],[1,"flex","gap-3"],[1,"btn","btn-ghost",3,"click"],["class","btn btn-success gap-2",3,"disabled","click",4,"ngIf"],[1,"badge","badge-warning","text-xs"],[1,"badge","badge-success","text-xs"],[1,"badge","badge-sm"],[1,"flex","items-center","justify-center","p-12"],[1,"loading","loading-spinner","loading-lg","text-primary"],[1,"alert","alert-error","m-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","shrink-0","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"alert","alert-success","m-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"editor-content","grid","grid-cols-2","gap-0","bg-base-100","overflow-hidden"],[1,"editor-panel","border-r","border-base-300","p-6","overflow-y-auto",2,"max-height","calc(90vh - 200px)"],["class","tabs tabs-boxed bg-base-200 mb-8 justify-center",4,"ngIf"],[1,"preview-panel","p-6","bg-base-200/50","overflow-y-auto",2,"max-height","calc(90vh - 200px)"],[3,"config","variables","html"],[1,"tabs","tabs-boxed","bg-base-200","mb-8","justify-center"],[1,"tab",3,"click"],[3,"configChange","htmlChange","quizName","grandPrize","prizeForEveryOne","initialConfig","mode"],[3,"stepsChange","previewHtmlChange","quizName","quizId","mode","chainType","existingTemplates"],["class","text-warning ml-2",4,"ngIf"],[1,"text-warning","ml-2"],[1,"btn","btn-success","gap-2",3,"click","disabled"],["class","loading loading-spinner loading-sm",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",4,"ngIf"],[1,"loading","loading-spinner","loading-sm"],["d","M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"],["points","17 21 17 13 7 13 7 21"],["points","7 3 7 8 15 8"]],template:function(n,t){n&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),y(),i(3,"svg",3),_(4,"path",4)(5,"polyline",5),r(),s(6," \u0420\u0435\u0434\u0430\u043A\u0442\u043E\u0440 Email \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432 "),f(7,is,2,0,"span",6)(8,ns,2,0,"span",7),r(),M(),i(9,"button",8),h("click",function(){return t.onClose()}),y(),i(10,"svg",3),_(11,"line",9)(12,"line",10),r()()(),M(),i(13,"div",11)(14,"button",12),h("click",function(){return t.switchEditorMode("single")}),y(),i(15,"svg",13),_(16,"path",4)(17,"polyline",5),r(),s(18," \u041E\u0434\u0438\u043D\u043E\u0447\u043D\u043E\u0435 \u043F\u0438\u0441\u044C\u043C\u043E "),r(),M(),i(19,"button",12),h("click",function(){return t.switchEditorMode("chain")}),y(),i(20,"svg",13),_(21,"path",14)(22,"path",15),r(),s(23," \u0426\u0435\u043F\u043E\u0447\u043A\u0430 \u043F\u0438\u0441\u0435\u043C "),f(24,rs,2,1,"span",16),r()(),f(25,as,2,0,"div",17)(26,os,5,1,"div",18)(27,ls,5,1,"div",19)(28,ms,7,6,"div",20),M(),i(29,"div",21)(30,"div",22),f(31,ps,2,0,"span",23)(32,gs,3,2,"span",23),r(),i(33,"div",24)(34,"button",25),h("click",function(){return t.onClose()}),s(35," \u0417\u0430\u043A\u0440\u044B\u0442\u044C "),r(),f(36,fs,4,3,"button",26)(37,Cs,4,3,"button",26),r()()()),n&2&&(l(7),d("ngIf",t.mode==="edit"),l(),d("ngIf",t.mode==="create"),l(6),U("btn-primary",t.editorMode==="single")("btn-ghost",t.editorMode!=="single"),l(5),U("btn-primary",t.editorMode==="chain")("btn-ghost",t.editorMode!=="chain"),l(5),d("ngIf",t.existingChainTemplates.length>0),l(),d("ngIf",t.loading),l(),d("ngIf",t.errorMessage),l(),d("ngIf",t.successMessage),l(),d("ngIf",!t.loading),l(3),d("ngIf",t.editorMode==="single"),l(),d("ngIf",t.editorMode==="chain"),l(4),d("ngIf",t.editorMode==="single"),l(),d("ngIf",t.editorMode==="chain"))},dependencies:[A,rn,an,on],styles:[".email-editor-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:#fff;border-radius:16px;box-shadow:0 25px 50px #00000026;overflow:hidden}.editor-header[_ngcontent-%COMP%]{flex-shrink:0}.editor-content[_ngcontent-%COMP%]{flex:1;min-height:0}.editor-panel[_ngcontent-%COMP%]::-webkit-scrollbar, .preview-panel[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.editor-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track, .preview-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.editor-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .preview-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.editor-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .preview-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.editor-footer[_ngcontent-%COMP%]{flex-shrink:0}"],changeDetection:0})}return a})();function ws(a,m){if(a&1){let e=S();i(0,"div",65)(1,"span"),s(2),r(),i(3,"button",66),h("click",function(){c(e);let t=u(2);return g(t.errorMessage="")}),s(4,"\xD7"),r()()}if(a&2){let e=u(2);l(2),w(e.errorMessage)}}function Es(a,m){if(a&1&&(i(0,"option",67),s(1),r()),a&2){let e=m.$implicit;d("value",e.id),l(),Se(" ",e.name," \u2014 ",e.url," ")}}function ys(a,m){if(a&1){let e=S();se(0),i(1,"div",87)(2,"input",88),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.isCorrect,t)||(o.isCorrect=t),g(t)}),r(),i(3,"span",89),s(4,"\u041F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E"),r()(),i(5,"input",90),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.points,t)||(o.points=t),g(t)}),r(),ue()}if(a&2){let e=u().$implicit;l(2),x("ngModel",e.isCorrect),l(3),x("ngModel",e.points)}}function Ss(a,m){if(a&1){let e=S();se(0),i(1,"input",91),C("ngModelChange",function(t){c(e);let o=u().$implicit;return v(o.weight,t)||(o.weight=t),g(t)}),r(),ue()}if(a&2){let e=u().$implicit;l(),x("ngModel",e.weight)}}function Ms(a,m){if(a&1){let e=S();i(0,"div",81)(1,"input",82),C("ngModelChange",function(t){let o=c(e).$implicit;return v(o.text,t)||(o.text=t),g(t)}),h("ngModelChange",function(){c(e);let t=u(3);return g(t.updateForm())}),r(),f(2,ys,6,2,"ng-container",83)(3,Ss,2,1,"ng-container",83),i(4,"button",84),h("click",function(){let t=c(e).index,o=u().index,p=u(2);return g(p.removeAnswer(o,t))}),y(),i(5,"svg",85),_(6,"path",86),r()()()}if(a&2){let e=m.$implicit,n=u(2).ngIf;l(),x("ngModel",e.text),l(),d("ngIf",n.type==="byScore"),l(),d("ngIf",n.type==="byWeight")}}function Ts(a,m){if(a&1){let e=S();i(0,"div",68)(1,"div",69)(2,"div",70),s(3),r(),i(4,"button",71),h("click",function(){let t=c(e).index,o=u(2);return g(o.removeQuestion(t))}),s(5," \u0423\u0434\u0430\u043B\u0438\u0442\u044C "),y(),i(6,"svg",72),_(7,"path",73),r()()(),M(),i(8,"textarea",74),C("ngModelChange",function(t){let o=c(e).$implicit;return v(o.text,t)||(o.text=t),g(t)}),h("ngModelChange",function(){c(e);let t=u(2);return g(t.updateForm())}),r(),i(9,"label",75),s(10,"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 (\u043E\u043F\u0446\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u043E)"),r(),i(11,"input",76),C("ngModelChange",function(t){let o=c(e).$implicit;return v(o.image,t)||(o.image=t),g(t)}),h("ngModelChange",function(){c(e);let t=u(2);return g(t.updateForm())}),r(),i(12,"div",77)(13,"div",78),s(14,"\u0412\u0430\u0440\u0438\u0430\u043D\u0442\u044B \u043E\u0442\u0432\u0435\u0442\u043E\u0432"),r(),f(15,Ms,7,3,"div",79),i(16,"button",80),h("click",function(){let t=c(e).index,o=u(2);return g(o.addAnswer(t))}),s(17," + \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043E\u0442\u0432\u0435\u0442 "),r()()()}if(a&2){let e=m.$implicit,n=m.index;l(3),b("\u0412\u043E\u043F\u0440\u043E\u0441 ",n+1,""),l(5),x("ngModel",e.text),l(3),x("ngModel",e.image),l(4),d("ngForOf",e.answers)}}function ks(a,m){a&1&&_(0,"span",92)}function Bs(a,m){a&1&&(y(),i(0,"svg",93),_(1,"path",94)(2,"polyline",95),r())}function Is(a,m){if(a&1){let e=S();i(0,"div",96)(1,"div",97)(2,"app-email-editor-container",98),P(3,"async"),P(4,"async"),P(5,"async"),h("configChange",function(t){c(e);let o=u(2);return g(o.onEmailConfigChange(t))})("htmlChange",function(t){c(e);let o=u(2);return g(o.onEmailHtmlChange(t))})("chainStepsChange",function(t){c(e);let o=u(2);return g(o.onChainStepsChange(t))})("close",function(){c(e);let t=u(2);return g(t.showEmailEditor=!1)}),r()()()}if(a&2){let e,n,t,o=u(2);l(2),d("quizName",((e=Ee(3,7,o.form$))==null?null:e.name)||"")("quizId",o.quizNumericId)("grandPrize",((n=Ee(4,9,o.form$))==null?null:n.grandPrize)||"")("prizeForEveryOne",((t=Ee(5,11,o.form$))==null?null:t.prizeForEveryOne)||"")("initialConfig",null)("mode",o.mode)("existingChainTemplates",o.existingChainTemplates)}}function Ds(a,m){a&1&&_(0,"span",99)}function Fs(a,m){if(a&1){let e=S();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4)(4,"button",5),h("click",function(){c(e);let t=u();return g(t.cancel.emit())}),y(),i(5,"svg",6)(6,"g",7)(7,"path",8),_(8,"animate",9),r(),i(9,"path",10),_(10,"animate",11),r()()()(),s(11),r(),f(12,ws,5,1,"div",12),M(),i(13,"div",13)(14,"div",14)(15,"label",15),s(16,"\u0410\u043A\u0442\u0438\u0432\u0435\u043D \u043A\u0432\u0438\u0437?"),r(),i(17,"input",16),C("ngModelChange",function(t){let o=c(e).ngIf;return v(o.isActive,t)||(o.isActive=t),g(t)}),r()(),i(18,"div",17)(19,"label",18),s(20,"\u0422\u0438\u043F \u043A\u0432\u0438\u0437\u0430"),r(),i(21,"select",19),C("ngModelChange",function(t){let o=c(e).ngIf;return v(o.type,t)||(o.type=t),g(t)}),i(22,"option",20),s(23,"\u041F\u043E \u0431\u0430\u043B\u043B\u0430\u043C (isCorrect)"),r(),i(24,"option",21),s(25,"\u041F\u043E \u0432\u0435\u0441\u0430\u043C (weight)"),r()()(),i(26,"div",17)(27,"label",18),s(28,"\u2B50\uFE0F \u0420\u0435\u0439\u0442\u0438\u043D\u0433:"),r(),i(29,"input",22),C("ngModelChange",function(t){let o=c(e).ngIf;return v(o.rating,t)||(o.rating=t),g(t)}),r()()(),i(30,"div",23)(31,"div")(32,"label",18),s(33," \u0423\u043D\u0438\u043A\u0430\u043B\u044C\u043D\u044B\u0439 ID \u043A\u0432\u0438\u0437\u0430 "),i(34,"span",24),s(35,"*"),r()(),i(36,"input",25),C("ngModelChange",function(t){let o=c(e).ngIf;return v(o.typeQuizId,t)||(o.typeQuizId=t),g(t)}),r()(),i(37,"div")(38,"label",18),s(39," \u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 (\u043F\u0443\u0431\u043B\u0438\u0447\u043D\u043E\u0435) "),i(40,"span",24),s(41,"*"),r()(),i(42,"input",25),C("ngModelChange",function(t){let o=c(e).ngIf;return v(o.name,t)||(o.name=t),g(t)}),h("ngModelChange",function(){c(e);let t=u();return g(t.updateForm())}),r()(),i(43,"div")(44,"label",18),s(45,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0434\u043B\u044F \u0430\u0434\u043C\u0438\u043D\u0430"),r(),i(46,"input",26),C("ngModelChange",function(t){let o=c(e).ngIf;return v(o.nameAdm,t)||(o.nameAdm=t),g(t)}),r()(),i(47,"div")(48,"label",18),s(49," \u041B\u0435\u043D\u0434\u0438\u043D\u0433 "),i(50,"span",24),s(51,"*"),r()(),i(52,"select",27),C("ngModelChange",function(t){let o=c(e).ngIf;return v(o.landingId,t)||(o.landingId=t),g(t)}),i(53,"option",28),s(54,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043B\u0435\u043D\u0434\u0438\u043D\u0433"),r(),f(55,Es,2,3,"option",29),r()()(),i(56,"div",23)(57,"div")(58,"label",18),s(59,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 (\u043F\u0443\u0431\u043B\u0438\u0447\u043D\u043E\u0435)"),r(),i(60,"textarea",30),C("ngModelChange",function(t){let o=c(e).ngIf;return v(o.description,t)||(o.description=t),g(t)}),h("ngModelChange",function(){c(e);let t=u();return g(t.updateForm())}),r()(),i(61,"div")(62,"label",18),s(63,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0434\u043B\u044F \u0430\u0434\u043C\u0438\u043D\u0430"),r(),i(64,"textarea",30),C("ngModelChange",function(t){let o=c(e).ngIf;return v(o.descriptionAdm,t)||(o.descriptionAdm=t),g(t)}),r()()(),i(65,"div",31)(66,"label",18),s(67," \u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F \u043E\u043A\u043E\u043D\u0447\u0430\u043D\u0438\u044F "),i(68,"span",24),s(69,"*"),r()(),i(70,"input",32),C("ngModelChange",function(t){let o=c(e).ngIf;return v(o.endAt,t)||(o.endAt=t),g(t)}),r()(),i(71,"div",33)(72,"div")(73,"label",18),s(74,"\u0424\u043E\u043D \u0434\u0435\u0441\u043A\u0442\u043E\u043F"),r(),i(75,"input",34),C("ngModelChange",function(t){let o=c(e).ngIf;return v(o.imageBgDesk,t)||(o.imageBgDesk=t),g(t)}),h("ngModelChange",function(){c(e);let t=u();return g(t.updateForm())}),r()(),i(76,"div")(77,"label",18),s(78,"\u0424\u043E\u043D \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u044B\u0439"),r(),i(79,"input",34),C("ngModelChange",function(t){let o=c(e).ngIf;return v(o.imageBgMob,t)||(o.imageBgMob=t),g(t)}),h("ngModelChange",function(){c(e);let t=u();return g(t.updateForm())}),r()(),i(80,"div")(81,"label",18),s(82,"Hero \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435"),r(),i(83,"input",34),C("ngModelChange",function(t){let o=c(e).ngIf;return v(o.imageHero,t)||(o.imageHero=t),g(t)}),h("ngModelChange",function(){c(e);let t=u();return g(t.updateForm())}),r()()(),i(84,"div",35)(85,"div")(86,"label",18),s(87,"\u0413\u043B\u0430\u0432\u043D\u044B\u0439 \u043F\u0440\u0438\u0437"),r(),i(88,"input",36),C("ngModelChange",function(t){let o=c(e).ngIf;return v(o.grandPrize,t)||(o.grandPrize=t),g(t)}),h("ngModelChange",function(){c(e);let t=u();return g(t.updateForm())}),r()(),i(89,"div")(90,"label",18),s(91,"\u041F\u0440\u0438\u0437 \u0432\u0441\u0435\u043C \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0430\u043C"),r(),i(92,"input",37),C("ngModelChange",function(t){let o=c(e).ngIf;return v(o.prizeForEveryOne,t)||(o.prizeForEveryOne=t),g(t)}),h("ngModelChange",function(){c(e);let t=u();return g(t.updateForm())}),r()()(),i(93,"div",38)(94,"h3",39),s(95," \u0412\u043E\u043F\u0440\u043E\u0441\u044B \u0438 \u043E\u0442\u0432\u0435\u0442\u044B "),r(),f(96,Ts,18,4,"div",40),i(97,"div",41)(98,"button",42),h("click",function(){c(e);let t=u();return g(t.addQuestion())}),s(99," + \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432\u043E\u043F\u0440\u043E\u0441 "),r()()(),i(100,"div",43)(101,"h3",44),s(102," \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0446\u0432\u0435\u0442\u043E\u0432 \u0442\u0435\u043C\u044B "),r(),i(103,"div",45)(104,"h3",46),s(105," C\u0442\u0438\u043B\u0438 \u0432\u0435\u0440\u0445\u043D\u0435\u0439 \u0447\u0430\u0441\u0442\u0438 \u043A\u043E\u043D\u0442\u0435\u043D\u0442 "),r(),i(106,"div",47)(107,"div",48)(108,"label",49)(109,"span",50),s(110,"\u0426\u0432\u0435\u0442 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430"),r()(),i(111,"div",51)(112,"input",52),h("input",function(t){c(e);let o=u();return g(o.updateColor("main-text",t))}),r(),i(113,"span",53),s(114),r()()(),i(115,"div",48)(116,"label",49)(117,"span",50),s(118,"\u0413\u0440\u0430\u0434\u0438\u0435\u043D\u0442 \u0442\u0435\u043A\u0441\u0442\u0430 \u043D\u0430\u0447\u0430\u043B\u043E"),r()(),i(119,"div",51)(120,"input",52),h("input",function(t){c(e);let o=u();return g(o.updateColor("text-gradient-start",t))}),r(),i(121,"span",53),s(122),r()()(),i(123,"div",48)(124,"label",49)(125,"span",50),s(126,"\u0413\u0440\u0430\u0434\u0438\u0435\u043D\u0442 \u0442\u0435\u043A\u0441\u0442\u0430 \u043A\u043E\u043D\u0435\u0446"),r()(),i(127,"div",51)(128,"input",52),h("input",function(t){c(e);let o=u();return g(o.updateColor("text-gradient-end",t))}),r(),i(129,"span",53),s(130),r()()(),i(131,"div",48)(132,"label",49)(133,"span",50),s(134,"\u0426\u0432\u0435\u0442 \u0442\u0435\u043A\u0441\u0442\u0430 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u044F"),r()(),i(135,"div",51)(136,"input",52),h("input",function(t){c(e);let o=u();return g(o.updateColor("desc-color",t))}),r(),i(137,"span",53),s(138),r()()()()(),i(139,"div",45)(140,"h3",46),s(141," C\u0442\u0438\u043B\u0438 \u043A\u0432\u0438\u0437 \u0431\u043B\u043E\u043A\u0430 "),r(),i(142,"div",54)(143,"div",48)(144,"label",49)(145,"span",50),s(146,"\u042F\u0440\u043A\u0438\u0439 \u0446\u0432\u0435\u0442 \u0434\u0435\u043A\u043E\u0440\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B"),r()(),i(147,"div",51)(148,"input",52),h("input",function(t){c(e);let o=u();return g(o.updateColor("primary",t))}),r(),i(149,"span",53),s(150),r()()(),i(151,"div",48)(152,"label",49)(153,"span",50),s(154,"\u0426\u0432\u0435\u0442 \u0442\u0435\u043A\u0441\u0442\u0430 \u0432\u043E\u043F\u0440\u043E\u0441\u0430 \u043A\u0432\u0438\u0437\u0430"),r()(),i(155,"div",51)(156,"input",52),h("input",function(t){c(e);let o=u();return g(o.updateColor("quiz-text",t))}),r(),i(157,"span",53),s(158),r()()(),i(159,"div",48)(160,"label",49)(161,"span",50),s(162,"\u0426\u0432\u0435\u0442 \u0442\u0435\u043A\u0441\u0442\u0430 \u043A\u043D\u043E\u043F\u043E\u043A "),r()(),i(163,"div",51)(164,"input",52),h("input",function(t){c(e);let o=u();return g(o.updateColor("btn-text",t))}),r(),i(165,"span",53),s(166),r()()(),i(167,"div",48)(168,"label",49)(169,"span",50),s(170,"\u0413\u0440\u0430\u0434\u0438\u0435\u043D\u0442 \u043A\u043D\u043E\u043F\u043E\u043A \u0446\u0432\u0435\u0442 \u0441\u0442\u0430\u0440\u0442 "),r()(),i(171,"div",51)(172,"input",52),h("input",function(t){c(e);let o=u();return g(o.updateColor("btn-color-gradient-start",t))}),r(),i(173,"span",53),s(174),r()()(),i(175,"div",48)(176,"label",49)(177,"span",50),s(178,"\u0413\u0440\u0430\u0434\u0438\u0435\u043D\u0442 \u043A\u043D\u043E\u043F\u043E\u043A \u0446\u0432\u0435\u0442 \u043A\u043E\u043D\u0435\u0446 "),r()(),i(179,"div",51)(180,"input",52),h("input",function(t){c(e);let o=u();return g(o.updateColor("btn-color-gradient-end",t))}),r(),i(181,"span",53),s(182),r()()(),i(183,"div",48)(184,"label",49)(185,"span",50),s(186,"\u0424\u043E\u043D \u0431\u043B\u043E\u043A\u0430 \u0432\u043E\u043F\u0440\u043E\u0441\u0430"),r()(),i(187,"div",51)(188,"input",52),h("input",function(t){c(e);let o=u();return g(o.updateColor("quiz-bg",t))}),r(),i(189,"span",53),s(190),r()()()()(),i(191,"div",45)(192,"h3",46),s(193," C\u0442\u0438\u043B\u0438 \u0431\u043B\u043E\u043A\u0430 \u043F\u043E\u0434\u0430\u0440\u043A\u0438 \u0434\u043B\u044F \u0432\u0441\u0435\u0445 "),r(),i(194,"div",54)(195,"div",48)(196,"label",49)(197,"span",50),s(198,"\u0413\u0440\u0430\u0434\u0438\u0435\u043D\u0442 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u044F \u043D\u0430\u0447\u0430\u043B\u043E"),r()(),i(199,"div",51)(200,"input",52),h("input",function(t){c(e);let o=u();return g(o.updateColor("desc-gradient-start",t))}),r(),i(201,"span",53),s(202),r()()(),i(203,"div",48)(204,"label",49)(205,"span",50),s(206,"\u0413\u0440\u0430\u0434\u0438\u0435\u043D\u0442 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u044F \u043A\u043E\u043D\u0435\u0446"),r()(),i(207,"div",51)(208,"input",52),h("input",function(t){c(e);let o=u();return g(o.updateColor("desc-gradient-end",t))}),r(),i(209,"span",53),s(210),r()()()()()(),i(211,"div",55)(212,"button",56),h("click",function(){c(e);let t=u();return g(t.showEmailEditor=!t.showEmailEditor)}),f(213,ks,1,0,"span",57)(214,Bs,3,0,"svg",58),s(215),r()(),f(216,Is,6,13,"div",59),i(217,"div",60)(218,"button",61),h("click",function(){c(e);let t=u();return g(t.cancel.emit())}),s(219," \u041E\u0442\u043C\u0435\u043D\u0430 \u274C "),r(),i(220,"button",62),h("click",function(){c(e);let t=u();return g(t.onSubmit())}),f(221,Ds,1,0,"span",63),s(222),r()()()(),_(223,"app-view-page",64),P(224,"async"),r()}if(a&2){let e=m.ngIf,n=u();l(11),b(" ",n.mode==="create"?"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u043A\u0432\u0438\u0437":"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043A\u0432\u0438\u0437 #"+(n.initialData==null?null:n.initialData.id)," "),l(),d("ngIf",n.errorMessage),l(5),x("ngModel",e.isActive),l(4),x("ngModel",e.type),l(8),x("ngModel",e.rating),l(7),x("ngModel",e.typeQuizId),l(6),x("ngModel",e.name),l(4),x("ngModel",e.nameAdm),l(6),x("ngModel",e.landingId),l(3),d("ngForOf",n.landings),l(5),x("ngModel",e.description),l(4),x("ngModel",e.descriptionAdm),l(6),x("ngModel",e.endAt),l(5),x("ngModel",e.imageBgDesk),l(4),x("ngModel",e.imageBgMob),l(4),x("ngModel",e.imageHero),l(5),x("ngModel",e.grandPrize),l(4),x("ngModel",e.prizeForEveryOne),l(4),d("ngForOf",e.questions),l(16),d("value",n.getColorValue("main-text")),l(2),w(n.getColorValue("main-text")),l(6),d("value",n.getColorValue("text-gradient-start")),l(2),w(n.getColorValue("text-gradient-start")),l(6),d("value",n.getColorValue("text-gradient-end")),l(2),w(n.getColorValue("text-gradient-end")),l(6),d("value",n.getColorValue("desc-color")),l(2),w(n.getColorValue("desc-color")),l(10),d("value",n.getColorValue("primary")),l(2),w(n.getColorValue("primary")),l(6),d("value",n.getColorValue("quiz-text")),l(2),w(n.getColorValue("quiz-text")),l(6),d("value",n.getColorValue("btn-text")),l(2),w(n.getColorValue("btn-text")),l(6),d("value",n.getColorValue("btn-color-gradient-start")),l(2),w(n.getColorValue("btn-color-gradient-start")),l(6),d("value",n.getColorValue("btn-color-gradient-end")),l(2),w(n.getColorValue("btn-color-gradient-end")),l(6),d("value",n.getColorValue("quiz-bg")),l(2),w(n.getColorValue("quiz-bg")),l(10),d("value",n.getColorValue("desc-gradient-start")),l(2),w(n.getColorValue("desc-gradient-start")),l(6),d("value",n.getColorValue("desc-gradient-end")),l(2),w(n.getColorValue("desc-gradient-end")),l(2),d("disabled",n.chainLoading),l(),d("ngIf",n.chainLoading),l(),d("ngIf",!n.chainLoading),l(),b(" ",n.showEmailEditor?"\u0421\u043A\u0440\u044B\u0442\u044C":"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"," Email \u0448\u0430\u0431\u043B\u043E\u043D\u044B "),l(),d("ngIf",n.showEmailEditor),l(5),d("ngIf",n.loading),l(),b(" ",n.mode==="create"?"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043A\u0432\u0438\u0437 \u2705":"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u2705"," "),l(),d("quizData",Ee(224,51,n.form$))}}var sn=(()=>{class a{cdr;draftService;emailTemplateService;mode="create";initialData=null;landings=[];isEditLoad=!1;save=new G;cancel=new G;quizNumericId=null;showEmailEditor=!1;emailConfig=null;emailHtml="";existingTemplates=[];loadedResultTemplate=null;existingChainTemplates=[];chainSteps=[];chainLoading=!1;form$=new Le(this.getDefaultForm());errorMessage=null;loading=!1;selectedType="byScore";resultMessage="";autoSaveInterval;constructor(e,n,t){this.cdr=e,this.draftService=n,this.emailTemplateService=t}ngOnInit(){let e;if(this.initialData){let n=[];if(this.quizNumericId=this.initialData.id||null,typeof this.initialData.questions=="string")try{n=JSON.parse(this.initialData.questions)||[]}catch(t){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0430\u0440\u0441\u0438\u043D\u0433\u0430 questions:",t),n=[]}else Array.isArray(this.initialData.questions)&&(n=this.initialData.questions);e=V(T(T({},this.getDefaultForm()),this.initialData),{questions:n.length>0?n:[this.getEmptyQuestion()]}),this.quizNumericId&&(this.loadEmailTemplates(this.quizNumericId),this.loadChainTemplates(this.quizNumericId))}else{let n=this.draftService.loadDraft(this.draftService.getCreateDraftKey());n?e=V(T(T({},this.getDefaultForm()),n),{questions:Array.isArray(n.questions)&&n.questions.length>0?n.questions:[this.getEmptyQuestion()]}):e=V(T({},this.getDefaultForm()),{questions:[this.getEmptyQuestion()]}),this.startAutoSave()}this.form$.next(e),this.selectedType=e.type||"byScore",this.cdr.markForCheck()}loadEmailTemplates(e){let n=this.getDomain(),t=this.getApp();this.emailTemplateService.getTemplates(n,t,e).subscribe(o=>{this.existingTemplates=o;let p=o.find(E=>E.type==="result");p&&(this.loadedResultTemplate={html:p.html,subject:p.subject},this.emailHtml=p.html),this.cdr.markForCheck()})}loadChainTemplates(e){let n=this.getApp();if(!n){console.warn("App \u043D\u0435 \u0437\u0430\u0434\u0430\u043D, \u0446\u0435\u043F\u043E\u0447\u043A\u0430 \u043F\u0438\u0441\u0435\u043C \u043D\u0435 \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u0430");return}this.chainLoading=!0,this.cdr.markForCheck(),this.emailTemplateService.getChainTemplates(n,e).subscribe({next:t=>{this.existingChainTemplates=t,t.length>0&&(this.chainSteps=t.sort((o,p)=>o.step-p.step).map(o=>this.chainTemplateToStep(o))),this.chainLoading=!1,this.cdr.markForCheck()},error:t=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 chain \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432:",t),this.chainLoading=!1,this.cdr.markForCheck()}})}chainTemplateToStep(e){return{step:e.step,delayMinutes:e.delayMinutes,delayLabel:Pe(e.delayMinutes),subject:e.subject,html:e.html,config:this.extractConfigFromHtml(e.html),isExpanded:!1,isDirty:!1}}extractConfigFromHtml(e){let n=T({},ae),t=e.match(/<div[^>]*style="[^"]*font-size:\s*26px[^"]*"[^>]*>([^<]+)<\/div>/i);t&&(n.titleText=t[1].trim());let o=e.match(/font-size:\s*22px[^>]*>([^,<]+),/i);o&&(n.greeting=o[1].trim());let p=e.match(/linear-gradient\(135deg,\s*(#[0-9a-fA-F]{6})\s*0%,\s*(#[0-9a-fA-F]{6})/i);p&&(n.headerBgStart=p[1],n.headerBgEnd=p[2]);let E=e.match(/color:\s*(#[0-9a-fA-F]{6})[^>]*>\{\{name\}\}/i);return E&&(n.primaryColor=E[1]),n}getDomain(){return I.auth.emailDomein||"localhost"}getApp(){return I.auth.app}getDefaultForm(){return{typeQuizId:`quiz-${Date.now()}`,name:"",nameAdm:"",description:"",descriptionAdm:"",theme:"",isActive:!1,endAt:"",questions:[],quizInfo:"{}",result:"{}",resultsStats:"{}",imageBgDesk:"",imageBgMob:"",imageHero:"",grandPrize:"",prizeForEveryOne:"",type:"byScore",status:"active",geo:"vn",rating:0,landingId:0}}getEmptyQuestion(){return{id:Date.now(),text:"",image:"",answers:[this.getEmptyAnswer()],points:10,timeLimit:30}}getEmptyAnswer(){return this.selectedType==="byScore"?{text:"",isCorrect:!1,points:0}:{text:"",weight:1}}updateForm(){this.form$.next(T({},this.form$.value))}addQuestion(){let e=this.form$.value;this.form$.next(V(T({},e),{questions:[...e.questions,this.getEmptyQuestion()]})),this.saveDraftNow()}getColorValue(e){let n=this.form$.value,t=n?.theme||n?.quizInfo||"",o=new RegExp(`--${e}\\s*:\\s*(#[0-9a-fA-F]{3,8})(?=[;\\s]|$)`,"i"),p=t.match(o);return p?p[1]:"#000000"}updateColor(e,n){let t=n.target;if(!t?.value)return;let o=t.value,p=this.form$.value,E=p.theme||p.quizInfo||"",F=new RegExp(`(--${e}\\s*:\\s*)#[0-9a-fA-F]{3,8}`,"i");E.match(F)?E=E.replace(F,`$1${o}`):(E=E.trim(),E&&!E.endsWith(";")&&(E+=";"),E+=`--${e}: ${o};`),this.form$.next(V(T({},p),{theme:E})),this.saveDraftNow()}removeQuestion(e){if(!confirm("\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u043E\u043F\u0440\u043E\u0441?"))return;let n=this.form$.value,t=n.questions.filter((o,p)=>p!==e);this.form$.next(V(T({},n),{questions:t.length>0?t:[this.getEmptyQuestion()]})),this.saveDraftNow()}addAnswer(e){let n=this.form$.value,t=[...n.questions];t[e]=V(T({},t[e]),{answers:[...t[e].answers,this.getEmptyAnswer()]}),this.form$.next(V(T({},n),{questions:t})),this.saveDraftNow()}removeAnswer(e,n){if(!confirm("\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043E\u0442\u0432\u0435\u0442?"))return;let t=this.form$.value,o=[...t.questions];o[e]=V(T({},o[e]),{answers:o[e].answers.filter((p,E)=>E!==n)}),this.form$.next(V(T({},t),{questions:o})),this.saveDraftNow()}switchType(e){let n=this.form$.value,t=n.questions.map(o=>V(T({},o),{answers:o.answers.map(p=>e==="byScore"?{text:p.text,isCorrect:p.isCorrect??!1,points:p.points??0}:{text:p.text,weight:p.weight??1})}));this.form$.next(V(T({},n),{type:e,questions:t})),this.selectedType=e,this.saveDraftNow()}startAutoSave(){this.autoSaveInterval=setInterval(()=>this.saveDraftNow(),3e4)}saveDraftNow(){this.mode==="create"&&this.draftService.saveDraft(this.draftService.getCreateDraftKey(),this.form$.value)}clearDraft(){this.mode==="create"&&this.draftService.clearDraft(this.draftService.getCreateDraftKey())}ngOnDestroy(){this.autoSaveInterval&&clearInterval(this.autoSaveInterval),this.mode==="create"&&this.saveDraftNow()}onCancel(){this.clearDraft(),this.cancel.emit()}updateQuestionText(e,n){let t=this.form$.value,o=[...t.questions];o[e]=V(T({},o[e]),{text:n}),this.form$.next(V(T({},t),{questions:o})),this.saveDraftNow()}onSubmit(){let e=this.form$.value;this.validateForm(e)&&(this.loading=!0,this.errorMessage=null,this.cdr.markForCheck(),Promise.all([this.saveEmailTemplates(e),this.saveChainTemplates()]).then(()=>{this.submitQuiz(e)}).catch(n=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432:",n),this.errorMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F email \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432",this.loading=!1,this.cdr.markForCheck()}))}saveEmailTemplates(e){return be(this,null,function*(){if(!this.emailConfig||!this.emailHtml)return;if(!this.quizNumericId){console.warn("\u041D\u0435\u0442 \u0447\u0438\u0441\u043B\u043E\u0432\u043E\u0433\u043E ID \u043A\u0432\u0438\u0437\u0430, \u0448\u0430\u0431\u043B\u043E\u043D\u044B \u0431\u0443\u0434\u0443\u0442 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B \u043F\u043E\u0441\u043B\u0435 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u043A\u0432\u0438\u0437\u0430");return}let n=this.getDomain(),t=this.getApp(),o={domain:n,app:t,quiz_id:this.quizNumericId,type:"result",subject:this.emailConfig.greeting||"\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u043A\u0432\u0438\u0437\u0430",html:this.emailHtml};return new Promise((p,E)=>{this.emailTemplateService.updateTemplateByClient(o).subscribe(F=>{F.success?p():E(new Error(F.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0448\u0430\u0431\u043B\u043E\u043D\u0430"))})})})}saveChainTemplates(){return be(this,null,function*(){if(this.chainSteps.length===0||this.chainSteps.filter(o=>o.isDirty).length===0&&this.existingChainTemplates.length>0)return;if(!this.quizNumericId){console.warn("\u041D\u0435\u0442 ID \u043A\u0432\u0438\u0437\u0430, \u0446\u0435\u043F\u043E\u0447\u043A\u0430 \u043D\u0435 \u0431\u0443\u0434\u0435\u0442 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0430");return}let n=this.getApp();if(!n){console.warn("App \u043D\u0435 \u0437\u0430\u0434\u0430\u043D, \u0446\u0435\u043F\u043E\u0447\u043A\u0430 \u043D\u0435 \u0431\u0443\u0434\u0435\u0442 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0430");return}let t=this.chainSteps.map(o=>({step:o.step,delayMinutes:o.delayMinutes,subject:o.subject,html:o.html}));return new Promise((o,p)=>{this.emailTemplateService.upsertChainTemplatesBulk({app:n,quizId:this.quizNumericId,chainType:"PERSONAL",templates:t,domain:this.getDomain()}).subscribe(E=>{E.success?(this.chainSteps.forEach(F=>F.isDirty=!1),o()):p(new Error(E.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0446\u0435\u043F\u043E\u0447\u043A\u0438"))})})})}submitQuiz(e){let n=V(T({},e),{questions:e.questions,landingId:Number(e.landingId)});this.save.emit(n),this.clearDraft(),this.resultMessage="\u041A\u0432\u0438\u0437 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0451\u043D!",this.loading=!1,this.autoCloseMessage(),this.cdr.markForCheck()}validateForm(e){if(this.errorMessage=null,!e.name?.trim())return this.errorMessage="\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u0432\u0438\u0437\u0430 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E",this.autoCloseErrorMessage(),!1;if(!e.typeQuizId?.trim())return this.errorMessage="\u0423\u043D\u0438\u043A\u0430\u043B\u044C\u043D\u044B\u0439 ID \u043A\u0432\u0438\u0437\u0430 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u0435\u043D",this.autoCloseErrorMessage(),!1;if(e.landingId===0)return this.errorMessage="\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043B\u0435\u043D\u0434\u0438\u043D\u0433",this.autoCloseErrorMessage(),!1;if(!e.endAt)return this.errorMessage="\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u043E\u043A\u043E\u043D\u0447\u0430\u043D\u0438\u044F",this.autoCloseErrorMessage(),!1;if(!e.questions?.length)return this.errorMessage="\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u0438\u043D \u0432\u043E\u043F\u0440\u043E\u0441",this.autoCloseErrorMessage(),!1;for(let[n,t]of e.questions.entries()){if(!t.text?.trim())return this.errorMessage=`\u0412\u043E\u043F\u0440\u043E\u0441 ${n+1}: \u0442\u0435\u043A\u0441\u0442 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u0435\u043D`,this.autoCloseErrorMessage(),!1;if(!t.answers?.length)return this.errorMessage=`\u0412\u043E\u043F\u0440\u043E\u0441 ${n+1}: \u043D\u0443\u0436\u0435\u043D \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u0438\u043D \u043E\u0442\u0432\u0435\u0442`,this.autoCloseErrorMessage(),!1;for(let[o,p]of t.answers.entries())if(!p.text?.trim())return this.errorMessage=`\u0412\u043E\u043F\u0440\u043E\u0441 ${n+1}, \u043E\u0442\u0432\u0435\u0442 ${o+1}: \u0442\u0435\u043A\u0441\u0442 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u0435\u043D`,this.autoCloseErrorMessage(),!1}return!0}autoCloseErrorMessage(){setTimeout(()=>{this.errorMessage=null,this.cdr.markForCheck()},3e3)}onEmailConfigChange(e){this.emailConfig=e}onEmailHtmlChange(e){this.emailHtml=e}onChainStepsChange(e){this.chainSteps=e}autoCloseMessage(){setTimeout(()=>{this.resultMessage="",this.cdr.markForCheck()},3e3)}cancelMessage(){this.resultMessage="",this.cdr.markForCheck()}static \u0275fac=function(n){return new(n||a)(k(ce),k(Yi),k(Ye))};static \u0275cmp=B({type:a,selectors:[["app-quiz-form"]],inputs:{mode:"mode",initialData:"initialData",landings:"landings",isEditLoad:"isEditLoad"},outputs:{save:"save",cancel:"cancel"},decls:2,vars:3,consts:[["class","flex flex-row gap-8 max-h-[100dvh] overflow-hidden py-[20px] bg-gradient-to-r from-indigo-800 via-indigo-500 to-indigo-200 w-full",4,"ngIf"],[1,"flex","flex-row","gap-8","max-h-[100dvh]","overflow-hidden","py-[20px]","bg-gradient-to-r","from-indigo-800","via-indigo-500","to-indigo-200","w-full"],[1,"card","h-[100dvh]","bg-base-100","shadow-xl","w-full","max-w-5xl","mx-auto","rounded-2xl","overflow-hidden","border","border-base-200/60"],[1,"card-body","p-6","pb-[50px]","h-full","overflow-y-auto"],[1,"text-xl","md:text-2xl","font-bold","text-center","mb-6","bg-gradient-to-r","from-indigo-600","to-purple-600","bg-clip-text","text-transparent","flex","items-center","gap-2","relative","justify-center"],["data-tip","\u041D\u0430\u0437\u0430\u0434 \u043A \u043A\u0432\u0438\u0437\u0430\u043C\u0438",1,"btn","btn-ghost","btn-circle","absolute","left-0","tooltip","tooltip-right","tooltip-primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","48","height","48","viewBox","0 0 24 24"],["fill","none","stroke","#4f46e5","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["stroke-dasharray","16","d","M19 12h-13.5"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.3s","values","16;0"],["stroke-dasharray","10","stroke-dashoffset","10","d","M5 12l5 5M5 12l5 -5"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.3s","dur","0.2s","to","0"],["class","alert alert-error shadow-lg mb-10 rounded-2xl relative",4,"ngIf"],[1,"head-controlls","grid","grid-cols-3","gap-4","mb-4"],[1,"w-full","flex","flex-row","items-center","justify-center","h-fit","mt-auto","mb-2","gap-2"],[1,"block","text-indigo-600","text-md"],["type","checkbox",1,"checkbox","checkbox-lg","checkbox-success",3,"ngModelChange","ngModel"],[1,"w-full","flex","flex-col","items-center","justify-center"],[1,"block","text-lg","text-indigo-600","font-medium","mb-2"],[1,"select","w-full","bg-white","border-2","border-indigo-200","focus:border-indigo-500","focus:ring","focus:ring-indigo-300/40","rounded-xl","p-[5px","10px]","text-gray-800","text-md",3,"ngModelChange","ngModel"],["value","byScore"],["value","byWeight"],["type","number","min","0","max","10","step","0.5",1,"input","w-20","bg-white","border-2","border-indigo-200","focus:border-indigo-500","focus:ring","focus:ring-indigo-300/40","rounded-xl","px-5","py-3","text-gray-800","placeholder-gray-500",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-2","gap-4","shadow-xl","p-4","rounded-xl"],[1,"text-error","font-bold"],["type","text","required","",1,"input","w-full","bg-white","border-2","border-indigo-200","focus:border-indigo-500","focus:ring","focus:ring-indigo-300/40","rounded-xl","px-5","py-3","text-gray-800","placeholder-gray-500",3,"ngModelChange","ngModel"],["type","text",1,"input","w-full","bg-white","border-2","border-indigo-200","focus:border-indigo-500","focus:ring","focus:ring-indigo-300/40","rounded-xl","px-5","py-3","text-gray-800","placeholder-gray-500",3,"ngModelChange","ngModel"],["required","",1,"select","w-full","bg-white","border-2","border-indigo-200","focus:border-indigo-500","focus:ring","focus:ring-indigo-300/40","rounded-xl","px-5","py-3","text-gray-800",3,"ngModelChange","ngModel"],["value","0","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"textarea","w-full","h-32","bg-white","border-2","border-indigo-200","focus:border-indigo-500","focus:ring","focus:ring-indigo-300/40","rounded-2xl","px-5","py-3.5","text-gray-800","placeholder-gray-500","resize-y",3,"ngModelChange","ngModel"],[1,"shadow-xl","p-4","rounded-xl"],["type","datetime-local","required","",1,"input","w-full","max-w-sm","bg-white","border-2","border-indigo-200","focus:border-indigo-500","focus:ring","focus:ring-indigo-300/40","rounded-xl","px-5","py-3","text-gray-800",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","shadow-xl","p-4","rounded-xl"],["type","url","placeholder","https://",1,"input","w-full","bg-white","border-2","border-indigo-200","focus:border-indigo-500","focus:ring","focus:ring-indigo-300/40","rounded-xl","px-5","py-3","text-gray-800","placeholder-gray-500",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","shadow-xl","p-4","rounded-xl"],["type","text","placeholder","1000 \u0444\u0440\u0438\u0441\u043F\u0438\u043D\u043E\u0432",1,"input","w-full","bg-white","border-2","border-indigo-200","focus:border-indigo-500","focus:ring","focus:ring-indigo-300/40","rounded-xl","px-5","py-3","text-gray-800","placeholder-gray-500",3,"ngModelChange","ngModel"],["type","text","placeholder","+10 FS",1,"input","w-full","bg-white","border-2","border-indigo-200","focus:border-indigo-500","focus:ring","focus:ring-indigo-300/40","rounded-xl","px-5","py-3","text-gray-800","placeholder-gray-500",3,"ngModelChange","ngModel"],[1,"mt-20"],[1,"text-2xl","md:text-3xl","text-center","font-bold","text-black","mb-8"],["class","mt-6 p-5 border rounded-xl bg-white shadow-xl",4,"ngFor","ngForOf"],[1,"text-center","mt-10"],[1,"btn","btn-success","btn-lg",3,"click"],[1,"mt-12","p-6","border","rounded-xl","bg-base-200","shadow-xl"],[1,"text-xl","font-bold","text-center","mb-6","text-indigo-600"],[1,"flex","flex-col","mb-4"],[1,"text-lg","font-bold","text-start","text-gray-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"form-control"],[1,"label"],[1,"label-text"],[1,"flex","gap-3","items-center"],["type","color",1,"w-12","h-10","p-1","border","rounded","cursor-pointer","shadow-sm",3,"input","value"],[1,"text-sm","font-mono","text-gray-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"mt-12"],[1,"btn","email-btn","btn-outline","btn-success","gap-2","w-full",3,"click","disabled"],["class","loading loading-spinner loading-sm",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",4,"ngIf"],["class","fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",4,"ngIf"],[1,"flex","flex-col","sm:flex-row","justify-center","gap-5","mt-16"],[1,"btn","btn-ghost","btn-error",3,"click"],[1,"btn","btn-success","btn-ghost",3,"click"],["class","loading loading-spinner",4,"ngIf"],[3,"quizData"],[1,"alert","alert-error","shadow-lg","mb-10","rounded-2xl","relative"],[1,"btn","btn-ghost","btn-sm","absolute","right-2","top-2",3,"click"],[3,"value"],[1,"mt-6","p-5","border","rounded-xl","bg-white","shadow-xl"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xl","font-bold","text-indigo-600"],[1,"btn","btn-ghost","btn-error","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","#dc2626"],["d","M6 19a2 2 0 002 2h8a2 2 0 002-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"],["placeholder","\u0422\u0435\u043A\u0441\u0442 \u0432\u043E\u043F\u0440\u043E\u0441\u0430",1,"input","block","w-full","mb-4","border","border-indigo-200","bg-white","px-5","py-3","text-gray-800","focus:border-indigo-500","focus:ring","focus:ring-indigo-300/40","rounded-xl",3,"ngModelChange","ngModel"],[1,"block","text-base","text-indigo-500","mb-1.5"],["type","url","placeholder","https://...",1,"input","block","w-full","border","border-red-200","bg-white","px-5","py-3","text-gray-800","focus:border-red-500","focus:ring","focus:ring-red-300/40","rounded-xl",3,"ngModelChange","ngModel"],[1,"mt-6"],[1,"text-lg","font-semibold","mb-3"],["class","flex flex-wrap gap-3 items-center mb-4 p-3  rounded-lg shadow-lg",4,"ngFor","ngForOf"],[1,"btn","btn-outline","mt-2",3,"click"],[1,"flex","flex-wrap","gap-3","items-center","mb-4","p-3","rounded-lg","shadow-lg"],["required","","placeholder","\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430",1,"input","flex-1","border","border-green-200","bg-white","px-5","py-3","focus:border-green-500","focus:ring","focus:ring-green-300/40","rounded-xl",3,"ngModelChange","ngModel"],[4,"ngIf"],[1,"btn","btn-circle","btn-error","btn-xs",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","white"],["d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"],[1,"flex","items-center","gap-2","min-w-[110px]"],["type","checkbox",1,"checkbox","checkbox-success","checkbox-sm",3,"ngModelChange","ngModel"],[1,"text-sm"],["type","number","min","0",1,"input","w-20","text-center","border","border-green-200","focus:border-green-500","rounded-xl","px-3","py-2.5",3,"ngModelChange","ngModel"],["type","number","step","0.1","min","0","placeholder","\u0412\u0435\u0441",1,"input","w-20","text-center","border","border-purple-200","focus:border-purple-500","rounded-xl","px-3","py-2.5",3,"ngModelChange","ngModel"],[1,"loading","loading-spinner","loading-sm"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"],["points","22,6 12,13 2,6"],[1,"fixed","inset-0","bg-black/60","z-50","flex","items-center","justify-center","p-4"],[1,"w-full","max-w-7xl","h-[90vh]"],[3,"configChange","htmlChange","chainStepsChange","close","quizName","quizId","grandPrize","prizeForEveryOne","initialConfig","mode","existingChainTemplates"],[1,"loading","loading-spinner"]],template:function(n,t){n&1&&(f(0,Fs,225,53,"div",0),P(1,"async")),n&2&&d("ngIf",Ee(1,1,t.form$))},dependencies:[H,A,Z,ee,Y,st,Be,re,q,ut,Ht,jt,Q,nn,ln,Ne],styles:[".btn.btn-ghost.btn-error[_ngcontent-%COMP%]:hover{background-color:#ff00007f!important}.btn.btn-ghost.btn-success[_ngcontent-%COMP%]{background-color:#00aa6f!important;color:#fff!important}.head-controlls.grid.grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:25% auto 15%}.btn.email-btn.btn-outline.btn-success[_ngcontent-%COMP%]{background-color:#00aa6f!important;height:5rem!important;color:#fff!important;font-size:25px!important}.btn.btn-ghost.btn-success[_ngcontent-%COMP%]:hover, .btn.email-btn.btn-outline.btn-success[_ngcontent-%COMP%]:hover{background-color:#01b70184!important}"],changeDetection:0})}return a})();function Ps(a,m){if(a&1&&(i(0,"option",12),s(1),r()),a&2){let e=m.$implicit;d("ngValue",e.id),l(),at(" ",e.name," (",e.quizCount,") \u2014 ",e.url," ")}}function As(a,m){if(a&1){let e=S();i(0,"button",21),h("click",function(){c(e);let t=u();return g(t.startCreate())}),y(),i(1,"svg",5)(2,"g",22)(3,"path",23),_(4,"animate",24)(5,"animate",25),r(),i(6,"g",26)(7,"path",27),_(8,"animate",28),r(),i(9,"path",29),_(10,"animate",30),r()()()(),M(),i(11,"span",31),s(12,"\u041D\u043E\u0432\u044B\u0439 \u043A\u0432\u0438\u0437"),r()()}if(a&2){let e=u();d("disabled",e.loading)}}function zs(a,m){if(a&1){let e=S();i(0,"div",32)(1,"app-quiz-form",33),h("save",function(t){c(e);let o=u();return g(o.saveQuiz(t))})("cancel",function(){c(e);let t=u();return g(t.cancelEdit())}),r()()}if(a&2){let e=u();l(),d("mode",e.editingQuizId===-1?"create":"edit")("initialData",e.editingQuiz)("landings",e.landings)("isEditLoad",e.isEditLoad)}}function Ls(a,m){if(a&1){let e=S();i(0,"div",46)(1,"app-quiz-preview",47),h("onEdit",function(){let t=c(e).$implicit,o=u(3);return g(o.startEdit(t))}),r()()}if(a&2){let e=m.$implicit;l(),d("quiz",e)}}function Ws(a,m){a&1&&(i(0,"div",48),_(1,"app-loading"),r())}function Us(a,m){if(a&1&&(i(0,"div",36)(1,"div",37),y(),i(2,"svg",38),_(3,"path",39)(4,"path",40),r(),M(),i(5,"div")(6,"div",41),s(7),r(),i(8,"a",42),s(9),r()(),i(10,"span",43),s(11),r()(),i(12,"div",44),f(13,Ls,2,1,"div",45),r(),f(14,Ws,2,0,"div",19),r()),a&2){let e=m.$implicit,n=u(2);l(7),w(e.landing.name),l(),d("href","https://"+e.landing.url,W),l(),b(" ",e.landing.url," "),l(2),b("",e.quizzes.length," \u043A\u0432\u0438\u0437\u043E\u0432"),l(2),d("ngForOf",e.quizzes),l(),d("ngIf",n.isEditLoad)}}function Os(a,m){if(a&1&&(i(0,"div",34),f(1,Us,15,6,"div",35),r()),a&2){let e=u();l(),d("ngForOf",e.quizzesByLanding)}}function Ns(a,m){a&1&&(i(0,"div",48),s(1," \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430... "),_(2,"app-loading"),r())}function js(a,m){if(a&1){let e=S();i(0,"div",49)(1,"b"),s(2),r(),i(3,"span",50),h("click",function(){c(e);let t=u();return g(t.cancelMessage())}),y(),i(4,"svg",51),_(5,"path",52),r()()()}if(a&2){let e=u();l(2),w(e.resultMessage)}}var un=(()=>{class a{quizService;cdr;landings=[];quizzes=[];filteredQuizzes=[];selectedLandingId=null;loadingLandings=!0;loadingQuizzes=!1;loading=!1;editingQuizId=null;editingQuiz=null;resultMessage="";quizzesByLanding=[];isEditLoad=!1;constructor(e,n){this.quizService=e,this.cdr=n}ngOnInit(){this.loadLandings(),this.loadQuizzes()}startCreate(){this.editingQuizId=-1,this.editingQuiz=null,this.cdr.markForCheck()}groupQuizzesByLanding(){let e=new Map;this.filteredQuizzes.forEach(n=>{let t=n.landing.id;e.has(t)||e.set(t,[]),e.get(t).push(n)}),this.quizzesByLanding=[],e.forEach((n,t)=>{let o=this.landings.find(p=>p.id===t);o?this.quizzesByLanding.push({landing:o,quizzes:n}):this.quizzesByLanding.push({landing:{id:t,url:"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u044B\u0439",name:"\u0411\u0435\u0437 \u043B\u0435\u043D\u0434\u0438\u043D\u0433\u0430",status:"0",createdAt:"",quizCount:n.length},quizzes:n})}),this.quizzesByLanding.sort((n,t)=>n.landing.name.localeCompare(t.landing.name))}loadLandings(){this.loadingLandings=!0,this.quizService.getAllLandings().subscribe({next:e=>{this.landings=e,this.loadingLandings=!1,this.cdr.markForCheck()},error:()=>{this.loadingLandings=!1,this.cdr.markForCheck()}})}loadQuizzes(){this.loadingQuizzes=!0,this.quizService.getQuizzesByLanding(this.selectedLandingId).subscribe({next:e=>{this.quizzes=e,this.filteredQuizzes=[...e],this.sortQuizzes(),this.groupQuizzesByLanding(),this.loadingQuizzes=!1,this.cdr.markForCheck()},error:()=>{this.loadingQuizzes=!1,this.cdr.markForCheck()}})}onLandingChange(e){this.selectedLandingId=e?Number(e):null,this.loadQuizzes()}sortQuizzes(){this.filteredQuizzes.sort((e,n)=>e.isActive!==n.isActive?e.isActive?-1:1:new Date(n.createdAt).getTime()-new Date(e.createdAt).getTime())}startEdit(e){this.isEditLoad=!0,this.cdr.markForCheck(),this.quizService.getQuizById(e.id).subscribe({next:n=>{try{let t=[];typeof n.questions=="string"&&(t=JSON.parse(n.questions)||[]),this.editingQuiz=V(T({},n),{questions:t}),this.editingQuizId=e.id,this.isEditLoad=!1,this.cdr.markForCheck()}catch(t){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u0434\u0433\u043E\u0442\u043E\u0432\u043A\u0435 editingQuiz:",t),this.resultMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u043E\u0434\u0433\u043E\u0442\u043E\u0432\u043A\u0438 \u0434\u0430\u043D\u043D\u044B\u0445 \u043A\u0432\u0438\u0437\u0430",this.autoCloseMessage(),this.isEditLoad=!1,this.cdr.markForCheck()}},error:n=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043A\u0432\u0438\u0437\u0430:",n),this.resultMessage="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043A\u0432\u0438\u0437",this.autoCloseMessage(),this.isEditLoad=!1,this.cdr.markForCheck()}})}saveQuiz(e){this.editingQuizId===-1?this.quizService.createQuiz(e).subscribe({next:()=>{this.resultMessage="\u041A\u0432\u0438\u0437 \u0441\u043E\u0437\u0434\u0430\u043D!",this.autoCloseMessage(),this.cancelEdit(),this.loadQuizzes()},error:n=>this.resultMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F: "+n.message}):this.editingQuizId&&this.quizService.updateQuiz(this.editingQuizId,e).subscribe({next:()=>{this.resultMessage="\u041A\u0432\u0438\u0437 \u043E\u0431\u043D\u043E\u0432\u043B\u0451\u043D!",this.autoCloseMessage(),this.cancelEdit(),this.loadQuizzes()},error:n=>this.resultMessage="\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F: "+n.message})}cancelEdit(){this.editingQuizId=null,this.editingQuiz=null,this.cdr.markForCheck()}autoCloseMessage(){setTimeout(()=>{this.resultMessage=""},3e3)}cancelMessage(){this.resultMessage=""}static \u0275fac=function(n){return new(n||a)(k(Qi),k(ce))};static \u0275cmp=B({type:a,selectors:[["app-quiz"]],decls:25,vars:9,consts:[[1,"events-page","ml-side","section-full","mr-2"],[1,"mx-auto","pt-[10px]"],[1,"bg-main-trans2-gradient-90","header-tab","py-[10px]","mb-0","rounded-[20px]","w-fit","pr-4","mx-auto"],[1,"title-group","grid-cols-3","grid","items-center","w-full"],[1,"tetle-items","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","48","height","48","viewBox","0 0 24 24"],["fill","#4F45E5","d","M12.779.025a11.8 11.8 0 0 0-5.338.896A11.8 11.8 0 0 0 3.058 4.11A11.93 11.93 0 0 0 .427 14.363a11.9 11.9 0 0 0 2.3 4.921a11.84 11.84 0 0 0 4.24 3.378a11.78 11.78 0 0 0 10.533-.226a.33.33 0 0 1 .331.018a9.14 9.14 0 0 0 5.197 1.545a.33.33 0 0 0 .332-.332v-4.038a.334.334 0 0 0-.276-.331a4.7 4.7 0 0 1-1.106-.319a.33.33 0 0 1-.191-.352a.3.3 0 0 1 .05-.133a11.94 11.94 0 0 0 .772-11.871a11.87 11.87 0 0 0-4.042-4.628A11.8 11.8 0 0 0 12.765.018zM4.843 11.898a7.24 7.24 0 0 1 1.205-4.005a7.2 7.2 0 0 1 3.215-2.657a7.13 7.13 0 0 1 7.815 1.558a7.24 7.24 0 0 1 1.555 7.854a7.2 7.2 0 0 1-2.643 3.234a7.15 7.15 0 0 1-9.049-.896a7.23 7.23 0 0 1-2.103-5.089z"],[1,"title-tab","text-3xl","font-bold","text-indigo-600"],[1,"title-tab","text-main-trans","font-bold","w-fit"],[1,"flex","items-center","gap-4"],[1,"title-tab","text-lg","font-bold","ml-8"],[1,"select","select-primary","text-xl","rounded-[25px]","w-96","max-w-full",3,"ngModelChange","ngModel","disabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"ml-auto","flex","gap-4"],["class","btn btn-accent flex items-center gap-2",3,"disabled","click",4,"ngIf"],[1,"card-wrapper","h-auto"],["class","fixed inset-0 bg-base-300/80 z-50 flex items-start justify-center overflow-hidden pb-16 w-full",4,"ngIf"],["class","card-wrapper rounded-[20px] px-6 pt-8 pb-12 min-h-[89dvh] bg-main-trans-gradient-0",4,"ngIf"],["class","text-center py-20 text-3xl font-bold text-indigo-700",4,"ngIf"],["class","alert mb-4 relative flex justify-between bg-primary text-white",4,"ngIf"],[1,"btn","btn-accent","flex","items-center","gap-2",3,"click","disabled"],["stroke","#fff","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","#fff","fill-opacity","0","stroke-dasharray","60","d","M3 12c0 -4.97 4.03 -9 9 -9c4.97 0 9 4.03 9 9c0 4.97 -4.03 9 -9 9c-4.97 0 -9 -4.03 -9 -9Z"],["fill","freeze","attributeName","stroke-dashoffset","dur","0.6s","values","60;0"],["fill","freeze","attributeName","fill-opacity","begin","0.6s","dur","0.15s","to","0.3"],["fill","none","stroke-dasharray","12","stroke-dashoffset","12"],["d","M7 12h10"],["fill","freeze","attributeName","stroke-dashoffset","begin","0.85s","dur","0.2s","to","0"],["d","M12 7v10"],["fill","freeze","attributeName","stroke-dashoffset","begin","1.05s","dur","0.2s","to","0"],[1,"text-xl","text-white"],[1,"fixed","inset-0","bg-base-300/80","z-50","flex","items-start","justify-center","overflow-hidden","pb-16","w-full"],[1,"w-full",3,"save","cancel","mode","initialData","landings","isEditLoad"],[1,"card-wrapper","rounded-[20px]","px-6","pt-8","pb-12","min-h-[89dvh]","bg-main-trans-gradient-0"],["class","mb-10",4,"ngFor","ngForOf"],[1,"mb-10"],[1,"landing-header","bg-indigo-600/10","border","border-indigo-300","rounded-xl","px-4","py-3","mb-4","flex","items-center","gap-3"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","#4F46E5","stroke-width","2"],["d","M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"],["d","M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"],[1,"text-lg","font-bold","text-indigo-700"],["target","_blank",1,"text-sm","text-indigo-500","hover:underline",3,"href"],[1,"ml-auto","badge","badge-primary"],[1,"grid","grid-cols-2","md:grid-cols-3","gap-4"],["class","card bg-base-100 shadow-xl hover:shadow-2xl transition-all",4,"ngFor","ngForOf"],[1,"card","bg-base-100","shadow-xl","hover:shadow-2xl","transition-all"],[3,"onEdit","quiz"],[1,"text-center","py-20","text-3xl","font-bold","text-indigo-700"],[1,"alert","mb-4","relative","flex","justify-between","bg-primary","text-white"],[1,"close","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","currentColor","d","M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10s10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m3.59-13L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41z"]],template:function(n,t){n&1&&(_(0,"app-sidebar"),i(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),y(),i(6,"svg",5),_(7,"path",6),r(),M(),i(8,"h2",7),s(9," uiz "),r()(),i(10,"div",8)(11,"div",9)(12,"label",10),s(13," \u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043B\u0435\u043D\u0434\u0438\u043D\u0433: \u{1F449}"),r(),i(14,"select",11),C("ngModelChange",function(p){return v(t.selectedLandingId,p)||(t.selectedLandingId=p),p}),h("ngModelChange",function(p){return t.onLandingChange(p)}),i(15,"option",12),s(16,"\u0412\u0441\u0435 \u043B\u0435\u043D\u0434\u0438\u043D\u0433\u0438"),r(),f(17,Ps,2,4,"option",13),r()()(),i(18,"div",14),f(19,As,13,1,"button",15),r()()(),i(20,"div",16),f(21,zs,2,4,"div",17)(22,Os,2,1,"div",18)(23,Ns,3,0,"div",19),r()()(),f(24,js,6,1,"div",20)),n&2&&(l(14),x("ngModel",t.selectedLandingId),d("disabled",t.loadingLandings),l(),d("ngValue",null),l(2),d("ngForOf",t.landings),l(2),d("ngIf",!t.editingQuizId),l(2),d("ngIf",t.editingQuizId!==null),l(),d("ngIf",t.editingQuizId===null&&!t.loading&&t.filteredQuizzes.length>0),l(),d("ngIf",!t.loading&&!t.editingQuizId&&t.filteredQuizzes.length===0),l(),d("ngIf",t.resultMessage))},dependencies:[H,A,de,Te,Z,ee,re,q,Q,Ri,sn],styles:[".grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:10% auto 20%;max-width:950px;margin:0 auto}.btn.btn-accent[_ngcontent-%COMP%]{border-radius:25px;padding-left:0}"]})}return a})();var Hs=[{path:"",component:di},{path:"add-button",component:mi},{path:"push",component:ci},{path:"images",component:Ci},{path:"users",component:_i},{path:"site-users",component:Di},{path:"email-sent",component:Ii},{path:"events",component:qi},{path:"quiz",component:un},{path:"tutorials",component:Fi},{path:"**",redirectTo:"",pathMatch:"full"}],dn=(()=>{class a{static \u0275fac=function(n){return new(n||a)};static \u0275mod=Ue({type:a});static \u0275inj=We({imports:[Ze.forChild(Hs),Ze]})}return a})();var nc=(()=>{class a{static \u0275fac=function(n){return new(n||a)};static \u0275mod=Ue({type:a});static \u0275inj=We({imports:[lt,Xt,dn,$t]})}return a})();export{nc as AdminModule};
