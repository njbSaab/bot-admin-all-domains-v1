
<!-- Форма создания нового события -->
<div class="card bg-base-100 mx-auto hover-shadow-white cursor-pointer w-[98%] flex flex-col gap-8 py-4 relative overflow-hidden">
  <div
    class="img-bg absolute w-full h-full top-0 left-0 z-[-1] border-radius-[20px] overflow-hidden"
    *ngIf="newEvent.imageBgDesk"
  >
    <img
      [src]="newEvent.imageBgDesk"
      alt="Фон десктоп"
      class="mt-2 object-cover w-full h-full opacity-50"
    />
  </div>

  <h3 class="text-2xl font-bold text-indigo-600 text-center">
    Создать новое событие
  </h3>

  <div class="card-primary-text flex flex-col gap-4 items-center w-full pb-4">
    <label class="text-lg font-bold w-full text-center grid justify-center items-center label-grid">
      Вид спорта:
      <select
        class="select select-primary text-xl w-fit rounded-[25px]"
        [(ngModel)]="newEvent.name"
        (ngModelChange)="onSportChange()"
      >
        <option [ngValue]="''">Выберите вид спорта</option>
        <option *ngFor="let sport of sports" [ngValue]="sport">
          {{ sport }}
        </option>
      </select>
    </label>

    <label class="text-lg font-bold w-full text-center grid justify-center items-center label-grid">
      Тип события:
      <input
        [(ngModel)]="newEvent.type"
        class="input w-fit border border-gray-300 rounded-lg px-4 py-2.5 focus:ring focus:ring-indigo-300 focus:ring-opacity-40 text-indigo-600"
        placeholder="Введите тип события (например, Ultra Liga)"
      />
    </label>

    <label class="text-lg font-bold w-full text-center grid justify-center items-center label-grid">
      Дата и время окончания:
      <input
        [(ngModel)]="newEvent.endAt"
        type="datetime-local"
        class="input w-fit border border-gray-400 rounded-lg px-4 py-2.5 focus:ring focus:ring-indigo-300 focus:ring-opacity-40 text-indigo-600"
      />
    </label>
  </div>

  <div class="card-primary-image flex items-center w-full pb-8">
    <!-- Команда A -->
    <div class="mebmer flex flex-col items-center w-[40%]">
      <picture
        *ngIf="newEvent.imageMemberA && urlValidationService.isValidImageUrl(newEvent.imageMemberA)"
        class="tooltip tooltip-bottom tooltip-primary"
        [attr.data-tip]="newEvent.imageMemberA"
      >
        <img
          [src]="newEvent.imageMemberA"
          [alt]="newEvent.memberA || 'Команда A'"
          class="team-image mt-2"
        />
      </picture>
      <label class="text-sm font-bold w-full text-center flex flex-col justify-center items-center gap-2 mb-2">
        URL изображения команды A:
        <input
          [(ngModel)]="newEvent.imageMemberA"
          (ngModelChange)="refreshImage()"
          class="input w-fit border border-gray-300 rounded-lg px-4 py-2.5 focus:ring focus:ring-indigo-300 focus:ring-opacity-40 text-indigo-600"
          placeholder="Введите URL изображения"
        />
        <span
          *ngIf="newEvent.imageMemberA && !urlValidationService.isValidImageUrl(newEvent.imageMemberA)"
          class="text-red-500 text-sm mt-2 block"
        >
          Неверный URL, пример: {{ imageUrl }}/images/example.png
        </span>
      </label>
      <label class="text-sm font-bold w-full text-center flex flex-col justify-center items-center">
        Команда/Игрок 1:
        <input
          [(ngModel)]="newEvent.memberA"
          class="input w-fit border border-gray-300 rounded-lg px-4 focus:ring focus:ring-indigo-300 focus:ring-opacity-40 text-indigo-600"
          placeholder="Введите название команды/игрока"
        />
      </label>
    </div>

    <!-- VS -->
    <div class="result flex flex-col items-center w-[20%]">
      <picture>
        <img
          class="vs-img bg-base-300 rounded-xl p-[10px]"
          src="https://vietget.online/lp200/img/card-primary/VS.svg"
          alt="VS"
        />
      </picture>
    </div>

    <!-- Команда B -->
    <div class="mebmer flex flex-col items-center w-[40%]">
      <picture
        *ngIf="newEvent.imageMemberB && urlValidationService.isValidImageUrl(newEvent.imageMemberB)"
        class="tooltip tooltip-bottom tooltip-primary"
        [attr.data-tip]="newEvent.imageMemberB"
      >
        <img
          [src]="newEvent.imageMemberB"
          [alt]="newEvent.memberB || 'Команда B'"
          class="team-image mt-2"
        />
      </picture>
      <label class="text-sm font-bold w-full text-center flex flex-col justify-center items-center gap-2 mb-2">
        URL изображения команды B:
        <input
          [(ngModel)]="newEvent.imageMemberB"
          (ngModelChange)="refreshImage()"
          class="input w-fit border border-gray-300 rounded-lg px-4 py-2.5 focus:ring focus:ring-indigo-300 focus:ring-opacity-40 text-indigo-600"
          placeholder="Введите URL изображения"
        />
        <span
          *ngIf="newEvent.imageMemberB && !urlValidationService.isValidImageUrl(newEvent.imageMemberB)"
          class="text-red-500 text-sm mt-2 block"
        >
          Неверный URL, пример: {{ imageUrl }}/images/example.png
        </span>
      </label>
      <label class="text-sm font-bold w-full text-center flex flex-col justify-center items-center">
        Команда/Игрок 2:
        <input
          [(ngModel)]="newEvent.memberB"
          class="input w-fit border border-gray-300 rounded-lg px-4 focus:ring focus:ring-indigo-300 focus:ring-opacity-40 text-indigo-600"
          placeholder="Введите название команды/игрока"
        />
      </label>
    </div>
  </div>

  <div class="card-primary-image flex flex-col gap-4 items-center w-full">
    <label class="text-lg font-bold w-full text-center grid justify-center items-center label-grid">
      Основной приз:
      <input
        [(ngModel)]="newEvent.grandPrize"
        class="input w-fit border border-gray-300 rounded-lg px-4 py-2.5 focus:ring focus:ring-indigo-300 focus:ring-opacity-40 text-indigo-600"
        placeholder="Введите основной приз (например, 100 FREESPINS)"
      />
    </label>
    <label class="text-lg font-bold w-full text-center grid justify-center items-center label-grid">
      Приз для каждого:
      <input
        [(ngModel)]="newEvent.everyoneForPrize"
        class="input w-fit border border-gray-300 rounded-lg px-4 py-2.5 focus:ring focus:ring-indigo-300 focus:ring-opacity-40 text-indigo-600"
        placeholder="Введите приз для каждого (например, +10 FS)"
      />
    </label>
  </div>

  <div class="card-actions justify-center pt-4 gap-4">
    <button
        class="btn btn-ghost pr-0 text-success"
        (click)="onCreate()"
        [disabled]="isCreateDisabled"
    >
      Создать
      <span class="btn btn-accent">
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24">
          <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
        </svg>
      </span>
    </button>
    <button
        class="btn btn-ghost text-error hover:bg-error hover:text-white"
        (click)="onCancel()"
    >
      Отмена
    </button>
  </div>
</div>